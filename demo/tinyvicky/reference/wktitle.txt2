
ymas v0.1.alpha20221201.174107 by norman yen

assembling wktitle.asm
pass 0 - 23:31:29
     1 000000                                            cpu         'f256jr'
current target cpu F256JR (primary), 0 statement(s), 0/0 code/data byte(s)
     2 000000                                            const       usesystemfont=0  [0/$00]
     3 000000
     4 000000                                            include     'includes\f256jr_registers.asm'
including source file 'includes\f256jr_registers.asm'
     5 000000;                                                                                       ;MMU Registers
     6 000000                            MMU_MEM_CTRL    =           $0000  [0/$00]                  ; MMU Memory Control Register
     7 000000                            MMU_EDIT_EN     =           $80  [128/$80/"?"]
     8 000000                            MMU_IO_CTRL     =           $0001  [1/$01]                  ; MMU I/O Control Register
     9 000000                            MMU_IO_PAGE_0   =           $00  [0/$00]
    10 000000                            MMU_IO_PAGE_1   =           $01  [1/$01]
    11 000000                            MMU_IO_TEXT     =           $02  [2/$02]
    12 000000                            MMU_IO_COLOR    =           $03  [3/$03]
    13 000000                            MMU_MEM_BANK_0  =           $0008  [8/$08]                  ; MMU Edit Register for bank 0 ($0000 - $1FFF)
    14 000000                            MMU_MEM_BANK_1  =           $0009  [9/$09]                  ; MMU Edit Register for bank 1 ($2000 - $3FFF)
    15 000000                            MMU_MEM_BANK_2  =           $000A  [10/$0A]                 ; MMU Edit Register for bank 2 ($4000 - $5FFF)
    16 000000                            MMU_MEM_BANK_3  =           $000B  [11/$0B]                 ; MMU Edit Register for bank 3 ($6000 - $7FFF)
    17 000000                            MMU_MEM_BANK_4  =           $000C  [12/$0C]                 ; MMU Edit Register for bank 4 ($8000 - $9FFF)
    18 000000                            MMU_MEM_BANK_5  =           $000D  [13/$0D]                 ; MMU Edit Register for bank 5 ($A000 - $BFFF)
    19 000000                            MMU_MEM_BANK_6  =           $000E  [14/$0E]                 ; MMU Edit Register for bank 6 ($C000 - $DFFF)
    20 000000                            MMU_MEM_BANK_7  =           $000F  [15/$0F]                 ; MMU Edit Register for bank 7 ($E000 - $FFFF)
    21 000000
    22 000000;                                                                                       ;SDCard_Controller_def.asm
    23 000000
    24 000000;                                                                                       ;SDC_VERSION_REG         = $DD00    ; Ought to read 12
    25 000000;                                                                                       ;SDC_CONTROL_REG         = $DD01    ; Bit0 1 = Reset core logic, and registers. Self clearing
    26 000000;                                                                                       ;SDC_TRANS_TYPE_REG      = $DD02  ; Bit[1:0]
    27 000000;                                                                                       ;SDC_TRANS_DIRECT      = $00   ; 00 = Direct Access
    28 000000;                                                                                       ;SDC_TRANS_INIT_SD     = $01   ; 01 = Init SD
    29 000000;                                                                                       ;SDC_TRANS_READ_BLK    = $02   ; 10 = RW_READ_BLOCK (512 Bytes)
    30 000000;                                                                                       ;SDC_TRANS_WRITE_BLK   = $03   ; 11 = RW_WRITE_SD_BLOCK
    31 000000;                                                                                       ;SDC_TRANS_CONTROL_REG   = $DD03
    32 000000;                                                                                       ;SDC_TRANS_START         = $01
    33 000000;                                                                                       ;SDC_TRANS_STATUS_REG    = $DD04
    34 000000;                                                                                       ;SDC_TRANS_BUSY          = $01     ;  1= Transaction Busy
    35 000000;                                                                                       ;SDC_TRANS_ERROR_REG     = $DD05
    36 000000;                                                                                       ;SDC_TRANS_INIT_NO_ERR   = $00   ; Init Error Report [1:0]
    37 000000;                                                                                       ;SDC_TRANS_INIT_CMD0_ERR = $01
    38 000000;                                                                                       ;SDC_TRANS_INIT_CMD1_ERR = $02
    39 000000;                                                                                       ;SDC_TRANS_RD_NO_ERR     = $00   ; Read Error Report [3:2]
    40 000000;                                                                                       ;SDC_TRANS_RD_CMD_ERR    = $04
    41 000000;                                                                                       ;SDC_TRANS_RD_TOKEN_ERR  = $08
    42 000000;                                                                                       ;SDC_TRANS_WR_NO_ERR     = $00   ; Write Report Error  [5:4]
    43 000000;                                                                                       ;SDC_TRANS_WR_CMD_ERR    = $10   ;
    44 000000;                                                                                       ;SDC_TRANS_WR_DATA_ERR   = $20
    45 000000;                                                                                       ;SDC_TRANS_WR_BUSY_ERR   = $30
    46 000000;                                                                                       ;SDC_DIRECT_ACCESS_REG   = $DD06 ; SPI Direct Read and Write - Set DATA before initiating direct Access Transaction
    47 000000;                                                                                       ;SDC_SD_ADDR_7_0_REG     = $DD07 ; Set the ADDR before a block read or block write
    48 000000;                                                                                       ;SDC_SD_ADDR_15_8_REG    = $DD08 ; Addr0 [8:0] Always should be 0, since each block is 512Bytes
    49 000000;                                                                                       ;SDC_SD_ADDR_23_16_REG   = $DD09
    50 000000;                                                                                       ;SDC_SD_ADDR_31_24_REG   = $DD0A
    51 000000;                                                                                       ;SDC_SPI_CLK_DEL_REG     = $DD0B
    52 000000;                                                                                       ;SDC_RX_FIFO_DATA_REG    = $DD10 ; Data from the Block Read
    53 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_HI = $DD12 ; How many Bytes in the FIFO HI
    54 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_LO = $DD13 ; How many Bytes in the FIFO LO
    55 000000;                                                                                       ;SDC_RX_FIFO_CTRL_REG    = $DD14 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    56 000000;                                                                                       ;SDC_TX_FIFO_DATA_REG    = $DD20 ; Write Data Block here
    57 000000;                                                                                       ;SDC_TX_FIFO_CTRL_REG    = $DD24 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    58 000000
    59 000000
    60 000000;                                                                                       ;interrupt_def.asm
    61 000000
    62 000000                            INT_PENDING_REG0 =          $D660  [54880/$D660]            ;
    63 000000                            INT_PENDING_REG1 =          $D661  [54881/$D661]            ;
    64 000000;                                                                                       ;INT_PENDING_REG2 = $D662 ; NOT USED
    65 000000;                                                                                       ;INT_PENDING_REG3 = $D663 ; NOT USED
    66 000000                            INT_POL_REG0    =           $D664  [54884/$D664]            ;
    67 000000                            INT_POL_REG1    =           $D665  [54885/$D665]            ;
    68 000000;                                                                                       ;INT_POL_REG2     = $D666 ;  NOT USED
    69 000000;                                                                                       ;INT_POL_REG3     = $D667 ; NOT USED
    70 000000                            INT_EDGE_REG0   =           $D668  [54888/$D668]            ;
    71 000000                            INT_EDGE_REG1   =           $D669  [54889/$D669]            ;
    72 000000;                                                                                       ;INT_EDGE_REG2    = $D66A ; NOT USED
    73 000000;                                                                                       ;INT_EDGE_REG3    = $D66B ; NOT USED
    74 000000                            INT_MASK_REG0   =           $D66C  [54892/$D66C]            ;
    75 000000                            INT_MASK_REG1   =           $D66D  [54893/$D66D]            ;
    76 000000;                                                                                       ;INT_MASK_REG2    = $D66E ; NOT USED
    77 000000;                                                                                       ;INT_MASK_REG3    = $D66F ; NOT USED
    78 000000                            JR0_INT00_SOF   =           $01  [1/$01]                    ;Start of Frame @ 60FPS
    79 000000                            JR0_INT01_SOL   =           $02  [2/$02]                    ;Start of Line (Programmable)
    80 000000                            JR0_INT02_KBD   =           $04  [4/$04]                    ;
    81 000000                            JR0_INT03_MOUSE =           $08  [8/$08]                    ;
    82 000000                            JR0_INT04_TMR0  =           $10  [16/$10]                   ;
    83 000000                            JR0_INT05_TMR1  =           $20  [32/$20/" "]               ;Real-Time Clock Interrupt
    84 000000                            JR0_INT06_DMA   =           $40  [64/$40/"@"]               ;Floppy Disk Controller
    85 000000                            JR0_INT07_TBD   =           $80  [128/$80/"?"]              ; Mouse Interrupt (INT12 in SuperIO IOspace)
    86 000000                            JR1_INT00_UART  =           $01  [1/$01]                    ;Keyboard Interrupt
    87 000000                            JR1_INT01_COL0  =           $02  [2/$02]                    ;TYVKY Collision TBD
    88 000000                            JR1_INT02_COL1  =           $04  [4/$04]                    ;TYVKY Collision TBD
    89 000000                            JR1_INT03_COL2  =           $08  [8/$08]                    ;TYVKY Collision TBD
    90 000000                            JR1_INT04_RTC   =           $10  [16/$10]                   ;Serial Port 1
    91 000000                            JR1_INT05_VIA   =           $20  [32/$20/" "]               ;Midi Controller Interrupt
    92 000000                            JR1_INT06_IEC   =           $40  [64/$40/"@"]               ;Parallel Port
    93 000000                            JR1_INT07_SDCARD =          $80  [128/$80/"?"]              ;SDCard Insert
    94 000000
    95 000000
    96 000000;                                                                                       ;RTC_def.asm
    97 000000
    98 000000;                                                                                       ;RTC_SEC       = $D690 ;Seconds Register
    99 000000;                                                                                       ;RTC_SEC_ALARM = $D691 ;Seconds Alarm Register
   100 000000;                                                                                       ;RTC_MIN       = $D692 ;Minutes Register
   101 000000;                                                                                       ;RTC_MIN_ALARM = $D693 ;Minutes Alarm Register
   102 000000;                                                                                       ;RTC_HRS       = $D694 ;Hours Register
   103 000000;                                                                                       ;RTC_HRS_ALARM = $D695 ;Hours Alarm Register
   104 000000;                                                                                       ;RTC_DAY       = $D696 ;Day Register
   105 000000;                                                                                       ;RTC_DAY_ALARM = $D697 ;Day Alarm Register
   106 000000;                                                                                       ;RTC_DOW       = $D698 ;Day of Week Register
   107 000000;                                                                                       ;RTC_MONTH     = $D699 ;Month Register
   108 000000;                                                                                       ;RTC_YEAR      = $D69A ;Year Register
   109 000000;                                                                                       ;RTC_RATES     = $D69B ;Rates Register
   110 000000;                                                                                       ;RTC_ENABLE    = $D69C ;Enables Register
   111 000000;                                                                                       ;RTC_FLAGS     = $D69D ;Flags Register
   112 000000;                                                                                       ;RTC_CTRL      = $D69E ;Control Register
   113 000000;                                                                                       ;RTC_CENTURY   = $D69F ;Century Register
   114 000000
   115 000000
   116 000000;                                                                                       ;VIA_def.asm
   117 000000
   118 000000                            VIA_ORB_IRB     =           $DC00  [56320/$DC00]            ;Output/Input Register Port B
   119 000000                            VIA_ORA_IRA     =           $DC01  [56321/$DC01]            ;Output/Input Register Port B
   120 000000                            VIA_DDRB        =           $DC02  [56322/$DC02]            ;Data Direction Port B
   121 000000                            VIA_DDRA        =           $DC03  [56323/$DC03]            ;Data Direction Port A
   122 000000                            VIA_T1CL        =           $DC04  [56324/$DC04]            ;T1C-L
   123 000000                            VIA_T1CH        =           $DC05  [56325/$DC05]            ;T1C-H
   124 000000                            VIA_T1LL        =           $DC06  [56326/$DC06]            ;T1L-L
   125 000000                            VIA_T1LH        =           $DC07  [56327/$DC07]            ;T1L-H
   126 000000                            VIA_T2CL        =           $DC08  [56328/$DC08]            ;T2C-L
   127 000000                            VIA_T2CH        =           $DC09  [56329/$DC09]            ;T2C-H
   128 000000                            VIA_SR          =           $DC0A  [56330/$DC0A]            ;SR
   129 000000                            VIA_ACR         =           $DC0B  [56331/$DC0B]            ;ACR
   130 000000                            VIA_PCR         =           $DC0C  [56332/$DC0C]            ;PCR
   131 000000                            VIA_IFR         =           $DC0D  [56333/$DC0D]            ;IFR
   132 000000                            VIA_IER         =           $DC0E  [56334/$DC0E]            ;IER
   133 000000                            VIA_ORA_IRA_AUX =           $DC0F  [56335/$DC0F]            ;ORA/IRA
   134 000000                            JOY_UP          =           $01  [1/$01]
   135 000000                            JOY_DWN         =           $02  [2/$02]
   136 000000                            JOY_LFT         =           $04  [4/$04]
   137 000000                            JOY_RGT         =           $08  [8/$08]
   138 000000                            JOY_BUT0        =           $10  [16/$10]
   139 000000                            JOY_BUT1        =           $20  [32/$20/" "]
   140 000000                            JOY_BUT2        =           $40  [64/$40/"@"]
   141 000000;                                                                                       ;JOYA_UP         = $01
   142 000000;                                                                                       ;JOYA_DWN        = $02
   143 000000;                                                                                       ;JOYA_LFT        = $04
   144 000000;                                                                                       ;JOYA_RGT        = $08
   145 000000;                                                                                       ;JOYA_BUT0       = $10
   146 000000;                                                                                       ;JOYA_BUT1       = $20
   147 000000;                                                                                       ;JOYA_BUT2       = $40
   148 000000;                                                                                       ;JOYB_UP         = $01
   149 000000;                                                                                       ;JOYB_DWN        = $02
   150 000000;                                                                                       ;JOYB_LFT        = $04
   151 000000;                                                                                       ;JOYB_RGT        = $08
   152 000000;                                                                                       ;JOYB_BUT0       = $10
   153 000000;                                                                                       ;JOYB_BUT1       = $20
   154 000000;                                                                                       ;JOYB_BUT2       = $40
   155 000000
   156 000000
   157 000000;                                                                                       ;Simple_UART_Jr_def.asm
   158 000000
   159 000000;                                                                                       ;UART_TRHB 	= $D630        ; Transmit/Receive Hold Buffer
   160 000000;                                                                                       ;UART_DLL 	= $D630        ; Divisor Latch Low Byte
   161 000000;                                                                                       ;UART_DLH 	= $D631        ; Divisor Latch High Byte
   162 000000;                                                                                       ;UART_IER 	= $D631        ; Interupt Enable Register
   163 000000;                                                                                       ;UART_FCR 	= $D632        ; FIFO Control Register
   164 000000;                                                                                       ;UART_IIR 	= $D632        ; Interupt Indentification Register
   165 000000;                                                                                       ;UART_LCR 	= $D633        ; Line Control Register
   166 000000;                                                                                       ;UART_MCR 	= $D634        ; Modem Control REgister
   167 000000;                                                                                       ;UART_LSR 	= $D635        ; Line Status Register
   168 000000;                                                                                       ;UART_MSR 	= $D636        ; Modem Status Register
   169 000000;                                                                                       ;UART_SR 	= $D637        ; Scratch Register
   170 000000;                                                                                       ;UINT_LOW_POWER = $20        ; Enable Low Power Mode (16750)
   171 000000;                                                                                       ;UINT_SLEEP_MODE = $10       ; Enable Sleep Mode (16750)
   172 000000;                                                                                       ;UINT_MODEM_STATUS = $08     ; Enable Modem Status Interrupt
   173 000000;                                                                                       ;UINT_LINE_STATUS = $04      ; Enable Receiver Line Status Interupt
   174 000000;                                                                                       ;UINT_THR_EMPTY = $02        ; Enable Transmit Holding Register Empty interrupt
   175 000000;                                                                                       ;UINT_DATA_AVAIL = $01       ; Enable Recieve Data Available interupt
   176 000000;                                                                                       ;IIR_FIFO_ENABLED = $80      ; FIFO is enabled
   177 000000;                                                                                       ;IIR_FIFO_NONFUNC = $40      ; FIFO is not functioning
   178 000000;                                                                                       ;IIR_FIFO_64BYTE = $20       ; 64 byte FIFO enabled (16750)
   179 000000;                                                                                       ;IIR_MODEM_STATUS = $00      ; Modem Status Interrupt
   180 000000;                                                                                       ;IIR_THR_EMPTY = $02         ; Transmit Holding Register Empty Interrupt
   181 000000;                                                                                       ;IIR_DATA_AVAIL = $04        ; Data Available Interrupt
   182 000000;                                                                                       ;IIR_LINE_STATUS = $06       ; Line Status Interrupt
   183 000000;                                                                                       ;IIR_TIMEOUT = $0C           ; Time-out Interrupt (16550 and later)
   184 000000;                                                                                       ;IIR_INTERRUPT_PENDING = $01 ; Interrupt Pending Flag
   185 000000;                                                                                       ;LCR_DLB = $80               ; Divisor Latch Access Bit
   186 000000;                                                                                       ;LCR_SBE = $60               ; Set Break Enable
   187 000000;                                                                                       ;LCR_PARITY_NONE = $00       ; Parity: None
   188 000000;                                                                                       ;LCR_PARITY_ODD = $08        ; Parity: Odd
   189 000000;                                                                                       ;LCR_PARITY_EVEN = $18       ; Parity: Even
   190 000000;                                                                                       ;LCR_PARITY_MARK = $28       ; Parity: Mark
   191 000000;                                                                                       ;LCR_PARITY_SPACE = $38      ; Parity: Space
   192 000000;                                                                                       ;LCR_STOPBIT_1 = $00         ; One Stop Bit
   193 000000;                                                                                       ;LCR_STOPBIT_2 = $04         ; 1.5 or 2 Stop Bits
   194 000000;                                                                                       ;LCR_DATABITS_5 = $00        ; Data Bits: 5
   195 000000;                                                                                       ;LCR_DATABITS_6 = $01        ; Data Bits: 6
   196 000000;                                                                                       ;LCR_DATABITS_7 = $02        ; Data Bits: 7
   197 000000;                                                                                       ;LCR_DATABITS_8 = $03        ; Data Bits: 8
   198 000000;                                                                                       ;LSR_ERR_RECIEVE = $80       ; Error in Received FIFO
   199 000000;                                                                                       ;LSR_XMIT_DONE = $40         ; All data has been transmitted
   200 000000;                                                                                       ;LSR_XMIT_EMPTY = $20        ; Empty transmit holding register
   201 000000;                                                                                       ;LSR_BREAK_INT = $10         ; Break interrupt
   202 000000;                                                                                       ;LSR_ERR_FRAME = $08         ; Framing error
   203 000000;                                                                                       ;LSR_ERR_PARITY = $04        ; Parity error
   204 000000;                                                                                       ;LSR_ERR_OVERRUN = $02       ; Overrun error
   205 000000;                                                                                       ;LSR_DATA_AVAIL = $01        ; Data is ready in the receive buffer
   206 000000
   207 000000
   208 000000;                                                                                       ;TinyVicky_Def.asm
   209 000000
   210 000000                            MASTER_CTRL_REG_L =         $D000  [53248/$D000]
   211 000000                            Mstr_Ctrl_Text_Mode_En =    $01  [1/$01]                    ; Enable the Text Mode
   212 000000                            Mstr_Ctrl_Text_Overlay =    $02  [2/$02]                    ; Enable the Overlay of the text mode on top of Graphic Mode (the Background Color is ignored)
   213 000000                            Mstr_Ctrl_Graph_Mode_En =   $04  [4/$04]                    ; Enable the Graphic Mode
   214 000000                            Mstr_Ctrl_Bitmap_En =       $08  [8/$08]                    ; Enable the Bitmap Module In Vicky
   215 000000                            Mstr_Ctrl_TileMap_En =      $10  [16/$10]                   ; Enable the Tile Module in Vicky
   216 000000                            Mstr_Ctrl_Sprite_En =       $20  [32/$20/" "]               ; Enable the Sprite Module in Vicky
   217 000000                            Mstr_Ctrl_GAMMA_En =        $40  [64/$40/"@"]               ; this Enable the GAMMA correction - The Analog and DVI have different color value, the GAMMA is great to correct the difference
   218 000000                            Mstr_Ctrl_Disable_Vid =     $80  [128/$80/"?"]              ; This will disable the Scanning of the Video hence giving 100% bandwith to the CPU
   219 000000                            MASTER_CTRL_REG_H =         $D001  [53249/$D001]
   220 000000                            Mstr_Ctrl_Video_Mode =      $01  [1/$01]                    ; 0 - 640x480@60Hz : 1 - 640x400@70hz (text mode) // 0 - 320x240@60hz : 1 - 320x200@70Hz (Graphic Mode & Text mode when Doubling = 1)
   221 000000                            Mstr_Ctrl_Text_XDouble =    $02  [2/$02]                    ; X Pixel Doubling
   222 000000                            Mstr_Ctrl_Text_YDouble =    $04  [4/$04]                    ; Y Pixel Doubling
   223 000000                            LAYER_CTRL_REG_0 =          $D002  [53250/$D002]
   224 000000                            LAYER_CTRL_REG_1 =          $D003  [53251/$D003]
   225 000000                            BORDER_CTRL_REG =           $D004  [53252/$D004]            ; Bit[0] - Enable (1 by default)  Bit[4..6]: X Scroll Offset ( Will scroll Left) (Acceptable Value: 0..7)
   226 000000                            Border_Ctrl_Enable =        $01  [1/$01]
   227 000000                            BORDER_COLOR_B  =           $D005  [53253/$D005]
   228 000000                            BORDER_COLOR_G  =           $D006  [53254/$D006]
   229 000000                            BORDER_COLOR_R  =           $D007  [53255/$D007]
   230 000000                            BORDER_X_SIZE   =           $D008  [53256/$D008]            ; X-  Values: 0 - 32 (Default: 32)
   231 000000                            BORDER_Y_SIZE   =           $D009  [53257/$D009]            ; Y- Values 0 -32 (Default: 32)
   232 000000;                                                                                       ;VKY_RESERVED_02         = $D00A
   233 000000;                                                                                       ;VKY_RESERVED_03         = $D00B
   234 000000;                                                                                       ;VKY_RESERVED_04         = $D00C
   235 000000                            BACKGROUND_COLOR_B =        $D00D  [53261/$D00D]            ; When in Graphic Mode, if a pixel is "0" then the Background pixel is chosen
   236 000000                            BACKGROUND_COLOR_G =        $D00E  [53262/$D00E]
   237 000000                            BACKGROUND_COLOR_R =        $D00F  [53263/$D00F]            ;
   238 000000                            VKY_TXT_CURSOR_CTRL_REG =   $D010  [53264/$D010]            ;[0]  Enable Text Mode
   239 000000                            Vky_Cursor_Enable =         $01  [1/$01]
   240 000000                            Vky_Cursor_Flash_Rate0 =    $02  [2/$02]
   241 000000                            Vky_Cursor_Flash_Rate1 =    $04  [4/$04]
   242 000000                            VKY_TXT_START_ADD_PTR =     $D011  [53265/$D011]            ; This is an offset to change the Starting address of the Text Mode Buffer (in x)
   243 000000                            VKY_TXT_CURSOR_CHAR_REG =   $D012  [53266/$D012]
   244 000000                            VKY_TXT_CURSOR_COLR_REG =   $D013  [53267/$D013]
   245 000000                            VKY_TXT_CURSOR_X_REG_L =    $D014  [53268/$D014]
   246 000000                            VKY_TXT_CURSOR_X_REG_H =    $D015  [53269/$D015]
   247 000000                            VKY_TXT_CURSOR_Y_REG_L =    $D016  [53270/$D016]
   248 000000                            VKY_TXT_CURSOR_Y_REG_H =    $D017  [53271/$D017]
   249 000000                            VKY_LINE_IRQ_CTRL_REG =     $D018  [53272/$D018]            ;[0] - Enable Line 0 - WRITE ONLY
   250 000000                            VKY_LINE_CMP_VALUE_LO =     $D019  [53273/$D019]            ;Write Only [7:0]
   251 000000                            VKY_LINE_CMP_VALUE_HI =     $D01A  [53274/$D01A]            ;Write Only [3:0]
   252 000000                            VKY_PIXEL_X_POS_LO =        $D018  [53272/$D018]            ; This is Where on the video line is the Pixel
   253 000000                            VKY_PIXEL_X_POS_HI =        $D019  [53273/$D019]            ; Or what pixel is being displayed when the register is read
   254 000000                            VKY_LINE_Y_POS_LO =         $D01A  [53274/$D01A]            ; This is the Line Value of the Raster
   255 000000                            VKY_LINE_Y_POS_HI =         $D01B  [53275/$D01B]            ;
   256 000000                            TyVKY_BM0_CTRL_REG =        $D100  [53504/$D100]
   257 000000                            BM0_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   258 000000                            BM0_LUT0        =           $02  [2/$02]                    ; LUT0
   259 000000                            BM0_LUT1        =           $04  [4/$04]                    ; LUT1
   260 000000                            TyVKY_BM0_START_ADDY_L =    $D101  [53505/$D101]
   261 000000                            TyVKY_BM0_START_ADDY_M =    $D102  [53506/$D102]
   262 000000                            TyVKY_BM0_START_ADDY_H =    $D103  [53507/$D103]
   263 000000                            TyVKY_BM1_CTRL_REG =        $D108  [53512/$D108]
   264 000000                            BM1_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   265 000000                            BM1_LUT0        =           $02  [2/$02]                    ; LUT0
   266 000000                            BM1_LUT1        =           $04  [4/$04]                    ; LUT1
   267 000000                            TyVKY_BM1_START_ADDY_L =    $D109  [53513/$D109]
   268 000000                            TyVKY_BM1_START_ADDY_M =    $D10A  [53514/$D10A]
   269 000000                            TyVKY_BM1_START_ADDY_H =    $D10B  [53515/$D10B]
   270 000000                            TyVKY_BM2_CTRL_REG =        $D110  [53520/$D110]
   271 000000                            BM2_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   272 000000                            BM2_LUT0        =           $02  [2/$02]                    ; LUT0
   273 000000                            BM2_LUT1        =           $04  [4/$04]                    ; LUT1
   274 000000                            BM2_LUT2        =           $08  [8/$08]                    ; LUT2
   275 000000                            TyVKY_BM2_START_ADDY_L =    $D111  [53521/$D111]
   276 000000                            TyVKY_BM2_START_ADDY_M =    $D112  [53522/$D112]
   277 000000                            TyVKY_BM2_START_ADDY_H =    $D113  [53523/$D113]
   278 000000                            TyVKY_TL_CTRL0  =           $D200  [53760/$D200]
   279 000000                            TILE_Enable     =           $01  [1/$01]
   280 000000                            TILE_LUT0       =           $02  [2/$02]
   281 000000                            TILE_LUT1       =           $04  [4/$04]
   282 000000                            TILE_LUT2       =           $08  [8/$08]
   283 000000                            TILE_SIZE       =           $10  [16/$10]                   ; 0 -> 16x16, 0 -> 8x8
   284 000000                            TL0_CONTROL_REG =           $D200  [53760/$D200]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   285 000000                            TL0_START_ADDY_L =          $D201  [53761/$D201]            ; Not USed right now - Starting Address to where is the MAP
   286 000000                            TL0_START_ADDY_M =          $D202  [53762/$D202]
   287 000000                            TL0_START_ADDY_H =          $D203  [53763/$D203]
   288 000000                            TL0_MAP_X_SIZE_L =          $D204  [53764/$D204]            ; The Size X of the Map
   289 000000                            TL0_MAP_X_SIZE_H =          $D205  [53765/$D205]
   290 000000                            TL0_MAP_Y_SIZE_L =          $D206  [53766/$D206]            ; The Size Y of the Map
   291 000000                            TL0_MAP_Y_SIZE_H =          $D207  [53767/$D207]
   292 000000                            TL0_MAP_X_POS_L =           $D208  [53768/$D208]            ; The Position X of the Map
   293 000000                            TL0_MAP_X_POS_H =           $D209  [53769/$D209]
   294 000000                            TL0_MAP_Y_POS_L =           $D20A  [53770/$D20A]            ; The Position Y of the Map
   295 000000                            TL0_MAP_Y_POS_H =           $D20B  [53771/$D20B]
   296 000000                            TL1_CONTROL_REG =           $D20C  [53772/$D20C]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   297 000000                            TL1_START_ADDY_L =          $D20D  [53773/$D20D]            ; Not USed right now - Starting Address to where is the MAP
   298 000000                            TL1_START_ADDY_M =          $D20E  [53774/$D20E]
   299 000000                            TL1_START_ADDY_H =          $D20F  [53775/$D20F]
   300 000000                            TL1_MAP_X_SIZE_L =          $D210  [53776/$D210]            ; The Size X of the Map
   301 000000                            TL1_MAP_X_SIZE_H =          $D211  [53777/$D211]
   302 000000                            TL1_MAP_Y_SIZE_L =          $D212  [53778/$D212]            ; The Size Y of the Map
   303 000000                            TL1_MAP_Y_SIZE_H =          $D213  [53779/$D213]
   304 000000                            TL1_MAP_X_POS_L =           $D214  [53780/$D214]            ; The Position X of the Map
   305 000000                            TL1_MAP_X_POS_H =           $D215  [53781/$D215]
   306 000000                            TL1_MAP_Y_POS_L =           $D216  [53782/$D216]            ; The Position Y of the Map
   307 000000                            TL1_MAP_Y_POS_H =           $D217  [53783/$D217]
   308 000000                            TL2_CONTROL_REG =           $D218  [53784/$D218]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   309 000000                            TL2_START_ADDY_L =          $D219  [53785/$D219]            ; Not USed right now - Starting Address to where is the MAP
   310 000000                            TL2_START_ADDY_M =          $D21A  [53786/$D21A]
   311 000000                            TL2_START_ADDY_H =          $D21B  [53787/$D21B]
   312 000000                            TL2_MAP_X_SIZE_L =          $D21C  [53788/$D21C]            ; The Size X of the Map
   313 000000                            TL2_MAP_X_SIZE_H =          $D21D  [53789/$D21D]
   314 000000                            TL2_MAP_Y_SIZE_L =          $D21E  [53790/$D21E]            ; The Size Y of the Map
   315 000000                            TL2_MAP_Y_SIZE_H =          $D21F  [53791/$D21F]
   316 000000                            TL2_MAP_X_POS_L =           $D220  [53792/$D220]            ; The Position X of the Map
   317 000000                            TL2_MAP_X_POS_H =           $D221  [53793/$D221]
   318 000000                            TL2_MAP_Y_POS_L =           $D222  [53794/$D222]            ; The Position Y of the Map
   319 000000                            TL2_MAP_Y_POS_H =           $D223  [53795/$D223]
   320 000000                            TILE_MAP_ADDY0_L =          $D280  [53888/$D280]
   321 000000                            TILE_MAP_ADDY0_M =          $D281  [53889/$D281]
   322 000000                            TILE_MAP_ADDY0_H =          $D282  [53890/$D282]
   323 000000                            TILE_MAP_ADDY0_CFG =        $D283  [53891/$D283]
   324 000000                            TILE_MAP_ADDY1  =           $D284  [53892/$D284]
   325 000000                            TILE_MAP_ADDY2  =           $D288  [53896/$D288]
   326 000000                            TILE_MAP_ADDY3  =           $D28C  [53900/$D28C]
   327 000000                            TILE_MAP_ADDY4  =           $D290  [53904/$D290]
   328 000000                            TILE_MAP_ADDY5  =           $D294  [53908/$D294]
   329 000000                            TILE_MAP_ADDY6  =           $D298  [53912/$D298]
   330 000000                            TILE_MAP_ADDY7  =           $D29C  [53916/$D29C]
   331 000000                            XYMATH_CTRL_REG =           $D300  [54016/$D300]            ; Reserved
   332 000000                            XYMATH_ADDY_L   =           $D301  [54017/$D301]            ; W
   333 000000                            XYMATH_ADDY_M   =           $D302  [54018/$D302]            ; W
   334 000000                            XYMATH_ADDY_H   =           $D303  [54019/$D303]            ; W
   335 000000                            XYMATH_ADDY_POSX_L =        $D304  [54020/$D304]            ; R/W
   336 000000                            XYMATH_ADDY_POSX_H =        $D305  [54021/$D305]            ; R/W
   337 000000                            XYMATH_ADDY_POSY_L =        $D306  [54022/$D306]            ; R/W
   338 000000                            XYMATH_ADDY_POSY_H =        $D307  [54023/$D307]            ; R/W
   339 000000                            XYMATH_BLOCK_OFF_L =        $D308  [54024/$D308]            ; R Only - Low Block Offset
   340 000000                            XYMATH_BLOCK_OFF_H =        $D309  [54025/$D309]            ; R Only - Hi Block Offset
   341 000000                            XYMATH_MMU_BLOCK =          $D30A  [54026/$D30A]            ; R Only - Which MMU Block
   342 000000                            XYMATH_ABS_ADDY_L =         $D30B  [54027/$D30B]            ; Low Absolute Results
   343 000000                            XYMATH_ABS_ADDY_M =         $D30C  [54028/$D30C]            ; Mid Absolute Results
   344 000000                            XYMATH_ABS_ADDY_H =         $D30D  [54029/$D30D]            ; Hi Absolute Results
   345 000000                            SPRITE_Ctrl_Enable =        $01  [1/$01]
   346 000000                            SPRITE_LUT0     =           $02  [2/$02]
   347 000000                            SPRITE_LUT1     =           $04  [4/$04]
   348 000000                            SPRITE_DEPTH0   =           $08  [8/$08]                    ; 00 = Total Front - 01 = In between L0 and L1, 10 = In between L1 and L2, 11 = Total Back
   349 000000                            SPRITE_DEPTH1   =           $10  [16/$10]
   350 000000                            SPRITE_SIZE0    =           $20  [32/$20/" "]               ; 00 = 32x32 - 01 = 24x24 - 10 = 16x16 - 11 = 8x8
   351 000000                            SPRITE_SIZE1    =           $40  [64/$40/"@"]
   352 000000                            SP0_Ctrl        =           $D900  [55552/$D900]
   353 000000                            SP0_Addy_L      =           $D901  [55553/$D901]
   354 000000                            SP0_Addy_M      =           $D902  [55554/$D902]
   355 000000                            SP0_Addy_H      =           $D903  [55555/$D903]
   356 000000                            SP0_X_L         =           $D904  [55556/$D904]
   357 000000                            SP0_X_H         =           $D905  [55557/$D905]
   358 000000                            SP0_Y_L         =           $D906  [55558/$D906]            ; In the Jr, only the L is used (200 & 240)
   359 000000                            SP0_Y_H         =           $D907  [55559/$D907]            ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   360 000000;                                                                                       ;SP1_Ctrl           = $D908
   361 000000;                                                                                       ;SP1_Addy_L         = $D909
   362 000000;                                                                                       ;SP1_Addy_M         = $D90A
   363 000000;                                                                                       ;SP1_Addy_H         = $D90B
   364 000000;                                                                                       ;SP1_X_L            = $D90C
   365 000000;                                                                                       ;SP1_X_H            = $D90D
   366 000000;                                                                                       ;SP1_Y_L            = $D90E  ; In the Jr, only the L is used (200 & 240)
   367 000000;                                                                                       ;SP1_Y_H            = $D90F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   368 000000;                                                                                       ;SP2_Ctrl           = $D910
   369 000000;                                                                                       ;SP2_Addy_L         = $D911
   370 000000;                                                                                       ;SP2_Addy_M         = $D912
   371 000000;                                                                                       ;SP2_Addy_H         = $D913
   372 000000;                                                                                       ;SP2_X_L            = $D914
   373 000000;                                                                                       ;SP2_X_H            = $D915
   374 000000;                                                                                       ;SP2_Y_L            = $D916  ; In the Jr, only the L is used (200 & 240)
   375 000000;                                                                                       ;SP2_Y_H            = $D917  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   376 000000;                                                                                       ;SP3_Ctrl           = $D918
   377 000000;                                                                                       ;SP3_Addy_L         = $D919
   378 000000;                                                                                       ;SP3_Addy_M         = $D91A
   379 000000;                                                                                       ;SP3_Addy_H         = $D91B
   380 000000;                                                                                       ;SP3_X_L            = $D91C
   381 000000;                                                                                       ;SP3_X_H            = $D91D
   382 000000;                                                                                       ;SP3_Y_L            = $D91E  ; In the Jr, only the L is used (200 & 240)
   383 000000;                                                                                       ;SP3_Y_H            = $D91F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   384 000000;                                                                                       ;SP4_Ctrl           = $D920
   385 000000;                                                                                       ;SP4_Addy_L         = $D921
   386 000000;                                                                                       ;SP4_Addy_M         = $D922
   387 000000;                                                                                       ;SP4_Addy_H         = $D923
   388 000000;                                                                                       ;SP4_X_L            = $D924
   389 000000;                                                                                       ;SP4_X_H            = $D925
   390 000000;                                                                                       ;SP4_Y_L            = $D926  ; In the Jr, only the L is used (200 & 240)
   391 000000;                                                                                       ;SP4_Y_H            = $D927  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   392 000000                            TyVKY_LUT0      =           $D000  [53248/$D000]            ; IO Page 1 -$D000 - $D3FF
   393 000000                            TyVKY_LUT1      =           $D400  [54272/$D400]            ; IO Page 1 -$D400 - $D7FF
   394 000000                            TyVKY_LUT2      =           $D800  [55296/$D800]            ; IO Page 1 -$D800 - $DBFF
   395 000000                            TyVKY_LUT3      =           $DC00  [56320/$DC00]            ; IO Page 1 -$DC00 - $DFFF
   396 000000
   397 000000
   398 000000
   399 000000                            DMA_CTRL_REG    =           $DF00  [57088/$DF00]
   400 000000                            DMA_CTRL_Enable =           $01  [1/$01]
   401 000000                            DMA_CTRL_1D_2D  =           $02  [2/$02]
   402 000000                            DMA_CTRL_Fill   =           $04  [4/$04]
   403 000000                            DMA_CTRL_Int_En =           $08  [8/$08]
   404 000000;                                                                                       ;DMA_CTRL_NotUsed0   = $10
   405 000000;                                                                                       ;DMA_CTRL_NotUsed1   = $20
   406 000000;                                                                                       ;DMA_CTRL_NotUsed2   = $40
   407 000000                            DMA_CTRL_Start_Trf =        $80  [128/$80/"?"]
   408 000000                            DMA_DATA_2_WRITE =          $DF01  [57089/$DF01]            ; Write Only
   409 000000                            DMA_STATUS_REG  =           $DF01  [57089/$DF01]            ; Read Only
   410 000000                            DMA_STATUS_TRF_IP =         $80  [128/$80/"?"]              ; Transfer in Progress
   411 000000;                                                                                       ;DMA_RESERVED_0      = $DF02
   412 000000;                                                                                       ;DMA_RESERVED_1      = $DF03
   413 000000                            DMA_SOURCE_ADDY_L =         $DF04  [57092/$DF04]
   414 000000                            DMA_SOURCE_ADDY_M =         $DF05  [57093/$DF05]
   415 000000                            DMA_SOURCE_ADDY_H =         $DF06  [57094/$DF06]
   416 000000;                                                                                       ;DMA_RESERVED_2      = $DF07
   417 000000                            DMA_DEST_ADDY_L =           $DF08  [57096/$DF08]
   418 000000                            DMA_DEST_ADDY_M =           $DF09  [57097/$DF09]
   419 000000                            DMA_DEST_ADDY_H =           $DF0A  [57098/$DF0A]
   420 000000;                                                                                       ;DMA_RESERVED_3      = $DF0B
   421 000000                            DMA_SIZE_1D_L   =           $DF0C  [57100/$DF0C]
   422 000000                            DMA_SIZE_1D_M   =           $DF0D  [57101/$DF0D]
   423 000000                            DMA_SIZE_1D_H   =           $DF0E  [57102/$DF0E]
   424 000000;                                                                                       ;DMA_RESERVED_4      = $DF0F
   425 000000                            DMA_SIZE_X_L    =           $DF0C  [57100/$DF0C]
   426 000000                            DMA_SIZE_X_H    =           $DF0D  [57101/$DF0D]
   427 000000                            DMA_SIZE_Y_L    =           $DF0E  [57102/$DF0E]
   428 000000                            DMA_SIZE_Y_H    =           $DF0F  [57103/$DF0F]
   429 000000                            DMA_SRC_STRIDE_X_L =        $DF10  [57104/$DF10]
   430 000000                            DMA_SRC_STRIDE_X_H =        $DF11  [57105/$DF11]
   431 000000                            DMA_DST_STRIDE_Y_L =        $DF12  [57106/$DF12]
   432 000000                            DMA_DST_STRIDE_Y_H =        $DF13  [57107/$DF13]
   433 000000;                                                                                       ;DMA_RESERVED_5      = $DF14
   434 000000;                                                                                       ;DMA_RESERVED_6      = $DF15
   435 000000;                                                                                       ;DMA_RESERVED_7      = $DF16
   436 000000;                                                                                       ;DMA_RESERVED_8      = $DF17
   437 000000
   438 000000
   439 000000;                                                                                       ;C256_Jr_SID_def.asm
   440 000000
   441 000000                            SID_L_V1_FREQ_LO =          $D400  [54272/$D400]            ;SID - L - Voice 1 (Write Only) - FREQ LOW
   442 000000                            SID_L_V1_FREQ_HI =          $D401  [54273/$D401]            ;SID - L - Voice 1 (Write Only) - FREQ HI
   443 000000                            SID_L_V1_PW_LO  =           $D402  [54274/$D402]            ;SID - L - Voice 1 (Write Only) - PW LOW
   444 000000                            SID_L_V1_PW_HI  =           $D403  [54275/$D403]            ;SID - L - Voice 1 (Write Only) - PW HI
   445 000000                            SID_L_V1_CTRL   =           $D404  [54276/$D404]            ;SID - L - Voice 1 (Write Only) - CTRL REG
   446 000000                            SID_L_V1_ATCK_DECY =        $D405  [54277/$D405]            ;SID - L - Voice 1 (Write Only) - ATTACK / DECAY
   447 000000                            SID_L_V1_SSTN_RLSE =        $D406  [54278/$D406]            ;SID - L - Voice 1 (Write Only) - SUSTAIN / RELEASE
   448 000000                            SID_L_V2_FREQ_LO =          $D407  [54279/$D407]            ;SID - L - Voice 2 (Write Only) - FREQ LOW
   449 000000                            SID_L_V2_FREQ_HI =          $D408  [54280/$D408]            ;SID - L - Voice 2 (Write Only) - FREQ HI
   450 000000                            SID_L_V2_PW_LO  =           $D409  [54281/$D409]            ;SID - L - Voice 2 (Write Only) - PW LOW
   451 000000                            SID_L_V2_PW_HI  =           $D40A  [54282/$D40A]            ;SID - L - Voice 2 (Write Only) - PW HI
   452 000000                            SID_L_V2_CTRL   =           $D40B  [54283/$D40B]            ;SID - L - Voice 2 (Write Only) - CTRL REG
   453 000000                            SID_L_V2_ATCK_DECY =        $D40C  [54284/$D40C]            ;SID - L - Voice 2 (Write Only) - ATTACK / DECAY
   454 000000                            SID_L_V2_SSTN_RLSE =        $D40D  [54285/$D40D]            ;SID - L - Voice 2 (Write Only) - SUSTAIN / RELEASE
   455 000000                            SID_L_V3_FREQ_LO =          $D40E  [54286/$D40E]            ;SID - L - Voice 3 (Write Only) - FREQ LOW
   456 000000                            SID_L_V3_FREQ_HI =          $D40F  [54287/$D40F]            ;SID - L - Voice 3 (Write Only) - FREQ HI
   457 000000                            SID_L_V3_PW_LO  =           $D410  [54288/$D410]            ;SID - L - Voice 3 (Write Only) - PW LOW
   458 000000                            SID_L_V3_PW_HI  =           $D411  [54289/$D411]            ;SID - L - Voice 3 (Write Only) - PW HI
   459 000000                            SID_L_V3_CTRL   =           $D412  [54290/$D412]            ;SID - L - Voice 3 (Write Only) - CTRL REG
   460 000000                            SID_L_V3_ATCK_DECY =        $D413  [54291/$D413]            ;SID - L - Voice 3 (Write Only) - ATTACK / DECAY
   461 000000                            SID_L_V3_SSTN_RLSE =        $D414  [54292/$D414]            ;SID - L - Voice 3 (Write Only) - SUSTAIN / RELEASE
   462 000000                            SID_L_FC_LO     =           $D415  [54293/$D415]            ;SID - L - Filter (Write Only) - FC LOW
   463 000000                            SID_L_FC_HI     =           $D416  [54294/$D416]            ;SID - L - Filter (Write Only) - FC HI
   464 000000                            SID_L_RES_FILT  =           $D417  [54295/$D417]            ;SID - L - Filter (Write Only) - RES / FILT
   465 000000                            SID_L_MODE_VOL  =           $D418  [54296/$D418]            ;SID - L - Filter (Write Only) - MODE / VOL
   466 000000                            SID_L_POT_X     =           $D419  [54297/$D419]            ;SID - L - Misc (Read Only) - POT X (C256 - NOT USED)
   467 000000                            SID_L_POT_Y     =           $D41A  [54298/$D41A]            ;SID - L - Misc (Read Only) - POT Y (C256 - NOT USED)
   468 000000                            SID_L_OSC3_RND  =           $D41B  [54299/$D41B]            ;SID - L - Misc (Read Only) - OSC3 / RANDOM
   469 000000                            SID_L_ENV3      =           $D41C  [54300/$D41C]            ;SID - L - Misc (Read Only)  - ENV3
   470 000000;                                                                                       ;SID_L_NOT_USED0     = $D41D ;SID - L - NOT USED
   471 000000;                                                                                       ;SID_L_NOT_USED1     = $D41E ;SID - L - NOT USED
   472 000000;                                                                                       ;SID_L_NOT_USED2     = $D41F ;SID - L - NOT USED
   473 000000                            SID_R_V1_FREQ_LO =          $D500  [54528/$D500]            ;SID - R - Voice 1 (Write Only) - FREQ LOW
   474 000000                            SID_R_V1_FREQ_HI =          $D501  [54529/$D501]            ;SID - R - Voice 1 (Write Only) - FREQ HI
   475 000000                            SID_R_V1_PW_LO  =           $D502  [54530/$D502]            ;SID - R - Voice 1 (Write Only) - PW LOW
   476 000000                            SID_R_V1_PW_HI  =           $D503  [54531/$D503]            ;SID - R - Voice 1 (Write Only) - PW HI
   477 000000                            SID_R_V1_CTRL   =           $D504  [54532/$D504]            ;SID - R - Voice 1 (Write Only) - CTRL REG
   478 000000                            SID_R_V1_ATCK_DECY =        $D505  [54533/$D505]            ;SID - R - Voice 1 (Write Only) - ATTACK / DECAY
   479 000000                            SID_R_V1_SSTN_RLSE =        $D506  [54534/$D506]            ;SID - R - Voice 1 (Write Only) - SUSTAIN / RELEASE
   480 000000                            SID_R_V2_FREQ_LO =          $D507  [54535/$D507]            ;SID - R - Voice 2 (Write Only) - FREQ LOW
   481 000000                            SID_R_V2_FREQ_HI =          $D508  [54536/$D508]            ;SID - R - Voice 2 (Write Only) - FREQ HI
   482 000000                            SID_R_V2_PW_LO  =           $D509  [54537/$D509]            ;SID - R - Voice 2 (Write Only) - PW LOW
   483 000000                            SID_R_V2_PW_HI  =           $D50A  [54538/$D50A]            ;SID - R - Voice 2 (Write Only) - PW HI
   484 000000                            SID_R_V2_CTRL   =           $D50B  [54539/$D50B]            ;SID - R - Voice 2 (Write Only) - CTRL REG
   485 000000                            SID_R_V2_ATCK_DECY =        $D50C  [54540/$D50C]            ;SID - R - Voice 2 (Write Only) - ATTACK / DECAY
   486 000000                            SID_R_V2_SSTN_RLSE =        $D50D  [54541/$D50D]            ;SID - R - Voice 2 (Write Only) - SUSTAIN / RELEASE
   487 000000                            SID_R_V3_FREQ_LO =          $D50E  [54542/$D50E]            ;SID - R - Voice 3 (Write Only) - FREQ LOW
   488 000000                            SID_R_V3_FREQ_HI =          $D50F  [54543/$D50F]            ;SID - R - Voice 3 (Write Only) - FREQ HI
   489 000000                            SID_R_V3_PW_LO  =           $D510  [54544/$D510]            ;SID - R - Voice 3 (Write Only) - PW LOW
   490 000000                            SID_R_V3_PW_HI  =           $D511  [54545/$D511]            ;SID - R - Voice 3 (Write Only) - PW HI
   491 000000                            SID_R_V3_CTRL   =           $D512  [54546/$D512]            ;SID - R - Voice 3 (Write Only) - CTRL REG
   492 000000                            SID_R_V3_ATCK_DECY =        $D513  [54547/$D513]            ;SID - R - Voice 3 (Write Only) - ATTACK / DECAY
   493 000000                            SID_R_V3_SSTN_RLSE =        $D514  [54548/$D514]            ;SID - R - Voice 3 (Write Only) - SUSTAIN / RELEASE
   494 000000                            SID_R_FC_LO     =           $D515  [54549/$D515]            ;SID - R - Filter (Write Only) - FC LOW
   495 000000                            SID_R_FC_HI     =           $D516  [54550/$D516]            ;SID - R - Filter (Write Only) - FC HI
   496 000000                            SID_R_RES_FILT  =           $D517  [54551/$D517]            ;SID - R - Filter (Write Only) - RES / FILT
   497 000000                            SID_R_MODE_VOL  =           $D518  [54552/$D518]            ;SID - R - Filter (Write Only) - MODE / VOL
   498 000000                            SID_R_POT_X     =           $D519  [54553/$D519]            ;SID - R - Misc (Read Only) - POT X (C256 - NOT USED)
   499 000000                            SID_R_POT_Y     =           $D51A  [54554/$D51A]            ;SID - R - Misc (Read Only) - POT Y (C256 - NOT USED)
   500 000000                            SID_R_OSC3_RND  =           $D51B  [54555/$D51B]            ;SID - R - Misc (Read Only) - OSC3 / RANDOM
   501 000000                            SID_R_ENV3      =           $D51C  [54556/$D51C]            ;SID - R - Misc (Read Only)  - ENV3
   502 000000;                                                                                       ;SID_R_NOT_USED0     = $D51D ;SID - R - NOT USED
   503 000000;                                                                                       ;SID_R_NOT_USED1     = $D51E ;SID - R - NOT USED
   504 000000;                                                                                       ;SID_R_NOT_USED2     = $D51F ;SID - R - NOT USED
   505 000000
   506 000000                            PSG_INT_L_PORT  =           $D600  [54784/$D600]            ; Control register for the SN76489
   507 000000                            PSG_INT_R_PORT  =           $D610  [54800/$D610]            ; Control register for the SN76489
   508 000000
   509 000000
   510 000000                            VECTORS_BEGIN   =           $FFFA  [65530/$FFFA]            ;0 Byte  Interrupt vectors
   511 000000                            VECTOR_NMI      =           $FFFA  [65530/$FFFA]            ;2 Bytes Emulation mode interrupt handler
   512 000000                            VECTOR_RESET    =           $FFFC  [65532/$FFFC]            ;2 Bytes Emulation mode interrupt handler
   513 000000                            VECTOR_IRQ      =           $FFFE  [65534/$FFFE]            ;2 Bytes Emulation mode interrupt handler
   514 000000;                                                                                       ;ISR_BEGIN       = $FF00 ; Byte  Beginning of CPU vectors in Direct page
   515 000000;                                                                                       ;HRESET          = $FF00 ;16 Bytes Handle RESET asserted. Reboot computer and re-initialize the kernel.
   516 000000;                                                                                       ;HCOP            = $FF10 ;16 Bytes Handle the COP instruction. Program use; not used by OS
   517 000000;                                                                                       ;HBRK            = $FF20 ;16 Bytes Handle the BRK instruction. Returns to BASIC Ready prompt.
   518 000000;                                                                                       ;HABORT          = $FF30 ;16 Bytes Handle ABORT asserted. Return to Ready prompt with an error message.
   519 000000;                                                                                       ;HNMI            = $FF40 ;32 Bytes Handle NMI
   520 000000;                                                                                       ;HIRQ            = $FF60 ;32 Bytes Handle IRQ
   521 000000
   522 000000
   523 000000
   524 000000                            KEYBOARD_SC_TMP =           $20  [32/$20/" "]
   525 000000                            KBD_MSE_CTRL_REG =          $D640  [54848/$D640]
   526 000000                            KBD_Write_Strobe =          $02  [2/$02]
   527 000000                            MS_Write_Strobe =           $08  [8/$08]
   528 000000                            KBD_FIFO_CLEAR  =           $10  [16/$10]                   ; Dump entire FIFO, set to 1 and then back to 0
   529 000000                            MSE_FIFO_CLEAR  =           $20  [32/$20/" "]               ; Dump entire FIFO, set to 1 and then back to 0
   530 000000                            KBD_MS_WR_DATA_REG =        $D641  [54849/$D641]            ; Data to Send to Keyboard or Mouse
   531 000000                            KBD_RD_SCAN_REG =           $D642  [54850/$D642]            ; DATA Out from KBD FIFO
   532 000000                            MS_RD_SCAN_REG  =           $D643  [54851/$D643]            ; DATA Out from MSE FIFO
   533 000000                            KBD_MS_RD_STATUS =          $D644  [54852/$D644]            ; Keyboard RD/WR Status
   534 000000                            KBD_FIFO_Empty  =           $01  [1/$01]                    ; Set when Keyboard FIFO is empty
   535 000000                            MSE_FIFO_Empty  =           $02  [2/$02]                    ; Set when Mouse FIFO is empty
   536 000000                            MS_Stat_Tx_Error_No_Ack =   $10  [16/$10]
   537 000000                            MS_Stat_Tx_Ack  =           $20  [32/$20/" "]               ; When 1, it ack the Tx
   538 000000                            KBD_Stat_Tx_Error_No_Ack =  $40  [64/$40/"@"]
   539 000000                            KBD_Stat_Tx_Ack =           $80  [128/$80/"?"]              ; When 1, it ack the Tx
   540 000000                            KBD_MSE_NOT_USED =          $D645  [54853/$D645]            ;       ; Reads as 0
   541 000000                            KBD_FIFO_BYTE_CNT =         $D646  [54854/$D646]            ; Number of Bytes in the Keyboard FIFO
   542 000000                            MSE_FIFO_BYTE_CNT =         $D647  [54855/$D647]            ; Number of Bytes in the Mouse FIFO
   543 000000
   544 000000
   545 000000
   546 000000                            TEXT_LUT_FG     =           $D800  [55296/$D800]
   547 000000                            TEXT_LUT_BG     =           $D840  [55360/$D840]
   548 000000                            FONT_MEM        =           $C000  [49152/$C000]            ; IO Page 1
   549 000000                            TEXT_MEM        =           $C000  [49152/$C000]            ; IO Page 2
   550 000000                            COLOR_MEM       =           $C000  [49152/$C000]            ; IO Page 3
   551 000000                            DIPSWITCH       =           $D670  [54896/$D670]
   552 000000                            CODEC_LOW       =           $D620  [54816/$D620]
   553 000000                            CODEC_HI        =           $D621  [54817/$D621]
   554 000000                            CODEC_CTRL      =           $D622  [54818/$D622]
   555 000000
   556 000000                            RNG_DAT_LO      =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   557 000000                            RNG_DAT_HI      =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   558 000000                            RNG_SEED_LO     =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   559 000000                            RNG_SEED_HI     =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   560 000000                            RNG_CTRL        =           $D6A6  [54950/$D6A6]
   561 000000                            RNG_SEED_LD     =           $02  [2/$02]
   562 000000                            RNG_ENABLE      =           $01  [1/$01]
   563 000000                            RNG_STAT        =           $D6A6  [54950/$D6A6]
   564 000000                            RNG_LFSR_DONE   =           $80  [128/$80/"?"]              ; ???indicates that Output = SEED Database
   565 000000
   566 000000                            FOENIX_MACHINE_ID =         $D6A7  [54951/$D6A7]
   567 000000
   568 000000
   569 000000
   570 000000;                                                                                       ; tilemap base = $d200
   571 000000                            TVKY_TILEMAP    =           $D200  [53760/$D200]
   572 000000                                            struct      TILEMAP_TYPE(actrl,aaddr,axsize,aysize,axpos,aypos)
found structure definition 'TILEMAP_TYPE'
   579 000000
   580s000000:                           CONTROL         byte        0  [size=1/$01]
   581s000001:                           ADDRESS         long        0  [size=3/$03]
   582s000004:                           XSIZE           word        0  [size=2/$02]
   583s000006:                           YSIZE           word        0  [size=2/$02]
   584s000008:                           XPOS            word        0  [size=2/$02]
   585s00000A:                           YPOS            word        0  [size=2/$02]
   587 000000
   588 000000;                                                                                       ; bitmap base = $d100
   589 000000                            TVKY_BITMAP     =           $D100  [53504/$D100]
   590 000000                                            struct      BITMAP_TYPE(actrl,aaddr)
found structure definition 'BITMAP_TYPE'
   593 000000
   594s000000:                           CONTROL         byte        0  [size=1/$01]
   595s000001:                           ADDRESS         long        0  [size=3/$03]
   597 000000
   598 000000;                                                                                       ; tileset base = $d280
   599 000000                            TVKY_TILESET    =           $D280  [53888/$D280]
   600 000000                                            struct      TILESET_TYPE(aaddr,aconfig)
found structure definition 'TILESET_TYPE'
   603 000000
   604s000000:                           ADDRESS         long        0  [size=3/$03]
   605s000003:                           CONFIG          byte        0  [size=1/$01]
   607 000000
   608 000000;                                                                                       ; sprite base = $d900
   609 000000                            TVKY_SPRITE     =           $D900  [55552/$D900]
   610 000000                                            struct      SPRITE_TYPE(actrl,aaddr,axpos,aypos)
found structure definition 'SPRITE_TYPE'
   615 000000
   616s000000:                           CONTROL         byte        0  [size=1/$01]
   617s000001:                           ADDRESS         long        0  [size=3/$03]
   618s000004:                           XPOS            word        0  [size=2/$02]
   619s000006:                           YPOS            word        0  [size=2/$02]
   621 000000
   622 000000;                                                                                       ; left sid base = $d400
   623 000000                            SID_LEFT        =           $D400  [54272/$D400]
   624 000000;                                                                                       ; right sid base = $d500
   625 000000                            SID_RIGHT       =           $D500  [54528/$D500]
   626 000000
include source file 'includes\f256jr_registers.asm' successful
   627 000000                                            include     'f256jrlib.asm'
including source file 'f256jrlib.asm'
   628 000000                                            const       w6522s=0  [0/$00]
   629 000000                                            var         dopush=0  [0/$00]
   630 000000
   631 000000                                            const       FOENIXMODELS = enum( C256FMX, C256U, F256JR, A2560DEV, GENX, C256UP, RES1, RES2, A2560X, A2560U, A2560M, A2560K)  [12/$0C items]
   632 000000                                            const       FNX_SCREEN_WIDTH = 320 , FNX_SCREEN_HEIGHT = 240 , FNX_BORDER_WIDTH = 0 , FNX_BORDER_HEIGHT = 0 , FNX_SCREEN_COLUMNS = (FNX_SCREEN_WIDTH-FNX_BORDER_WIDTH) / 8 , FNX_SCREEN_LINES = (FNX_SCREEN_HEIGHT-FNX_BORDER_HEIGHT) / 8  [320/$0140,240/$F0/"d",0/$00,0/$00,40/$28/"(",30/$1E]
   633 000000
   634 000000                            VKY_SCREEN_MEMORY =         $C000  [49152/$C000]            ; character memory in io page 2, color memory in io page 3
   635 000000                            VKY_FONT_MEMORY =           $C000  [49152/$C000]            ; address of screen font memory in io page 1
   636 000000                            VKY_TEXT_MEMORY =           $C000  [49152/$C000]            ; address of screen text memory in io page 2
   637 000000                            VKY_COLOR_MEMORY =          $C000  [49152/$C000]            ; address of screen color memory in io page 3
   638 000000
   639 000000                                            define      jeq(aaddr) 'beq ~pcnext2 : jmp aaddr'
save define jeq(aaddr) beq ~pcnext2 : jmp aaddr
   640 000000                                            define      jne(aaddr) 'bne ~pcnext2 : jmp aaddr'
save define jne(aaddr) bne ~pcnext2 : jmp aaddr
   641 000000                                            define      jlt(aaddr) 'blt ~pcnext2 : jmp aaddr'
save define jlt(aaddr) blt ~pcnext2 : jmp aaddr
   642 000000                                            define      jge(aaddr) 'bge ~pcnext2 : jmp aaddr'
save define jge(aaddr) bge ~pcnext2 : jmp aaddr
   643 000000                                            define      jcc(aaddr) 'bcc ~pcnext2 : jmp aaddr'
save define jcc(aaddr) bcc ~pcnext2 : jmp aaddr
   644 000000                                            define      jcs(aaddr) 'bcs ~pcnext2 : jmp aaddr'
save define jcs(aaddr) bcs ~pcnext2 : jmp aaddr
   645 000000                                            define      jmi(aaddr) 'bmi ~pcnext2 : jmp aaddr'
save define jmi(aaddr) bmi ~pcnext2 : jmp aaddr
   646 000000                                            define      jpl(aaddr) 'bpl ~pcnext2 : jmp aaddr'
save define jpl(aaddr) bpl ~pcnext2 : jmp aaddr
   647 000000                                            define      jvc(aaddr) 'bvc ~pcnext2 : jmp aaddr'
save define jvc(aaddr) bvc ~pcnext2 : jmp aaddr
   648 000000                                            define      jvs(aaddr) 'bvs ~pcnext2 : jmp aaddr'
save define jvs(aaddr) bvs ~pcnext2 : jmp aaddr
   649 000000
   650 000000                                            define      DoC64COLOR(aforeground,abackground) (C64COLOR.aforeground<<4) | C64COLOR.abackground
save define DoC64COLOR(aforeground,abackground) (C64COLOR.aforeground<<4) | C64COLOR.abackground
   651 000000                                            define      PushAXY 'pha : phx : phy'
save define PushAXY() pha : phx : phy
   652 000000                                            define      PullYXA 'ply : plx : pla'
save define PullYXA() ply : plx : pla
   653 000000                                            define      SetMMUIO 'stz MMU_IO_CTRL'
save define SetMMUIO() stz MMU_IO_CTRL
   654 000000                                            define      SetMMUGFX 'lda #MMU_IO_PAGE_1 : sta MMU_IO_CTRL'
save define SetMMUGFX() lda #MMU_IO_PAGE_1 : sta MMU_IO_CTRL
   655 000000                                            define      SetMMUTEXT 'lda #MMU_IO_TEXT : sta MMU_IO_CTRL'
save define SetMMUTEXT() lda #MMU_IO_TEXT : sta MMU_IO_CTRL
   656 000000                                            define      SetMMUCOLOR 'lda #MMU_IO_COLOR : sta MMU_IO_CTRL'
save define SetMMUCOLOR() lda #MMU_IO_COLOR : sta MMU_IO_CTRL
   657 000000                                            define      PushMMUIO 'lda MMU_IO_CTRL : pha'
save define PushMMUIO() lda MMU_IO_CTRL : pha
   658 000000                                            define      PullMMUIO 'pla : sta MMU_IO_CTRL'
save define PullMMUIO() pla : sta MMU_IO_CTRL
   659 000000                                            define      UnlockMMU 'lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL'
save define UnlockMMU() lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL
   660 000000                                            define      LockMMU 'lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL'
save define LockMMU() lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL
   661 000000                                            define      SetMMUBank(abank,aaddr) 'lda #((aaddr)/$2000) : sta MMU_MEM_Bank_0+abank'
save define SetMMUBank(abank,aaddr) lda #((aaddr)/$2000) : sta MMU_MEM_Bank_0+abank
   662 000000;                                                                                       ;=====================================================================================
   663 00FFF9                                            section     add('VECTORS',$fff9,$ffff,save=1)
added section 'VECTORS' $00FFF9-00FFFF [7 bytes]
current section: VECTORS, next free address: $00FFF9
   664 00FFF9:                           F256_DUMMYIRQ   rti
   665 00FFFA:                                           word        F256_DUMMYIRQ  [size=2/$02]     ; nmi
   666 00FFFC:                                           word        F256_RESET  [size=2/$02]        ; reset
   667 00FFFE:                                           word        F256_DUMMYIRQ  [size=2/$02]     ; irq
   668 010000                                            endsection    [65535/$FFFF]
   669 010000
   670 000020                                            section     add('ZPAGE',$0020,$00ef,type='bss',save=0)
added section 'ZPAGE' $000020-0000EF [208 bytes]
current section: ZPAGE, next free address: $000020
   671 000020:                           TempIRQ         resb        16
define data constant size=16, fill value 0/$00
   672 000030:                           TempSrc         resb        4
define data constant size=4, fill value 0/$00
   673 000034:                           TempDest        resb        4
define data constant size=4, fill value 0/$00
   674 000038:                           TempZ           resb        16
define data constant size=16, fill value 0/$00
   675 000048:                           CursorColor     resb        1
define data constant size=1, fill value 0/$00
   676 000049:                           CursorColumn    resb        1
define data constant size=1, fill value 0/$00
   677 00004A:                           CursorLine      resb        1
define data constant size=1, fill value 0/$00
   678 00004B:                           CursorPointer   resw        1
define data constant size=1, fill value 0/$00
   679 00004D
   680 00004D:                           SOFCounter      resd        1
define data constant size=1, fill value 0/$00
   681 000051                                            endsection    [239/$EF/""]
   682 000051
   683 000200                                            section     add('DATA',$0200,$1fff,size=-1,save=1,file='wkdata.000200.bin')
added section 'DATA' $000200-001FFF [-1 bytes]
current section: DATA, next free address: $000200
   684 000200                                            endsection    [511/$01FF]
   685 000200
   686 000200;                                                                                       ;section add('TEXT',___MAIN_SECTION_NEXT_FREE___,$fff8,size=-1,save=1)
   687 000200;                                                                                       ;endsection
   688 000200
   689 00E000                                            section     add('F256JRLIB',$e000,$fff8,size=-1,save=1,file='wkf256.00e000.bin')
added section 'F256JRLIB' $00E000-00FFF8 [-1 bytes]
current section: F256JRLIB, next free address: $00E000
   690 00E000;                                                                                       ;=====================================================================================
   691 00E000
   692 00E000                                            macro       ConvertParamToA('aparam')
saving macro 'ConvertParamToA' ('aparam')
   706 00E000
   707 00E000                                            macro       ConvertParamToX('aparam')
saving macro 'ConvertParamToX' ('aparam')
   724 00E000
   725 00E000                                            macro       AssignWord('aaddr',adest)
saving macro 'AssignWord' ('aaddr',adest)
   733 00E000
   734 00E000                                            macro       AssignLong('aaddr',adest)
saving macro 'AssignLong' ('aaddr',adest)
   744 00E000
   745 00E000                                            macro       AssignDWord('aaddr',adest)
saving macro 'AssignDWord' ('aaddr',adest)
   757 00E000
   758 00E000                                            macro       SetMMUBlock(acontrol)
saving macro 'SetMMUBlock' (acontrol)
   765 00E000
   766 00E000                                            macro       SetCursorColor(acolor)
saving macro 'SetCursorColor' (acolor)
   769 00E000
   770 00E000;                                                                                       ; hard coded for 80 columns
   771 00E000                                            macro       SetCursorPointer('acolumn','aline')
saving macro 'SetCursorPointer' ('acolumn','aline')
   785 00E000
   786 00E000                                            macro       Increase_SOF_Counter
saving macro 'Increase_SOF_Counter'
   797 00E000
   798 00E000                                            proc        ChrOut
open scope ChrOut, from scope  <<global symbols>>
   799 00E000:                                           pha
   800 00E001:                                           phy
   801 00E002:                                           tay
   802 00E003:                                           lda         MMU_IO_CTRL
                                                   [PushMMUIO]
   803 00E006:                                           pha                                         ;<<<="PushMMUIO"
   804 00E007:                                           lda         #MMU_IO_TEXT
                                                   [SetMMUTEXT]
   805 00E009:                                           sta         MMU_IO_CTRL                     ;<<<="SetMMUTEXT"
   806 00E00C:                                           tya
   807 00E00D:                                           ldy         CursorColumn
   808 00E010:                                           sta         (CursorPointer),y
   809 00E012:                                           inc         MMU_IO_CTRL
   810 00E015:                                           lda         CursorColor
   811 00E018:                                           sta         (CursorPointer),y
   812 00E01A:                                           iny
   813 00E01B:                                           cpy         #FNX_SCREEN_COLUMNS
   814 00E01D:                                           bne         +
   815 00E01F:                                           clc
   816 00E020:                                           lda         CursorPointer
   817 00E023:                                           adc         #FNX_SCREEN_COLUMNS
   818 00E025:                                           sta         CursorPointer
   819 00E028:                                           bcc         ~pcnext2
   820 00E02A:                                           inc         CursorPointer+1
   821 00E02D:                                           lda         CursorLine
   822 00E030:                                           inc
   823 00E031:                                           cmp         #FNX_SCREEN_LINES
   824 00E033:                                           bne         ++
   825 00E035:                                           lda         #>VKY_TEXT_MEMORY
   826 00E037:                                           sta         CursorPointer+1
   827 00E03A:                                           lda         #<VKY_TEXT_MEMORY               ; always equals 0
   828 00E03C:                                           sta         CursorPointer
   829 00E03F                            ++
   830 00E03F:                                           sta         CursorLine
   831 00E042:                                           ldy         #0
   832 00E044                            +
   833 00E044:                                           sty         CursorColumn
   834 00E047:                                           pla
                                                   [PullMMUIO]
   835 00E048:                                           sta         MMU_IO_CTRL                     ;<<<="PullMMUIO"
   836 00E04B:                                           ply
   837 00E04C:                                           pla
   838 00E04D:                                           rts
   839 00E04E                                            endproc
end scope ChrOut, restore scope  <<global symbols>>
   840 00E04E
   841 00E04E                                            proc        ClearScreen
open scope ClearScreen, from scope  <<global symbols>>
   842 00E04E:                                           pha
   843 00E04F:                                           phx
   844 00E050:                                           lda         MMU_IO_CTRL
                                                   [PushMMUIO]
   845 00E053:                                           pha                                         ;<<<="PushMMUIO"
   846 00E054
   847 00E054:                                           stz         WriteAddress                    ;lda #<TEXT_MEM
   848 00E057:                                           stz         CursorPointer                   ;sta CursorPointer
   849 00E05A:                                           lda         #>TEXT_MEM
   850 00E05C:                                           sta         WriteAddress+1
   851 00E05F:                                           sta         CursorPointer+1
   852 00E062:                                           lda         #MMU_IO_TEXT
                                                   [SetMMUTEXT]
   853 00E064:                                           sta         MMU_IO_CTRL                     ;<<<="SetMMUTEXT"
   854 00E067:                                           ldx         #' '
   855 00E069:                                           jsr         WriteLoop
   856 00E06C:                                           stz         WriteAddress                    ;lda #<TEXT_MEM
   857 00E06F:                                           lda         #>TEXT_MEM
   858 00E071:                                           sta         WriteAddress+1
   859 00E074:                                           lda         #MMU_IO_COLOR
                                                   [SetMMUCOLOR]
   860 00E076:                                           sta         MMU_IO_CTRL                     ;<<<="SetMMUCOLOR"
   861 00E079:                                           ldx         CursorColor
   862 00E07C:                                           jsr         WriteLoop
   863 00E07F
   864 00E07F:                                           pla
                                                   [PullMMUIO]
   865 00E080:                                           sta         MMU_IO_CTRL                     ;<<<="PullMMUIO"
   866 00E083:                                           plx
   867 00E084:                                           pla
   868 00E085:                                           rts
   869 00E086
   870 00E086                            WriteLoop
   871 00E086:                                           txa
   872 00E087                            WriteAddress    =           *+1  [57480/$E088]
   873 00E087:                                           sta         $1234
   874 00E08A:                                           inc         WriteAddress
   875 00E08D:                                           bne         +
   876 00E08F:                                           inc         WriteAddress+1
   877 00E092                            +
   878 00E092:                                           lda         WriteAddress
   879 00E095:                                           cmp         #<(TEXT_MEM+80*60)
   880 00E097:                                           bne         WriteLoop
   881 00E099:                                           lda         WriteAddress+1
   882 00E09C:                                           cmp         #>(TEXT_MEM+80*60)
   883 00E09E:                                           bne         WriteLoop
   884 00E0A0:                                           rts
   885 00E0A1                                            endproc
end scope ClearScreen, restore scope  <<global symbols>>
   886 00E0A1
   887 00E0A1;                                                                                       ; parameters:
   888 00E0A1;                                                                                       ;	<TempSrc>	=	word address of string to print
   889 00E0A1;                                                                                       ;	<CursorPointer>	=	word address of screen character/color memory
   890 00E0A1                                            proc        PrintAnsiString
open scope PrintAnsiString, from scope  <<global symbols>>
   891 00E0A1;                                                                                       ;	pha : phx : phy ;<<<=";	PushAXY"
                                                   [;	PushAXY]
   892 00E0A1
   893 00E0A1:                                           ldy         #0
   894 00E0A3:                                           bra         Print20
   895 00E0A5                            Print10
   896 00E0A5:                                           cmp         #27
   897 00E0A7:                                           blt         CheckControlCodes
   898 00E0A9:                                           jsr         ChrOut
   899 00E0AC                            NextByte
   900 00E0AC:                                           iny
   901 00E0AD:                                           bne         Print20
   902 00E0AF:                                           inc         TempSrc+1
   903 00E0B2                            Print20
   904 00E0B2:                                           lda         (TempSrc),y
   905 00E0B4:                                           bne         Print10
   906 00E0B6;                                                                                       ;	ply : plx : pla ;<<<=";	PullYXA"
                                                   [;	PullYXA]
   907 00E0B6:                                           rts
   908 00E0B7
   909 00E0B7                            CheckControlCodes
   910 00E0B7:                                           cmp         #2                              ; ctrl-b/set cursor background color
   911 00E0B9:                                           bne         +
   912 00E0BB:                                           lda         CursorColor
   913 00E0BE:                                           and         #$f0
   914 00E0C0:                                           sta         CursorColor
   915 00E0C3:                                           jsr         GetNextByte
   916 00E0C6:                                           ora         CursorColor
   917 00E0C9:                                           sta         CursorColor
   918 00E0CC:                                           bra         NextByte
   919 00E0CE                            +
   920 00E0CE:                                           cmp         #3                              ; ctrl-c/set cursor color
   921 00E0D0:                                           bne         +
   922 00E0D2:                                           jsr         GetNextByte
   923 00E0D5:                                           sta         CursorColor
   924 00E0D8:                                           bra         NextByte
   925 00E0DA                            +
   926 00E0DA:                                           cmp         #6                              ; ctrl-f/set cursor foreground color
   927 00E0DC:                                           bne         +
   928 00E0DE:                                           lda         CursorColor
   929 00E0E1:                                           and         #$0f
   930 00E0E3:                                           sta         CursorColor
   931 00E0E6:                                           jsr         GetNextByte
   932 00E0E9:                                           asl
   933 00E0EA:                                           asl
   934 00E0EB:                                           asl
   935 00E0EC:                                           asl
   936 00E0ED:                                           ora         CursorColor
   937 00E0F0:                                           sta         CursorColor
   938 00E0F3:                                           bra         NextByte
   939 00E0F5                            +
   940 00E0F5:                                           cmp         #12                             ; ctrl-l/clear screen
   941 00E0F7:                                           bne         +
   942 00E0F9:                                           jsr         ClearScreen
   943 00E0FC:                                           bra         NextByte
   944 00E0FE                            +
   945 00E0FE:                                           rts
   946 00E0FF:                           temp            byte        0  [size=1/$01]
   947 00E100                            GetNextByte
   948 00E100:                                           iny
   949 00E101:                                           bne         +
   950 00E103:                                           inc         TempSrc+1
   951 00E106                            +
   952 00E106:                                           lda         (TempSrc),y
   953 00E108:                                           rts
   954 00E109                                            endproc
end scope PrintAnsiString, restore scope  <<global symbols>>
   955 00E109
   956 00E109                                            macro       PrintString('astring','acolumn','aline','acolor')
saving macro 'PrintString' ('astring','acolumn','aline','acolor')
                                                   [PushAXY]
                                                   [PullYXA]
   981 00E109
   982 00E109;                                                                                       ; parameters
   983 00E109;                                                                                       ;	A	=	byte to print
   984 00E109;                                                                                       ; returns
   985 00E109;                                                                                       ;	Y	=	upper nibble ascii
   986 00E109;                                                                                       ;	A	=	lower nibble ascii
   987 00E109                                            proc        HexByteToASCII
open scope HexByteToASCII, from scope  <<global symbols>>
   988 00E109:                                           phx
   989 00E10A:                                           tax
   990 00E10B:                                           and         #$f0
   991 00E10D:                                           lsr
   992 00E10E:                                           lsr
   993 00E10F:                                           lsr
   994 00E110:                                           lsr
   995 00E111:                                           tay
   996 00E112:                                           lda         HEXTABLE,y
   997 00E115:                                           tay
   998 00E116:                                           txa
   999 00E117:                                           and         #$0f
  1000 00E119:                                           tax
  1001 00E11A:                                           lda         HEXTABLE,x
  1002 00E11D:                                           plx
  1003 00E11E:                                           rts
  1004 00E11F:                           HEXTABLE        byte        '0123456789ABCDEF'  [size=16/$10]
  1005 00E12F                                            endproc
end scope HexByteToASCII, restore scope  <<global symbols>>
  1006 00E12F
  1007 00E12F                                            macro       PrintHexByte('avalue','acolumn','aline','acolor')
saving macro 'PrintHexByte' ('avalue','acolumn','aline','acolor')
                                                   [PushAXY]
                                                   [PullYXA]
                                                   [PushAXY]
                                                   [PullYXA]
  1031 00E12F
  1032 00E12F                                            macro       PrintHexWord('avalue','acolumn','aline','acolor')
saving macro 'PrintHexWord' ('avalue','acolumn','aline','acolor')
                                                   [PushAXY]
                                                   [PullYXA]
  1063 00E12F
  1064 00E12F                                            macro       PrintHexDWord('avalue','acolumn','aline','acolor')
saving macro 'PrintHexDWord' ('avalue','acolumn','aline','acolor')
                                                   [PushAXY]
                                                   [PullYXA]
  1107 00E12F
  1108 00E12F;                                                                                       ; KeyboardState
  1109 00E12F;                                                                                       ; shift
  1110 00E12F;                                                                                       ; ctrl
  1111 00E12F;                                                                                       ; win
  1112 00E12F;                                                                                       ; numlk
  1113 00E12F;                                                                                       ; capslk
  1114 00E12F;                                                                                       ;   bit
  1115 00E12F;                                                                                       ;	5  4  3  2  1  0
  1116 00E12F;                                                                                       ;	|  |  |  |  |  |
  1117 00E12F;                                                                                       ;	|  |  |  |  |  shift l/r = c0 c1
  1118 00E12F;                                                                                       ;	|  |  |  |  ----alt l/r  = c2 c3
  1119 00E12F;                                                                                       ;	|  |  |  ------ctrl l/r  = c4 c5
  1120 00E12F;                                                                                       ;	|  |  ----------win l/r  = c6 c7
  1121 00E12F;                                                                                       ;	|  ---------------numlk  = cf
  1122 00E12F;                                                                                       ;   -----------------capslk  = ce
  1123 00E12F;                                                                                       ;
  1124 00E12F                                            const       KEYDOWN=$00, KEYUP=$80  [0/$00,128/$80/"?"]
  1125 00E12F:                           ScancodeBufferWPos word     0  [size=2/$02]
  1126 00E131:                           ScancodeBufferRPos word     0  [size=2/$02]
  1127 00E133:                           LastScancode    word        0  [size=2/$02]
  1128 00E135:                           ScancodeBuffer  resb        128,0
define data constant size=128, fill value 0/$00
  1129 00E1B5:                           KeyboardState   resb        1,0
define data constant size=1, fill value 0/$00
  1130 00E1B6:                           KeyboardKeyStates resb      $90,KEYUP
define data constant size=144, fill value 128/$80
  1131 00E246                                            const       KEYBOARDSTATES = enum( ALLOFF =%000000, SHIFT =%000001, ALT =%000010, CTRL =%000100, WIN =%001000, NUMLK =%010000, CAPSLK =%100000)  [7/$07 items]
  1132 00E246                                            proc        Init_Keyboard
open scope Init_Keyboard, from scope  <<global symbols>>
  1133 00E246;                                                                                       ; clear keyboard & mouse fifo buffer
  1134 00E246:                                           lda         #(KBD_FIFO_CLEAR|MSE_FIFO_CLEAR)
  1135 00E248:                                           sta         KBD_MSE_CTRL_REG
  1136 00E24B:                                           stz         KBD_MSE_CTRL_REG
  1137 00E24E
  1138 00E24E:                                           stz         ScancodeBufferRPos
  1139 00E251:                                           stz         ScancodeBufferWPos
  1140 00E254:                                           ldx         #0
  1141 00E256                            -
  1142 00E256:                                           sta         ScancodeBuffer
  1143 00E259:                                           inx
  1144 00E25A:                                           cpx         #lobyte(sizeof(ScancodeBuffer))
  1145 00E25C:                                           bne         -
  1146 00E25E
  1147 00E25E:                                           lda         #KEYUP                          ; key released
  1148 00E260:                                           ldx         #0
  1149 00E262                            -
  1150 00E262:                                           sta         KeyboardKeyStates,x
  1151 00E265:                                           inx
  1152 00E266:                                           cpx         #sizeof(KeyboardKeyStates)
  1153 00E268:                                           bne         -
  1154 00E26A
  1155 00E26A:                                           lda         #KEYBOARDSTATES.ALLOFF
  1156 00E26C:                                           sta         KeyboardState
  1157 00E26F
  1158 00E26F;                                                                                       ; enable keyboard interrupt
  1159 00E26F:                                           lda         INT_MASK_REG0
  1160 00E272:                                           ora         #~(JR0_INT02_KBD)
  1161 00E274:                                           sta         INT_MASK_REG0
  1162 00E277:                                           rts
  1163 00E278                                            endproc
end scope Init_Keyboard, restore scope  <<global symbols>>
  1164 00E278
  1165 00E278                                            proc        KeyboardIRQ
open scope KeyboardIRQ, from scope  <<global symbols>>
  1166 00E278                            -
  1167 00E278:                                           lda         KBD_MS_RD_STATUS
  1168 00E27B:                                           and         #KBD_FIFO_Empty
  1169 00E27D:                                           bne         +
  1170 00E27F:                                           lda         ScancodeBufferWPos
  1171 00E282:                                           tax
  1172 00E283:                                           inc
  1173 00E284:                                           and         #$7f
  1174 00E286:                                           cmp         ScancodeBufferRPos
  1175 00E289:                                           beq         .BufferFull
  1176 00E28B:                                           sta         ScancodeBufferWPos
  1177 00E28E:                                           lda         KBD_RD_SCAN_REG                 ; get keyboard scan code
  1178 00E291:                                           sta         ScancodeBuffer,x
  1179 00E294:                                           bra         -
  1180 00E296
  1181 00E296                            .BufferFull
  1182 00E296:                                           lda         KBD_RD_SCAN_REG                 ; get keyboard scan code and forget it
  1183 00E299                            +
  1184 00E299:                                           rts
  1185 00E29A                                            endproc
end scope KeyboardIRQ, restore scope  <<global symbols>>
  1186 00E29A
  1187 00E29A;                                                                                       ; returns:
  1188 00E29A;                                                                                       ;	A	=	scan code from buffer
  1189 00E29A;                                                                                       ;	<carry>	:	clear=scan code in A, set=buffer empty A equals 0
  1190 00E29A                                            proc        GetScancode
open scope GetScancode, from scope  <<global symbols>>
  1191 00E29A:                                           lda         ScancodeBufferRPos
  1192 00E29D:                                           cmp         ScancodeBufferWPos
  1193 00E2A0:                                           beq         BufferEmpty
  1194 00E2A2:                                           phx
  1195 00E2A3:                                           tax
  1196 00E2A4:                                           inc
  1197 00E2A5:                                           and         #$7f
  1198 00E2A7:                                           sta         ScancodeBufferRPos
  1199 00E2AA:                                           lda         ScancodeBuffer,x
  1200 00E2AD:                                           plx
  1201 00E2AE:                                           clc
  1202 00E2AF:                                           rts
  1203 00E2B0                            BufferEmpty
  1204 00E2B0:                                           lda         #0
  1205 00E2B2:                                           sec
  1206 00E2B3:                                           rts
  1207 00E2B4                                            endproc
end scope GetScancode, restore scope  <<global symbols>>
  1208 00E2B4
  1209 00E2B4                                            proc        GetChar
open scope GetChar, from scope  <<global symbols>>
  1210 00E2B4:                                           jsr         GetScancode
  1211 00E2B7:                                           bcc         +
  1212 00E2B9;                                                                                       ; buffer empty
  1213 00E2B9:                                           rts
  1214 00E2BA                            +
  1215 00E2BA:                                           cmp         #$90                            ; scan code can only be 00-8f
  1216 00E2BC:                                           blt         +
  1217 00E2BE:                                           sta         LastScancode
  1218 00E2C1:                                           cmp         #$f0                            ; is last scan code a break prefix, get next scan code
  1219 00E2C3:                                           beq         GetChar
  1220 00E2C5:                                           lda         #0                              ; return null for invalid scan code range
  1221 00E2C7:                                           sec                                         ; set carry for empty buffer
  1222 00E2C8:                                           rts
  1223 00E2C9                            +
  1224 00E2C9:                                           phx
  1225 00E2CA:                                           ldx         LastScancode                    ; get last scan code
  1226 00E2CD:                                           sta         LastScancode                    ; save new scan code
  1227 00E2D0:                                           cpx         #$f0
  1228 00E2D2:                                           bne         KeyPressed
  1229 00E2D4:                                           jmp         KeyReleased
  1230 00E2D7
  1231 00E2D7                            KeyPressed
  1232 00E2D7:                                           tax
  1233 00E2D8:                                           lda         #KEYDOWN                        ; set state as key for DOWN
  1234 00E2DA:                                           sta         KeyboardKeyStates,x
  1235 00E2DD:                                           lda         KeyboardState
  1236 00E2E0:                                           bit         #(KEYBOARDSTATES.SHIFT|KEYBOARDSTATES.CAPSLK)
  1237 00E2E2:                                           beq         +
  1238 00E2E4:                                           lda         SCSET21,x
  1239 00E2E7:                                           bra         ++
  1240 00E2E9                            +
  1241 00E2E9:                                           lda         SCSET2,x
  1242 00E2EC                            ++
  1243 00E2EC:                                           tax
  1244 00E2ED:                                           and         #$c0
  1245 00E2EF:                                           cmp         #$c0
  1246 00E2F1:                                           beq         .SpecialKeyDown
  1247 00E2F3:                                           txa
  1248 00E2F4:                                           plx
  1249 00E2F5:                                           rts
  1250 00E2F6
  1251 00E2F6                            .SpecialKeyDown
  1252 00E2F6:                                           cpx         #$c0
  1253 00E2F8:                                           beq         .Shift
  1254 00E2FA:                                           cpx         #$c1
  1255 00E2FC:                                           bne         ++
  1256 00E2FE                            .Shift
  1257 00E2FE:                                           lda         KeyboardState
  1258 00E301:                                           ora         #KEYBOARDSTATES.SHIFT
  1259 00E303:                                           sta         KeyboardState
  1260 00E306:                                           bra         +
  1261 00E308                            ++
  1262 00E308:                                           cpx         #$c2
  1263 00E30A:                                           beq         .Alt
  1264 00E30C:                                           cpx         #$c3
  1265 00E30E:                                           bne         ++
  1266 00E310                            .Alt
  1267 00E310:                                           lda         KeyboardState
  1268 00E313:                                           ora         #KEYBOARDSTATES.ALT
  1269 00E315:                                           sta         KeyboardState
  1270 00E318:                                           bra         +
  1271 00E31A                            ++
  1272 00E31A:                                           cpx         #$c4
  1273 00E31C:                                           beq         .Ctrl
  1274 00E31E:                                           cpx         #$c5
  1275 00E320:                                           bne         ++
  1276 00E322                            .Ctrl
  1277 00E322:                                           lda         KeyboardState
  1278 00E325:                                           ora         #KEYBOARDSTATES.CTRL
  1279 00E327:                                           sta         KeyboardState
  1280 00E32A:                                           bra         +
  1281 00E32C                            ++
  1282 00E32C:                                           cpx         #$c6
  1283 00E32E:                                           beq         .Win
  1284 00E330:                                           cpx         #$c7
  1285 00E332:                                           bne         ++
  1286 00E334                            .Win
  1287 00E334:                                           lda         KeyboardState
  1288 00E337:                                           ora         #KEYBOARDSTATES.WIN
  1289 00E339:                                           sta         KeyboardState
  1290 00E33C:                                           bra         +
  1291 00E33E                            ++
  1292 00E33E:                                           cpx         #$cf
  1293 00E340:                                           bne         ++
  1294 00E342                            .NumLk
  1295 00E342:                                           lda         KeyboardState
  1296 00E345:                                           eor         #KEYBOARDSTATES.NUMLK
  1297 00E347:                                           sta         KeyboardState
  1298 00E34A:                                           bra         +
  1299 00E34C                            ++
  1300 00E34C:                                           cpx         #$ce
  1301 00E34E:                                           bne         ++
  1302 00E350                            .CapsLk
  1303 00E350:                                           lda         KeyboardState
  1304 00E353:                                           eor         #KEYBOARDSTATES.CAPSLK
  1305 00E355:                                           sta         KeyboardState
  1306 00E358:                                           bra         +
  1307 00E35A                            ++
  1308 00E35A                            +
  1309 00E35A:                                           lda         #0
  1310 00E35C:                                           sec
  1311 00E35D:                                           plx
  1312 00E35E:                                           rts
  1313 00E35F
  1314 00E35F                            KeyReleased
  1315 00E35F:                                           tax
  1316 00E360:                                           lda         #KEYUP                          ; set state for key as UP
  1317 00E362:                                           sta         KeyboardKeyStates,x
  1318 00E365:                                           lda         SCSET2,x
  1319 00E368:                                           tax
  1320 00E369:                                           and         #$c0
  1321 00E36B:                                           cmp         #$c0
  1322 00E36D:                                           beq         .SpecialKeyDown
  1323 00E36F:                                           lda         #0
  1324 00E371:                                           sec
  1325 00E372:                                           plx
  1326 00E373:                                           rts
  1327 00E374
  1328 00E374                            .SpecialKeyDown
  1329 00E374:                                           cpx         #$c0
  1330 00E376:                                           beq         .Shift
  1331 00E378:                                           cpx         #$c1
  1332 00E37A:                                           bne         ++
  1333 00E37C                            .Shift
  1334 00E37C:                                           lda         KeyboardState
  1335 00E37F:                                           and         #~(KEYBOARDSTATES.SHIFT)
  1336 00E381:                                           sta         KeyboardState
  1337 00E384:                                           bra         +
  1338 00E386                            ++
  1339 00E386:                                           cpx         #$c2
  1340 00E388:                                           beq         .Alt
  1341 00E38A:                                           cpx         #$c3
  1342 00E38C:                                           bne         ++
  1343 00E38E                            .Alt
  1344 00E38E:                                           lda         KeyboardState
  1345 00E391:                                           and         #~(KEYBOARDSTATES.ALT)
  1346 00E393:                                           sta         KeyboardState
  1347 00E396:                                           bra         +
  1348 00E398                            ++
  1349 00E398:                                           cpx         #$c4
  1350 00E39A:                                           beq         .Ctrl
  1351 00E39C:                                           cpx         #$c5
  1352 00E39E:                                           bne         ++
  1353 00E3A0                            .Ctrl
  1354 00E3A0:                                           lda         KeyboardState
  1355 00E3A3:                                           and         #~(KEYBOARDSTATES.CTRL)
  1356 00E3A5:                                           sta         KeyboardState
  1357 00E3A8:                                           bra         +
  1358 00E3AA                            ++
  1359 00E3AA:                                           cpx         #$c6
  1360 00E3AC:                                           beq         .Win
  1361 00E3AE:                                           cpx         #$c7
  1362 00E3B0:                                           bne         ++
  1363 00E3B2                            .Win
  1364 00E3B2:                                           lda         KeyboardState
  1365 00E3B5:                                           and         #~(KEYBOARDSTATES.WIN)
  1366 00E3B7:                                           sta         KeyboardState
  1367 00E3BA:                                           bra         +
  1368 00E3BC                            ++
  1369 00E3BC                            +
  1370 00E3BC:                                           lda         #0
  1371 00E3BE:                                           sec
  1372 00E3BF:                                           plx
  1373 00E3C0:                                           rts
  1374 00E3C1
  1375 00E3C1;                                                                                       ; function keys f1-f24 = ascii $8a-$a1
  1376 00E3C1;                                                                                       ;
  1377 00E3C1;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1378 00E3C1:                           SCSET2          byte        $00, $92, $00, $8e, $8c, $8a, $8b, $95, $00, $93, $91, $8f, $8d, $09, '`', $00, $00, $c2, $c0, $00, $c4, 'q', '1', $00, $00, $00, 'z', 's', 'a', 'w', '2', $c6, $00, 'c', 'x', 'd', 'e', '4', '3', $c7, $00, $00, 'v', 'f', 't', 'r', '5', $00, $00, 'n', 'b', 'h', 'g', 'y', '6', $00, $00, $00, 'm', 'j', 'u', '7', '8', $00, $00, ',', 'k', 'i', 'o', '0', '9', $00, $00, '.', '/', 'l', ';', 'p', '-', $00, $00, $00, $2c, $00, '[', '=', $00, $00, $ce, $c1, $0d, ']', $00, '\', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $94, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $90, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1379 00E451
  1380 00E451;                                                                                       ; shift
  1381 00E451;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1382 00E451:                           SCSET21         byte        $00, $9e, $00, $9a, $98, $96, $97, $a1, $00, $9f, $9d, $9b, $99, $09, '~', $00, $00, $c2, $c0, $00, $c4, 'Q', '!', $00, $00, $00, 'Z', 'S', 'A', 'W', '@', $c6, $00, 'C', 'X', 'D', 'E', '$', '#', $c7, $00, $00, 'V', 'F', 'T', 'R', '%', $00, $00, 'N', 'B', 'H', 'G', 'Y', '^', $00, $00, $00, 'M', 'J', 'U', '&', '*', $00, $00, '<', 'K', 'I', 'O', ')', '(', $00, $00, '.', '?', 'L', ':', 'P', '_', $00, $00, $00, $2c, $00, '{', '+', $00, $00, $ce, $c1, $0d, '}', $00, '|', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $a0, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $9c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1383 00E4E1                                            endproc
end scope GetChar, restore scope  <<global symbols>>
  1384 00E4E1
  1385 00E4E1;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
                                                   [; assume SetMMUIO]
  1386 00E4E1                                            proc        WaitForDMAReset
open scope WaitForDMAReset, from scope  <<global symbols>>
  1387 00E4E1                            -
  1388 00E4E1:                                           lda         DMA_STATUS_REG
  1389 00E4E4:                                           and         #DMA_STATUS_TRF_IP
  1390 00E4E6:                                           cmp         #DMA_STATUS_TRF_IP
  1391 00E4E8:                                           beq         -
  1392 00E4EA:                                           stz         DMA_CTRL_REG
  1393 00E4ED:                                           rts
  1394 00E4EE                                            endproc
end scope WaitForDMAReset, restore scope  <<global symbols>>
  1395 00E4EE
  1396 00E4EE;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
                                                   [; assume SetMMUIO]
  1397 00E4EE                                            macro       DMA1DCopy(asource,adest,asize)
saving macro 'DMA1DCopy' (asource,adest,asize)
  1409 00E4EE
  1410 00E4EE;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
                                                   [; assume SetMMUIO]
  1411 00E4EE                                            macro       DMA1DFill(adest,asize,afillbyte)
saving macro 'DMA1DFill' (adest,asize,afillbyte)
  1422 00E4EE
  1423 00E4EE;                                                                                       ; 8-bit
  1424 00E4EE                                            macro       CopyMemTiny(asource,adest,asize)
saving macro 'CopyMemTiny' (asource,adest,asize)
  1434 00E4EE
  1435 00E4EE;                                                                                       ; 16-bit
  1436 00E4EE                                            macro       CopyMemSmall(asource,adest,asize)
saving macro 'CopyMemSmall' (asource,adest,asize)
  1465 00E4EE
  1466 00E4EE                                            const       C64COLOR = enum( BLACK,WHITE,RED,CYAN, PURPLE,GREEN,BLUE,YELLOW, ORANGE,BROWN,LTRED,DKGREY, MDGREY,LTGREEN,LTBLUE,LTGREY)  [16/$10 items]
  1468 00E4EE:                           SYSTEM_FONT     incbin      'includes\cp437ish_f256jr_8x8-charset.bin'
including binary file 'includes\cp437ish_f256jr_8x8-charset.bin', 2048 bytes [=$000800]
  1469 00ECEE;                                                                                       ;	SYSTEM_FONT incbin 'includes\f256jr_native-charset_1.0b2.bin'
  1471 00ECEE                                            proc        Init_Graphics
open scope Init_Graphics, from scope  <<global symbols>>
  1472 00ECEE;                                                                                       ; clear foreground & background luts with #000000
  1473 00ECEE:                                           ldx         #0
  1474 00ECF0:                                           lda         #0
  1475 00ECF2                            -
  1476 00ECF2:                                           sta         TEXT_LUT_FG,x
  1477 00ECF5:                                           sta         TEXT_LUT_BG,x
  1478 00ECF8:                                           inx
  1479 00ECF9:                                           cpx         #16*4
  1480 00ECFB:                                           bne         -
  1481 00ECFD
  1482 00ECFD;                                                                                       ; set C64 colodore palette
  1483 00ECFD:                                           ldx         #0
  1484 00ECFF                            -
  1485 00ECFF:                                           lda         COLODORE_PALETTE,x
  1486 00ED02:                                           sta         TEXT_LUT_FG,x                   ; set font foreground lut
  1487 00ED05:                                           sta         TEXT_LUT_BG,x                   ; set font background lut
  1488 00ED08:                                           inx
  1489 00ED09:                                           cpx         #sizeof(COLODORE_PALETTE)
  1490 00ED0B:                                           bne         -
  1491 00ED0D
  1492 00ED0D;                                                                                       ; initialize system font
  1494 00ED0D:                                           lda         #MMU_IO_PAGE_1
                                                   [SetMMUGFX]
  1495 00ED0F:                                           sta         MMU_IO_CTRL                     ;<<<="SetMMUGFX"
  1496 00ED12                                            CopyMemSmall (SYSTEM_FONT,VKY_FONT_MEMORY,sizeof(SYSTEM_FONT))
  1497m00ED12
open scope {scope#1}, from scope Init_Graphics
  1498m00ED12
  1499m00ED12;                                                                                       ;		AssignWord(SYSTEM_FONT,.asrcaddr)
  1500m00ED12:                                           lda         #<(SYSTEM_FONT)
  1501m00ED14:                                           sta         .srcaddr
  1502m00ED17:                                           lda         #>(SYSTEM_FONT)
  1503m00ED19:                                           sta         .srcaddr+1
  1504m00ED1C;                                                                                       ;		AssignWord(VKY_FONT_MEMORY,.destaddr)
  1505m00ED1C:                                           lda         #<(VKY_FONT_MEMORY)
  1506m00ED1E:                                           sta         .destaddr
  1507m00ED21:                                           lda         #>(VKY_FONT_MEMORY)
  1508m00ED23:                                           sta         .destaddr+1
  1509m00ED26:                                           ldy         #0
  1510m00ED28                            -
  1511m00ED28                            .srcaddr        =           *+1  [60713/$ED29]
  1512m00ED28:                                           lda         $1234
  1513m00ED2B                            .destaddr       =           *+1  [60716/$ED2C]
  1514m00ED2B:                                           sta         $4321
  1515m00ED2E:                                           inc         .srcaddr
  1516m00ED31:                                           bne         +
  1517m00ED33:                                           inc         .srcaddr+1
  1518m00ED36                            +
  1519m00ED36:                                           inc         .destaddr
  1520m00ED39:                                           bne         +
  1521m00ED3B:                                           inc         .destaddr+1
  1522m00ED3E                            +
  1523m00ED3E:                                           lda         .srcaddr
  1524m00ED41:                                           cmp         #<(SYSTEM_FONT+sizeof(SYSTEM_FONT))
  1525m00ED43:                                           bne         -
  1526m00ED45:                                           lda         .srcaddr+1
  1527m00ED48:                                           cmp         #>(SYSTEM_FONT+sizeof(SYSTEM_FONT))
  1528m00ED4A:                                           bne         -
  1529m00ED4C
end scope {scope#1}, restore scope ..Init_Graphics
  1530m00ED4C
  1533 00ED4C
  1534 00ED4C;                                                                                       ; initialize border
  1535 00ED4C:                                           stz         MMU_IO_CTRL                     ; set i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO				; set i/o at $d000, use page 0=i/o registers"
                                                   [SetMMUIO				; set i/o at $d000, use page 0=i/o registers]
  1536 00ED4F;                                                                                       ;lda #Border_Ctrl_Enable	; enable border
  1537 00ED4F:                                           stz         BORDER_CTRL_REG                 ;sta BORDER_CTRL_REG
  1538 00ED52:                                           stz         BORDER_COLOR_B                  ;lda #$ff : sta BORDER_COLOR_B		; set border color to blue, #0000ff
  1539 00ED55:                                           stz         BORDER_COLOR_G                  ;lda #$00 : sta BORDER_COLOR_G
  1540 00ED58:                                           stz         BORDER_COLOR_R                  ;lda #$00 : sta BORDER_COLOR_R
  1541 00ED5B;                                                                                       ;lda #FNX_BORDER_HEIGHT	; set border to 8 pixels high and 8 pixels wide
  1542 00ED5B:                                           stz         BORDER_Y_SIZE                   ;sta BORDER_Y_SIZE
  1543 00ED5E;                                                                                       ;lda #FNX_BORDER_WIDTH
  1544 00ED5E:                                           stz         BORDER_X_SIZE                   ;sta BORDER_X_SIZE
  1545 00ED61
  1546 00ED61;                                                                                       ; initialize backgrounnd
  1547 00ED61:                                           stz         BACKGROUND_COLOR_B              ; set background color to black, #000000
  1548 00ED64:                                           stz         BACKGROUND_COLOR_G
  1549 00ED67:                                           stz         BACKGROUND_COLOR_R
  1550 00ED6A
  1551 00ED6A;                                                                                       ; initialize Tiny Vicky registers
  1552 00ED6A:                                           ldx         #0
  1553 00ED6C                            -
  1554 00ED6C:                                           stz         TyVKY_BM0_CTRL_REG,x            ; bitmaps
  1555 00ED6F:                                           stz         TL0_CONTROL_REG,x               ; tilemaps/tilesets
  1556 00ED72:                                           stz         SP0_Ctrl,x                      ; sprites
  1557 00ED75:                                           stz         SP0_Ctrl+$0100,x
  1558 00ED78:                                           inx
  1559 00ED79:                                           bne         -
  1560 00ED7B
  1561 00ED7B;                                                                                       ; initialize cursor
  1562 00ED7B:                                           stz         VKY_TXT_CURSOR_CTRL_REG         ; disable cursor
  1563 00ED7E:                                           stz         VKY_TXT_CURSOR_CHAR_REG         ; set cursor character as font tile 0
  1564 00ED81
  1565 00ED81:                                           stz         VKY_TXT_CURSOR_X_REG_L          ; set cursor to colum 0
  1566 00ED84:                                           stz         VKY_TXT_CURSOR_X_REG_H
  1567 00ED87:                                           stz         VKY_TXT_CURSOR_Y_REG_L          ; set cursor to row 0
  1568 00ED8A:                                           stz         VKY_TXT_CURSOR_Y_REG_H
  1569 00ED8D
  1570 00ED8D:                                           lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK ;<<<="lda #DoC64COLOR(LTBLUE,BLACK)"
                                                   [lda #DoC64COLOR(LTBLUE,BLACK)]
  1571 00ED8F:                                           sta         CursorColor
  1572 00ED92:                                           jsr         ClearScreen
  1573 00ED95                                            AssignWord  (#VKY_TEXT_MEMORY,CursorPointer)
  1575m00ED95:                                           lda         #<(loword(val(copy('#VKY_TEXT_MEMORY',2))))
  1576m00ED97:                                           sta         CursorPointer
  1577m00ED9A:                                           lda         #>(loword(val(copy('#VKY_TEXT_MEMORY',2))))
  1578m00ED9C:                                           sta         (CursorPointer)+1
  1580m00ED9E:                                           lda         #VKY_TEXT_MEMORY
  1581m00EDA0:                                           sta         CursorPointer
  1582m00EDA3:                                           lda         #VKY_TEXT_MEMORY+1
  1583m00EDA5:                                           sta         CursorPointer+1
  1586 00EDA8:                                           rts
  1587 00EDA9                                            option      showallbytes=1
show all listing bytes enabled
  1588 00EDA9:                           COLODORE_PALETTE hex        00 00 00 00 FF FF FF 00 38 33 81 00 C8 CE 75 00 , 97 3C 8E 00 4D AC 56 00 9B 2C 2E 00 71 F1 ED 00 , 29 50 8E 00 00 38 55 00 71 6C C4 00 4A 4A 4A 00 , 7B 7B 7B 00 9F FF A9 00 EB 6D 70 00 B2 B2 B2 00  [size=64/$40/"@"]
  1589 00EDE9                                            option      showallbytes=0
show all listing bytes disabled
  1590 00EDE9                                            endproc
end scope Init_Graphics, restore scope  <<global symbols>>
  1591 00EDE9
  1592 00EDE9                                            proc        Init_CODEC
open scope Init_CODEC, from scope  <<global symbols>>
  1593 00EDE9:                                           lda         #%0.0.000.0.0.0.0
  1594 00EDEB:                                           ldy         #%0001101.0
  1595 00EDED:                                           jsr         WriteCodecWait
  1596 00EDF0:                                           lda         #%0000.0011
  1597 00EDF2:                                           ldy         #%0010101.0
  1598 00EDF4:                                           jsr         WriteCodecWait
  1599 00EDF7:                                           lda         #%0.0.00.0001
  1600 00EDF9:                                           ldy         #%0010001.1
  1601 00EDFB:                                           jsr         WriteCodecWait
  1602 00EDFE:                                           lda         #%00000.111
  1603 00EE00:                                           ldy         #%0010110.0
  1604 00EE02:                                           jsr         WriteCodecWait
  1605 00EE05:                                           lda         #%00.00.0.0.10
  1606 00EE07:                                           ldy         #%0001010.0
  1607 00EE09:                                           jsr         WriteCodecWait
  1608 00EE0C:                                           lda         #%0.0.00.0.0.10
  1609 00EE0E:                                           ldy         #%0001011.0
  1610 00EE10:                                           jsr         WriteCodecWait
  1611 00EE13:                                           lda         #%0.100.0.101
  1612 00EE15:                                           ldy         #%0001100.0
  1613 00EE17:                                           jsr         WriteCodecWait
  1614 00EE1A:                                           rts
  1615 00EE1B
  1616 00EE1B                            WriteCodecWait
  1617 00EE1B:                                           sta         CODEC_LOW
  1618 00EE1E:                                           sty         CODEC_HI
  1619 00EE21:                                           lda         #1
  1620 00EE23:                                           sta         CODEC_CTRL
  1621 00EE26                            -
  1622 00EE26:                                           bit         CODEC_CTRL
  1623 00EE29:                                           bne         -
  1624 00EE2B:                                           rts
  1625 00EE2C                                            endproc
end scope Init_CODEC, restore scope  <<global symbols>>
  1626 00EE2C
  1627 00EE2C                                            proc        Init_Sound
open scope Init_Sound, from scope  <<global symbols>>
  1628 00EE2C:                                           jsr         Init_CODEC
  1629 00EE2F
  1630 00EE2F;                                                                                       ; intialize left and right PSG SN76489
  1631 00EE2F:                                           lda         #%1.00.1.1111                   ;mute channel 0
  1632 00EE31:                                           sta         PSG_INT_L_PORT
  1633 00EE34:                                           sta         PSG_INT_R_PORT
  1634 00EE37:                                           lda         #%1.01.1.1111                   ;mute channel 1
  1635 00EE39:                                           sta         PSG_INT_L_PORT
  1636 00EE3C:                                           sta         PSG_INT_R_PORT
  1637 00EE3F:                                           lda         #%1.10.1.1111                   ;mute channel 2
  1638 00EE41:                                           sta         PSG_INT_L_PORT
  1639 00EE44:                                           sta         PSG_INT_R_PORT
  1640 00EE47:                                           lda         #%1.11.1.1111                   ;mute channel 3
  1641 00EE49:                                           sta         PSG_INT_L_PORT
  1642 00EE4C:                                           sta         PSG_INT_R_PORT
  1643 00EE4F
  1644 00EE4F;                                                                                       ; initialize left and right SIDs
  1645 00EE4F:                                           ldx         #0
  1646 00EE51                            -
  1647 00EE51:                                           stz         SID_L_V1_FREQ_LO,x
  1648 00EE54:                                           stz         SID_R_V1_FREQ_LO,x
  1649 00EE57:                                           inx
  1650 00EE58:                                           cpx         #$20
  1651 00EE5A:                                           bne         -
  1652 00EE5C:                                           rts
  1653 00EE5D                                            endproc
end scope Init_Sound, restore scope  <<global symbols>>
  1654 00EE5D
  1655 00EE5D                                            proc        F256_RESET
open scope F256_RESET, from scope  <<global symbols>>
  1656 00EE5D:                                           clc
  1657 00EE5E:                                           sei                                         ; disable interrupts
  1658 00EE5F:                                           ldx         #$ff
  1659 00EE61:                                           txs                                         ; initialize stack
  1660 00EE62
  1661 00EE62;                                                                                       ; initialize mmu
  1662 00EE62:                                           stz         MMU_MEM_CTRL
  1663 00EE65:                                           lda         MMU_MEM_CTRL
                                                   [UnlockMMU	; enable mmu edit, edit mmu lut 0, activate mmu lut 0]
  1664 00EE68:                                           ora         #MMU_EDIT_EN
  1665 00EE6A:                                           sta         MMU_MEM_CTRL                    ; enable mmu edit, edit mmu lut 0, activate mmu lut 0 ;<<<="UnlockMMU	; enable mmu edit, edit mmu lut 0, activate mmu lut 0"
  1666 00EE6D:                                           stz         MMU_IO_CTRL                     ; enable i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO	; enable i/o at $d000, use page 0=i/o registers"
                                                   [SetMMUIO	; enable i/o at $d000, use page 0=i/o registers]
  1667 00EE70:                                           lda         #0
  1668 00EE72:                                           sta         MMU_MEM_BANK_0                  ; map $000000 to bank 0
  1669 00EE75:                                           inc
  1670 00EE76:                                           sta         MMU_MEM_BANK_1                  ; map $002000 to bank 1
  1671 00EE79:                                           inc
  1672 00EE7A:                                           sta         MMU_MEM_BANK_2                  ; map $004000 to bank 2
  1673 00EE7D:                                           inc
  1674 00EE7E:                                           sta         MMU_MEM_BANK_3                  ; map $006000 to bank 3
  1675 00EE81:                                           inc
  1676 00EE82:                                           sta         MMU_MEM_BANK_4                  ; map $008000 to bank 4
  1677 00EE85:                                           inc
  1678 00EE86:                                           sta         MMU_MEM_BANK_5                  ; map $00a000 to bank 5
  1679 00EE89:                                           inc
  1680 00EE8A:                                           sta         MMU_MEM_BANK_6                  ; map $00c000 to bank 6
  1681 00EE8D:                                           inc
  1682 00EE8E:                                           sta         MMU_MEM_BANK_7                  ; map $00e000 to bank 7
  1683 00EE91:                                           lda         MMU_MEM_CTRL
                                                   [LockMMU	; disable mmu edit, use mmu lut 0]
  1684 00EE94:                                           and         #~(MMU_EDIT_EN)
  1685 00EE96:                                           sta         MMU_MEM_CTRL                    ; disable mmu edit, use mmu lut 0 ;<<<="LockMMU	; disable mmu edit, use mmu lut 0"
  1686 00EE99
  1687 00EE99;                                                                                       ; initialize via registers
  1688 00EE99;                                                                                       ; reset via registers a/b
  1690 00EE99:                                           lda         #$ff
  1691 00EE9B:                                           sta         VIA_DDRB
  1692 00EE9E:                                           sta         VIA_DDRA
  1693 00EEA1:                                           sta         VIA_ORB_IRB
  1694 00EEA4:                                           sta         VIA_ORA_IRA
  1696 00EEA7:                                           stz         VIA_ORB_IRB                     ; set via i/o port a to read
  1697 00EEAA:                                           stz         VIA_ORA_IRA                     ; set via i/o port b to read
  1698 00EEAD
  1699 00EEAD;                                                                                       ; enable random number generator
  1700 00EEAD:                                           lda         #RNG_ENABLE
  1701 00EEAF:                                           sta         RNG_CTRL
  1702 00EEB2
  1703 00EEB2;                                                                                       ; initialize interrupts
  1704 00EEB2:                                           lda         #$ff                            ; mask off all interrupts
  1705 00EEB4:                                           sta         INT_EDGE_REG0
  1706 00EEB7:                                           sta         INT_EDGE_REG1
  1707 00EEBA:                                           sta         INT_MASK_REG0
  1708 00EEBD:                                           sta         INT_MASK_REG1
  1709 00EEC0
  1710 00EEC0:                                           lda         INT_PENDING_REG0                ; clear all existing interrupts
  1711 00EEC3:                                           sta         INT_PENDING_REG0
  1712 00EEC6:                                           lda         INT_PENDING_REG1
  1713 00EEC9:                                           sta         INT_PENDING_REG1
  1714 00EECC
  1715 00EECC:                                           jsr         Init_Sound
  1716 00EECF:                                           jsr         Init_Graphics
  1717 00EED2:                                           jsr         Init_Keyboard
  1718 00EED5:                                           cli
  1719 00EED6:                                           jmp         Main
  1720 00EED9                                            endproc
end scope F256_RESET, restore scope  <<global symbols>>
  1721 00EED9                                            endsection    [61144/$EED8]
  1722 00EED9
include source file 'f256jrlib.asm' successful
  1723 00EED9;                                                                                       ;include 'sid.asm'
  1724 00EED9
  1725 00EED9;                                                                                       ; main game framework stored with libary section
  1726 00EED9                                            section     'F256JRLIB'
current section: F256JRLIB, next free address: $00EED9
  1727 00EED9:                           SIDSpeed        resb        1
define data constant size=1, fill value 0/$00
  1728 00EEDA                                            proc        SOFIRQ                          ;	proc Increase_SOFCounter
open scope SOFIRQ, from scope  <<global symbols>>
  1729 00EEDA;                                                                                       ;	Increase_SOF_Counter()
  1730 00EEDA;                                                                                       ;	SID_Play_Frame()
  1731 00EEDA:                                           lda         #SIDMODE
  1732 00EEDC:                                           cmp         #6
  1733 00EEDE:                                           beq         +
  1734 00EEE0:                                           dec         SIDSpeed
  1735 00EEE3:                                           bne         +
  1736 00EEE5:                                           sta         SIDSpeed
  1737 00EEE8:                                           rts
  1738 00EEE9                            +
  1739 00EEE9:                                           jsr         SIDPLAY
  1740 00EEEC:                                           rts
  1741 00EEED                                            endproc
end scope SOFIRQ, restore scope  <<global symbols>>
  1742 00EEED
  1743 00EEED                                            proc        IRQ_Handler
open scope IRQ_Handler, from scope  <<global symbols>>
  1744 00EEED:                                           php
  1745 00EEEE:                                           pha
                                                   [PushAXY]
  1746 00EEEF:                                           phx
  1747 00EEF0:                                           phy                                         ;<<<="PushAXY"
  1748 00EEF1:                                           cld
  1749 00EEF2:                                           lda         MMU_MEM_CTRL
  1750 00EEF5:                                           pha
  1751 00EEF6:                                           lda         MMU_IO_CTRL
                                                   [PushMMUIO]
  1752 00EEF9:                                           pha                                         ;<<<="PushMMUIO"
  1753 00EEFA
  1754 00EEFA:                                           stz         MMU_IO_CTRL                     ; use i/o registers ;<<<="SetMMUIO	; use i/o registers"
                                                   [SetMMUIO	; use i/o registers]
  1755 00EEFD:                                           lda         INT_PENDING_REG0
  1756 00EF00:                                           sta         TempIRQ
  1757 00EF03:                                           bit         #JR0_INT00_SOF
  1758 00EF05:                                           beq         +
  1759 00EF07:                                           sta         INT_PENDING_REG0                ; clear irq
  1760 00EF0A:                                           jsr         SOFIRQ                          ;Increase_SOFCounter
  1761 00EF0D:                                           lda         TempIRQ
  1762 00EF10                            +
  1763 00EF10:                                           bit         #JR0_INT02_KBD
  1764 00EF12:                                           beq         +
  1765 00EF14:                                           sta         INT_PENDING_REG0                ; clear irq
  1766 00EF17:                                           jsr         KeyboardIRQ
  1767 00EF1A:                                           lda         TempIRQ
  1768 00EF1D                            +
  1769 00EF1D
  1770 00EF1D:                                           pla
                                                   [PullMMUIO]
  1771 00EF1E:                                           sta         MMU_IO_CTRL                     ;<<<="PullMMUIO"
  1772 00EF21:                                           pla
  1773 00EF22:                                           sta         MMU_MEM_CTRL
  1774 00EF25:                                           ply
                                                   [PullYXA]
  1775 00EF26:                                           plx
  1776 00EF27:                                           pla                                         ;<<<="PullYXA"
  1777 00EF28:                                           plp
  1778 00EF29:                                           rti
  1779 00EF2A                                            endproc
end scope IRQ_Handler, restore scope  <<global symbols>>
  1780 00EF2A
  1781 00EF2A                                            proc        Init_IRQHandler
open scope Init_IRQHandler, from scope  <<global symbols>>
  1782 00EF2A:                                           lda         MMU_IO_CTRL
                                                   [PushMMUIO]
  1783 00EF2D:                                           pha                                         ;<<<="PushMMUIO"
  1784 00EF2E:                                           stz         MMU_IO_CTRL                     ;<<<="SetMMUIO"
                                                   [SetMMUIO]
  1785 00EF31
  1786 00EF31:                                           sei
  1787 00EF32                                            AssignWord  (#IRQ_Handler,VECTOR_IRQ)
  1789m00EF32:                                           lda         #<(loword(val(copy('#IRQ_Handler',2))))
  1790m00EF34:                                           sta         VECTOR_IRQ
  1791m00EF37:                                           lda         #>(loword(val(copy('#IRQ_Handler',2))))
  1792m00EF39:                                           sta         (VECTOR_IRQ)+1
  1794m00EF3B:                                           lda         #IRQ_Handler
  1795m00EF3D:                                           sta         VECTOR_IRQ
  1796m00EF40:                                           lda         #IRQ_Handler+1
  1797m00EF42:                                           sta         VECTOR_IRQ+1
  1800 00EF45:                                           lda         #~(JR0_INT00_SOF|JR0_INT02_KBD)
  1801 00EF47:                                           sta         INT_MASK_REG0
  1802 00EF4A
  1803 00EF4A                                            AssignDWord (#0,SOFCounter)
  1805m00EF4A:                                           lda         #<(loword(val(copy('#0',2))))
  1806m00EF4C:                                           sta         SOFCounter
  1807m00EF4F:                                           lda         #>(loword(val(copy('#0',2))))
  1808m00EF51:                                           sta         (SOFCounter)+1
  1809m00EF53:                                           lda         #<(hiword(val(copy('#0',2))))
  1810m00EF55:                                           sta         (SOFCounter)+2
  1811m00EF57:                                           lda         #>(hiword(val(copy('#0',2))))
  1812m00EF59:                                           sta         (SOFCounter)+3
  1814m00EF5B:                                           lda         #0
  1815m00EF5D:                                           sta         SOFCounter
  1816m00EF60:                                           lda         #0+1
  1817m00EF62:                                           sta         SOFCounter+1
  1818m00EF65:                                           lda         #0+2
  1819m00EF67:                                           sta         SOFCounter+2
  1820m00EF6A:                                           lda         #0+3
  1821m00EF6C:                                           sta         SOFCounter+3
  1824 00EF6F:                                           cli
  1825 00EF70
  1826 00EF70:                                           pla
                                                   [PullMMUIO]
  1827 00EF71:                                           sta         MMU_IO_CTRL                     ;<<<="PullMMUIO"
  1828 00EF74:                                           rts
  1829 00EF75                                            endproc
end scope Init_IRQHandler, restore scope  <<global symbols>>
  1830 00EF75
  1831 00EF75                                            proc        Init_Audio
open scope Init_Audio, from scope  <<global symbols>>
  1832 00EF75:                                           lda         MMU_IO_CTRL
                                                   [PushMMUIO]
  1833 00EF78:                                           pha                                         ;<<<="PushMMUIO"
  1834 00EF79:                                           stz         MMU_IO_CTRL                     ;<<<="SetMMUIO"
                                                   [SetMMUIO]
  1835 00EF7C
  1836 00EF7C;                                                                                       ; init left and right sids
  1837 00EF7C;                                                                                       ;	stz SID_Control
  1838 00EF7C:                                           ldx         #0
  1839 00EF7E                            -
  1840 00EF7E:                                           stz         SID_LEFT,x
  1841 00EF81:                                           stz         SID_RIGHT,x
  1842 00EF84:                                           inx
  1843 00EF85:                                           cpx         #32
  1844 00EF87:                                           bne         -
  1845 00EF89
  1846 00EF89:                                           pla
                                                   [PullMMUIO]
  1847 00EF8A:                                           sta         MMU_IO_CTRL                     ;<<<="PullMMUIO"
  1848 00EF8D:                                           rts
  1849 00EF8E                                            endproc
end scope Init_Audio, restore scope  <<global symbols>>
  1850 00EF8E
  1851 00EF8E                                            proc        Init_GameFont
open scope Init_GameFont, from scope  <<global symbols>>
  1852 00EF8E:                                           lda         MMU_IO_CTRL
                                                   [PushMMUIO]
  1853 00EF91:                                           pha                                         ;<<<="PushMMUIO"
  1854 00EF92:                                           stz         MMU_IO_CTRL                     ;<<<="SetMMUIO"
                                                   [SetMMUIO]
  1855 00EF95
  1856 00EF95:                                           lda         #MMU_IO_PAGE_1
                                                   [SetMMUGFX]
  1857 00EF97:                                           sta         MMU_IO_CTRL                     ;<<<="SetMMUGFX"
  1858 00EF9A                                            CopyMemSmall (FONT_FANTASY,FONT_MEM,sizeof(FONT_FANTASY))
  1859m00EF9A
open scope {scope#2}, from scope Init_GameFont
  1860m00EF9A
  1861m00EF9A;                                                                                       ;		AssignWord(FONT_FANTASY,.asrcaddr)
  1862m00EF9A:                                           lda         #<(FONT_FANTASY)
  1863m00EF9C:                                           sta         .srcaddr
  1864m00EF9F:                                           lda         #>(FONT_FANTASY)
  1865m00EFA1:                                           sta         .srcaddr+1
  1866m00EFA4;                                                                                       ;		AssignWord(FONT_MEM,.destaddr)
  1867m00EFA4:                                           lda         #<(FONT_MEM)
  1868m00EFA6:                                           sta         .destaddr
  1869m00EFA9:                                           lda         #>(FONT_MEM)
  1870m00EFAB:                                           sta         .destaddr+1
  1871m00EFAE:                                           ldy         #0
  1872m00EFB0                            -
  1873m00EFB0                            .srcaddr        =           *+1  [61361/$EFB1]
  1874m00EFB0:                                           lda         $1234
  1875m00EFB3                            .destaddr       =           *+1  [61364/$EFB4]
  1876m00EFB3:                                           sta         $4321
  1877m00EFB6:                                           inc         .srcaddr
  1878m00EFB9:                                           bne         +
  1879m00EFBB:                                           inc         .srcaddr+1
  1880m00EFBE                            +
  1881m00EFBE:                                           inc         .destaddr
  1882m00EFC1:                                           bne         +
  1883m00EFC3:                                           inc         .destaddr+1
  1884m00EFC6                            +
  1885m00EFC6:                                           lda         .srcaddr
  1886m00EFC9:                                           cmp         #<(FONT_FANTASY+sizeof(FONT_FANTASY))
  1887m00EFCB:                                           bne         -
  1888m00EFCD:                                           lda         .srcaddr+1
  1889m00EFD0:                                           cmp         #>(FONT_FANTASY+sizeof(FONT_FANTASY))
  1890m00EFD2:                                           bne         -
  1891m00EFD4
end scope {scope#2}, restore scope ..Init_GameFont
  1892m00EFD4
  1894 00EFD4
  1895 00EFD4:                                           pla
                                                   [PullMMUIO]
  1896 00EFD5:                                           sta         MMU_IO_CTRL                     ;<<<="PullMMUIO"
  1897 00EFD8:                                           rts
  1898 00EFD9:                           FONT_FANTASY    incbin      'assets\gamefont2.bin'
including binary file 'assets\gamefont2.bin', 2048 bytes [=$000800]
  1899 00F7D9                                            endproc
end scope Init_GameFont, restore scope  <<global symbols>>
  1900 00F7D9
  1901 00F7D9                                            proc        Main
open scope Main, from scope  <<global symbols>>
  1902 00F7D9:                                           lda         #MMU_EDIT_EN
  1903 00F7DB:                                           sta         MMU_MEM_CTRL
  1904 00F7DE:                                           stz         MMU_IO_CTRL                     ;<<<="SetMMUIO"
                                                   [SetMMUIO]
  1905 00F7E1:                                           stz         MMU_MEM_CTRL
  1906 00F7E4
  1907 00F7E4:                                           lda         #(Mstr_Ctrl_Text_Mode_En|Mstr_Ctrl_Text_Overlay|Mstr_Ctrl_Graph_Mode_En|Mstr_Ctrl_Bitmap_En|Mstr_Ctrl_TileMap_En|Mstr_Ctrl_Sprite_En)
  1908 00F7E6:                                           sta         MASTER_CTRL_REG_L
  1909 00F7E9:                                           lda         #(Mstr_Ctrl_Text_XDouble|Mstr_Ctrl_Text_YDouble)
  1910 00F7EB:                                           sta         MASTER_CTRL_REG_H
  1911 00F7EE:                                           jsr         Init_GameFont
  1912 00F7F1:                                           jsr         Init_Audio
  1913 00F7F4:                                           jsr         Init_IRQHandler
  1914 00F7F7
  1915 00F7F7                                            SetCursorColor (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK) ;<<<="SetCursorColor(#DoC64COLOR(LTBLUE,BLACK))"
                                                   [SetCursorColor(#DoC64COLOR(LTBLUE,BLACK))]
  1916m00F7F7                                            ConvertParamToA (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK)
  1919m00F7F7:                                           txa
  1921m00F7F8:                                           tya
  1925m00F7F9:                                           lda         #(loword(val(copy('aaddr',2))))
  1926m00F7FB:                                           sta         adest
  1928m00F7FE:                                           lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK
  1932m00F800:                                           sta         CursorColor
  1934 00F803:                                           jsr         ClearScreen
  1935 00F806
  1936 00F806;                                                                                       ; map in title screen code as $06000
  1937 00F806;                                                                                       ;	lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL ;<<<=";	UnlockMMU"
                                                   [;	UnlockMMU]
  1938 00F806;                                                                                       ;	lda #(TitleScreenCode/$2000)
  1939 00F806;                                                                                       ;	sta MMU_MEM_BANK_3
  1940 00F806;                                                                                       ;	lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL ;<<<=";	LockMMU"
                                                   [;	LockMMU]
  1941 00F806;                                                                                       ;	jsr ShowTitle
  1942 00F806                                            PrintString (TX_GAMETITLE,#0,#0,#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)) ;<<<="PrintString(TX_GAMETITLE,#0,#0,#DoC64COLOR(YELLOW,BLACK)))"
                                                   [PrintString(TX_GAMETITLE,#0,#0,#DoC64COLOR(YELLOW,BLACK)))]
  1944m00F806:                                           pha
                                                   [=		pha : phx : phy ;<<<="PushAXY"]
  1945m00F807:                                           phx
  1946m00F808:                                           phy                                         ;<<<="pha : phx : phy" ;<<<="=		pha : phx : phy ;<<<="PushAXY""
  1949m00F809                                            SetCursorPointer (#0,#0)
  1950m00F809                                            ConvertParamToA (#0)
  1953m00F809:                                           txa
  1955m00F80A:                                           tya
  1959m00F80B:                                           lda         #(loword(val(copy('aaddr',2))))
  1960m00F80D:                                           sta         adest
  1962m00F810:                                           lda         #0
  1966m00F812:                                           sta         CursorColumn
  1967m00F815                                            ConvertParamToA (#0)
  1970m00F815:                                           txa
  1972m00F816:                                           tya
  1976m00F817:                                           lda         #(loword(val(copy('aaddr',2))))
  1977m00F819:                                           sta         adest
  1979m00F81C:                                           lda         #0
  1983m00F81E:                                           sta         CursorLine
  1984m00F821
  1986m00F821:                                           lda         #<(VKY_TEXT_MEMORY+val(copy('#0',2))*40)
  1987m00F823:                                           sta         CursorPointer
  1988m00F826:                                           lda         #>(VKY_TEXT_MEMORY+val(copy('#0',2))*40)
  1989m00F828:                                           sta         CursorPointer+1
  1991m00F82B;                                                                                       ; not done yet
  1996m00F82B                                            SetCursorColor (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  1997m00F82B                                            ConvertParamToA (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  2000m00F82B:                                           txa
  2002m00F82C:                                           tya
  2006m00F82D:                                           lda         #(loword(val(copy('aaddr',2))))
  2007m00F82F:                                           sta         adest
  2009m00F832:                                           lda         #(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)
  2013m00F834:                                           sta         CursorColor
  2017m00F837                                            var         @newtext = *  [63543/$F837]
*** error in statement #2017: invalid directive - 'TEXT_BANK'
  2018m00F837:                                           bytez       TX_GAMETITLE  [size=2/$02]
  2019m00F839                                            endsection    [63544/$F838]
  2020m00F839:                                           lda         #<(@newtext)
  2021m00F83B:                                           sta         TempSrc
  2022m00F83E:                                           lda         #>(@newtext)
  2023m00F840:                                           sta         TempSrc+1
  2025m00F843:                                           lda         #<TX_GAMETITLE
  2026m00F845:                                           sta         TempSrc
  2027m00F848:                                           lda         #>TX_GAMETITLE
  2028m00F84A:                                           sta         TempSrc+1
  2030m00F84D:                                           jsr         PrintAnsiString
  2032m00F850:                                           ply
                                                   [=		ply : plx : pla ;<<<="PullYXA"]
  2033m00F851:                                           plx
  2034m00F852:                                           pla                                         ;<<<="ply : plx : pla" ;<<<="=		ply : plx : pla ;<<<="PullYXA""
  2037 00F853;                                                                                       ;	inc SID_Control
  2038 00F853;                                                                                       ;	SID_Initialize(0,0)
  2039 00F853;                                                                                       ;
  2040 00F853;                                                                                       ;// choose setting
  2041 00F853;                                                                                       ;poke 54299,2 (overdrive)
  2042 00F853;                                                                                       ;poke 54299,3 (filters)
  2043 00F853;                                                                                       ;poke 54299,4 (smoothing)
  2044 00F853;                                                                                       ;
  2045 00F853;                                                                                       ;// choose value
  2046 00F853;                                                                                       ;// overdrive: 0 (medium) 1 (high) 2 (low)
  2047 00F853;                                                                                       ;// filters:   0 (blend)  1 (8580) 2 (6581)
  2048 00F853;                                                                                       ;// smoothing: 0 (neat)   1 (soft) 2 (rough)
  2049 00F853;                                                                                       ;poke 54300,0/1/2 (setting)
  2050 00F853;                                                                                       ;
  2051 00F853;                                                                                       ;// apply setting
  2052 00F853;                                                                                       ;poke 54301,181:poke 54302,29
  2053 00F853:                                           lda         #2
  2054 00F855:                                           sta         54299                           ; $d41b
  2055 00F858:                                           lda         #1
  2056 00F85A:                                           sta         54300                           ; $d41c
  2057 00F85D:                                           lda         #181
  2058 00F85F:                                           sta         54301                           ; $d41d
  2059 00F862:                                           lda         #29
  2060 00F864:                                           sta         54302                           ; $d41e
  2061 00F867
  2062 00F867:                                           lda         #3
  2063 00F869:                                           sta         54299                           ; $d41b
  2064 00F86C:                                           lda         #1
  2065 00F86E:                                           sta         54300                           ; $d41c
  2066 00F871:                                           lda         #181
  2067 00F873:                                           sta         54301                           ; $d41d
  2068 00F876:                                           lda         #29
  2069 00F878:                                           sta         54302                           ; $d41e
  2070 00F87B
  2071 00F87B:                                           stz         MMU_IO_CTRL                     ;<<<="SetMMUIO"
                                                   [SetMMUIO]
  2072 00F87E:                                           lda         #1
  2073 00F880:                                           sta         SIDSpeed
  2074 00F883:                                           lda         #0
  2075 00F885:                                           jsr         SIDINIT
  2076 00F888;                                                                                       ;	SID_Initialize(0,0)
  2077 00F888;                                                                                       ;	SID_SetVolume(-1)
  2078 00F888;                                                                                       ;	SID_Play()
  2079 00F888:                                           stz         MMU_IO_CTRL                     ;<<<="SetMMUIO"
                                                   [SetMMUIO]
  2080 00F88B                            -
  2081 00F88B:                                           jmp         -
  2082 00F88E
  2083 00F88E:                           TX_GAMETITLE    bytez       SIDFILE  [size=2/$02]
  2084 00F890                                            endproc
end scope Main, restore scope  <<global symbols>>
  2085 00F890                                            endsection
  2086 00F890
  2087 000800                                            section     add('MAIN',$0800,$bfff,size=-1,save=1)
added section 'MAIN' $000800-00BFFF [-1 bytes]
current section: MAIN, next free address: $000800
  2088 000800
  2089 000800;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a000,SIDPLAY=$a003,SIDMODE=5,SIDFILE='toccata_v3.a000'
*** error in statement #2089: invalid parameter - pad address lower than current address
  2090 000800;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a048,SIDPLAY=$a021,SIDMODE=5,SIDFILE='viola_duet.a000'
  2091 000800;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Super_Mario_Bros_2SID'
  2092 000800;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='mrdo'
  2093 000800;                                                                                       ;const SIDSTART=$4000,SIDINIT=$4000,SIDPLAY=$4003,SIDMODE=5,SIDFILE='Airwolf_2SID'
  2094 000800;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Space_Oddity_2SID'
  2095 000800;                                                                                       ;const SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Girl_from_Tomorrow_2SID'
  2096 000800                                            const       SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Lakeside_2SID'  [4086/$0FF6,4086/$0FF6,4099/$1003,6/$06,"Lakeside_2SID"]
  2097 000800:                                           incbin      'music\'+SIDFILE+'.sid'
including binary file 'music\Lakeside_2SID.sid', 4139 bytes [=$00102B]
  2098 00182B
  2099 00182B                                            endsection    [6186/$182A]
  2100 00182B
  2101 00182B;                                                                                       ;savepgz
  2102 00182B                                            savebin     'wktitle.0800.bin',$0800 to $0ffff
  2103 00182B
pass 0 complete - 23:31:29 109 ms
 address range=$000001-00FFFF, checksum=00000000

pass 1 - 23:31:29
     1 000000                                            cpu         'f256jr'
current target cpu F256JR (primary), 0 statement(s), 0/0 code/data byte(s)
     2 000000                                            const       usesystemfont=0  [0/$00]
     3 000000
     4 000000                                            include     'includes\f256jr_registers.asm'
including source file 'includes\f256jr_registers.asm'
     5 000000;                                                                                       ;MMU Registers
     6 000000                            MMU_MEM_CTRL    =           $0000  [0/$00]                  ; MMU Memory Control Register
     7 000000                            MMU_EDIT_EN     =           $80  [128/$80/"?"]
     8 000000                            MMU_IO_CTRL     =           $0001  [1/$01]                  ; MMU I/O Control Register
     9 000000                            MMU_IO_PAGE_0   =           $00  [0/$00]
    10 000000                            MMU_IO_PAGE_1   =           $01  [1/$01]
    11 000000                            MMU_IO_TEXT     =           $02  [2/$02]
    12 000000                            MMU_IO_COLOR    =           $03  [3/$03]
    13 000000                            MMU_MEM_BANK_0  =           $0008  [8/$08]                  ; MMU Edit Register for bank 0 ($0000 - $1FFF)
    14 000000                            MMU_MEM_BANK_1  =           $0009  [9/$09]                  ; MMU Edit Register for bank 1 ($2000 - $3FFF)
    15 000000                            MMU_MEM_BANK_2  =           $000A  [10/$0A]                 ; MMU Edit Register for bank 2 ($4000 - $5FFF)
    16 000000                            MMU_MEM_BANK_3  =           $000B  [11/$0B]                 ; MMU Edit Register for bank 3 ($6000 - $7FFF)
    17 000000                            MMU_MEM_BANK_4  =           $000C  [12/$0C]                 ; MMU Edit Register for bank 4 ($8000 - $9FFF)
    18 000000                            MMU_MEM_BANK_5  =           $000D  [13/$0D]                 ; MMU Edit Register for bank 5 ($A000 - $BFFF)
    19 000000                            MMU_MEM_BANK_6  =           $000E  [14/$0E]                 ; MMU Edit Register for bank 6 ($C000 - $DFFF)
    20 000000                            MMU_MEM_BANK_7  =           $000F  [15/$0F]                 ; MMU Edit Register for bank 7 ($E000 - $FFFF)
    21 000000
    22 000000;                                                                                       ;SDCard_Controller_def.asm
    23 000000
    24 000000;                                                                                       ;SDC_VERSION_REG         = $DD00    ; Ought to read 12
    25 000000;                                                                                       ;SDC_CONTROL_REG         = $DD01    ; Bit0 1 = Reset core logic, and registers. Self clearing
    26 000000;                                                                                       ;SDC_TRANS_TYPE_REG      = $DD02  ; Bit[1:0]
    27 000000;                                                                                       ;SDC_TRANS_DIRECT      = $00   ; 00 = Direct Access
    28 000000;                                                                                       ;SDC_TRANS_INIT_SD     = $01   ; 01 = Init SD
    29 000000;                                                                                       ;SDC_TRANS_READ_BLK    = $02   ; 10 = RW_READ_BLOCK (512 Bytes)
    30 000000;                                                                                       ;SDC_TRANS_WRITE_BLK   = $03   ; 11 = RW_WRITE_SD_BLOCK
    31 000000;                                                                                       ;SDC_TRANS_CONTROL_REG   = $DD03
    32 000000;                                                                                       ;SDC_TRANS_START         = $01
    33 000000;                                                                                       ;SDC_TRANS_STATUS_REG    = $DD04
    34 000000;                                                                                       ;SDC_TRANS_BUSY          = $01     ;  1= Transaction Busy
    35 000000;                                                                                       ;SDC_TRANS_ERROR_REG     = $DD05
    36 000000;                                                                                       ;SDC_TRANS_INIT_NO_ERR   = $00   ; Init Error Report [1:0]
    37 000000;                                                                                       ;SDC_TRANS_INIT_CMD0_ERR = $01
    38 000000;                                                                                       ;SDC_TRANS_INIT_CMD1_ERR = $02
    39 000000;                                                                                       ;SDC_TRANS_RD_NO_ERR     = $00   ; Read Error Report [3:2]
    40 000000;                                                                                       ;SDC_TRANS_RD_CMD_ERR    = $04
    41 000000;                                                                                       ;SDC_TRANS_RD_TOKEN_ERR  = $08
    42 000000;                                                                                       ;SDC_TRANS_WR_NO_ERR     = $00   ; Write Report Error  [5:4]
    43 000000;                                                                                       ;SDC_TRANS_WR_CMD_ERR    = $10   ;
    44 000000;                                                                                       ;SDC_TRANS_WR_DATA_ERR   = $20
    45 000000;                                                                                       ;SDC_TRANS_WR_BUSY_ERR   = $30
    46 000000;                                                                                       ;SDC_DIRECT_ACCESS_REG   = $DD06 ; SPI Direct Read and Write - Set DATA before initiating direct Access Transaction
    47 000000;                                                                                       ;SDC_SD_ADDR_7_0_REG     = $DD07 ; Set the ADDR before a block read or block write
    48 000000;                                                                                       ;SDC_SD_ADDR_15_8_REG    = $DD08 ; Addr0 [8:0] Always should be 0, since each block is 512Bytes
    49 000000;                                                                                       ;SDC_SD_ADDR_23_16_REG   = $DD09
    50 000000;                                                                                       ;SDC_SD_ADDR_31_24_REG   = $DD0A
    51 000000;                                                                                       ;SDC_SPI_CLK_DEL_REG     = $DD0B
    52 000000;                                                                                       ;SDC_RX_FIFO_DATA_REG    = $DD10 ; Data from the Block Read
    53 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_HI = $DD12 ; How many Bytes in the FIFO HI
    54 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_LO = $DD13 ; How many Bytes in the FIFO LO
    55 000000;                                                                                       ;SDC_RX_FIFO_CTRL_REG    = $DD14 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    56 000000;                                                                                       ;SDC_TX_FIFO_DATA_REG    = $DD20 ; Write Data Block here
    57 000000;                                                                                       ;SDC_TX_FIFO_CTRL_REG    = $DD24 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    58 000000
    59 000000
    60 000000;                                                                                       ;interrupt_def.asm
    61 000000
    62 000000                            INT_PENDING_REG0 =          $D660  [54880/$D660]            ;
    63 000000                            INT_PENDING_REG1 =          $D661  [54881/$D661]            ;
    64 000000;                                                                                       ;INT_PENDING_REG2 = $D662 ; NOT USED
    65 000000;                                                                                       ;INT_PENDING_REG3 = $D663 ; NOT USED
    66 000000                            INT_POL_REG0    =           $D664  [54884/$D664]            ;
    67 000000                            INT_POL_REG1    =           $D665  [54885/$D665]            ;
    68 000000;                                                                                       ;INT_POL_REG2     = $D666 ;  NOT USED
    69 000000;                                                                                       ;INT_POL_REG3     = $D667 ; NOT USED
    70 000000                            INT_EDGE_REG0   =           $D668  [54888/$D668]            ;
    71 000000                            INT_EDGE_REG1   =           $D669  [54889/$D669]            ;
    72 000000;                                                                                       ;INT_EDGE_REG2    = $D66A ; NOT USED
    73 000000;                                                                                       ;INT_EDGE_REG3    = $D66B ; NOT USED
    74 000000                            INT_MASK_REG0   =           $D66C  [54892/$D66C]            ;
    75 000000                            INT_MASK_REG1   =           $D66D  [54893/$D66D]            ;
    76 000000;                                                                                       ;INT_MASK_REG2    = $D66E ; NOT USED
    77 000000;                                                                                       ;INT_MASK_REG3    = $D66F ; NOT USED
    78 000000                            JR0_INT00_SOF   =           $01  [1/$01]                    ;Start of Frame @ 60FPS
    79 000000                            JR0_INT01_SOL   =           $02  [2/$02]                    ;Start of Line (Programmable)
    80 000000                            JR0_INT02_KBD   =           $04  [4/$04]                    ;
    81 000000                            JR0_INT03_MOUSE =           $08  [8/$08]                    ;
    82 000000                            JR0_INT04_TMR0  =           $10  [16/$10]                   ;
    83 000000                            JR0_INT05_TMR1  =           $20  [32/$20/" "]               ;Real-Time Clock Interrupt
    84 000000                            JR0_INT06_DMA   =           $40  [64/$40/"@"]               ;Floppy Disk Controller
    85 000000                            JR0_INT07_TBD   =           $80  [128/$80/"?"]              ; Mouse Interrupt (INT12 in SuperIO IOspace)
    86 000000                            JR1_INT00_UART  =           $01  [1/$01]                    ;Keyboard Interrupt
    87 000000                            JR1_INT01_COL0  =           $02  [2/$02]                    ;TYVKY Collision TBD
    88 000000                            JR1_INT02_COL1  =           $04  [4/$04]                    ;TYVKY Collision TBD
    89 000000                            JR1_INT03_COL2  =           $08  [8/$08]                    ;TYVKY Collision TBD
    90 000000                            JR1_INT04_RTC   =           $10  [16/$10]                   ;Serial Port 1
    91 000000                            JR1_INT05_VIA   =           $20  [32/$20/" "]               ;Midi Controller Interrupt
    92 000000                            JR1_INT06_IEC   =           $40  [64/$40/"@"]               ;Parallel Port
    93 000000                            JR1_INT07_SDCARD =          $80  [128/$80/"?"]              ;SDCard Insert
    94 000000
    95 000000
    96 000000;                                                                                       ;RTC_def.asm
    97 000000
    98 000000;                                                                                       ;RTC_SEC       = $D690 ;Seconds Register
    99 000000;                                                                                       ;RTC_SEC_ALARM = $D691 ;Seconds Alarm Register
   100 000000;                                                                                       ;RTC_MIN       = $D692 ;Minutes Register
   101 000000;                                                                                       ;RTC_MIN_ALARM = $D693 ;Minutes Alarm Register
   102 000000;                                                                                       ;RTC_HRS       = $D694 ;Hours Register
   103 000000;                                                                                       ;RTC_HRS_ALARM = $D695 ;Hours Alarm Register
   104 000000;                                                                                       ;RTC_DAY       = $D696 ;Day Register
   105 000000;                                                                                       ;RTC_DAY_ALARM = $D697 ;Day Alarm Register
   106 000000;                                                                                       ;RTC_DOW       = $D698 ;Day of Week Register
   107 000000;                                                                                       ;RTC_MONTH     = $D699 ;Month Register
   108 000000;                                                                                       ;RTC_YEAR      = $D69A ;Year Register
   109 000000;                                                                                       ;RTC_RATES     = $D69B ;Rates Register
   110 000000;                                                                                       ;RTC_ENABLE    = $D69C ;Enables Register
   111 000000;                                                                                       ;RTC_FLAGS     = $D69D ;Flags Register
   112 000000;                                                                                       ;RTC_CTRL      = $D69E ;Control Register
   113 000000;                                                                                       ;RTC_CENTURY   = $D69F ;Century Register
   114 000000
   115 000000
   116 000000;                                                                                       ;VIA_def.asm
   117 000000
   118 000000                            VIA_ORB_IRB     =           $DC00  [56320/$DC00]            ;Output/Input Register Port B
   119 000000                            VIA_ORA_IRA     =           $DC01  [56321/$DC01]            ;Output/Input Register Port B
   120 000000                            VIA_DDRB        =           $DC02  [56322/$DC02]            ;Data Direction Port B
   121 000000                            VIA_DDRA        =           $DC03  [56323/$DC03]            ;Data Direction Port A
   122 000000                            VIA_T1CL        =           $DC04  [56324/$DC04]            ;T1C-L
   123 000000                            VIA_T1CH        =           $DC05  [56325/$DC05]            ;T1C-H
   124 000000                            VIA_T1LL        =           $DC06  [56326/$DC06]            ;T1L-L
   125 000000                            VIA_T1LH        =           $DC07  [56327/$DC07]            ;T1L-H
   126 000000                            VIA_T2CL        =           $DC08  [56328/$DC08]            ;T2C-L
   127 000000                            VIA_T2CH        =           $DC09  [56329/$DC09]            ;T2C-H
   128 000000                            VIA_SR          =           $DC0A  [56330/$DC0A]            ;SR
   129 000000                            VIA_ACR         =           $DC0B  [56331/$DC0B]            ;ACR
   130 000000                            VIA_PCR         =           $DC0C  [56332/$DC0C]            ;PCR
   131 000000                            VIA_IFR         =           $DC0D  [56333/$DC0D]            ;IFR
   132 000000                            VIA_IER         =           $DC0E  [56334/$DC0E]            ;IER
   133 000000                            VIA_ORA_IRA_AUX =           $DC0F  [56335/$DC0F]            ;ORA/IRA
   134 000000                            JOY_UP          =           $01  [1/$01]
   135 000000                            JOY_DWN         =           $02  [2/$02]
   136 000000                            JOY_LFT         =           $04  [4/$04]
   137 000000                            JOY_RGT         =           $08  [8/$08]
   138 000000                            JOY_BUT0        =           $10  [16/$10]
   139 000000                            JOY_BUT1        =           $20  [32/$20/" "]
   140 000000                            JOY_BUT2        =           $40  [64/$40/"@"]
   141 000000;                                                                                       ;JOYA_UP         = $01
   142 000000;                                                                                       ;JOYA_DWN        = $02
   143 000000;                                                                                       ;JOYA_LFT        = $04
   144 000000;                                                                                       ;JOYA_RGT        = $08
   145 000000;                                                                                       ;JOYA_BUT0       = $10
   146 000000;                                                                                       ;JOYA_BUT1       = $20
   147 000000;                                                                                       ;JOYA_BUT2       = $40
   148 000000;                                                                                       ;JOYB_UP         = $01
   149 000000;                                                                                       ;JOYB_DWN        = $02
   150 000000;                                                                                       ;JOYB_LFT        = $04
   151 000000;                                                                                       ;JOYB_RGT        = $08
   152 000000;                                                                                       ;JOYB_BUT0       = $10
   153 000000;                                                                                       ;JOYB_BUT1       = $20
   154 000000;                                                                                       ;JOYB_BUT2       = $40
   155 000000
   156 000000
   157 000000;                                                                                       ;Simple_UART_Jr_def.asm
   158 000000
   159 000000;                                                                                       ;UART_TRHB 	= $D630        ; Transmit/Receive Hold Buffer
   160 000000;                                                                                       ;UART_DLL 	= $D630        ; Divisor Latch Low Byte
   161 000000;                                                                                       ;UART_DLH 	= $D631        ; Divisor Latch High Byte
   162 000000;                                                                                       ;UART_IER 	= $D631        ; Interupt Enable Register
   163 000000;                                                                                       ;UART_FCR 	= $D632        ; FIFO Control Register
   164 000000;                                                                                       ;UART_IIR 	= $D632        ; Interupt Indentification Register
   165 000000;                                                                                       ;UART_LCR 	= $D633        ; Line Control Register
   166 000000;                                                                                       ;UART_MCR 	= $D634        ; Modem Control REgister
   167 000000;                                                                                       ;UART_LSR 	= $D635        ; Line Status Register
   168 000000;                                                                                       ;UART_MSR 	= $D636        ; Modem Status Register
   169 000000;                                                                                       ;UART_SR 	= $D637        ; Scratch Register
   170 000000;                                                                                       ;UINT_LOW_POWER = $20        ; Enable Low Power Mode (16750)
   171 000000;                                                                                       ;UINT_SLEEP_MODE = $10       ; Enable Sleep Mode (16750)
   172 000000;                                                                                       ;UINT_MODEM_STATUS = $08     ; Enable Modem Status Interrupt
   173 000000;                                                                                       ;UINT_LINE_STATUS = $04      ; Enable Receiver Line Status Interupt
   174 000000;                                                                                       ;UINT_THR_EMPTY = $02        ; Enable Transmit Holding Register Empty interrupt
   175 000000;                                                                                       ;UINT_DATA_AVAIL = $01       ; Enable Recieve Data Available interupt
   176 000000;                                                                                       ;IIR_FIFO_ENABLED = $80      ; FIFO is enabled
   177 000000;                                                                                       ;IIR_FIFO_NONFUNC = $40      ; FIFO is not functioning
   178 000000;                                                                                       ;IIR_FIFO_64BYTE = $20       ; 64 byte FIFO enabled (16750)
   179 000000;                                                                                       ;IIR_MODEM_STATUS = $00      ; Modem Status Interrupt
   180 000000;                                                                                       ;IIR_THR_EMPTY = $02         ; Transmit Holding Register Empty Interrupt
   181 000000;                                                                                       ;IIR_DATA_AVAIL = $04        ; Data Available Interrupt
   182 000000;                                                                                       ;IIR_LINE_STATUS = $06       ; Line Status Interrupt
   183 000000;                                                                                       ;IIR_TIMEOUT = $0C           ; Time-out Interrupt (16550 and later)
   184 000000;                                                                                       ;IIR_INTERRUPT_PENDING = $01 ; Interrupt Pending Flag
   185 000000;                                                                                       ;LCR_DLB = $80               ; Divisor Latch Access Bit
   186 000000;                                                                                       ;LCR_SBE = $60               ; Set Break Enable
   187 000000;                                                                                       ;LCR_PARITY_NONE = $00       ; Parity: None
   188 000000;                                                                                       ;LCR_PARITY_ODD = $08        ; Parity: Odd
   189 000000;                                                                                       ;LCR_PARITY_EVEN = $18       ; Parity: Even
   190 000000;                                                                                       ;LCR_PARITY_MARK = $28       ; Parity: Mark
   191 000000;                                                                                       ;LCR_PARITY_SPACE = $38      ; Parity: Space
   192 000000;                                                                                       ;LCR_STOPBIT_1 = $00         ; One Stop Bit
   193 000000;                                                                                       ;LCR_STOPBIT_2 = $04         ; 1.5 or 2 Stop Bits
   194 000000;                                                                                       ;LCR_DATABITS_5 = $00        ; Data Bits: 5
   195 000000;                                                                                       ;LCR_DATABITS_6 = $01        ; Data Bits: 6
   196 000000;                                                                                       ;LCR_DATABITS_7 = $02        ; Data Bits: 7
   197 000000;                                                                                       ;LCR_DATABITS_8 = $03        ; Data Bits: 8
   198 000000;                                                                                       ;LSR_ERR_RECIEVE = $80       ; Error in Received FIFO
   199 000000;                                                                                       ;LSR_XMIT_DONE = $40         ; All data has been transmitted
   200 000000;                                                                                       ;LSR_XMIT_EMPTY = $20        ; Empty transmit holding register
   201 000000;                                                                                       ;LSR_BREAK_INT = $10         ; Break interrupt
   202 000000;                                                                                       ;LSR_ERR_FRAME = $08         ; Framing error
   203 000000;                                                                                       ;LSR_ERR_PARITY = $04        ; Parity error
   204 000000;                                                                                       ;LSR_ERR_OVERRUN = $02       ; Overrun error
   205 000000;                                                                                       ;LSR_DATA_AVAIL = $01        ; Data is ready in the receive buffer
   206 000000
   207 000000
   208 000000;                                                                                       ;TinyVicky_Def.asm
   209 000000
   210 000000                            MASTER_CTRL_REG_L =         $D000  [53248/$D000]
   211 000000                            Mstr_Ctrl_Text_Mode_En =    $01  [1/$01]                    ; Enable the Text Mode
   212 000000                            Mstr_Ctrl_Text_Overlay =    $02  [2/$02]                    ; Enable the Overlay of the text mode on top of Graphic Mode (the Background Color is ignored)
   213 000000                            Mstr_Ctrl_Graph_Mode_En =   $04  [4/$04]                    ; Enable the Graphic Mode
   214 000000                            Mstr_Ctrl_Bitmap_En =       $08  [8/$08]                    ; Enable the Bitmap Module In Vicky
   215 000000                            Mstr_Ctrl_TileMap_En =      $10  [16/$10]                   ; Enable the Tile Module in Vicky
   216 000000                            Mstr_Ctrl_Sprite_En =       $20  [32/$20/" "]               ; Enable the Sprite Module in Vicky
   217 000000                            Mstr_Ctrl_GAMMA_En =        $40  [64/$40/"@"]               ; this Enable the GAMMA correction - The Analog and DVI have different color value, the GAMMA is great to correct the difference
   218 000000                            Mstr_Ctrl_Disable_Vid =     $80  [128/$80/"?"]              ; This will disable the Scanning of the Video hence giving 100% bandwith to the CPU
   219 000000                            MASTER_CTRL_REG_H =         $D001  [53249/$D001]
   220 000000                            Mstr_Ctrl_Video_Mode =      $01  [1/$01]                    ; 0 - 640x480@60Hz : 1 - 640x400@70hz (text mode) // 0 - 320x240@60hz : 1 - 320x200@70Hz (Graphic Mode & Text mode when Doubling = 1)
   221 000000                            Mstr_Ctrl_Text_XDouble =    $02  [2/$02]                    ; X Pixel Doubling
   222 000000                            Mstr_Ctrl_Text_YDouble =    $04  [4/$04]                    ; Y Pixel Doubling
   223 000000                            LAYER_CTRL_REG_0 =          $D002  [53250/$D002]
   224 000000                            LAYER_CTRL_REG_1 =          $D003  [53251/$D003]
   225 000000                            BORDER_CTRL_REG =           $D004  [53252/$D004]            ; Bit[0] - Enable (1 by default)  Bit[4..6]: X Scroll Offset ( Will scroll Left) (Acceptable Value: 0..7)
   226 000000                            Border_Ctrl_Enable =        $01  [1/$01]
   227 000000                            BORDER_COLOR_B  =           $D005  [53253/$D005]
   228 000000                            BORDER_COLOR_G  =           $D006  [53254/$D006]
   229 000000                            BORDER_COLOR_R  =           $D007  [53255/$D007]
   230 000000                            BORDER_X_SIZE   =           $D008  [53256/$D008]            ; X-  Values: 0 - 32 (Default: 32)
   231 000000                            BORDER_Y_SIZE   =           $D009  [53257/$D009]            ; Y- Values 0 -32 (Default: 32)
   232 000000;                                                                                       ;VKY_RESERVED_02         = $D00A
   233 000000;                                                                                       ;VKY_RESERVED_03         = $D00B
   234 000000;                                                                                       ;VKY_RESERVED_04         = $D00C
   235 000000                            BACKGROUND_COLOR_B =        $D00D  [53261/$D00D]            ; When in Graphic Mode, if a pixel is "0" then the Background pixel is chosen
   236 000000                            BACKGROUND_COLOR_G =        $D00E  [53262/$D00E]
   237 000000                            BACKGROUND_COLOR_R =        $D00F  [53263/$D00F]            ;
   238 000000                            VKY_TXT_CURSOR_CTRL_REG =   $D010  [53264/$D010]            ;[0]  Enable Text Mode
   239 000000                            Vky_Cursor_Enable =         $01  [1/$01]
   240 000000                            Vky_Cursor_Flash_Rate0 =    $02  [2/$02]
   241 000000                            Vky_Cursor_Flash_Rate1 =    $04  [4/$04]
   242 000000                            VKY_TXT_START_ADD_PTR =     $D011  [53265/$D011]            ; This is an offset to change the Starting address of the Text Mode Buffer (in x)
   243 000000                            VKY_TXT_CURSOR_CHAR_REG =   $D012  [53266/$D012]
   244 000000                            VKY_TXT_CURSOR_COLR_REG =   $D013  [53267/$D013]
   245 000000                            VKY_TXT_CURSOR_X_REG_L =    $D014  [53268/$D014]
   246 000000                            VKY_TXT_CURSOR_X_REG_H =    $D015  [53269/$D015]
   247 000000                            VKY_TXT_CURSOR_Y_REG_L =    $D016  [53270/$D016]
   248 000000                            VKY_TXT_CURSOR_Y_REG_H =    $D017  [53271/$D017]
   249 000000                            VKY_LINE_IRQ_CTRL_REG =     $D018  [53272/$D018]            ;[0] - Enable Line 0 - WRITE ONLY
   250 000000                            VKY_LINE_CMP_VALUE_LO =     $D019  [53273/$D019]            ;Write Only [7:0]
   251 000000                            VKY_LINE_CMP_VALUE_HI =     $D01A  [53274/$D01A]            ;Write Only [3:0]
   252 000000                            VKY_PIXEL_X_POS_LO =        $D018  [53272/$D018]            ; This is Where on the video line is the Pixel
   253 000000                            VKY_PIXEL_X_POS_HI =        $D019  [53273/$D019]            ; Or what pixel is being displayed when the register is read
   254 000000                            VKY_LINE_Y_POS_LO =         $D01A  [53274/$D01A]            ; This is the Line Value of the Raster
   255 000000                            VKY_LINE_Y_POS_HI =         $D01B  [53275/$D01B]            ;
   256 000000                            TyVKY_BM0_CTRL_REG =        $D100  [53504/$D100]
   257 000000                            BM0_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   258 000000                            BM0_LUT0        =           $02  [2/$02]                    ; LUT0
   259 000000                            BM0_LUT1        =           $04  [4/$04]                    ; LUT1
   260 000000                            TyVKY_BM0_START_ADDY_L =    $D101  [53505/$D101]
   261 000000                            TyVKY_BM0_START_ADDY_M =    $D102  [53506/$D102]
   262 000000                            TyVKY_BM0_START_ADDY_H =    $D103  [53507/$D103]
   263 000000                            TyVKY_BM1_CTRL_REG =        $D108  [53512/$D108]
   264 000000                            BM1_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   265 000000                            BM1_LUT0        =           $02  [2/$02]                    ; LUT0
   266 000000                            BM1_LUT1        =           $04  [4/$04]                    ; LUT1
   267 000000                            TyVKY_BM1_START_ADDY_L =    $D109  [53513/$D109]
   268 000000                            TyVKY_BM1_START_ADDY_M =    $D10A  [53514/$D10A]
   269 000000                            TyVKY_BM1_START_ADDY_H =    $D10B  [53515/$D10B]
   270 000000                            TyVKY_BM2_CTRL_REG =        $D110  [53520/$D110]
   271 000000                            BM2_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   272 000000                            BM2_LUT0        =           $02  [2/$02]                    ; LUT0
   273 000000                            BM2_LUT1        =           $04  [4/$04]                    ; LUT1
   274 000000                            BM2_LUT2        =           $08  [8/$08]                    ; LUT2
   275 000000                            TyVKY_BM2_START_ADDY_L =    $D111  [53521/$D111]
   276 000000                            TyVKY_BM2_START_ADDY_M =    $D112  [53522/$D112]
   277 000000                            TyVKY_BM2_START_ADDY_H =    $D113  [53523/$D113]
   278 000000                            TyVKY_TL_CTRL0  =           $D200  [53760/$D200]
   279 000000                            TILE_Enable     =           $01  [1/$01]
   280 000000                            TILE_LUT0       =           $02  [2/$02]
   281 000000                            TILE_LUT1       =           $04  [4/$04]
   282 000000                            TILE_LUT2       =           $08  [8/$08]
   283 000000                            TILE_SIZE       =           $10  [16/$10]                   ; 0 -> 16x16, 0 -> 8x8
   284 000000                            TL0_CONTROL_REG =           $D200  [53760/$D200]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   285 000000                            TL0_START_ADDY_L =          $D201  [53761/$D201]            ; Not USed right now - Starting Address to where is the MAP
   286 000000                            TL0_START_ADDY_M =          $D202  [53762/$D202]
   287 000000                            TL0_START_ADDY_H =          $D203  [53763/$D203]
   288 000000                            TL0_MAP_X_SIZE_L =          $D204  [53764/$D204]            ; The Size X of the Map
   289 000000                            TL0_MAP_X_SIZE_H =          $D205  [53765/$D205]
   290 000000                            TL0_MAP_Y_SIZE_L =          $D206  [53766/$D206]            ; The Size Y of the Map
   291 000000                            TL0_MAP_Y_SIZE_H =          $D207  [53767/$D207]
   292 000000                            TL0_MAP_X_POS_L =           $D208  [53768/$D208]            ; The Position X of the Map
   293 000000                            TL0_MAP_X_POS_H =           $D209  [53769/$D209]
   294 000000                            TL0_MAP_Y_POS_L =           $D20A  [53770/$D20A]            ; The Position Y of the Map
   295 000000                            TL0_MAP_Y_POS_H =           $D20B  [53771/$D20B]
   296 000000                            TL1_CONTROL_REG =           $D20C  [53772/$D20C]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   297 000000                            TL1_START_ADDY_L =          $D20D  [53773/$D20D]            ; Not USed right now - Starting Address to where is the MAP
   298 000000                            TL1_START_ADDY_M =          $D20E  [53774/$D20E]
   299 000000                            TL1_START_ADDY_H =          $D20F  [53775/$D20F]
   300 000000                            TL1_MAP_X_SIZE_L =          $D210  [53776/$D210]            ; The Size X of the Map
   301 000000                            TL1_MAP_X_SIZE_H =          $D211  [53777/$D211]
   302 000000                            TL1_MAP_Y_SIZE_L =          $D212  [53778/$D212]            ; The Size Y of the Map
   303 000000                            TL1_MAP_Y_SIZE_H =          $D213  [53779/$D213]
   304 000000                            TL1_MAP_X_POS_L =           $D214  [53780/$D214]            ; The Position X of the Map
   305 000000                            TL1_MAP_X_POS_H =           $D215  [53781/$D215]
   306 000000                            TL1_MAP_Y_POS_L =           $D216  [53782/$D216]            ; The Position Y of the Map
   307 000000                            TL1_MAP_Y_POS_H =           $D217  [53783/$D217]
   308 000000                            TL2_CONTROL_REG =           $D218  [53784/$D218]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   309 000000                            TL2_START_ADDY_L =          $D219  [53785/$D219]            ; Not USed right now - Starting Address to where is the MAP
   310 000000                            TL2_START_ADDY_M =          $D21A  [53786/$D21A]
   311 000000                            TL2_START_ADDY_H =          $D21B  [53787/$D21B]
   312 000000                            TL2_MAP_X_SIZE_L =          $D21C  [53788/$D21C]            ; The Size X of the Map
   313 000000                            TL2_MAP_X_SIZE_H =          $D21D  [53789/$D21D]
   314 000000                            TL2_MAP_Y_SIZE_L =          $D21E  [53790/$D21E]            ; The Size Y of the Map
   315 000000                            TL2_MAP_Y_SIZE_H =          $D21F  [53791/$D21F]
   316 000000                            TL2_MAP_X_POS_L =           $D220  [53792/$D220]            ; The Position X of the Map
   317 000000                            TL2_MAP_X_POS_H =           $D221  [53793/$D221]
   318 000000                            TL2_MAP_Y_POS_L =           $D222  [53794/$D222]            ; The Position Y of the Map
   319 000000                            TL2_MAP_Y_POS_H =           $D223  [53795/$D223]
   320 000000                            TILE_MAP_ADDY0_L =          $D280  [53888/$D280]
   321 000000                            TILE_MAP_ADDY0_M =          $D281  [53889/$D281]
   322 000000                            TILE_MAP_ADDY0_H =          $D282  [53890/$D282]
   323 000000                            TILE_MAP_ADDY0_CFG =        $D283  [53891/$D283]
   324 000000                            TILE_MAP_ADDY1  =           $D284  [53892/$D284]
   325 000000                            TILE_MAP_ADDY2  =           $D288  [53896/$D288]
   326 000000                            TILE_MAP_ADDY3  =           $D28C  [53900/$D28C]
   327 000000                            TILE_MAP_ADDY4  =           $D290  [53904/$D290]
   328 000000                            TILE_MAP_ADDY5  =           $D294  [53908/$D294]
   329 000000                            TILE_MAP_ADDY6  =           $D298  [53912/$D298]
   330 000000                            TILE_MAP_ADDY7  =           $D29C  [53916/$D29C]
   331 000000                            XYMATH_CTRL_REG =           $D300  [54016/$D300]            ; Reserved
   332 000000                            XYMATH_ADDY_L   =           $D301  [54017/$D301]            ; W
   333 000000                            XYMATH_ADDY_M   =           $D302  [54018/$D302]            ; W
   334 000000                            XYMATH_ADDY_H   =           $D303  [54019/$D303]            ; W
   335 000000                            XYMATH_ADDY_POSX_L =        $D304  [54020/$D304]            ; R/W
   336 000000                            XYMATH_ADDY_POSX_H =        $D305  [54021/$D305]            ; R/W
   337 000000                            XYMATH_ADDY_POSY_L =        $D306  [54022/$D306]            ; R/W
   338 000000                            XYMATH_ADDY_POSY_H =        $D307  [54023/$D307]            ; R/W
   339 000000                            XYMATH_BLOCK_OFF_L =        $D308  [54024/$D308]            ; R Only - Low Block Offset
   340 000000                            XYMATH_BLOCK_OFF_H =        $D309  [54025/$D309]            ; R Only - Hi Block Offset
   341 000000                            XYMATH_MMU_BLOCK =          $D30A  [54026/$D30A]            ; R Only - Which MMU Block
   342 000000                            XYMATH_ABS_ADDY_L =         $D30B  [54027/$D30B]            ; Low Absolute Results
   343 000000                            XYMATH_ABS_ADDY_M =         $D30C  [54028/$D30C]            ; Mid Absolute Results
   344 000000                            XYMATH_ABS_ADDY_H =         $D30D  [54029/$D30D]            ; Hi Absolute Results
   345 000000                            SPRITE_Ctrl_Enable =        $01  [1/$01]
   346 000000                            SPRITE_LUT0     =           $02  [2/$02]
   347 000000                            SPRITE_LUT1     =           $04  [4/$04]
   348 000000                            SPRITE_DEPTH0   =           $08  [8/$08]                    ; 00 = Total Front - 01 = In between L0 and L1, 10 = In between L1 and L2, 11 = Total Back
   349 000000                            SPRITE_DEPTH1   =           $10  [16/$10]
   350 000000                            SPRITE_SIZE0    =           $20  [32/$20/" "]               ; 00 = 32x32 - 01 = 24x24 - 10 = 16x16 - 11 = 8x8
   351 000000                            SPRITE_SIZE1    =           $40  [64/$40/"@"]
   352 000000                            SP0_Ctrl        =           $D900  [55552/$D900]
   353 000000                            SP0_Addy_L      =           $D901  [55553/$D901]
   354 000000                            SP0_Addy_M      =           $D902  [55554/$D902]
   355 000000                            SP0_Addy_H      =           $D903  [55555/$D903]
   356 000000                            SP0_X_L         =           $D904  [55556/$D904]
   357 000000                            SP0_X_H         =           $D905  [55557/$D905]
   358 000000                            SP0_Y_L         =           $D906  [55558/$D906]            ; In the Jr, only the L is used (200 & 240)
   359 000000                            SP0_Y_H         =           $D907  [55559/$D907]            ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   360 000000;                                                                                       ;SP1_Ctrl           = $D908
   361 000000;                                                                                       ;SP1_Addy_L         = $D909
   362 000000;                                                                                       ;SP1_Addy_M         = $D90A
   363 000000;                                                                                       ;SP1_Addy_H         = $D90B
   364 000000;                                                                                       ;SP1_X_L            = $D90C
   365 000000;                                                                                       ;SP1_X_H            = $D90D
   366 000000;                                                                                       ;SP1_Y_L            = $D90E  ; In the Jr, only the L is used (200 & 240)
   367 000000;                                                                                       ;SP1_Y_H            = $D90F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   368 000000;                                                                                       ;SP2_Ctrl           = $D910
   369 000000;                                                                                       ;SP2_Addy_L         = $D911
   370 000000;                                                                                       ;SP2_Addy_M         = $D912
   371 000000;                                                                                       ;SP2_Addy_H         = $D913
   372 000000;                                                                                       ;SP2_X_L            = $D914
   373 000000;                                                                                       ;SP2_X_H            = $D915
   374 000000;                                                                                       ;SP2_Y_L            = $D916  ; In the Jr, only the L is used (200 & 240)
   375 000000;                                                                                       ;SP2_Y_H            = $D917  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   376 000000;                                                                                       ;SP3_Ctrl           = $D918
   377 000000;                                                                                       ;SP3_Addy_L         = $D919
   378 000000;                                                                                       ;SP3_Addy_M         = $D91A
   379 000000;                                                                                       ;SP3_Addy_H         = $D91B
   380 000000;                                                                                       ;SP3_X_L            = $D91C
   381 000000;                                                                                       ;SP3_X_H            = $D91D
   382 000000;                                                                                       ;SP3_Y_L            = $D91E  ; In the Jr, only the L is used (200 & 240)
   383 000000;                                                                                       ;SP3_Y_H            = $D91F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   384 000000;                                                                                       ;SP4_Ctrl           = $D920
   385 000000;                                                                                       ;SP4_Addy_L         = $D921
   386 000000;                                                                                       ;SP4_Addy_M         = $D922
   387 000000;                                                                                       ;SP4_Addy_H         = $D923
   388 000000;                                                                                       ;SP4_X_L            = $D924
   389 000000;                                                                                       ;SP4_X_H            = $D925
   390 000000;                                                                                       ;SP4_Y_L            = $D926  ; In the Jr, only the L is used (200 & 240)
   391 000000;                                                                                       ;SP4_Y_H            = $D927  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   392 000000                            TyVKY_LUT0      =           $D000  [53248/$D000]            ; IO Page 1 -$D000 - $D3FF
   393 000000                            TyVKY_LUT1      =           $D400  [54272/$D400]            ; IO Page 1 -$D400 - $D7FF
   394 000000                            TyVKY_LUT2      =           $D800  [55296/$D800]            ; IO Page 1 -$D800 - $DBFF
   395 000000                            TyVKY_LUT3      =           $DC00  [56320/$DC00]            ; IO Page 1 -$DC00 - $DFFF
   396 000000
   397 000000
   398 000000
   399 000000                            DMA_CTRL_REG    =           $DF00  [57088/$DF00]
   400 000000                            DMA_CTRL_Enable =           $01  [1/$01]
   401 000000                            DMA_CTRL_1D_2D  =           $02  [2/$02]
   402 000000                            DMA_CTRL_Fill   =           $04  [4/$04]
   403 000000                            DMA_CTRL_Int_En =           $08  [8/$08]
   404 000000;                                                                                       ;DMA_CTRL_NotUsed0   = $10
   405 000000;                                                                                       ;DMA_CTRL_NotUsed1   = $20
   406 000000;                                                                                       ;DMA_CTRL_NotUsed2   = $40
   407 000000                            DMA_CTRL_Start_Trf =        $80  [128/$80/"?"]
   408 000000                            DMA_DATA_2_WRITE =          $DF01  [57089/$DF01]            ; Write Only
   409 000000                            DMA_STATUS_REG  =           $DF01  [57089/$DF01]            ; Read Only
   410 000000                            DMA_STATUS_TRF_IP =         $80  [128/$80/"?"]              ; Transfer in Progress
   411 000000;                                                                                       ;DMA_RESERVED_0      = $DF02
   412 000000;                                                                                       ;DMA_RESERVED_1      = $DF03
   413 000000                            DMA_SOURCE_ADDY_L =         $DF04  [57092/$DF04]
   414 000000                            DMA_SOURCE_ADDY_M =         $DF05  [57093/$DF05]
   415 000000                            DMA_SOURCE_ADDY_H =         $DF06  [57094/$DF06]
   416 000000;                                                                                       ;DMA_RESERVED_2      = $DF07
   417 000000                            DMA_DEST_ADDY_L =           $DF08  [57096/$DF08]
   418 000000                            DMA_DEST_ADDY_M =           $DF09  [57097/$DF09]
   419 000000                            DMA_DEST_ADDY_H =           $DF0A  [57098/$DF0A]
   420 000000;                                                                                       ;DMA_RESERVED_3      = $DF0B
   421 000000                            DMA_SIZE_1D_L   =           $DF0C  [57100/$DF0C]
   422 000000                            DMA_SIZE_1D_M   =           $DF0D  [57101/$DF0D]
   423 000000                            DMA_SIZE_1D_H   =           $DF0E  [57102/$DF0E]
   424 000000;                                                                                       ;DMA_RESERVED_4      = $DF0F
   425 000000                            DMA_SIZE_X_L    =           $DF0C  [57100/$DF0C]
   426 000000                            DMA_SIZE_X_H    =           $DF0D  [57101/$DF0D]
   427 000000                            DMA_SIZE_Y_L    =           $DF0E  [57102/$DF0E]
   428 000000                            DMA_SIZE_Y_H    =           $DF0F  [57103/$DF0F]
   429 000000                            DMA_SRC_STRIDE_X_L =        $DF10  [57104/$DF10]
   430 000000                            DMA_SRC_STRIDE_X_H =        $DF11  [57105/$DF11]
   431 000000                            DMA_DST_STRIDE_Y_L =        $DF12  [57106/$DF12]
   432 000000                            DMA_DST_STRIDE_Y_H =        $DF13  [57107/$DF13]
   433 000000;                                                                                       ;DMA_RESERVED_5      = $DF14
   434 000000;                                                                                       ;DMA_RESERVED_6      = $DF15
   435 000000;                                                                                       ;DMA_RESERVED_7      = $DF16
   436 000000;                                                                                       ;DMA_RESERVED_8      = $DF17
   437 000000
   438 000000
   439 000000;                                                                                       ;C256_Jr_SID_def.asm
   440 000000
   441 000000                            SID_L_V1_FREQ_LO =          $D400  [54272/$D400]            ;SID - L - Voice 1 (Write Only) - FREQ LOW
   442 000000                            SID_L_V1_FREQ_HI =          $D401  [54273/$D401]            ;SID - L - Voice 1 (Write Only) - FREQ HI
   443 000000                            SID_L_V1_PW_LO  =           $D402  [54274/$D402]            ;SID - L - Voice 1 (Write Only) - PW LOW
   444 000000                            SID_L_V1_PW_HI  =           $D403  [54275/$D403]            ;SID - L - Voice 1 (Write Only) - PW HI
   445 000000                            SID_L_V1_CTRL   =           $D404  [54276/$D404]            ;SID - L - Voice 1 (Write Only) - CTRL REG
   446 000000                            SID_L_V1_ATCK_DECY =        $D405  [54277/$D405]            ;SID - L - Voice 1 (Write Only) - ATTACK / DECAY
   447 000000                            SID_L_V1_SSTN_RLSE =        $D406  [54278/$D406]            ;SID - L - Voice 1 (Write Only) - SUSTAIN / RELEASE
   448 000000                            SID_L_V2_FREQ_LO =          $D407  [54279/$D407]            ;SID - L - Voice 2 (Write Only) - FREQ LOW
   449 000000                            SID_L_V2_FREQ_HI =          $D408  [54280/$D408]            ;SID - L - Voice 2 (Write Only) - FREQ HI
   450 000000                            SID_L_V2_PW_LO  =           $D409  [54281/$D409]            ;SID - L - Voice 2 (Write Only) - PW LOW
   451 000000                            SID_L_V2_PW_HI  =           $D40A  [54282/$D40A]            ;SID - L - Voice 2 (Write Only) - PW HI
   452 000000                            SID_L_V2_CTRL   =           $D40B  [54283/$D40B]            ;SID - L - Voice 2 (Write Only) - CTRL REG
   453 000000                            SID_L_V2_ATCK_DECY =        $D40C  [54284/$D40C]            ;SID - L - Voice 2 (Write Only) - ATTACK / DECAY
   454 000000                            SID_L_V2_SSTN_RLSE =        $D40D  [54285/$D40D]            ;SID - L - Voice 2 (Write Only) - SUSTAIN / RELEASE
   455 000000                            SID_L_V3_FREQ_LO =          $D40E  [54286/$D40E]            ;SID - L - Voice 3 (Write Only) - FREQ LOW
   456 000000                            SID_L_V3_FREQ_HI =          $D40F  [54287/$D40F]            ;SID - L - Voice 3 (Write Only) - FREQ HI
   457 000000                            SID_L_V3_PW_LO  =           $D410  [54288/$D410]            ;SID - L - Voice 3 (Write Only) - PW LOW
   458 000000                            SID_L_V3_PW_HI  =           $D411  [54289/$D411]            ;SID - L - Voice 3 (Write Only) - PW HI
   459 000000                            SID_L_V3_CTRL   =           $D412  [54290/$D412]            ;SID - L - Voice 3 (Write Only) - CTRL REG
   460 000000                            SID_L_V3_ATCK_DECY =        $D413  [54291/$D413]            ;SID - L - Voice 3 (Write Only) - ATTACK / DECAY
   461 000000                            SID_L_V3_SSTN_RLSE =        $D414  [54292/$D414]            ;SID - L - Voice 3 (Write Only) - SUSTAIN / RELEASE
   462 000000                            SID_L_FC_LO     =           $D415  [54293/$D415]            ;SID - L - Filter (Write Only) - FC LOW
   463 000000                            SID_L_FC_HI     =           $D416  [54294/$D416]            ;SID - L - Filter (Write Only) - FC HI
   464 000000                            SID_L_RES_FILT  =           $D417  [54295/$D417]            ;SID - L - Filter (Write Only) - RES / FILT
   465 000000                            SID_L_MODE_VOL  =           $D418  [54296/$D418]            ;SID - L - Filter (Write Only) - MODE / VOL
   466 000000                            SID_L_POT_X     =           $D419  [54297/$D419]            ;SID - L - Misc (Read Only) - POT X (C256 - NOT USED)
   467 000000                            SID_L_POT_Y     =           $D41A  [54298/$D41A]            ;SID - L - Misc (Read Only) - POT Y (C256 - NOT USED)
   468 000000                            SID_L_OSC3_RND  =           $D41B  [54299/$D41B]            ;SID - L - Misc (Read Only) - OSC3 / RANDOM
   469 000000                            SID_L_ENV3      =           $D41C  [54300/$D41C]            ;SID - L - Misc (Read Only)  - ENV3
   470 000000;                                                                                       ;SID_L_NOT_USED0     = $D41D ;SID - L - NOT USED
   471 000000;                                                                                       ;SID_L_NOT_USED1     = $D41E ;SID - L - NOT USED
   472 000000;                                                                                       ;SID_L_NOT_USED2     = $D41F ;SID - L - NOT USED
   473 000000                            SID_R_V1_FREQ_LO =          $D500  [54528/$D500]            ;SID - R - Voice 1 (Write Only) - FREQ LOW
   474 000000                            SID_R_V1_FREQ_HI =          $D501  [54529/$D501]            ;SID - R - Voice 1 (Write Only) - FREQ HI
   475 000000                            SID_R_V1_PW_LO  =           $D502  [54530/$D502]            ;SID - R - Voice 1 (Write Only) - PW LOW
   476 000000                            SID_R_V1_PW_HI  =           $D503  [54531/$D503]            ;SID - R - Voice 1 (Write Only) - PW HI
   477 000000                            SID_R_V1_CTRL   =           $D504  [54532/$D504]            ;SID - R - Voice 1 (Write Only) - CTRL REG
   478 000000                            SID_R_V1_ATCK_DECY =        $D505  [54533/$D505]            ;SID - R - Voice 1 (Write Only) - ATTACK / DECAY
   479 000000                            SID_R_V1_SSTN_RLSE =        $D506  [54534/$D506]            ;SID - R - Voice 1 (Write Only) - SUSTAIN / RELEASE
   480 000000                            SID_R_V2_FREQ_LO =          $D507  [54535/$D507]            ;SID - R - Voice 2 (Write Only) - FREQ LOW
   481 000000                            SID_R_V2_FREQ_HI =          $D508  [54536/$D508]            ;SID - R - Voice 2 (Write Only) - FREQ HI
   482 000000                            SID_R_V2_PW_LO  =           $D509  [54537/$D509]            ;SID - R - Voice 2 (Write Only) - PW LOW
   483 000000                            SID_R_V2_PW_HI  =           $D50A  [54538/$D50A]            ;SID - R - Voice 2 (Write Only) - PW HI
   484 000000                            SID_R_V2_CTRL   =           $D50B  [54539/$D50B]            ;SID - R - Voice 2 (Write Only) - CTRL REG
   485 000000                            SID_R_V2_ATCK_DECY =        $D50C  [54540/$D50C]            ;SID - R - Voice 2 (Write Only) - ATTACK / DECAY
   486 000000                            SID_R_V2_SSTN_RLSE =        $D50D  [54541/$D50D]            ;SID - R - Voice 2 (Write Only) - SUSTAIN / RELEASE
   487 000000                            SID_R_V3_FREQ_LO =          $D50E  [54542/$D50E]            ;SID - R - Voice 3 (Write Only) - FREQ LOW
   488 000000                            SID_R_V3_FREQ_HI =          $D50F  [54543/$D50F]            ;SID - R - Voice 3 (Write Only) - FREQ HI
   489 000000                            SID_R_V3_PW_LO  =           $D510  [54544/$D510]            ;SID - R - Voice 3 (Write Only) - PW LOW
   490 000000                            SID_R_V3_PW_HI  =           $D511  [54545/$D511]            ;SID - R - Voice 3 (Write Only) - PW HI
   491 000000                            SID_R_V3_CTRL   =           $D512  [54546/$D512]            ;SID - R - Voice 3 (Write Only) - CTRL REG
   492 000000                            SID_R_V3_ATCK_DECY =        $D513  [54547/$D513]            ;SID - R - Voice 3 (Write Only) - ATTACK / DECAY
   493 000000                            SID_R_V3_SSTN_RLSE =        $D514  [54548/$D514]            ;SID - R - Voice 3 (Write Only) - SUSTAIN / RELEASE
   494 000000                            SID_R_FC_LO     =           $D515  [54549/$D515]            ;SID - R - Filter (Write Only) - FC LOW
   495 000000                            SID_R_FC_HI     =           $D516  [54550/$D516]            ;SID - R - Filter (Write Only) - FC HI
   496 000000                            SID_R_RES_FILT  =           $D517  [54551/$D517]            ;SID - R - Filter (Write Only) - RES / FILT
   497 000000                            SID_R_MODE_VOL  =           $D518  [54552/$D518]            ;SID - R - Filter (Write Only) - MODE / VOL
   498 000000                            SID_R_POT_X     =           $D519  [54553/$D519]            ;SID - R - Misc (Read Only) - POT X (C256 - NOT USED)
   499 000000                            SID_R_POT_Y     =           $D51A  [54554/$D51A]            ;SID - R - Misc (Read Only) - POT Y (C256 - NOT USED)
   500 000000                            SID_R_OSC3_RND  =           $D51B  [54555/$D51B]            ;SID - R - Misc (Read Only) - OSC3 / RANDOM
   501 000000                            SID_R_ENV3      =           $D51C  [54556/$D51C]            ;SID - R - Misc (Read Only)  - ENV3
   502 000000;                                                                                       ;SID_R_NOT_USED0     = $D51D ;SID - R - NOT USED
   503 000000;                                                                                       ;SID_R_NOT_USED1     = $D51E ;SID - R - NOT USED
   504 000000;                                                                                       ;SID_R_NOT_USED2     = $D51F ;SID - R - NOT USED
   505 000000
   506 000000                            PSG_INT_L_PORT  =           $D600  [54784/$D600]            ; Control register for the SN76489
   507 000000                            PSG_INT_R_PORT  =           $D610  [54800/$D610]            ; Control register for the SN76489
   508 000000
   509 000000
   510 000000                            VECTORS_BEGIN   =           $FFFA  [65530/$FFFA]            ;0 Byte  Interrupt vectors
   511 000000                            VECTOR_NMI      =           $FFFA  [65530/$FFFA]            ;2 Bytes Emulation mode interrupt handler
   512 000000                            VECTOR_RESET    =           $FFFC  [65532/$FFFC]            ;2 Bytes Emulation mode interrupt handler
   513 000000                            VECTOR_IRQ      =           $FFFE  [65534/$FFFE]            ;2 Bytes Emulation mode interrupt handler
   514 000000;                                                                                       ;ISR_BEGIN       = $FF00 ; Byte  Beginning of CPU vectors in Direct page
   515 000000;                                                                                       ;HRESET          = $FF00 ;16 Bytes Handle RESET asserted. Reboot computer and re-initialize the kernel.
   516 000000;                                                                                       ;HCOP            = $FF10 ;16 Bytes Handle the COP instruction. Program use; not used by OS
   517 000000;                                                                                       ;HBRK            = $FF20 ;16 Bytes Handle the BRK instruction. Returns to BASIC Ready prompt.
   518 000000;                                                                                       ;HABORT          = $FF30 ;16 Bytes Handle ABORT asserted. Return to Ready prompt with an error message.
   519 000000;                                                                                       ;HNMI            = $FF40 ;32 Bytes Handle NMI
   520 000000;                                                                                       ;HIRQ            = $FF60 ;32 Bytes Handle IRQ
   521 000000
   522 000000
   523 000000
   524 000000                            KEYBOARD_SC_TMP =           $20  [32/$20/" "]
   525 000000                            KBD_MSE_CTRL_REG =          $D640  [54848/$D640]
   526 000000                            KBD_Write_Strobe =          $02  [2/$02]
   527 000000                            MS_Write_Strobe =           $08  [8/$08]
   528 000000                            KBD_FIFO_CLEAR  =           $10  [16/$10]                   ; Dump entire FIFO, set to 1 and then back to 0
   529 000000                            MSE_FIFO_CLEAR  =           $20  [32/$20/" "]               ; Dump entire FIFO, set to 1 and then back to 0
   530 000000                            KBD_MS_WR_DATA_REG =        $D641  [54849/$D641]            ; Data to Send to Keyboard or Mouse
   531 000000                            KBD_RD_SCAN_REG =           $D642  [54850/$D642]            ; DATA Out from KBD FIFO
   532 000000                            MS_RD_SCAN_REG  =           $D643  [54851/$D643]            ; DATA Out from MSE FIFO
   533 000000                            KBD_MS_RD_STATUS =          $D644  [54852/$D644]            ; Keyboard RD/WR Status
   534 000000                            KBD_FIFO_Empty  =           $01  [1/$01]                    ; Set when Keyboard FIFO is empty
   535 000000                            MSE_FIFO_Empty  =           $02  [2/$02]                    ; Set when Mouse FIFO is empty
   536 000000                            MS_Stat_Tx_Error_No_Ack =   $10  [16/$10]
   537 000000                            MS_Stat_Tx_Ack  =           $20  [32/$20/" "]               ; When 1, it ack the Tx
   538 000000                            KBD_Stat_Tx_Error_No_Ack =  $40  [64/$40/"@"]
   539 000000                            KBD_Stat_Tx_Ack =           $80  [128/$80/"?"]              ; When 1, it ack the Tx
   540 000000                            KBD_MSE_NOT_USED =          $D645  [54853/$D645]            ;       ; Reads as 0
   541 000000                            KBD_FIFO_BYTE_CNT =         $D646  [54854/$D646]            ; Number of Bytes in the Keyboard FIFO
   542 000000                            MSE_FIFO_BYTE_CNT =         $D647  [54855/$D647]            ; Number of Bytes in the Mouse FIFO
   543 000000
   544 000000
   545 000000
   546 000000                            TEXT_LUT_FG     =           $D800  [55296/$D800]
   547 000000                            TEXT_LUT_BG     =           $D840  [55360/$D840]
   548 000000                            FONT_MEM        =           $C000  [49152/$C000]            ; IO Page 1
   549 000000                            TEXT_MEM        =           $C000  [49152/$C000]            ; IO Page 2
   550 000000                            COLOR_MEM       =           $C000  [49152/$C000]            ; IO Page 3
   551 000000                            DIPSWITCH       =           $D670  [54896/$D670]
   552 000000                            CODEC_LOW       =           $D620  [54816/$D620]
   553 000000                            CODEC_HI        =           $D621  [54817/$D621]
   554 000000                            CODEC_CTRL      =           $D622  [54818/$D622]
   555 000000
   556 000000                            RNG_DAT_LO      =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   557 000000                            RNG_DAT_HI      =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   558 000000                            RNG_SEED_LO     =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   559 000000                            RNG_SEED_HI     =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   560 000000                            RNG_CTRL        =           $D6A6  [54950/$D6A6]
   561 000000                            RNG_SEED_LD     =           $02  [2/$02]
   562 000000                            RNG_ENABLE      =           $01  [1/$01]
   563 000000                            RNG_STAT        =           $D6A6  [54950/$D6A6]
   564 000000                            RNG_LFSR_DONE   =           $80  [128/$80/"?"]              ; ???indicates that Output = SEED Database
   565 000000
   566 000000                            FOENIX_MACHINE_ID =         $D6A7  [54951/$D6A7]
   567 000000
   568 000000
   569 000000
   570 000000;                                                                                       ; tilemap base = $d200
   571 000000                            TVKY_TILEMAP    =           $D200  [53760/$D200]
   572 000000                                            struct      TILEMAP_TYPE(actrl,aaddr,axsize,aysize,axpos,aypos)
   587 000000
   588 000000;                                                                                       ; bitmap base = $d100
   589 000000                            TVKY_BITMAP     =           $D100  [53504/$D100]
   590 000000                                            struct      BITMAP_TYPE(actrl,aaddr)
   597 000000
   598 000000;                                                                                       ; tileset base = $d280
   599 000000                            TVKY_TILESET    =           $D280  [53888/$D280]
   600 000000                                            struct      TILESET_TYPE(aaddr,aconfig)
   607 000000
   608 000000;                                                                                       ; sprite base = $d900
   609 000000                            TVKY_SPRITE     =           $D900  [55552/$D900]
   610 000000                                            struct      SPRITE_TYPE(actrl,aaddr,axpos,aypos)
   621 000000
   622 000000;                                                                                       ; left sid base = $d400
   623 000000                            SID_LEFT        =           $D400  [54272/$D400]
   624 000000;                                                                                       ; right sid base = $d500
   625 000000                            SID_RIGHT       =           $D500  [54528/$D500]
   626 000000
   627 000000                                            include     'f256jrlib.asm'
including source file 'f256jrlib.asm'
   628 000000                                            const       w6522s=0  [0/$00]
   629 000000                                            var         dopush=0  [0/$00]
   630 000000
   631 000000                                            const       FOENIXMODELS = enum( C256FMX, C256U, F256JR, A2560DEV, GENX, C256UP, RES1, RES2, A2560X, A2560U, A2560M, A2560K)  [12/$0C items]
   632 000000                                            const       FNX_SCREEN_WIDTH = 320 , FNX_SCREEN_HEIGHT = 240 , FNX_BORDER_WIDTH = 0 , FNX_BORDER_HEIGHT = 0 , FNX_SCREEN_COLUMNS = (FNX_SCREEN_WIDTH-FNX_BORDER_WIDTH) / 8 , FNX_SCREEN_LINES = (FNX_SCREEN_HEIGHT-FNX_BORDER_HEIGHT) / 8  [320/$0140,240/$F0/"d",0/$00,0/$00,40/$28/"(",30/$1E]
   633 000000
   634 000000                            VKY_SCREEN_MEMORY =         $C000  [49152/$C000]            ; character memory in io page 2, color memory in io page 3
   635 000000                            VKY_FONT_MEMORY =           $C000  [49152/$C000]            ; address of screen font memory in io page 1
   636 000000                            VKY_TEXT_MEMORY =           $C000  [49152/$C000]            ; address of screen text memory in io page 2
   637 000000                            VKY_COLOR_MEMORY =          $C000  [49152/$C000]            ; address of screen color memory in io page 3
   638 000000
   639 000000                                            define      jeq(aaddr) 'beq ~pcnext2 : jmp aaddr'
   640 000000                                            define      jne(aaddr) 'bne ~pcnext2 : jmp aaddr'
   641 000000                                            define      jlt(aaddr) 'blt ~pcnext2 : jmp aaddr'
   642 000000                                            define      jge(aaddr) 'bge ~pcnext2 : jmp aaddr'
   643 000000                                            define      jcc(aaddr) 'bcc ~pcnext2 : jmp aaddr'
   644 000000                                            define      jcs(aaddr) 'bcs ~pcnext2 : jmp aaddr'
   645 000000                                            define      jmi(aaddr) 'bmi ~pcnext2 : jmp aaddr'
   646 000000                                            define      jpl(aaddr) 'bpl ~pcnext2 : jmp aaddr'
   647 000000                                            define      jvc(aaddr) 'bvc ~pcnext2 : jmp aaddr'
   648 000000                                            define      jvs(aaddr) 'bvs ~pcnext2 : jmp aaddr'
   649 000000
   650 000000                                            define      DoC64COLOR(aforeground,abackground) (C64COLOR.aforeground<<4) | C64COLOR.abackground
   651 000000                                            define      PushAXY 'pha : phx : phy'
   652 000000                                            define      PullYXA 'ply : plx : pla'
   653 000000                                            define      SetMMUIO 'stz MMU_IO_CTRL'
   654 000000                                            define      SetMMUGFX 'lda #MMU_IO_PAGE_1 : sta MMU_IO_CTRL'
   655 000000                                            define      SetMMUTEXT 'lda #MMU_IO_TEXT : sta MMU_IO_CTRL'
   656 000000                                            define      SetMMUCOLOR 'lda #MMU_IO_COLOR : sta MMU_IO_CTRL'
   657 000000                                            define      PushMMUIO 'lda MMU_IO_CTRL : pha'
   658 000000                                            define      PullMMUIO 'pla : sta MMU_IO_CTRL'
   659 000000                                            define      UnlockMMU 'lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL'
   660 000000                                            define      LockMMU 'lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL'
   661 000000                                            define      SetMMUBank(abank,aaddr) 'lda #((aaddr)/$2000) : sta MMU_MEM_Bank_0+abank'
   662 000000;                                                                                       ;=====================================================================================
   663 00FFF9                                            section     add('VECTORS',$fff9,$ffff,save=1)
updated section 'VECTORS' $00FFF9-00FFFF [7]
current section: VECTORS, next free address: $00FFF9
   664 00FFF9:40                         F256_DUMMYIRQ   rti
   665 00FFFA:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; nmi
   666 00FFFC:5D EE                                      word        F256_RESET  [size=2/$02]        ; reset
   667 00FFFE:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; irq
   668 010000                                            endsection    [65535/$FFFF]
   669 010000
   670 000020                                            section     add('ZPAGE',$0020,$00ef,type='bss',save=0)
updated section 'ZPAGE' $000020-0000EF [208]
current section: ZPAGE, next free address: $000020
   671 000020:[=16/$10 bytes]            TempIRQ         resb        16
define data constant size=16, fill value 0/$00
   672 000030:[=4/$04 bytes]             TempSrc         resb        4
define data constant size=4, fill value 0/$00
   673 000034:[=4/$04 bytes]             TempDest        resb        4
define data constant size=4, fill value 0/$00
   674 000038:[=16/$10 bytes]            TempZ           resb        16
define data constant size=16, fill value 0/$00
   675 000048:[=1/$01 bytes]             CursorColor     resb        1
define data constant size=1, fill value 0/$00
   676 000049:[=1/$01 bytes]             CursorColumn    resb        1
define data constant size=1, fill value 0/$00
   677 00004A:[=1/$01 bytes]             CursorLine      resb        1
define data constant size=1, fill value 0/$00
   678 00004B:[=2/$02 bytes]             CursorPointer   resw        1
define data constant size=1, fill value 0/$00
   679 00004D
   680 00004D:[=4/$04 bytes]             SOFCounter      resd        1
define data constant size=1, fill value 0/$00
   681 000051                                            endsection    [239/$EF/""]
   682 000051
   683 000200                                            section     add('DATA',$0200,$1fff,size=-1,save=1,file='wkdata.000200.bin')
updated section 'DATA' $000200-001FFF [-1]
current section: DATA, next free address: $000200
   684 000200                                            endsection    [511/$01FF]
   685 000200
   686 000200;                                                                                       ;section add('TEXT',___MAIN_SECTION_NEXT_FREE___,$fff8,size=-1,save=1)
   687 000200;                                                                                       ;endsection
   688 000200
   689 00E000                                            section     add('F256JRLIB',$e000,$fff8,size=-1,save=1,file='wkf256.00e000.bin')
updated section 'F256JRLIB' $00E000-00FFF8 [-1]
current section: F256JRLIB, next free address: $00E000
   690 00E000;                                                                                       ;=====================================================================================
   691 00E000
   692 00E000                                            macro       ConvertParamToA('aparam')
   706 00E000
   707 00E000                                            macro       ConvertParamToX('aparam')
   724 00E000
   725 00E000                                            macro       AssignWord('aaddr',adest)
   733 00E000
   734 00E000                                            macro       AssignLong('aaddr',adest)
   744 00E000
   745 00E000                                            macro       AssignDWord('aaddr',adest)
   757 00E000
   758 00E000                                            macro       SetMMUBlock(acontrol)
   765 00E000
   766 00E000                                            macro       SetCursorColor(acolor)
   769 00E000
   770 00E000;                                                                                       ; hard coded for 80 columns
   771 00E000                                            macro       SetCursorPointer('acolumn','aline')
   785 00E000
   786 00E000                                            macro       Increase_SOF_Counter
   797 00E000
   798 00E000                                            proc        ChrOut
open scope ChrOut, from scope  <<global symbols>>
   799 00E000:48                                         pha
   800 00E001:5A                                         phy
   801 00E002:A8                                         tay
   802 00E003:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   803 00E005:48                                         pha                                         ;<<<="PushMMUIO"
   804 00E006:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   805 00E008:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   806 00E00A:98                                         tya
   807 00E00B:A4 49                                      ldy         CursorColumn  [73/$49/"I"]
   808 00E00D:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   809 00E00F:E6 01                                      inc         MMU_IO_CTRL  [1/$01]
   810 00E011:A5 48                                      lda         CursorColor  [72/$48/"H"]
   811 00E013:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   812 00E015:C8                                         iny
   813 00E016:C0 28                                      cpy         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   814 00E018:D0 2A                                      bne         +  [57412/$E044]
   815 00E01A:18                                         clc
   816 00E01B:A5 4B                                      lda         CursorPointer  [75/$4B/"K"]
   817 00E01D:69 28                                      adc         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   818 00E01F:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   819 00E021:90 0A                                      bcc         ~pcnext2  [57389/$E02D]
   820 00E023:E6 4C                                      inc         CursorPointer+1  [76/$4C/"L"]
   821 00E025:A5 4A                                      lda         CursorLine  [74/$4A/"J"]
   822 00E027:1A                                         inc
   823 00E028:C9 1E                                      cmp         #FNX_SCREEN_LINES  [30/$1E]
   824 00E02A:D0 13                                      bne         ++  [57407/$E03F]
   825 00E02C:A9 C0                                      lda         #>VKY_TEXT_MEMORY  [192/$C0/"A"]
   826 00E02E:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   827 00E030:A9 00                                      lda         #<VKY_TEXT_MEMORY  [0/$00]      ; always equals 0
   828 00E032:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   829 00E034                            ++
   830 00E034:85 4A                                      sta         CursorLine  [74/$4A/"J"]
   831 00E036:A0 00                                      ldy         #0  [0/$00]
   832 00E038                            +
   833 00E038:84 49                                      sty         CursorColumn  [73/$49/"I"]
   834 00E03A:68                                         pla
   835 00E03B:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   836 00E03D:7A                                         ply
   837 00E03E:68                                         pla
   838 00E03F:60                                         rts
   839 00E040                                            endproc
end scope ChrOut, restore scope  <<global symbols>>
   840 00E040
   841 00E040                                            proc        ClearScreen
open scope ClearScreen, from scope  <<global symbols>>
   842 00E040:48                                         pha
   843 00E041:DA                                         phx
   844 00E042:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   845 00E044:48                                         pha                                         ;<<<="PushMMUIO"
   846 00E045
   847 00E045:9C 88 E0                                   stz         WriteAddress  [57480/$E088]     ;lda #<TEXT_MEM
   848 00E048:64 4B                                      stz         CursorPointer  [75/$4B/"K"]     ;sta CursorPointer
   849 00E04A:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   850 00E04C:8D 89 E0                                   sta         WriteAddress+1  [57481/$E089]
   851 00E04F:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   852 00E051:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   853 00E053:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   854 00E055:A2 20                                      ldx         #' '  [32/$20/" "]
   855 00E057:20 86 E0                                   jsr         WriteLoop  [57478/$E086]
   856 00E05A:9C 88 E0                                   stz         WriteAddress  [57480/$E088]     ;lda #<TEXT_MEM
   857 00E05D:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   858 00E05F:8D 89 E0                                   sta         WriteAddress+1  [57481/$E089]
   859 00E062:A9 03                                      lda         #MMU_IO_COLOR  [3/$03]
   860 00E064:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUCOLOR"
   861 00E066:A6 48                                      ldx         CursorColor  [72/$48/"H"]
   862 00E068:20 86 E0                                   jsr         WriteLoop  [57478/$E086]
   863 00E06B
   864 00E06B:68                                         pla
   865 00E06C:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   866 00E06E:FA                                         plx
   867 00E06F:68                                         pla
   868 00E070:60                                         rts
   869 00E071
   870 00E071                            WriteLoop
   871 00E071:8A                                         txa
   872 00E072                            WriteAddress    =           *+1  [57459/$E073]
   873 00E072:8D 34 12                                   sta         $1234  [4660/$1234]
   874 00E075:EE 73 E0                                   inc         WriteAddress  [57459/$E073]
   875 00E078:D0 18                                      bne         +  [57490/$E092]
   876 00E07A:EE 74 E0                                   inc         WriteAddress+1  [57460/$E074]
   877 00E07D                            +
   878 00E07D:AD 73 E0                                   lda         WriteAddress  [57459/$E073]
   879 00E080:C9 C0                                      cmp         #<(TEXT_MEM+80*60)  [192/$C0/"A"]
   880 00E082:D0 ED                                      bne         WriteLoop  [57457/$E071]
   881 00E084:AD 74 E0                                   lda         WriteAddress+1  [57460/$E074]
   882 00E087:C9 D2                                      cmp         #>(TEXT_MEM+80*60)  [210/$D2/"O"]
   883 00E089:D0 E6                                      bne         WriteLoop  [57457/$E071]
   884 00E08B:60                                         rts
   885 00E08C                                            endproc
end scope ClearScreen, restore scope  <<global symbols>>
   886 00E08C
   887 00E08C;                                                                                       ; parameters:
   888 00E08C;                                                                                       ;	<TempSrc>	=	word address of string to print
   889 00E08C;                                                                                       ;	<CursorPointer>	=	word address of screen character/color memory
   890 00E08C                                            proc        PrintAnsiString
open scope PrintAnsiString, from scope  <<global symbols>>
   891 00E08C;                                                                                       ;	pha : phx : phy ;<<<=";	PushAXY"
   892 00E08C
   893 00E08C:A0 00                                      ldy         #0  [0/$00]
   894 00E08E:80 22                                      bra         Print20  [57522/$E0B2]
   895 00E090                            Print10
   896 00E090:C9 1B                                      cmp         #27  [27/$1B]
   897 00E092:90 23                                      blt         CheckControlCodes  [57527/$E0B7]
   898 00E094:20 00 E0                                   jsr         ChrOut  [57344/$E000]
   899 00E097                            NextByte
   900 00E097:C8                                         iny
   901 00E098:D0 18                                      bne         Print20  [57522/$E0B2]
   902 00E09A:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   903 00E09C                            Print20
   904 00E09C:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   905 00E09E:D0 F0                                      bne         Print10  [57488/$E090]
   906 00E0A0;                                                                                       ;	ply : plx : pla ;<<<=";	PullYXA"
   907 00E0A0:60                                         rts
   908 00E0A1
   909 00E0A1                            CheckControlCodes
   910 00E0A1:C9 02                                      cmp         #2  [2/$02]                     ; ctrl-b/set cursor background color
   911 00E0A3:D0 29                                      bne         +  [57550/$E0CE]
   912 00E0A5:A5 48                                      lda         CursorColor  [72/$48/"H"]
   913 00E0A7:29 F0                                      and         #$f0  [240/$F0/"d"]
   914 00E0A9:85 48                                      sta         CursorColor  [72/$48/"H"]
   915 00E0AB:20 00 E1                                   jsr         GetNextByte  [57600/$E100]
   916 00E0AE:05 48                                      ora         CursorColor  [72/$48/"H"]
   917 00E0B0:85 48                                      sta         CursorColor  [72/$48/"H"]
   918 00E0B2:80 E3                                      bra         NextByte  [57495/$E097]
   919 00E0B4                            +
   920 00E0B4:C9 03                                      cmp         #3  [3/$03]                     ; ctrl-c/set cursor color
   921 00E0B6:D0 22                                      bne         +  [57562/$E0DA]
   922 00E0B8:20 00 E1                                   jsr         GetNextByte  [57600/$E100]
   923 00E0BB:85 48                                      sta         CursorColor  [72/$48/"H"]
   924 00E0BD:80 D8                                      bra         NextByte  [57495/$E097]
   925 00E0BF                            +
   926 00E0BF:C9 06                                      cmp         #6  [6/$06]                     ; ctrl-f/set cursor foreground color
   927 00E0C1:D0 32                                      bne         +  [57589/$E0F5]
   928 00E0C3:A5 48                                      lda         CursorColor  [72/$48/"H"]
   929 00E0C5:29 0F                                      and         #$0f  [15/$0F]
   930 00E0C7:85 48                                      sta         CursorColor  [72/$48/"H"]
   931 00E0C9:20 00 E1                                   jsr         GetNextByte  [57600/$E100]
   932 00E0CC:0A                                         asl
   933 00E0CD:0A                                         asl
   934 00E0CE:0A                                         asl
   935 00E0CF:0A                                         asl
   936 00E0D0:05 48                                      ora         CursorColor  [72/$48/"H"]
   937 00E0D2:85 48                                      sta         CursorColor  [72/$48/"H"]
   938 00E0D4:80 C1                                      bra         NextByte  [57495/$E097]
   939 00E0D6                            +
   940 00E0D6:C9 0C                                      cmp         #12  [12/$0C]                   ; ctrl-l/clear screen
   941 00E0D8:D0 24                                      bne         +  [57598/$E0FE]
   942 00E0DA:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
   943 00E0DD:80 B8                                      bra         NextByte  [57495/$E097]
   944 00E0DF                            +
   945 00E0DF:60                                         rts
   946 00E0E0:00                         temp            byte        0  [size=1/$01]
   947 00E0E1                            GetNextByte
   948 00E0E1:C8                                         iny
   949 00E0E2:D0 22                                      bne         +  [57606/$E106]
   950 00E0E4:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   951 00E0E6                            +
   952 00E0E6:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   953 00E0E8:60                                         rts
   954 00E0E9                                            endproc
end scope PrintAnsiString, restore scope  <<global symbols>>
   955 00E0E9
   956 00E0E9                                            macro       PrintString('astring','acolumn','aline','acolor')
   981 00E0E9
   982 00E0E9;                                                                                       ; parameters
   983 00E0E9;                                                                                       ;	A	=	byte to print
   984 00E0E9;                                                                                       ; returns
   985 00E0E9;                                                                                       ;	Y	=	upper nibble ascii
   986 00E0E9;                                                                                       ;	A	=	lower nibble ascii
   987 00E0E9                                            proc        HexByteToASCII
open scope HexByteToASCII, from scope  <<global symbols>>
   988 00E0E9:DA                                         phx
   989 00E0EA:AA                                         tax
   990 00E0EB:29 F0                                      and         #$f0  [240/$F0/"d"]
   991 00E0ED:4A                                         lsr
   992 00E0EE:4A                                         lsr
   993 00E0EF:4A                                         lsr
   994 00E0F0:4A                                         lsr
   995 00E0F1:A8                                         tay
   996 00E0F2:B9 1F E1                                   lda         HEXTABLE,y  [57631/$E11F]
   997 00E0F5:A8                                         tay
   998 00E0F6:8A                                         txa
   999 00E0F7:29 0F                                      and         #$0f  [15/$0F]
  1000 00E0F9:AA                                         tax
  1001 00E0FA:BD 1F E1                                   lda         HEXTABLE,x  [57631/$E11F]
  1002 00E0FD:FA                                         plx
  1003 00E0FE:60                                         rts
  1004 00E0FF:[=16/$10 bytes]            HEXTABLE        byte        '0123456789ABCDEF'  [size=16/$10]
  1005 00E10F                                            endproc
end scope HexByteToASCII, restore scope  <<global symbols>>
  1006 00E10F
  1007 00E10F                                            macro       PrintHexByte('avalue','acolumn','aline','acolor')
  1031 00E10F
  1032 00E10F                                            macro       PrintHexWord('avalue','acolumn','aline','acolor')
  1063 00E10F
  1064 00E10F                                            macro       PrintHexDWord('avalue','acolumn','aline','acolor')
  1107 00E10F
  1108 00E10F;                                                                                       ; KeyboardState
  1109 00E10F;                                                                                       ; shift
  1110 00E10F;                                                                                       ; ctrl
  1111 00E10F;                                                                                       ; win
  1112 00E10F;                                                                                       ; numlk
  1113 00E10F;                                                                                       ; capslk
  1114 00E10F;                                                                                       ;   bit
  1115 00E10F;                                                                                       ;	5  4  3  2  1  0
  1116 00E10F;                                                                                       ;	|  |  |  |  |  |
  1117 00E10F;                                                                                       ;	|  |  |  |  |  shift l/r = c0 c1
  1118 00E10F;                                                                                       ;	|  |  |  |  ----alt l/r  = c2 c3
  1119 00E10F;                                                                                       ;	|  |  |  ------ctrl l/r  = c4 c5
  1120 00E10F;                                                                                       ;	|  |  ----------win l/r  = c6 c7
  1121 00E10F;                                                                                       ;	|  ---------------numlk  = cf
  1122 00E10F;                                                                                       ;   -----------------capslk  = ce
  1123 00E10F;                                                                                       ;
  1124 00E10F                                            const       KEYDOWN=$00, KEYUP=$80  [0/$00,128/$80/"?"]
  1125 00E10F:00 00                      ScancodeBufferWPos word     0  [size=2/$02]
  1126 00E111:00 00                      ScancodeBufferRPos word     0  [size=2/$02]
  1127 00E113:00 00                      LastScancode    word        0  [size=2/$02]
  1128 00E115:[=128/$80 bytes]           ScancodeBuffer  resb        128,0
define data constant size=128, fill value 0/$00
  1129 00E195:[=1/$01 bytes]             KeyboardState   resb        1,0
define data constant size=1, fill value 0/$00
  1130 00E196:[=144/$90 bytes]           KeyboardKeyStates resb      $90,KEYUP
define data constant size=144, fill value 128/$80
  1131 00E226                                            const       KEYBOARDSTATES = enum( ALLOFF =%000000, SHIFT =%000001, ALT =%000010, CTRL =%000100, WIN =%001000, NUMLK =%010000, CAPSLK =%100000)  [7/$07 items]
  1132 00E226                                            proc        Init_Keyboard
open scope Init_Keyboard, from scope  <<global symbols>>
  1133 00E226;                                                                                       ; clear keyboard & mouse fifo buffer
  1134 00E226:A9 30                                      lda         #(KBD_FIFO_CLEAR|MSE_FIFO_CLEAR)  [48/$30/"0"]
  1135 00E228:8D 40 D6                                   sta         KBD_MSE_CTRL_REG  [54848/$D640]
  1136 00E22B:9C 40 D6                                   stz         KBD_MSE_CTRL_REG  [54848/$D640]
  1137 00E22E
  1138 00E22E:9C 11 E1                                   stz         ScancodeBufferRPos  [57617/$E111]
  1139 00E231:9C 0F E1                                   stz         ScancodeBufferWPos  [57615/$E10F]
  1140 00E234:A2 00                                      ldx         #0  [0/$00]
  1141 00E236                            -
  1142 00E236:8D 15 E1                                   sta         ScancodeBuffer  [57621/$E115]
  1143 00E239:E8                                         inx
  1144 00E23A:E0 80                                      cpx         #lobyte(sizeof(ScancodeBuffer))  [128/$80/"?"]
  1145 00E23C:D0 F8                                      bne         -  [57910/$E236]
  1146 00E23E
  1147 00E23E:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; key released
  1148 00E240:A2 00                                      ldx         #0  [0/$00]
  1149 00E242                            -
  1150 00E242:9D 96 E1                                   sta         KeyboardKeyStates,x  [57750/$E196]
  1151 00E245:E8                                         inx
  1152 00E246:E0 90                                      cpx         #sizeof(KeyboardKeyStates)  [144/$90/"?"]
  1153 00E248:D0 F8                                      bne         -  [57922/$E242]
  1154 00E24A
  1155 00E24A:A9 00                                      lda         #KEYBOARDSTATES.ALLOFF  [0/$00]
  1156 00E24C:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1157 00E24F
  1158 00E24F;                                                                                       ; enable keyboard interrupt
  1159 00E24F:AD 6C D6                                   lda         INT_MASK_REG0  [54892/$D66C]
  1160 00E252:09 FB                                      ora         #~(JR0_INT02_KBD)  [-5/$FFFFFFFB]
  1161 00E254:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1162 00E257:60                                         rts
  1163 00E258                                            endproc
end scope Init_Keyboard, restore scope  <<global symbols>>
  1164 00E258
  1165 00E258                                            proc        KeyboardIRQ
open scope KeyboardIRQ, from scope  <<global symbols>>
  1166 00E258                            -
  1167 00E258:AD 44 D6                                   lda         KBD_MS_RD_STATUS  [54852/$D644] 
  1168 00E25B:29 01                                      and         #KBD_FIFO_Empty  [1/$01]
  1169 00E25D:D0 3A                                      bne         +  [58009/$E299]
  1170 00E25F:AD 0F E1                                   lda         ScancodeBufferWPos  [57615/$E10F]
  1171 00E262:AA                                         tax
  1172 00E263:1A                                         inc
  1173 00E264:29 7F                                      and         #$7f  [127/$7F/""]
  1174 00E266:CD 11 E1                                   cmp         ScancodeBufferRPos  [57617/$E111]
  1175 00E269:F0 2B                                      beq         .BufferFull  [58006/$E296]
  1176 00E26B:8D 0F E1                                   sta         ScancodeBufferWPos  [57615/$E10F]
  1177 00E26E:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code
  1178 00E271:9D 15 E1                                   sta         ScancodeBuffer,x  [57621/$E115]
  1179 00E274:80 E2                                      bra         -  [57944/$E258]
  1180 00E276
  1181 00E276                            .BufferFull
  1182 00E276:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code and forget it
  1183 00E279                            +
  1184 00E279:60                                         rts
  1185 00E27A                                            endproc
end scope KeyboardIRQ, restore scope  <<global symbols>>
  1186 00E27A
  1187 00E27A;                                                                                       ; returns:
  1188 00E27A;                                                                                       ;	A	=	scan code from buffer
  1189 00E27A;                                                                                       ;	<carry>	:	clear=scan code in A, set=buffer empty A equals 0
  1190 00E27A                                            proc        GetScancode
open scope GetScancode, from scope  <<global symbols>>
  1191 00E27A:AD 11 E1                                   lda         ScancodeBufferRPos  [57617/$E111]
  1192 00E27D:CD 0F E1                                   cmp         ScancodeBufferWPos  [57615/$E10F]
  1193 00E280:F0 2E                                      beq         BufferEmpty  [58032/$E2B0]
  1194 00E282:DA                                         phx
  1195 00E283:AA                                         tax
  1196 00E284:1A                                         inc
  1197 00E285:29 7F                                      and         #$7f  [127/$7F/""]
  1198 00E287:8D 11 E1                                   sta         ScancodeBufferRPos  [57617/$E111]
  1199 00E28A:BD 15 E1                                   lda         ScancodeBuffer,x  [57621/$E115]
  1200 00E28D:FA                                         plx
  1201 00E28E:18                                         clc
  1202 00E28F:60                                         rts
  1203 00E290                            BufferEmpty
  1204 00E290:A9 00                                      lda         #0  [0/$00]
  1205 00E292:38                                         sec
  1206 00E293:60                                         rts
  1207 00E294                                            endproc
end scope GetScancode, restore scope  <<global symbols>>
  1208 00E294
  1209 00E294                                            proc        GetChar
open scope GetChar, from scope  <<global symbols>>
  1210 00E294:20 7A E2                                   jsr         GetScancode  [57978/$E27A]
  1211 00E297:90 21                                      bcc         +  [58042/$E2BA]
  1212 00E299;                                                                                       ; buffer empty
  1213 00E299:60                                         rts
  1214 00E29A                            +
  1215 00E29A:C9 90                                      cmp         #$90  [144/$90/"?"]             ; scan code can only be 00-8f
  1216 00E29C:90 2B                                      blt         +  [58057/$E2C9]
  1217 00E29E:8D 13 E1                                   sta         LastScancode  [57619/$E113]
  1218 00E2A1:C9 F0                                      cmp         #$f0  [240/$F0/"d"]             ; is last scan code a break prefix, get next scan code
  1219 00E2A3:F0 EF                                      beq         GetChar  [58004/$E294]
  1220 00E2A5:A9 00                                      lda         #0  [0/$00]                     ; return null for invalid scan code range
  1221 00E2A7:38                                         sec                                         ; set carry for empty buffer
  1222 00E2A8:60                                         rts
  1223 00E2A9                            +
  1224 00E2A9:DA                                         phx
  1225 00E2AA:AE 13 E1                                   ldx         LastScancode  [57619/$E113]     ; get last scan code
  1226 00E2AD:8D 13 E1                                   sta         LastScancode  [57619/$E113]     ; save new scan code
  1227 00E2B0:E0 F0                                      cpx         #$f0  [240/$F0/"d"]
  1228 00E2B2:D0 23                                      bne         KeyPressed  [58071/$E2D7]
  1229 00E2B4:4C 5F E3                                   jmp         KeyReleased  [58207/$E35F]
  1230 00E2B7
  1231 00E2B7                            KeyPressed
  1232 00E2B7:AA                                         tax
  1233 00E2B8:A9 00                                      lda         #KEYDOWN  [0/$00]               ; set state as key for DOWN
  1234 00E2BA:9D 96 E1                                   sta         KeyboardKeyStates,x  [57750/$E196]
  1235 00E2BD:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1236 00E2C0:89 21                                      bit         #(KEYBOARDSTATES.SHIFT|KEYBOARDSTATES.CAPSLK)  [33/$21/"!"]
  1237 00E2C2:F0 25                                      beq         +  [58089/$E2E9]
  1238 00E2C4:BD 51 E4                                   lda         SCSET21,x  [58449/$E451]
  1239 00E2C7:80 23                                      bra         ++  [58092/$E2EC]
  1240 00E2C9                            +
  1241 00E2C9:BD C1 E3                                   lda         SCSET2,x  [58305/$E3C1]
  1242 00E2CC                            ++
  1243 00E2CC:AA                                         tax
  1244 00E2CD:29 C0                                      and         #$c0  [192/$C0/"A"]
  1245 00E2CF:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1246 00E2D1:F0 23                                      beq         .SpecialKeyDown  [58102/$E2F6]
  1247 00E2D3:8A                                         txa
  1248 00E2D4:FA                                         plx
  1249 00E2D5:60                                         rts
  1250 00E2D6
  1251 00E2D6                            .SpecialKeyDown
  1252 00E2D6:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1253 00E2D8:F0 24                                      beq         .Shift  [58110/$E2FE]
  1254 00E2DA:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1255 00E2DC:D0 2A                                      bne         ++  [58120/$E308]
  1256 00E2DE                            .Shift
  1257 00E2DE:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1258 00E2E1:09 01                                      ora         #KEYBOARDSTATES.SHIFT  [1/$01]
  1259 00E2E3:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1260 00E2E6:80 72                                      bra         +  [58202/$E35A]
  1261 00E2E8                            ++
  1262 00E2E8:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1263 00E2EA:F0 24                                      beq         .Alt  [58128/$E310]
  1264 00E2EC:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1265 00E2EE:D0 2A                                      bne         ++  [58138/$E31A]
  1266 00E2F0                            .Alt
  1267 00E2F0:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1268 00E2F3:09 02                                      ora         #KEYBOARDSTATES.ALT  [2/$02]
  1269 00E2F5:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1270 00E2F8:80 60                                      bra         +  [58202/$E35A]
  1271 00E2FA                            ++
  1272 00E2FA:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1273 00E2FC:F0 24                                      beq         .Ctrl  [58146/$E322]
  1274 00E2FE:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1275 00E300:D0 2A                                      bne         ++  [58156/$E32C]
  1276 00E302                            .Ctrl
  1277 00E302:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1278 00E305:09 04                                      ora         #KEYBOARDSTATES.CTRL  [4/$04]
  1279 00E307:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1280 00E30A:80 4E                                      bra         +  [58202/$E35A]
  1281 00E30C                            ++
  1282 00E30C:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1283 00E30E:F0 24                                      beq         .Win  [58164/$E334]
  1284 00E310:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1285 00E312:D0 2A                                      bne         ++  [58174/$E33E]
  1286 00E314                            .Win
  1287 00E314:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1288 00E317:09 08                                      ora         #KEYBOARDSTATES.WIN  [8/$08]
  1289 00E319:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1290 00E31C:80 3C                                      bra         +  [58202/$E35A]
  1291 00E31E                            ++
  1292 00E31E:E0 CF                                      cpx         #$cf  [207/$CF/"I"]
  1293 00E320:D0 2A                                      bne         ++  [58188/$E34C]
  1294 00E322                            .NumLk
  1295 00E322:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1296 00E325:49 10                                      eor         #KEYBOARDSTATES.NUMLK  [16/$10]
  1297 00E327:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1298 00E32A:80 2E                                      bra         +  [58202/$E35A]
  1299 00E32C                            ++
  1300 00E32C:E0 CE                                      cpx         #$ce  [206/$CE/"I"]
  1301 00E32E:D0 2A                                      bne         ++  [58202/$E35A]
  1302 00E330                            .CapsLk
  1303 00E330:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1304 00E333:49 20                                      eor         #KEYBOARDSTATES.CAPSLK  [32/$20/" "]
  1305 00E335:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1306 00E338:80 20                                      bra         +  [58202/$E35A]
  1307 00E33A                            ++
  1308 00E33A                            +
  1309 00E33A:A9 00                                      lda         #0  [0/$00]
  1310 00E33C:38                                         sec
  1311 00E33D:FA                                         plx
  1312 00E33E:60                                         rts
  1313 00E33F
  1314 00E33F                            KeyReleased
  1315 00E33F:AA                                         tax
  1316 00E340:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; set state for key as UP
  1317 00E342:9D 96 E1                                   sta         KeyboardKeyStates,x  [57750/$E196]
  1318 00E345:BD C1 E3                                   lda         SCSET2,x  [58305/$E3C1]
  1319 00E348:AA                                         tax
  1320 00E349:29 C0                                      and         #$c0  [192/$C0/"A"]
  1321 00E34B:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1322 00E34D:F0 25                                      beq         .SpecialKeyDown  [58228/$E374]
  1323 00E34F:A9 00                                      lda         #0  [0/$00]
  1324 00E351:38                                         sec
  1325 00E352:FA                                         plx
  1326 00E353:60                                         rts
  1327 00E354
  1328 00E354                            .SpecialKeyDown
  1329 00E354:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1330 00E356:F0 24                                      beq         .Shift  [58236/$E37C]
  1331 00E358:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1332 00E35A:D0 2A                                      bne         ++  [58246/$E386]
  1333 00E35C                            .Shift
  1334 00E35C:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1335 00E35F:29 FE                                      and         #~(KEYBOARDSTATES.SHIFT)  [-2/$FFFFFFFE]
  1336 00E361:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1337 00E364:80 56                                      bra         +  [58300/$E3BC]
  1338 00E366                            ++
  1339 00E366:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1340 00E368:F0 24                                      beq         .Alt  [58254/$E38E]
  1341 00E36A:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1342 00E36C:D0 2A                                      bne         ++  [58264/$E398]
  1343 00E36E                            .Alt
  1344 00E36E:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1345 00E371:29 FD                                      and         #~(KEYBOARDSTATES.ALT)  [-3/$FFFFFFFD]
  1346 00E373:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1347 00E376:80 44                                      bra         +  [58300/$E3BC]
  1348 00E378                            ++
  1349 00E378:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1350 00E37A:F0 24                                      beq         .Ctrl  [58272/$E3A0]
  1351 00E37C:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1352 00E37E:D0 2A                                      bne         ++  [58282/$E3AA]
  1353 00E380                            .Ctrl
  1354 00E380:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1355 00E383:29 FB                                      and         #~(KEYBOARDSTATES.CTRL)  [-5/$FFFFFFFB]
  1356 00E385:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1357 00E388:80 32                                      bra         +  [58300/$E3BC]
  1358 00E38A                            ++
  1359 00E38A:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1360 00E38C:F0 24                                      beq         .Win  [58290/$E3B2]
  1361 00E38E:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1362 00E390:D0 2A                                      bne         ++  [58300/$E3BC]
  1363 00E392                            .Win
  1364 00E392:AD 95 E1                                   lda         KeyboardState  [57749/$E195]
  1365 00E395:29 F7                                      and         #~(KEYBOARDSTATES.WIN)  [-9/$FFFFFFF7]
  1366 00E397:8D 95 E1                                   sta         KeyboardState  [57749/$E195]
  1367 00E39A:80 20                                      bra         +  [58300/$E3BC]
  1368 00E39C                            ++
  1369 00E39C                            +
  1370 00E39C:A9 00                                      lda         #0  [0/$00]
  1371 00E39E:38                                         sec
  1372 00E39F:FA                                         plx
  1373 00E3A0:60                                         rts
  1374 00E3A1
  1375 00E3A1;                                                                                       ; function keys f1-f24 = ascii $8a-$a1
  1376 00E3A1;                                                                                       ;
  1377 00E3A1;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1378 00E3A1:[=144/$90 bytes]           SCSET2          byte        $00, $92, $00, $8e, $8c, $8a, $8b, $95, $00, $93, $91, $8f, $8d, $09, '`', $00, $00, $c2, $c0, $00, $c4, 'q', '1', $00, $00, $00, 'z', 's', 'a', 'w', '2', $c6, $00, 'c', 'x', 'd', 'e', '4', '3', $c7, $00, $00, 'v', 'f', 't', 'r', '5', $00, $00, 'n', 'b', 'h', 'g', 'y', '6', $00, $00, $00, 'm', 'j', 'u', '7', '8', $00, $00, ',', 'k', 'i', 'o', '0', '9', $00, $00, '.', '/', 'l', ';', 'p', '-', $00, $00, $00, $2c, $00, '[', '=', $00, $00, $ce, $c1, $0d, ']', $00, '\', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $94, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $90, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1379 00E431
  1380 00E431;                                                                                       ; shift
  1381 00E431;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1382 00E431:[=144/$90 bytes]           SCSET21         byte        $00, $9e, $00, $9a, $98, $96, $97, $a1, $00, $9f, $9d, $9b, $99, $09, '~', $00, $00, $c2, $c0, $00, $c4, 'Q', '!', $00, $00, $00, 'Z', 'S', 'A', 'W', '@', $c6, $00, 'C', 'X', 'D', 'E', '$', '#', $c7, $00, $00, 'V', 'F', 'T', 'R', '%', $00, $00, 'N', 'B', 'H', 'G', 'Y', '^', $00, $00, $00, 'M', 'J', 'U', '&', '*', $00, $00, '<', 'K', 'I', 'O', ')', '(', $00, $00, '.', '?', 'L', ':', 'P', '_', $00, $00, $00, $2c, $00, '{', '+', $00, $00, $ce, $c1, $0d, '}', $00, '|', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $a0, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $9c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1383 00E4C1                                            endproc
end scope GetChar, restore scope  <<global symbols>>
  1384 00E4C1
  1385 00E4C1;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1386 00E4C1                                            proc        WaitForDMAReset
open scope WaitForDMAReset, from scope  <<global symbols>>
  1387 00E4C1                            -
  1388 00E4C1:AD 01 DF                                   lda         DMA_STATUS_REG  [57089/$DF01]
  1389 00E4C4:29 80                                      and         #DMA_STATUS_TRF_IP  [128/$80/"?"]
  1390 00E4C6:C9 80                                      cmp         #DMA_STATUS_TRF_IP  [128/$80/"?"]
  1391 00E4C8:F0 F7                                      beq         -  [58561/$E4C1]
  1392 00E4CA:9C 00 DF                                   stz         DMA_CTRL_REG  [57088/$DF00]
  1393 00E4CD:60                                         rts
  1394 00E4CE                                            endproc
end scope WaitForDMAReset, restore scope  <<global symbols>>
  1395 00E4CE
  1396 00E4CE;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1397 00E4CE                                            macro       DMA1DCopy(asource,adest,asize)
  1409 00E4CE
  1410 00E4CE;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1411 00E4CE                                            macro       DMA1DFill(adest,asize,afillbyte)
  1422 00E4CE
  1423 00E4CE;                                                                                       ; 8-bit
  1424 00E4CE                                            macro       CopyMemTiny(asource,adest,asize)
  1434 00E4CE
  1435 00E4CE;                                                                                       ; 16-bit
  1436 00E4CE                                            macro       CopyMemSmall(asource,adest,asize)
  1465 00E4CE
  1466 00E4CE                                            const       C64COLOR = enum( BLACK,WHITE,RED,CYAN, PURPLE,GREEN,BLUE,YELLOW, ORANGE,BROWN,LTRED,DKGREY, MDGREY,LTGREEN,LTBLUE,LTGREY)  [16/$10 items]
  1471 00E4CE                                            proc        Init_Graphics
open scope Init_Graphics, from scope  <<global symbols>>
  1472 00E4CE;                                                                                       ; clear foreground & background luts with #000000
  1473 00E4CE:A2 00                                      ldx         #0  [0/$00]
  1474 00E4D0:A9 00                                      lda         #0  [0/$00]
  1475 00E4D2                            -
  1476 00E4D2:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]
  1477 00E4D5:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]
  1478 00E4D8:E8                                         inx
  1479 00E4D9:E0 40                                      cpx         #16*4  [64/$40/"@"]
  1480 00E4DB:D0 F5                                      bne         -  [58578/$E4D2]
  1481 00E4DD
  1482 00E4DD;                                                                                       ; set C64 colodore palette
  1483 00E4DD:A2 00                                      ldx         #0  [0/$00]
  1484 00E4DF                            -
  1485 00E4DF:BD A9 ED                                   lda         COLODORE_PALETTE,x  [60841/$EDA9]
  1486 00E4E2:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]    ; set font foreground lut
  1487 00E4E5:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]    ; set font background lut
  1488 00E4E8:E8                                         inx
  1489 00E4E9:E0 40                                      cpx         #sizeof(COLODORE_PALETTE)  [64/$40/"@"]
  1490 00E4EB:D0 F2                                      bne         -  [58591/$E4DF]
  1491 00E4ED
  1492 00E4ED;                                                                                       ; initialize system font
  1533 00E4ED
  1534 00E4ED;                                                                                       ; initialize border
  1535 00E4ED:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; set i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO				; set i/o at $d000, use page 0=i/o registers"
  1536 00E4EF;                                                                                       ;lda #Border_Ctrl_Enable	; enable border
  1537 00E4EF:9C 04 D0                                   stz         BORDER_CTRL_REG  [53252/$D004]  ;sta BORDER_CTRL_REG
  1538 00E4F2:9C 05 D0                                   stz         BORDER_COLOR_B  [53253/$D005]   ;lda #$ff : sta BORDER_COLOR_B		; set border color to blue, #0000ff
  1539 00E4F5:9C 06 D0                                   stz         BORDER_COLOR_G  [53254/$D006]   ;lda #$00 : sta BORDER_COLOR_G
  1540 00E4F8:9C 07 D0                                   stz         BORDER_COLOR_R  [53255/$D007]   ;lda #$00 : sta BORDER_COLOR_R
  1541 00E4FB;                                                                                       ;lda #FNX_BORDER_HEIGHT	; set border to 8 pixels high and 8 pixels wide
  1542 00E4FB:9C 09 D0                                   stz         BORDER_Y_SIZE  [53257/$D009]    ;sta BORDER_Y_SIZE
  1543 00E4FE;                                                                                       ;lda #FNX_BORDER_WIDTH
  1544 00E4FE:9C 08 D0                                   stz         BORDER_X_SIZE  [53256/$D008]    ;sta BORDER_X_SIZE
  1545 00E501
  1546 00E501;                                                                                       ; initialize backgrounnd
  1547 00E501:9C 0D D0                                   stz         BACKGROUND_COLOR_B  [53261/$D00D] ; set background color to black, #000000
  1548 00E504:9C 0E D0                                   stz         BACKGROUND_COLOR_G  [53262/$D00E]
  1549 00E507:9C 0F D0                                   stz         BACKGROUND_COLOR_R  [53263/$D00F]
  1550 00E50A
  1551 00E50A;                                                                                       ; initialize Tiny Vicky registers
  1552 00E50A:A2 00                                      ldx         #0  [0/$00]
  1553 00E50C                            -
  1554 00E50C:9E 00 D1                                   stz         TyVKY_BM0_CTRL_REG,x  [53504/$D100] ; bitmaps
  1555 00E50F:9E 00 D2                                   stz         TL0_CONTROL_REG,x  [53760/$D200] ; tilemaps/tilesets
  1556 00E512:9E 00 D9                                   stz         SP0_Ctrl,x  [55552/$D900]       ; sprites
  1557 00E515:9E 00 DA                                   stz         SP0_Ctrl+$0100,x  [55808/$DA00]
  1558 00E518:E8                                         inx
  1559 00E519:D0 F1                                      bne         -  [58636/$E50C]
  1560 00E51B
  1561 00E51B;                                                                                       ; initialize cursor
  1562 00E51B:9C 10 D0                                   stz         VKY_TXT_CURSOR_CTRL_REG  [53264/$D010] ; disable cursor 
  1563 00E51E:9C 12 D0                                   stz         VKY_TXT_CURSOR_CHAR_REG  [53266/$D012] ; set cursor character as font tile 0
  1564 00E521
  1565 00E521:9C 14 D0                                   stz         VKY_TXT_CURSOR_X_REG_L  [53268/$D014] ; set cursor to colum 0
  1566 00E524:9C 15 D0                                   stz         VKY_TXT_CURSOR_X_REG_H  [53269/$D015]
  1567 00E527:9C 16 D0                                   stz         VKY_TXT_CURSOR_Y_REG_L  [53270/$D016] ; set cursor to row 0
  1568 00E52A:9C 17 D0                                   stz         VKY_TXT_CURSOR_Y_REG_H  [53271/$D017]
  1569 00E52D
  1570 00E52D:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""] ;<<<="lda #DoC64COLOR(LTBLUE,BLACK)"
  1571 00E52F:85 48                                      sta         CursorColor  [72/$48/"H"]
  1572 00E531:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1573 00E534                                            AssignWord  (#VKY_TEXT_MEMORY,CursorPointer)
  1575m00E534:A9 00                                      lda         #<(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [0/$00]
  1576m00E536:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1577m00E538:A9 C0                                      lda         #>(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [192/$C0/"A"]
  1578m00E53A:92 4B                                      sta         (CursorPointer)+1  [75/$4B/"K"]
  1586 00E53C:60                                         rts
  1587 00E53D                                            option      showallbytes=1
show all listing bytes enabled
  1588 00E53D:00 00 00 00 FF FF FF 00 >> COLODORE_PALETTE hex        00 00 00 00 FF FF FF 00 38 33 81 00 C8 CE 75 00 , 97 3C 8E 00 4D AC 56 00 9B 2C 2E 00 71 F1 ED 00 , 29 50 8E 00 00 38 55 00 71 6C C4 00 4A 4A 4A 00 , 7B 7B 7B 00 9F FF A9 00 EB 6D 70 00 B2 B2 B2 00  [size=64/$40/"@"]
       00E545:38 33 81 00 C8 CE 75 00 >>
       00E54D:97 3C 8E 00 4D AC 56 00 >>
       00E555:9B 2C 2E 00 71 F1 ED 00 >>
       00E55D:29 50 8E 00 00 38 55 00 >>
       00E565:71 6C C4 00 4A 4A 4A 00 >>
       00E56D:7B 7B 7B 00 9F FF A9 00 >>
       00E575:EB 6D 70 00 B2 B2 B2 00   
  1589 00E57D                                            option      showallbytes=0
show all listing bytes disabled
  1590 00E57D                                            endproc
end scope Init_Graphics, restore scope  <<global symbols>>
  1591 00E57D
  1592 00E57D                                            proc        Init_CODEC
open scope Init_CODEC, from scope  <<global symbols>>
  1593 00E57D:A9 00                                      lda         #%0.0.000.0.0.0.0  [0/$00]
  1594 00E57F:A0 1A                                      ldy         #%0001101.0  [26/$1A]
  1595 00E581:20 1B EE                                   jsr         WriteCodecWait  [60955/$EE1B]
  1596 00E584:A9 03                                      lda         #%0000.0011  [3/$03]
  1597 00E586:A0 2A                                      ldy         #%0010101.0  [42/$2A/"*"]
  1598 00E588:20 1B EE                                   jsr         WriteCodecWait  [60955/$EE1B]
  1599 00E58B:A9 01                                      lda         #%0.0.00.0001  [1/$01]
  1600 00E58D:A0 23                                      ldy         #%0010001.1  [35/$23/"#"]
  1601 00E58F:20 1B EE                                   jsr         WriteCodecWait  [60955/$EE1B]
  1602 00E592:A9 07                                      lda         #%00000.111  [7/$07]
  1603 00E594:A0 2C                                      ldy         #%0010110.0  [44/$2C/","]
  1604 00E596:20 1B EE                                   jsr         WriteCodecWait  [60955/$EE1B]
  1605 00E599:A9 02                                      lda         #%00.00.0.0.10  [2/$02]
  1606 00E59B:A0 14                                      ldy         #%0001010.0  [20/$14]
  1607 00E59D:20 1B EE                                   jsr         WriteCodecWait  [60955/$EE1B]
  1608 00E5A0:A9 02                                      lda         #%0.0.00.0.0.10  [2/$02]
  1609 00E5A2:A0 16                                      ldy         #%0001011.0  [22/$16]
  1610 00E5A4:20 1B EE                                   jsr         WriteCodecWait  [60955/$EE1B]
  1611 00E5A7:A9 45                                      lda         #%0.100.0.101  [69/$45/"E"]
  1612 00E5A9:A0 18                                      ldy         #%0001100.0  [24/$18]
  1613 00E5AB:20 1B EE                                   jsr         WriteCodecWait  [60955/$EE1B]
  1614 00E5AE:60                                         rts
  1615 00E5AF
  1616 00E5AF                            WriteCodecWait
  1617 00E5AF:8D 20 D6                                   sta         CODEC_LOW  [54816/$D620]
  1618 00E5B2:8C 21 D6                                   sty         CODEC_HI  [54817/$D621]
  1619 00E5B5:A9 01                                      lda         #1  [1/$01]
  1620 00E5B7:8D 22 D6                                   sta         CODEC_CTRL  [54818/$D622]
  1621 00E5BA                            -
  1622 00E5BA:2C 22 D6                                   bit         CODEC_CTRL  [54818/$D622]
  1623 00E5BD:D0 FB                                      bne         -  [58810/$E5BA]
  1624 00E5BF:60                                         rts
  1625 00E5C0                                            endproc
end scope Init_CODEC, restore scope  <<global symbols>>
  1626 00E5C0
  1627 00E5C0                                            proc        Init_Sound
open scope Init_Sound, from scope  <<global symbols>>
  1628 00E5C0:20 7D E5                                   jsr         Init_CODEC  [58749/$E57D]
  1629 00E5C3
  1630 00E5C3;                                                                                       ; intialize left and right PSG SN76489
  1631 00E5C3:A9 9F                                      lda         #%1.00.1.1111  [159/$9F/"Y"]    ;mute channel 0
  1632 00E5C5:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1633 00E5C8:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1634 00E5CB:A9 BF                                      lda         #%1.01.1.1111  [191/$BF/""]    ;mute channel 1
  1635 00E5CD:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1636 00E5D0:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1637 00E5D3:A9 DF                                      lda         #%1.10.1.1111  [223/$DF/""]    ;mute channel 2
  1638 00E5D5:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1639 00E5D8:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1640 00E5DB:A9 FF                                      lda         #%1.11.1.1111  [255/$FF/""]    ;mute channel 3
  1641 00E5DD:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1642 00E5E0:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1643 00E5E3
  1644 00E5E3;                                                                                       ; initialize left and right SIDs
  1645 00E5E3:A2 00                                      ldx         #0  [0/$00]
  1646 00E5E5                            -
  1647 00E5E5:9E 00 D4                                   stz         SID_L_V1_FREQ_LO,x  [54272/$D400]
  1648 00E5E8:9E 00 D5                                   stz         SID_R_V1_FREQ_LO,x  [54528/$D500]
  1649 00E5EB:E8                                         inx
  1650 00E5EC:E0 20                                      cpx         #$20  [32/$20/" "]
  1651 00E5EE:D0 F5                                      bne         -  [58853/$E5E5]
  1652 00E5F0:60                                         rts
  1653 00E5F1                                            endproc
end scope Init_Sound, restore scope  <<global symbols>>
  1654 00E5F1
  1655 00E5F1                                            proc        F256_RESET
open scope F256_RESET, from scope  <<global symbols>>
  1656 00E5F1:18                                         clc
  1657 00E5F2:78                                         sei                                         ; disable interrupts
  1658 00E5F3:A2 FF                                      ldx         #$ff  [255/$FF/""]
  1659 00E5F5:9A                                         txs                                         ; initialize stack
  1660 00E5F6
  1661 00E5F6;                                                                                       ; initialize mmu
  1662 00E5F6:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1663 00E5F8:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1664 00E5FA:09 80                                      ora         #MMU_EDIT_EN  [128/$80/"?"]
  1665 00E5FC:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; enable mmu edit, edit mmu lut 0, activate mmu lut 0 ;<<<="UnlockMMU	; enable mmu edit, edit mmu lut 0, activate mmu lut 0"
  1666 00E5FE:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; enable i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO	; enable i/o at $d000, use page 0=i/o registers"
  1667 00E600:A9 00                                      lda         #0  [0/$00]
  1668 00E602:85 08                                      sta         MMU_MEM_BANK_0  [8/$08]         ; map $000000 to bank 0
  1669 00E604:1A                                         inc
  1670 00E605:85 09                                      sta         MMU_MEM_BANK_1  [9/$09]         ; map $002000 to bank 1
  1671 00E607:1A                                         inc
  1672 00E608:85 0A                                      sta         MMU_MEM_BANK_2  [10/$0A]        ; map $004000 to bank 2
  1673 00E60A:1A                                         inc
  1674 00E60B:85 0B                                      sta         MMU_MEM_BANK_3  [11/$0B]        ; map $006000 to bank 3
  1675 00E60D:1A                                         inc
  1676 00E60E:85 0C                                      sta         MMU_MEM_BANK_4  [12/$0C]        ; map $008000 to bank 4
  1677 00E610:1A                                         inc
  1678 00E611:85 0D                                      sta         MMU_MEM_BANK_5  [13/$0D]        ; map $00a000 to bank 5
  1679 00E613:1A                                         inc
  1680 00E614:85 0E                                      sta         MMU_MEM_BANK_6  [14/$0E]        ; map $00c000 to bank 6
  1681 00E616:1A                                         inc
  1682 00E617:85 0F                                      sta         MMU_MEM_BANK_7  [15/$0F]        ; map $00e000 to bank 7
  1683 00E619:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1684 00E61B:29 7F                                      and         #~(MMU_EDIT_EN)  [-129/$FFFFFF7F]
  1685 00E61D:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; disable mmu edit, use mmu lut 0 ;<<<="LockMMU	; disable mmu edit, use mmu lut 0"
  1686 00E61F
  1687 00E61F;                                                                                       ; initialize via registers
  1688 00E61F;                                                                                       ; reset via registers a/b
  1696 00E61F:9C 00 DC                                   stz         VIA_ORB_IRB  [56320/$DC00]      ; set via i/o port a to read
  1697 00E622:9C 01 DC                                   stz         VIA_ORA_IRA  [56321/$DC01]      ; set via i/o port b to read
  1698 00E625
  1699 00E625;                                                                                       ; enable random number generator
  1700 00E625:A9 01                                      lda         #RNG_ENABLE  [1/$01]
  1701 00E627:8D A6 D6                                   sta         RNG_CTRL  [54950/$D6A6]
  1702 00E62A
  1703 00E62A;                                                                                       ; initialize interrupts
  1704 00E62A:A9 FF                                      lda         #$ff  [255/$FF/""]             ; mask off all interrupts
  1705 00E62C:8D 68 D6                                   sta         INT_EDGE_REG0  [54888/$D668]
  1706 00E62F:8D 69 D6                                   sta         INT_EDGE_REG1  [54889/$D669]
  1707 00E632:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1708 00E635:8D 6D D6                                   sta         INT_MASK_REG1  [54893/$D66D]
  1709 00E638
  1710 00E638:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660] ; clear all existing interrupts
  1711 00E63B:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660]
  1712 00E63E:AD 61 D6                                   lda         INT_PENDING_REG1  [54881/$D661]
  1713 00E641:8D 61 D6                                   sta         INT_PENDING_REG1  [54881/$D661]
  1714 00E644
  1715 00E644:20 C0 E5                                   jsr         Init_Sound  [58816/$E5C0]
  1716 00E647:20 CE E4                                   jsr         Init_Graphics  [58574/$E4CE]
  1717 00E64A:20 26 E2                                   jsr         Init_Keyboard  [57894/$E226]
  1718 00E64D:58                                         cli
  1719 00E64E:4C D9 F7                                   jmp         Main  [63449/$F7D9]
  1720 00E651                                            endproc
end scope F256_RESET, restore scope  <<global symbols>>
  1721 00E651                                            endsection    [58960/$E650]
  1722 00E651
  1723 00E651;                                                                                       ;include 'sid.asm'
  1724 00E651
  1725 00E651;                                                                                       ; main game framework stored with libary section
  1726 00E651                                            section     'F256JRLIB'
current section: F256JRLIB, next free address: $00E651
  1727 00E651:[=1/$01 bytes]             SIDSpeed        resb        1
define data constant size=1, fill value 0/$00
  1728 00E652                                            proc        SOFIRQ                          ;	proc Increase_SOFCounter
open scope SOFIRQ, from scope  <<global symbols>>
  1729 00E652;                                                                                       ;	Increase_SOF_Counter()
  1730 00E652;                                                                                       ;	SID_Play_Frame()
  1731 00E652:A9 06                                      lda         #SIDMODE  [6/$06]
  1732 00E654:C9 06                                      cmp         #6  [6/$06]
  1733 00E656:F0 91                                      beq         +  [61161/$EEE9]
  1734 00E658:CE 51 E6                                   dec         SIDSpeed  [58961/$E651]
  1735 00E65B:D0 8C                                      bne         +  [61161/$EEE9]
  1736 00E65D:8D 51 E6                                   sta         SIDSpeed  [58961/$E651]
  1737 00E660:60                                         rts
  1738 00E661                            +
  1739 00E661:20 03 10                                   jsr         SIDPLAY  [4099/$1003]
  1740 00E664:60                                         rts
  1741 00E665                                            endproc
end scope SOFIRQ, restore scope  <<global symbols>>
  1742 00E665
  1743 00E665                                            proc        IRQ_Handler
open scope IRQ_Handler, from scope  <<global symbols>>
  1744 00E665:08                                         php
  1745 00E666:48                                         pha
  1746 00E667:DA                                         phx
  1747 00E668:5A                                         phy                                         ;<<<="PushAXY"
  1748 00E669:D8                                         cld
  1749 00E66A:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1750 00E66C:48                                         pha
  1751 00E66D:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1752 00E66F:48                                         pha                                         ;<<<="PushMMUIO"
  1753 00E670
  1754 00E670:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; use i/o registers ;<<<="SetMMUIO	; use i/o registers"
  1755 00E672:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660]
  1756 00E675:85 20                                      sta         TempIRQ  [32/$20/" "]
  1757 00E677:89 01                                      bit         #JR0_INT00_SOF  [1/$01]
  1758 00E679:F0 95                                      beq         +  [61200/$EF10]
  1759 00E67B:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1760 00E67E:20 52 E6                                   jsr         SOFIRQ  [58962/$E652]           ;Increase_SOFCounter
  1761 00E681:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1762 00E683                            +
  1763 00E683:89 04                                      bit         #JR0_INT02_KBD  [4/$04]
  1764 00E685:F0 96                                      beq         +  [61213/$EF1D]
  1765 00E687:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1766 00E68A:20 58 E2                                   jsr         KeyboardIRQ  [57944/$E258]
  1767 00E68D:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1768 00E68F                            +
  1769 00E68F
  1770 00E68F:68                                         pla
  1771 00E690:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1772 00E692:68                                         pla
  1773 00E693:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1774 00E695:7A                                         ply
  1775 00E696:FA                                         plx
  1776 00E697:68                                         pla                                         ;<<<="PullYXA"
  1777 00E698:28                                         plp
  1778 00E699:40                                         rti
  1779 00E69A                                            endproc
end scope IRQ_Handler, restore scope  <<global symbols>>
  1780 00E69A
  1781 00E69A                                            proc        Init_IRQHandler
open scope Init_IRQHandler, from scope  <<global symbols>>
  1782 00E69A:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1783 00E69C:48                                         pha                                         ;<<<="PushMMUIO"
  1784 00E69D:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1785 00E69F
  1786 00E69F:78                                         sei
  1787 00E6A0                                            AssignWord  (#IRQ_Handler,VECTOR_IRQ)
  1789m00E6A0:A9 65                                      lda         #<(loword(val(copy('#IRQ_Handler',2))))  [101/$65/"e"]
  1790m00E6A2:8D FE FF                                   sta         VECTOR_IRQ  [65534/$FFFE]
  1791m00E6A5:A9 E6                                      lda         #>(loword(val(copy('#IRQ_Handler',2))))  [230/$E6/""]
  1792m00E6A7:8D FF FF                                   sta         (VECTOR_IRQ)+1  [65535/$FFFF]
  1800 00E6AA:A9 FA                                      lda         #~(JR0_INT00_SOF|JR0_INT02_KBD)  [-6/$FFFFFFFA]
  1801 00E6AC:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1802 00E6AF
  1803 00E6AF                                            AssignDWord (#0,SOFCounter)
  1805m00E6AF:A9 00                                      lda         #<(loword(val(copy('#0',2))))  [0/$00]
  1806m00E6B1:85 4D                                      sta         SOFCounter  [77/$4D/"M"]
  1807m00E6B3:A9 00                                      lda         #>(loword(val(copy('#0',2))))  [0/$00]
  1808m00E6B5:92 4D                                      sta         (SOFCounter)+1  [77/$4D/"M"]
  1809m00E6B7:A9 00                                      lda         #<(hiword(val(copy('#0',2))))  [0/$00]
  1810m00E6B9:92 4D                                      sta         (SOFCounter)+2  [77/$4D/"M"]
  1811m00E6BB:A9 00                                      lda         #>(hiword(val(copy('#0',2))))  [0/$00]
  1812m00E6BD:92 4D                                      sta         (SOFCounter)+3  [77/$4D/"M"]
  1824 00E6BF:58                                         cli
  1825 00E6C0
  1826 00E6C0:68                                         pla
  1827 00E6C1:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1828 00E6C3:60                                         rts
  1829 00E6C4                                            endproc
end scope Init_IRQHandler, restore scope  <<global symbols>>
  1830 00E6C4
  1831 00E6C4                                            proc        Init_Audio
open scope Init_Audio, from scope  <<global symbols>>
  1832 00E6C4:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1833 00E6C6:48                                         pha                                         ;<<<="PushMMUIO"
  1834 00E6C7:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1835 00E6C9
  1836 00E6C9;                                                                                       ; init left and right sids
  1837 00E6C9;                                                                                       ;	stz SID_Control
  1838 00E6C9:A2 00                                      ldx         #0  [0/$00]
  1839 00E6CB                            -
  1840 00E6CB:9E 00 D4                                   stz         SID_LEFT,x  [54272/$D400]
  1841 00E6CE:9E 00 D5                                   stz         SID_RIGHT,x  [54528/$D500]
  1842 00E6D1:E8                                         inx
  1843 00E6D2:E0 20                                      cpx         #32  [32/$20/" "]
  1844 00E6D4:D0 F5                                      bne         -  [59083/$E6CB]
  1845 00E6D6
  1846 00E6D6:68                                         pla
  1847 00E6D7:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1848 00E6D9:60                                         rts
  1849 00E6DA                                            endproc
end scope Init_Audio, restore scope  <<global symbols>>
  1850 00E6DA
  1851 00E6DA                                            proc        Init_GameFont
open scope Init_GameFont, from scope  <<global symbols>>
  1852 00E6DA:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1853 00E6DC:48                                         pha                                         ;<<<="PushMMUIO"
  1854 00E6DD:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1855 00E6DF
  1856 00E6DF:A9 01                                      lda         #MMU_IO_PAGE_1  [1/$01]
  1857 00E6E1:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUGFX"
  1858 00E6E3                                            CopyMemSmall (FONT_FANTASY,FONT_MEM,sizeof(FONT_FANTASY))
  1859m00E6E3
  1860m00E6E3                                            {
  1861m00E6E3;                                                                                       ;		AssignWord(FONT_FANTASY,.asrcaddr)
  1862m00E6E3:A9 D9                                      lda         #<(FONT_FANTASY)  [217/$D9/"U"]
  1863m00E6E5:8D B1 EF                                   sta         .srcaddr  [61361/$EFB1]
  1864m00E6E8:A9 EF                                      lda         #>(FONT_FANTASY)  [239/$EF/""]
  1865m00E6EA:8D B2 EF                                   sta         .srcaddr+1  [61362/$EFB2]
  1866m00E6ED;                                                                                       ;		AssignWord(FONT_MEM,.destaddr)
  1867m00E6ED:A9 00                                      lda         #<(FONT_MEM)  [0/$00]
  1868m00E6EF:8D B4 EF                                   sta         .destaddr  [61364/$EFB4]
  1869m00E6F2:A9 C0                                      lda         #>(FONT_MEM)  [192/$C0/"A"]
  1870m00E6F4:8D B5 EF                                   sta         .destaddr+1  [61365/$EFB5]
  1871m00E6F7:A0 00                                      ldy         #0  [0/$00]
  1872m00E6F9                            -
  1873m00E6F9                            .srcaddr        =           *+1  [59130/$E6FA]
  1874m00E6F9:AD 34 12                                   lda         $1234  [4660/$1234]
  1875m00E6FC                            .destaddr       =           *+1  [59133/$E6FD]
  1876m00E6FC:8D 21 43                                   sta         $4321  [17185/$4321]
  1877m00E6FF:EE FA E6                                   inc         .srcaddr  [59130/$E6FA]
  1878m00E702:D0 BA                                      bne         +  [61374/$EFBE]
  1879m00E704:EE FB E6                                   inc         .srcaddr+1  [59131/$E6FB]
  1880m00E707                            +
  1881m00E707:EE FD E6                                   inc         .destaddr  [59133/$E6FD]
  1882m00E70A:D0 BA                                      bne         +  [61382/$EFC6]
  1883m00E70C:EE FE E6                                   inc         .destaddr+1  [59134/$E6FE]
  1884m00E70F                            +
  1885m00E70F:AD FA E6                                   lda         .srcaddr  [59130/$E6FA]
  1886m00E712:C9 D9                                      cmp         #<(FONT_FANTASY+sizeof(FONT_FANTASY))  [217/$D9/"U"]
  1887m00E714:D0 E3                                      bne         -  [59129/$E6F9]
  1888m00E716:AD FB E6                                   lda         .srcaddr+1  [59131/$E6FB]
  1889m00E719:C9 F7                                      cmp         #>(FONT_FANTASY+sizeof(FONT_FANTASY))  [247/$F7/""]
  1890m00E71B:D0 DC                                      bne         -  [59129/$E6F9]
  1891m00E71D
  1892m00E71D                                            }
  1894 00E71D
  1895 00E71D:68                                         pla
  1896 00E71E:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1897 00E720:60                                         rts
  1898 00E721:[=2048/$0800 bytes]        FONT_FANTASY    incbin      'assets\gamefont2.bin'
including binary file 'assets\gamefont2.bin', 2048 bytes [=$000800]
  1899 00EF21                                            endproc
end scope Init_GameFont, restore scope  <<global symbols>>
  1900 00EF21
  1901 00EF21                                            proc        Main
open scope Main, from scope  <<global symbols>>
  1902 00EF21:A9 80                                      lda         #MMU_EDIT_EN  [128/$80/"?"]
  1903 00EF23:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1904 00EF25:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1905 00EF27:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1906 00EF29
  1907 00EF29:A9 3F                                      lda         #(Mstr_Ctrl_Text_Mode_En|Mstr_Ctrl_Text_Overlay|Mstr_Ctrl_Graph_Mode_En|Mstr_Ctrl_Bitmap_En|Mstr_Ctrl_TileMap_En|Mstr_Ctrl_Sprite_En)  [63/$3F/"?"]
  1908 00EF2B:8D 00 D0                                   sta         MASTER_CTRL_REG_L  [53248/$D000]
  1909 00EF2E:A9 06                                      lda         #(Mstr_Ctrl_Text_XDouble|Mstr_Ctrl_Text_YDouble)  [6/$06]
  1910 00EF30:8D 01 D0                                   sta         MASTER_CTRL_REG_H  [53249/$D001]
  1911 00EF33:20 DA E6                                   jsr         Init_GameFont  [59098/$E6DA]
  1912 00EF36:20 C4 E6                                   jsr         Init_Audio  [59076/$E6C4]
  1913 00EF39:20 9A E6                                   jsr         Init_IRQHandler  [59034/$E69A]
  1914 00EF3C
  1915 00EF3C                                            SetCursorColor (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK) ;<<<="SetCursorColor(#DoC64COLOR(LTBLUE,BLACK))"
  1916m00EF3C                                            ConvertParamToA (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK)
  1928m00EF3C:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""]
  1932m00EF3E:85 48                                      sta         CursorColor  [72/$48/"H"]
  1934 00EF40:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1935 00EF43
  1936 00EF43;                                                                                       ; map in title screen code as $06000
  1937 00EF43;                                                                                       ;	lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL ;<<<=";	UnlockMMU"
  1938 00EF43;                                                                                       ;	lda #(TitleScreenCode/$2000)
  1939 00EF43;                                                                                       ;	sta MMU_MEM_BANK_3
  1940 00EF43;                                                                                       ;	lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL ;<<<=";	LockMMU"
  1941 00EF43;                                                                                       ;	jsr ShowTitle
  1942 00EF43                                            PrintString (TX_GAMETITLE,#0,#0,#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)) ;<<<="PrintString(TX_GAMETITLE,#0,#0,#DoC64COLOR(YELLOW,BLACK)))"
  1949m00EF43                                            SetCursorPointer (#0,#0)
  1950m00EF43                                            ConvertParamToA (#0)
  1962m00EF43:A9 00                                      lda         #0  [0/$00]
  1966m00EF45:85 49                                      sta         CursorColumn  [73/$49/"I"]
  1967m00EF47                                            ConvertParamToA (#0)
  1979m00EF47:A9 00                                      lda         #0  [0/$00]
  1983m00EF49:85 4A                                      sta         CursorLine  [74/$4A/"J"]
  1984m00EF4B
  1986m00EF4B:A9 00                                      lda         #<(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [0/$00]
  1987m00EF4D:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1988m00EF4F:A9 C0                                      lda         #>(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [192/$C0/"A"]
  1989m00EF51:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
  1996m00EF53                                            SetCursorColor (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  1997m00EF53                                            ConvertParamToA (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  2009m00EF53:A9 70                                      lda         #(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)  [112/$70/"p"]
  2013m00EF55:85 48                                      sta         CursorColor  [72/$48/"H"]
  2025m00EF57:A9 8E                                      lda         #<TX_GAMETITLE  [142/$8E/"Z"]
  2026m00EF59:85 30                                      sta         TempSrc  [48/$30/"0"]
  2027m00EF5B:A9 F8                                      lda         #>TX_GAMETITLE  [248/$F8/"o"]
  2028m00EF5D:85 31                                      sta         TempSrc+1  [49/$31/"1"]
  2030m00EF5F:20 8C E0                                   jsr         PrintAnsiString  [57484/$E08C]
  2037 00EF62;                                                                                       ;	inc SID_Control
  2038 00EF62;                                                                                       ;	SID_Initialize(0,0)
  2039 00EF62;                                                                                       ;
  2040 00EF62;                                                                                       ;// choose setting
  2041 00EF62;                                                                                       ;poke 54299,2 (overdrive)
  2042 00EF62;                                                                                       ;poke 54299,3 (filters)
  2043 00EF62;                                                                                       ;poke 54299,4 (smoothing)
  2044 00EF62;                                                                                       ;
  2045 00EF62;                                                                                       ;// choose value
  2046 00EF62;                                                                                       ;// overdrive: 0 (medium) 1 (high) 2 (low)
  2047 00EF62;                                                                                       ;// filters:   0 (blend)  1 (8580) 2 (6581)
  2048 00EF62;                                                                                       ;// smoothing: 0 (neat)   1 (soft) 2 (rough)
  2049 00EF62;                                                                                       ;poke 54300,0/1/2 (setting)
  2050 00EF62;                                                                                       ;
  2051 00EF62;                                                                                       ;// apply setting
  2052 00EF62;                                                                                       ;poke 54301,181:poke 54302,29
  2053 00EF62:A9 02                                      lda         #2  [2/$02]
  2054 00EF64:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2055 00EF67:A9 01                                      lda         #1  [1/$01]
  2056 00EF69:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2057 00EF6C:A9 B5                                      lda         #181  [181/$B5/""]
  2058 00EF6E:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2059 00EF71:A9 1D                                      lda         #29  [29/$1D]
  2060 00EF73:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2061 00EF76
  2062 00EF76:A9 03                                      lda         #3  [3/$03]
  2063 00EF78:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2064 00EF7B:A9 01                                      lda         #1  [1/$01]
  2065 00EF7D:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2066 00EF80:A9 B5                                      lda         #181  [181/$B5/""]
  2067 00EF82:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2068 00EF85:A9 1D                                      lda         #29  [29/$1D]
  2069 00EF87:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2070 00EF8A
  2071 00EF8A:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2072 00EF8C:A9 01                                      lda         #1  [1/$01]
  2073 00EF8E:8D 51 E6                                   sta         SIDSpeed  [58961/$E651]
  2074 00EF91:A9 00                                      lda         #0  [0/$00]
  2075 00EF93:20 F6 0F                                   jsr         SIDINIT  [4086/$0FF6]
  2076 00EF96;                                                                                       ;	SID_Initialize(0,0)
  2077 00EF96;                                                                                       ;	SID_SetVolume(-1)
  2078 00EF96;                                                                                       ;	SID_Play()
  2079 00EF96:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2080 00EF98                            -
  2081 00EF98:4C 98 EF                                   jmp         -  [61336/$EF98]
  2082 00EF9B
  2083 00EF9B:[=14/$0E bytes]            TX_GAMETITLE    bytez       SIDFILE  [size=14/$0E]
  2084 00EFA9                                            endproc
end scope Main, restore scope  <<global symbols>>
  2085 00EFA9                                            endsection    [61352/$EFA8]
  2086 00EFA9
  2087 000800                                            section     add('MAIN',$0800,$bfff,size=-1,save=1)
updated section 'MAIN' $000800-00BFFF [-1]
current section: MAIN, next free address: $000800
  2088 000800
  2089 000800:[=1912/$0778 bytes]                        pad         SIDSTART-$7e
define data constant size=1912, fill value 0/$00
  2089 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a000,SIDPLAY=$a003,SIDMODE=5,SIDFILE='toccata_v3.a000'
  2090 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a048,SIDPLAY=$a021,SIDMODE=5,SIDFILE='viola_duet.a000'
  2091 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Super_Mario_Bros_2SID'
  2092 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='mrdo'
  2093 000F78;                                                                                       ;const SIDSTART=$4000,SIDINIT=$4000,SIDPLAY=$4003,SIDMODE=5,SIDFILE='Airwolf_2SID'
  2094 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Space_Oddity_2SID'
  2095 000F78;                                                                                       ;const SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Girl_from_Tomorrow_2SID'
  2096 000F78                                            const       SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Lakeside_2SID'  [4086/$0FF6,4086/$0FF6,4099/$1003,6/$06,"Lakeside_2SID"]
  2097 000F78:[=4139/$102B bytes]                        incbin      'music\'+SIDFILE+'.sid'
including binary file 'music\Lakeside_2SID.sid', 4139 bytes [=$00102B]
  2098 001FA3
  2099 001FA3                                            endsection    [8098/$1FA2]
  2100 001FA3
  2101 001FA3;                                                                                       ;savepgz
  2102 001FA3                                            savebin     'wktitle.0800.bin',$0800 to $0ffff
  2103 001FA3
pass 1 complete - 23:31:29 94 ms
 address range=$000030-00FFFF, checksum=00035A70

pass 2 - 23:31:29
allocating primary target cpu memory $100000/1048576 bytes
     1 000000                                            cpu         'f256jr'
current target cpu F256JR (primary), 0 statement(s), 0/0 code/data byte(s)
     2 000000                                            const       usesystemfont=0  [0/$00]
     3 000000
     4 000000                                            include     'includes\f256jr_registers.asm'
including source file 'includes\f256jr_registers.asm'
     5 000000;                                                                                       ;MMU Registers
     6 000000                            MMU_MEM_CTRL    =           $0000  [0/$00]                  ; MMU Memory Control Register
     7 000000                            MMU_EDIT_EN     =           $80  [128/$80/"?"]
     8 000000                            MMU_IO_CTRL     =           $0001  [1/$01]                  ; MMU I/O Control Register
     9 000000                            MMU_IO_PAGE_0   =           $00  [0/$00]
    10 000000                            MMU_IO_PAGE_1   =           $01  [1/$01]
    11 000000                            MMU_IO_TEXT     =           $02  [2/$02]
    12 000000                            MMU_IO_COLOR    =           $03  [3/$03]
    13 000000                            MMU_MEM_BANK_0  =           $0008  [8/$08]                  ; MMU Edit Register for bank 0 ($0000 - $1FFF)
    14 000000                            MMU_MEM_BANK_1  =           $0009  [9/$09]                  ; MMU Edit Register for bank 1 ($2000 - $3FFF)
    15 000000                            MMU_MEM_BANK_2  =           $000A  [10/$0A]                 ; MMU Edit Register for bank 2 ($4000 - $5FFF)
    16 000000                            MMU_MEM_BANK_3  =           $000B  [11/$0B]                 ; MMU Edit Register for bank 3 ($6000 - $7FFF)
    17 000000                            MMU_MEM_BANK_4  =           $000C  [12/$0C]                 ; MMU Edit Register for bank 4 ($8000 - $9FFF)
    18 000000                            MMU_MEM_BANK_5  =           $000D  [13/$0D]                 ; MMU Edit Register for bank 5 ($A000 - $BFFF)
    19 000000                            MMU_MEM_BANK_6  =           $000E  [14/$0E]                 ; MMU Edit Register for bank 6 ($C000 - $DFFF)
    20 000000                            MMU_MEM_BANK_7  =           $000F  [15/$0F]                 ; MMU Edit Register for bank 7 ($E000 - $FFFF)
    21 000000
    22 000000;                                                                                       ;SDCard_Controller_def.asm
    23 000000
    24 000000;                                                                                       ;SDC_VERSION_REG         = $DD00    ; Ought to read 12
    25 000000;                                                                                       ;SDC_CONTROL_REG         = $DD01    ; Bit0 1 = Reset core logic, and registers. Self clearing
    26 000000;                                                                                       ;SDC_TRANS_TYPE_REG      = $DD02  ; Bit[1:0]
    27 000000;                                                                                       ;SDC_TRANS_DIRECT      = $00   ; 00 = Direct Access
    28 000000;                                                                                       ;SDC_TRANS_INIT_SD     = $01   ; 01 = Init SD
    29 000000;                                                                                       ;SDC_TRANS_READ_BLK    = $02   ; 10 = RW_READ_BLOCK (512 Bytes)
    30 000000;                                                                                       ;SDC_TRANS_WRITE_BLK   = $03   ; 11 = RW_WRITE_SD_BLOCK
    31 000000;                                                                                       ;SDC_TRANS_CONTROL_REG   = $DD03
    32 000000;                                                                                       ;SDC_TRANS_START         = $01
    33 000000;                                                                                       ;SDC_TRANS_STATUS_REG    = $DD04
    34 000000;                                                                                       ;SDC_TRANS_BUSY          = $01     ;  1= Transaction Busy
    35 000000;                                                                                       ;SDC_TRANS_ERROR_REG     = $DD05
    36 000000;                                                                                       ;SDC_TRANS_INIT_NO_ERR   = $00   ; Init Error Report [1:0]
    37 000000;                                                                                       ;SDC_TRANS_INIT_CMD0_ERR = $01
    38 000000;                                                                                       ;SDC_TRANS_INIT_CMD1_ERR = $02
    39 000000;                                                                                       ;SDC_TRANS_RD_NO_ERR     = $00   ; Read Error Report [3:2]
    40 000000;                                                                                       ;SDC_TRANS_RD_CMD_ERR    = $04
    41 000000;                                                                                       ;SDC_TRANS_RD_TOKEN_ERR  = $08
    42 000000;                                                                                       ;SDC_TRANS_WR_NO_ERR     = $00   ; Write Report Error  [5:4]
    43 000000;                                                                                       ;SDC_TRANS_WR_CMD_ERR    = $10   ;
    44 000000;                                                                                       ;SDC_TRANS_WR_DATA_ERR   = $20
    45 000000;                                                                                       ;SDC_TRANS_WR_BUSY_ERR   = $30
    46 000000;                                                                                       ;SDC_DIRECT_ACCESS_REG   = $DD06 ; SPI Direct Read and Write - Set DATA before initiating direct Access Transaction
    47 000000;                                                                                       ;SDC_SD_ADDR_7_0_REG     = $DD07 ; Set the ADDR before a block read or block write
    48 000000;                                                                                       ;SDC_SD_ADDR_15_8_REG    = $DD08 ; Addr0 [8:0] Always should be 0, since each block is 512Bytes
    49 000000;                                                                                       ;SDC_SD_ADDR_23_16_REG   = $DD09
    50 000000;                                                                                       ;SDC_SD_ADDR_31_24_REG   = $DD0A
    51 000000;                                                                                       ;SDC_SPI_CLK_DEL_REG     = $DD0B
    52 000000;                                                                                       ;SDC_RX_FIFO_DATA_REG    = $DD10 ; Data from the Block Read
    53 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_HI = $DD12 ; How many Bytes in the FIFO HI
    54 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_LO = $DD13 ; How many Bytes in the FIFO LO
    55 000000;                                                                                       ;SDC_RX_FIFO_CTRL_REG    = $DD14 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    56 000000;                                                                                       ;SDC_TX_FIFO_DATA_REG    = $DD20 ; Write Data Block here
    57 000000;                                                                                       ;SDC_TX_FIFO_CTRL_REG    = $DD24 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    58 000000
    59 000000
    60 000000;                                                                                       ;interrupt_def.asm
    61 000000
    62 000000                            INT_PENDING_REG0 =          $D660  [54880/$D660]            ;
    63 000000                            INT_PENDING_REG1 =          $D661  [54881/$D661]            ;
    64 000000;                                                                                       ;INT_PENDING_REG2 = $D662 ; NOT USED
    65 000000;                                                                                       ;INT_PENDING_REG3 = $D663 ; NOT USED
    66 000000                            INT_POL_REG0    =           $D664  [54884/$D664]            ;
    67 000000                            INT_POL_REG1    =           $D665  [54885/$D665]            ;
    68 000000;                                                                                       ;INT_POL_REG2     = $D666 ;  NOT USED
    69 000000;                                                                                       ;INT_POL_REG3     = $D667 ; NOT USED
    70 000000                            INT_EDGE_REG0   =           $D668  [54888/$D668]            ;
    71 000000                            INT_EDGE_REG1   =           $D669  [54889/$D669]            ;
    72 000000;                                                                                       ;INT_EDGE_REG2    = $D66A ; NOT USED
    73 000000;                                                                                       ;INT_EDGE_REG3    = $D66B ; NOT USED
    74 000000                            INT_MASK_REG0   =           $D66C  [54892/$D66C]            ;
    75 000000                            INT_MASK_REG1   =           $D66D  [54893/$D66D]            ;
    76 000000;                                                                                       ;INT_MASK_REG2    = $D66E ; NOT USED
    77 000000;                                                                                       ;INT_MASK_REG3    = $D66F ; NOT USED
    78 000000                            JR0_INT00_SOF   =           $01  [1/$01]                    ;Start of Frame @ 60FPS
    79 000000                            JR0_INT01_SOL   =           $02  [2/$02]                    ;Start of Line (Programmable)
    80 000000                            JR0_INT02_KBD   =           $04  [4/$04]                    ;
    81 000000                            JR0_INT03_MOUSE =           $08  [8/$08]                    ;
    82 000000                            JR0_INT04_TMR0  =           $10  [16/$10]                   ;
    83 000000                            JR0_INT05_TMR1  =           $20  [32/$20/" "]               ;Real-Time Clock Interrupt
    84 000000                            JR0_INT06_DMA   =           $40  [64/$40/"@"]               ;Floppy Disk Controller
    85 000000                            JR0_INT07_TBD   =           $80  [128/$80/"?"]              ; Mouse Interrupt (INT12 in SuperIO IOspace)
    86 000000                            JR1_INT00_UART  =           $01  [1/$01]                    ;Keyboard Interrupt
    87 000000                            JR1_INT01_COL0  =           $02  [2/$02]                    ;TYVKY Collision TBD
    88 000000                            JR1_INT02_COL1  =           $04  [4/$04]                    ;TYVKY Collision TBD
    89 000000                            JR1_INT03_COL2  =           $08  [8/$08]                    ;TYVKY Collision TBD
    90 000000                            JR1_INT04_RTC   =           $10  [16/$10]                   ;Serial Port 1
    91 000000                            JR1_INT05_VIA   =           $20  [32/$20/" "]               ;Midi Controller Interrupt
    92 000000                            JR1_INT06_IEC   =           $40  [64/$40/"@"]               ;Parallel Port
    93 000000                            JR1_INT07_SDCARD =          $80  [128/$80/"?"]              ;SDCard Insert
    94 000000
    95 000000
    96 000000;                                                                                       ;RTC_def.asm
    97 000000
    98 000000;                                                                                       ;RTC_SEC       = $D690 ;Seconds Register
    99 000000;                                                                                       ;RTC_SEC_ALARM = $D691 ;Seconds Alarm Register
   100 000000;                                                                                       ;RTC_MIN       = $D692 ;Minutes Register
   101 000000;                                                                                       ;RTC_MIN_ALARM = $D693 ;Minutes Alarm Register
   102 000000;                                                                                       ;RTC_HRS       = $D694 ;Hours Register
   103 000000;                                                                                       ;RTC_HRS_ALARM = $D695 ;Hours Alarm Register
   104 000000;                                                                                       ;RTC_DAY       = $D696 ;Day Register
   105 000000;                                                                                       ;RTC_DAY_ALARM = $D697 ;Day Alarm Register
   106 000000;                                                                                       ;RTC_DOW       = $D698 ;Day of Week Register
   107 000000;                                                                                       ;RTC_MONTH     = $D699 ;Month Register
   108 000000;                                                                                       ;RTC_YEAR      = $D69A ;Year Register
   109 000000;                                                                                       ;RTC_RATES     = $D69B ;Rates Register
   110 000000;                                                                                       ;RTC_ENABLE    = $D69C ;Enables Register
   111 000000;                                                                                       ;RTC_FLAGS     = $D69D ;Flags Register
   112 000000;                                                                                       ;RTC_CTRL      = $D69E ;Control Register
   113 000000;                                                                                       ;RTC_CENTURY   = $D69F ;Century Register
   114 000000
   115 000000
   116 000000;                                                                                       ;VIA_def.asm
   117 000000
   118 000000                            VIA_ORB_IRB     =           $DC00  [56320/$DC00]            ;Output/Input Register Port B
   119 000000                            VIA_ORA_IRA     =           $DC01  [56321/$DC01]            ;Output/Input Register Port B
   120 000000                            VIA_DDRB        =           $DC02  [56322/$DC02]            ;Data Direction Port B
   121 000000                            VIA_DDRA        =           $DC03  [56323/$DC03]            ;Data Direction Port A
   122 000000                            VIA_T1CL        =           $DC04  [56324/$DC04]            ;T1C-L
   123 000000                            VIA_T1CH        =           $DC05  [56325/$DC05]            ;T1C-H
   124 000000                            VIA_T1LL        =           $DC06  [56326/$DC06]            ;T1L-L
   125 000000                            VIA_T1LH        =           $DC07  [56327/$DC07]            ;T1L-H
   126 000000                            VIA_T2CL        =           $DC08  [56328/$DC08]            ;T2C-L
   127 000000                            VIA_T2CH        =           $DC09  [56329/$DC09]            ;T2C-H
   128 000000                            VIA_SR          =           $DC0A  [56330/$DC0A]            ;SR
   129 000000                            VIA_ACR         =           $DC0B  [56331/$DC0B]            ;ACR
   130 000000                            VIA_PCR         =           $DC0C  [56332/$DC0C]            ;PCR
   131 000000                            VIA_IFR         =           $DC0D  [56333/$DC0D]            ;IFR
   132 000000                            VIA_IER         =           $DC0E  [56334/$DC0E]            ;IER
   133 000000                            VIA_ORA_IRA_AUX =           $DC0F  [56335/$DC0F]            ;ORA/IRA
   134 000000                            JOY_UP          =           $01  [1/$01]
   135 000000                            JOY_DWN         =           $02  [2/$02]
   136 000000                            JOY_LFT         =           $04  [4/$04]
   137 000000                            JOY_RGT         =           $08  [8/$08]
   138 000000                            JOY_BUT0        =           $10  [16/$10]
   139 000000                            JOY_BUT1        =           $20  [32/$20/" "]
   140 000000                            JOY_BUT2        =           $40  [64/$40/"@"]
   141 000000;                                                                                       ;JOYA_UP         = $01
   142 000000;                                                                                       ;JOYA_DWN        = $02
   143 000000;                                                                                       ;JOYA_LFT        = $04
   144 000000;                                                                                       ;JOYA_RGT        = $08
   145 000000;                                                                                       ;JOYA_BUT0       = $10
   146 000000;                                                                                       ;JOYA_BUT1       = $20
   147 000000;                                                                                       ;JOYA_BUT2       = $40
   148 000000;                                                                                       ;JOYB_UP         = $01
   149 000000;                                                                                       ;JOYB_DWN        = $02
   150 000000;                                                                                       ;JOYB_LFT        = $04
   151 000000;                                                                                       ;JOYB_RGT        = $08
   152 000000;                                                                                       ;JOYB_BUT0       = $10
   153 000000;                                                                                       ;JOYB_BUT1       = $20
   154 000000;                                                                                       ;JOYB_BUT2       = $40
   155 000000
   156 000000
   157 000000;                                                                                       ;Simple_UART_Jr_def.asm
   158 000000
   159 000000;                                                                                       ;UART_TRHB 	= $D630        ; Transmit/Receive Hold Buffer
   160 000000;                                                                                       ;UART_DLL 	= $D630        ; Divisor Latch Low Byte
   161 000000;                                                                                       ;UART_DLH 	= $D631        ; Divisor Latch High Byte
   162 000000;                                                                                       ;UART_IER 	= $D631        ; Interupt Enable Register
   163 000000;                                                                                       ;UART_FCR 	= $D632        ; FIFO Control Register
   164 000000;                                                                                       ;UART_IIR 	= $D632        ; Interupt Indentification Register
   165 000000;                                                                                       ;UART_LCR 	= $D633        ; Line Control Register
   166 000000;                                                                                       ;UART_MCR 	= $D634        ; Modem Control REgister
   167 000000;                                                                                       ;UART_LSR 	= $D635        ; Line Status Register
   168 000000;                                                                                       ;UART_MSR 	= $D636        ; Modem Status Register
   169 000000;                                                                                       ;UART_SR 	= $D637        ; Scratch Register
   170 000000;                                                                                       ;UINT_LOW_POWER = $20        ; Enable Low Power Mode (16750)
   171 000000;                                                                                       ;UINT_SLEEP_MODE = $10       ; Enable Sleep Mode (16750)
   172 000000;                                                                                       ;UINT_MODEM_STATUS = $08     ; Enable Modem Status Interrupt
   173 000000;                                                                                       ;UINT_LINE_STATUS = $04      ; Enable Receiver Line Status Interupt
   174 000000;                                                                                       ;UINT_THR_EMPTY = $02        ; Enable Transmit Holding Register Empty interrupt
   175 000000;                                                                                       ;UINT_DATA_AVAIL = $01       ; Enable Recieve Data Available interupt
   176 000000;                                                                                       ;IIR_FIFO_ENABLED = $80      ; FIFO is enabled
   177 000000;                                                                                       ;IIR_FIFO_NONFUNC = $40      ; FIFO is not functioning
   178 000000;                                                                                       ;IIR_FIFO_64BYTE = $20       ; 64 byte FIFO enabled (16750)
   179 000000;                                                                                       ;IIR_MODEM_STATUS = $00      ; Modem Status Interrupt
   180 000000;                                                                                       ;IIR_THR_EMPTY = $02         ; Transmit Holding Register Empty Interrupt
   181 000000;                                                                                       ;IIR_DATA_AVAIL = $04        ; Data Available Interrupt
   182 000000;                                                                                       ;IIR_LINE_STATUS = $06       ; Line Status Interrupt
   183 000000;                                                                                       ;IIR_TIMEOUT = $0C           ; Time-out Interrupt (16550 and later)
   184 000000;                                                                                       ;IIR_INTERRUPT_PENDING = $01 ; Interrupt Pending Flag
   185 000000;                                                                                       ;LCR_DLB = $80               ; Divisor Latch Access Bit
   186 000000;                                                                                       ;LCR_SBE = $60               ; Set Break Enable
   187 000000;                                                                                       ;LCR_PARITY_NONE = $00       ; Parity: None
   188 000000;                                                                                       ;LCR_PARITY_ODD = $08        ; Parity: Odd
   189 000000;                                                                                       ;LCR_PARITY_EVEN = $18       ; Parity: Even
   190 000000;                                                                                       ;LCR_PARITY_MARK = $28       ; Parity: Mark
   191 000000;                                                                                       ;LCR_PARITY_SPACE = $38      ; Parity: Space
   192 000000;                                                                                       ;LCR_STOPBIT_1 = $00         ; One Stop Bit
   193 000000;                                                                                       ;LCR_STOPBIT_2 = $04         ; 1.5 or 2 Stop Bits
   194 000000;                                                                                       ;LCR_DATABITS_5 = $00        ; Data Bits: 5
   195 000000;                                                                                       ;LCR_DATABITS_6 = $01        ; Data Bits: 6
   196 000000;                                                                                       ;LCR_DATABITS_7 = $02        ; Data Bits: 7
   197 000000;                                                                                       ;LCR_DATABITS_8 = $03        ; Data Bits: 8
   198 000000;                                                                                       ;LSR_ERR_RECIEVE = $80       ; Error in Received FIFO
   199 000000;                                                                                       ;LSR_XMIT_DONE = $40         ; All data has been transmitted
   200 000000;                                                                                       ;LSR_XMIT_EMPTY = $20        ; Empty transmit holding register
   201 000000;                                                                                       ;LSR_BREAK_INT = $10         ; Break interrupt
   202 000000;                                                                                       ;LSR_ERR_FRAME = $08         ; Framing error
   203 000000;                                                                                       ;LSR_ERR_PARITY = $04        ; Parity error
   204 000000;                                                                                       ;LSR_ERR_OVERRUN = $02       ; Overrun error
   205 000000;                                                                                       ;LSR_DATA_AVAIL = $01        ; Data is ready in the receive buffer
   206 000000
   207 000000
   208 000000;                                                                                       ;TinyVicky_Def.asm
   209 000000
   210 000000                            MASTER_CTRL_REG_L =         $D000  [53248/$D000]
   211 000000                            Mstr_Ctrl_Text_Mode_En =    $01  [1/$01]                    ; Enable the Text Mode
   212 000000                            Mstr_Ctrl_Text_Overlay =    $02  [2/$02]                    ; Enable the Overlay of the text mode on top of Graphic Mode (the Background Color is ignored)
   213 000000                            Mstr_Ctrl_Graph_Mode_En =   $04  [4/$04]                    ; Enable the Graphic Mode
   214 000000                            Mstr_Ctrl_Bitmap_En =       $08  [8/$08]                    ; Enable the Bitmap Module In Vicky
   215 000000                            Mstr_Ctrl_TileMap_En =      $10  [16/$10]                   ; Enable the Tile Module in Vicky
   216 000000                            Mstr_Ctrl_Sprite_En =       $20  [32/$20/" "]               ; Enable the Sprite Module in Vicky
   217 000000                            Mstr_Ctrl_GAMMA_En =        $40  [64/$40/"@"]               ; this Enable the GAMMA correction - The Analog and DVI have different color value, the GAMMA is great to correct the difference
   218 000000                            Mstr_Ctrl_Disable_Vid =     $80  [128/$80/"?"]              ; This will disable the Scanning of the Video hence giving 100% bandwith to the CPU
   219 000000                            MASTER_CTRL_REG_H =         $D001  [53249/$D001]
   220 000000                            Mstr_Ctrl_Video_Mode =      $01  [1/$01]                    ; 0 - 640x480@60Hz : 1 - 640x400@70hz (text mode) // 0 - 320x240@60hz : 1 - 320x200@70Hz (Graphic Mode & Text mode when Doubling = 1)
   221 000000                            Mstr_Ctrl_Text_XDouble =    $02  [2/$02]                    ; X Pixel Doubling
   222 000000                            Mstr_Ctrl_Text_YDouble =    $04  [4/$04]                    ; Y Pixel Doubling
   223 000000                            LAYER_CTRL_REG_0 =          $D002  [53250/$D002]
   224 000000                            LAYER_CTRL_REG_1 =          $D003  [53251/$D003]
   225 000000                            BORDER_CTRL_REG =           $D004  [53252/$D004]            ; Bit[0] - Enable (1 by default)  Bit[4..6]: X Scroll Offset ( Will scroll Left) (Acceptable Value: 0..7)
   226 000000                            Border_Ctrl_Enable =        $01  [1/$01]
   227 000000                            BORDER_COLOR_B  =           $D005  [53253/$D005]
   228 000000                            BORDER_COLOR_G  =           $D006  [53254/$D006]
   229 000000                            BORDER_COLOR_R  =           $D007  [53255/$D007]
   230 000000                            BORDER_X_SIZE   =           $D008  [53256/$D008]            ; X-  Values: 0 - 32 (Default: 32)
   231 000000                            BORDER_Y_SIZE   =           $D009  [53257/$D009]            ; Y- Values 0 -32 (Default: 32)
   232 000000;                                                                                       ;VKY_RESERVED_02         = $D00A
   233 000000;                                                                                       ;VKY_RESERVED_03         = $D00B
   234 000000;                                                                                       ;VKY_RESERVED_04         = $D00C
   235 000000                            BACKGROUND_COLOR_B =        $D00D  [53261/$D00D]            ; When in Graphic Mode, if a pixel is "0" then the Background pixel is chosen
   236 000000                            BACKGROUND_COLOR_G =        $D00E  [53262/$D00E]
   237 000000                            BACKGROUND_COLOR_R =        $D00F  [53263/$D00F]            ;
   238 000000                            VKY_TXT_CURSOR_CTRL_REG =   $D010  [53264/$D010]            ;[0]  Enable Text Mode
   239 000000                            Vky_Cursor_Enable =         $01  [1/$01]
   240 000000                            Vky_Cursor_Flash_Rate0 =    $02  [2/$02]
   241 000000                            Vky_Cursor_Flash_Rate1 =    $04  [4/$04]
   242 000000                            VKY_TXT_START_ADD_PTR =     $D011  [53265/$D011]            ; This is an offset to change the Starting address of the Text Mode Buffer (in x)
   243 000000                            VKY_TXT_CURSOR_CHAR_REG =   $D012  [53266/$D012]
   244 000000                            VKY_TXT_CURSOR_COLR_REG =   $D013  [53267/$D013]
   245 000000                            VKY_TXT_CURSOR_X_REG_L =    $D014  [53268/$D014]
   246 000000                            VKY_TXT_CURSOR_X_REG_H =    $D015  [53269/$D015]
   247 000000                            VKY_TXT_CURSOR_Y_REG_L =    $D016  [53270/$D016]
   248 000000                            VKY_TXT_CURSOR_Y_REG_H =    $D017  [53271/$D017]
   249 000000                            VKY_LINE_IRQ_CTRL_REG =     $D018  [53272/$D018]            ;[0] - Enable Line 0 - WRITE ONLY
   250 000000                            VKY_LINE_CMP_VALUE_LO =     $D019  [53273/$D019]            ;Write Only [7:0]
   251 000000                            VKY_LINE_CMP_VALUE_HI =     $D01A  [53274/$D01A]            ;Write Only [3:0]
   252 000000                            VKY_PIXEL_X_POS_LO =        $D018  [53272/$D018]            ; This is Where on the video line is the Pixel
   253 000000                            VKY_PIXEL_X_POS_HI =        $D019  [53273/$D019]            ; Or what pixel is being displayed when the register is read
   254 000000                            VKY_LINE_Y_POS_LO =         $D01A  [53274/$D01A]            ; This is the Line Value of the Raster
   255 000000                            VKY_LINE_Y_POS_HI =         $D01B  [53275/$D01B]            ;
   256 000000                            TyVKY_BM0_CTRL_REG =        $D100  [53504/$D100]
   257 000000                            BM0_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   258 000000                            BM0_LUT0        =           $02  [2/$02]                    ; LUT0
   259 000000                            BM0_LUT1        =           $04  [4/$04]                    ; LUT1
   260 000000                            TyVKY_BM0_START_ADDY_L =    $D101  [53505/$D101]
   261 000000                            TyVKY_BM0_START_ADDY_M =    $D102  [53506/$D102]
   262 000000                            TyVKY_BM0_START_ADDY_H =    $D103  [53507/$D103]
   263 000000                            TyVKY_BM1_CTRL_REG =        $D108  [53512/$D108]
   264 000000                            BM1_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   265 000000                            BM1_LUT0        =           $02  [2/$02]                    ; LUT0
   266 000000                            BM1_LUT1        =           $04  [4/$04]                    ; LUT1
   267 000000                            TyVKY_BM1_START_ADDY_L =    $D109  [53513/$D109]
   268 000000                            TyVKY_BM1_START_ADDY_M =    $D10A  [53514/$D10A]
   269 000000                            TyVKY_BM1_START_ADDY_H =    $D10B  [53515/$D10B]
   270 000000                            TyVKY_BM2_CTRL_REG =        $D110  [53520/$D110]
   271 000000                            BM2_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   272 000000                            BM2_LUT0        =           $02  [2/$02]                    ; LUT0
   273 000000                            BM2_LUT1        =           $04  [4/$04]                    ; LUT1
   274 000000                            BM2_LUT2        =           $08  [8/$08]                    ; LUT2
   275 000000                            TyVKY_BM2_START_ADDY_L =    $D111  [53521/$D111]
   276 000000                            TyVKY_BM2_START_ADDY_M =    $D112  [53522/$D112]
   277 000000                            TyVKY_BM2_START_ADDY_H =    $D113  [53523/$D113]
   278 000000                            TyVKY_TL_CTRL0  =           $D200  [53760/$D200]
   279 000000                            TILE_Enable     =           $01  [1/$01]
   280 000000                            TILE_LUT0       =           $02  [2/$02]
   281 000000                            TILE_LUT1       =           $04  [4/$04]
   282 000000                            TILE_LUT2       =           $08  [8/$08]
   283 000000                            TILE_SIZE       =           $10  [16/$10]                   ; 0 -> 16x16, 0 -> 8x8
   284 000000                            TL0_CONTROL_REG =           $D200  [53760/$D200]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   285 000000                            TL0_START_ADDY_L =          $D201  [53761/$D201]            ; Not USed right now - Starting Address to where is the MAP
   286 000000                            TL0_START_ADDY_M =          $D202  [53762/$D202]
   287 000000                            TL0_START_ADDY_H =          $D203  [53763/$D203]
   288 000000                            TL0_MAP_X_SIZE_L =          $D204  [53764/$D204]            ; The Size X of the Map
   289 000000                            TL0_MAP_X_SIZE_H =          $D205  [53765/$D205]
   290 000000                            TL0_MAP_Y_SIZE_L =          $D206  [53766/$D206]            ; The Size Y of the Map
   291 000000                            TL0_MAP_Y_SIZE_H =          $D207  [53767/$D207]
   292 000000                            TL0_MAP_X_POS_L =           $D208  [53768/$D208]            ; The Position X of the Map
   293 000000                            TL0_MAP_X_POS_H =           $D209  [53769/$D209]
   294 000000                            TL0_MAP_Y_POS_L =           $D20A  [53770/$D20A]            ; The Position Y of the Map
   295 000000                            TL0_MAP_Y_POS_H =           $D20B  [53771/$D20B]
   296 000000                            TL1_CONTROL_REG =           $D20C  [53772/$D20C]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   297 000000                            TL1_START_ADDY_L =          $D20D  [53773/$D20D]            ; Not USed right now - Starting Address to where is the MAP
   298 000000                            TL1_START_ADDY_M =          $D20E  [53774/$D20E]
   299 000000                            TL1_START_ADDY_H =          $D20F  [53775/$D20F]
   300 000000                            TL1_MAP_X_SIZE_L =          $D210  [53776/$D210]            ; The Size X of the Map
   301 000000                            TL1_MAP_X_SIZE_H =          $D211  [53777/$D211]
   302 000000                            TL1_MAP_Y_SIZE_L =          $D212  [53778/$D212]            ; The Size Y of the Map
   303 000000                            TL1_MAP_Y_SIZE_H =          $D213  [53779/$D213]
   304 000000                            TL1_MAP_X_POS_L =           $D214  [53780/$D214]            ; The Position X of the Map
   305 000000                            TL1_MAP_X_POS_H =           $D215  [53781/$D215]
   306 000000                            TL1_MAP_Y_POS_L =           $D216  [53782/$D216]            ; The Position Y of the Map
   307 000000                            TL1_MAP_Y_POS_H =           $D217  [53783/$D217]
   308 000000                            TL2_CONTROL_REG =           $D218  [53784/$D218]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   309 000000                            TL2_START_ADDY_L =          $D219  [53785/$D219]            ; Not USed right now - Starting Address to where is the MAP
   310 000000                            TL2_START_ADDY_M =          $D21A  [53786/$D21A]
   311 000000                            TL2_START_ADDY_H =          $D21B  [53787/$D21B]
   312 000000                            TL2_MAP_X_SIZE_L =          $D21C  [53788/$D21C]            ; The Size X of the Map
   313 000000                            TL2_MAP_X_SIZE_H =          $D21D  [53789/$D21D]
   314 000000                            TL2_MAP_Y_SIZE_L =          $D21E  [53790/$D21E]            ; The Size Y of the Map
   315 000000                            TL2_MAP_Y_SIZE_H =          $D21F  [53791/$D21F]
   316 000000                            TL2_MAP_X_POS_L =           $D220  [53792/$D220]            ; The Position X of the Map
   317 000000                            TL2_MAP_X_POS_H =           $D221  [53793/$D221]
   318 000000                            TL2_MAP_Y_POS_L =           $D222  [53794/$D222]            ; The Position Y of the Map
   319 000000                            TL2_MAP_Y_POS_H =           $D223  [53795/$D223]
   320 000000                            TILE_MAP_ADDY0_L =          $D280  [53888/$D280]
   321 000000                            TILE_MAP_ADDY0_M =          $D281  [53889/$D281]
   322 000000                            TILE_MAP_ADDY0_H =          $D282  [53890/$D282]
   323 000000                            TILE_MAP_ADDY0_CFG =        $D283  [53891/$D283]
   324 000000                            TILE_MAP_ADDY1  =           $D284  [53892/$D284]
   325 000000                            TILE_MAP_ADDY2  =           $D288  [53896/$D288]
   326 000000                            TILE_MAP_ADDY3  =           $D28C  [53900/$D28C]
   327 000000                            TILE_MAP_ADDY4  =           $D290  [53904/$D290]
   328 000000                            TILE_MAP_ADDY5  =           $D294  [53908/$D294]
   329 000000                            TILE_MAP_ADDY6  =           $D298  [53912/$D298]
   330 000000                            TILE_MAP_ADDY7  =           $D29C  [53916/$D29C]
   331 000000                            XYMATH_CTRL_REG =           $D300  [54016/$D300]            ; Reserved
   332 000000                            XYMATH_ADDY_L   =           $D301  [54017/$D301]            ; W
   333 000000                            XYMATH_ADDY_M   =           $D302  [54018/$D302]            ; W
   334 000000                            XYMATH_ADDY_H   =           $D303  [54019/$D303]            ; W
   335 000000                            XYMATH_ADDY_POSX_L =        $D304  [54020/$D304]            ; R/W
   336 000000                            XYMATH_ADDY_POSX_H =        $D305  [54021/$D305]            ; R/W
   337 000000                            XYMATH_ADDY_POSY_L =        $D306  [54022/$D306]            ; R/W
   338 000000                            XYMATH_ADDY_POSY_H =        $D307  [54023/$D307]            ; R/W
   339 000000                            XYMATH_BLOCK_OFF_L =        $D308  [54024/$D308]            ; R Only - Low Block Offset
   340 000000                            XYMATH_BLOCK_OFF_H =        $D309  [54025/$D309]            ; R Only - Hi Block Offset
   341 000000                            XYMATH_MMU_BLOCK =          $D30A  [54026/$D30A]            ; R Only - Which MMU Block
   342 000000                            XYMATH_ABS_ADDY_L =         $D30B  [54027/$D30B]            ; Low Absolute Results
   343 000000                            XYMATH_ABS_ADDY_M =         $D30C  [54028/$D30C]            ; Mid Absolute Results
   344 000000                            XYMATH_ABS_ADDY_H =         $D30D  [54029/$D30D]            ; Hi Absolute Results
   345 000000                            SPRITE_Ctrl_Enable =        $01  [1/$01]
   346 000000                            SPRITE_LUT0     =           $02  [2/$02]
   347 000000                            SPRITE_LUT1     =           $04  [4/$04]
   348 000000                            SPRITE_DEPTH0   =           $08  [8/$08]                    ; 00 = Total Front - 01 = In between L0 and L1, 10 = In between L1 and L2, 11 = Total Back
   349 000000                            SPRITE_DEPTH1   =           $10  [16/$10]
   350 000000                            SPRITE_SIZE0    =           $20  [32/$20/" "]               ; 00 = 32x32 - 01 = 24x24 - 10 = 16x16 - 11 = 8x8
   351 000000                            SPRITE_SIZE1    =           $40  [64/$40/"@"]
   352 000000                            SP0_Ctrl        =           $D900  [55552/$D900]
   353 000000                            SP0_Addy_L      =           $D901  [55553/$D901]
   354 000000                            SP0_Addy_M      =           $D902  [55554/$D902]
   355 000000                            SP0_Addy_H      =           $D903  [55555/$D903]
   356 000000                            SP0_X_L         =           $D904  [55556/$D904]
   357 000000                            SP0_X_H         =           $D905  [55557/$D905]
   358 000000                            SP0_Y_L         =           $D906  [55558/$D906]            ; In the Jr, only the L is used (200 & 240)
   359 000000                            SP0_Y_H         =           $D907  [55559/$D907]            ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   360 000000;                                                                                       ;SP1_Ctrl           = $D908
   361 000000;                                                                                       ;SP1_Addy_L         = $D909
   362 000000;                                                                                       ;SP1_Addy_M         = $D90A
   363 000000;                                                                                       ;SP1_Addy_H         = $D90B
   364 000000;                                                                                       ;SP1_X_L            = $D90C
   365 000000;                                                                                       ;SP1_X_H            = $D90D
   366 000000;                                                                                       ;SP1_Y_L            = $D90E  ; In the Jr, only the L is used (200 & 240)
   367 000000;                                                                                       ;SP1_Y_H            = $D90F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   368 000000;                                                                                       ;SP2_Ctrl           = $D910
   369 000000;                                                                                       ;SP2_Addy_L         = $D911
   370 000000;                                                                                       ;SP2_Addy_M         = $D912
   371 000000;                                                                                       ;SP2_Addy_H         = $D913
   372 000000;                                                                                       ;SP2_X_L            = $D914
   373 000000;                                                                                       ;SP2_X_H            = $D915
   374 000000;                                                                                       ;SP2_Y_L            = $D916  ; In the Jr, only the L is used (200 & 240)
   375 000000;                                                                                       ;SP2_Y_H            = $D917  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   376 000000;                                                                                       ;SP3_Ctrl           = $D918
   377 000000;                                                                                       ;SP3_Addy_L         = $D919
   378 000000;                                                                                       ;SP3_Addy_M         = $D91A
   379 000000;                                                                                       ;SP3_Addy_H         = $D91B
   380 000000;                                                                                       ;SP3_X_L            = $D91C
   381 000000;                                                                                       ;SP3_X_H            = $D91D
   382 000000;                                                                                       ;SP3_Y_L            = $D91E  ; In the Jr, only the L is used (200 & 240)
   383 000000;                                                                                       ;SP3_Y_H            = $D91F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   384 000000;                                                                                       ;SP4_Ctrl           = $D920
   385 000000;                                                                                       ;SP4_Addy_L         = $D921
   386 000000;                                                                                       ;SP4_Addy_M         = $D922
   387 000000;                                                                                       ;SP4_Addy_H         = $D923
   388 000000;                                                                                       ;SP4_X_L            = $D924
   389 000000;                                                                                       ;SP4_X_H            = $D925
   390 000000;                                                                                       ;SP4_Y_L            = $D926  ; In the Jr, only the L is used (200 & 240)
   391 000000;                                                                                       ;SP4_Y_H            = $D927  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   392 000000                            TyVKY_LUT0      =           $D000  [53248/$D000]            ; IO Page 1 -$D000 - $D3FF
   393 000000                            TyVKY_LUT1      =           $D400  [54272/$D400]            ; IO Page 1 -$D400 - $D7FF
   394 000000                            TyVKY_LUT2      =           $D800  [55296/$D800]            ; IO Page 1 -$D800 - $DBFF
   395 000000                            TyVKY_LUT3      =           $DC00  [56320/$DC00]            ; IO Page 1 -$DC00 - $DFFF
   396 000000
   397 000000
   398 000000
   399 000000                            DMA_CTRL_REG    =           $DF00  [57088/$DF00]
   400 000000                            DMA_CTRL_Enable =           $01  [1/$01]
   401 000000                            DMA_CTRL_1D_2D  =           $02  [2/$02]
   402 000000                            DMA_CTRL_Fill   =           $04  [4/$04]
   403 000000                            DMA_CTRL_Int_En =           $08  [8/$08]
   404 000000;                                                                                       ;DMA_CTRL_NotUsed0   = $10
   405 000000;                                                                                       ;DMA_CTRL_NotUsed1   = $20
   406 000000;                                                                                       ;DMA_CTRL_NotUsed2   = $40
   407 000000                            DMA_CTRL_Start_Trf =        $80  [128/$80/"?"]
   408 000000                            DMA_DATA_2_WRITE =          $DF01  [57089/$DF01]            ; Write Only
   409 000000                            DMA_STATUS_REG  =           $DF01  [57089/$DF01]            ; Read Only
   410 000000                            DMA_STATUS_TRF_IP =         $80  [128/$80/"?"]              ; Transfer in Progress
   411 000000;                                                                                       ;DMA_RESERVED_0      = $DF02
   412 000000;                                                                                       ;DMA_RESERVED_1      = $DF03
   413 000000                            DMA_SOURCE_ADDY_L =         $DF04  [57092/$DF04]
   414 000000                            DMA_SOURCE_ADDY_M =         $DF05  [57093/$DF05]
   415 000000                            DMA_SOURCE_ADDY_H =         $DF06  [57094/$DF06]
   416 000000;                                                                                       ;DMA_RESERVED_2      = $DF07
   417 000000                            DMA_DEST_ADDY_L =           $DF08  [57096/$DF08]
   418 000000                            DMA_DEST_ADDY_M =           $DF09  [57097/$DF09]
   419 000000                            DMA_DEST_ADDY_H =           $DF0A  [57098/$DF0A]
   420 000000;                                                                                       ;DMA_RESERVED_3      = $DF0B
   421 000000                            DMA_SIZE_1D_L   =           $DF0C  [57100/$DF0C]
   422 000000                            DMA_SIZE_1D_M   =           $DF0D  [57101/$DF0D]
   423 000000                            DMA_SIZE_1D_H   =           $DF0E  [57102/$DF0E]
   424 000000;                                                                                       ;DMA_RESERVED_4      = $DF0F
   425 000000                            DMA_SIZE_X_L    =           $DF0C  [57100/$DF0C]
   426 000000                            DMA_SIZE_X_H    =           $DF0D  [57101/$DF0D]
   427 000000                            DMA_SIZE_Y_L    =           $DF0E  [57102/$DF0E]
   428 000000                            DMA_SIZE_Y_H    =           $DF0F  [57103/$DF0F]
   429 000000                            DMA_SRC_STRIDE_X_L =        $DF10  [57104/$DF10]
   430 000000                            DMA_SRC_STRIDE_X_H =        $DF11  [57105/$DF11]
   431 000000                            DMA_DST_STRIDE_Y_L =        $DF12  [57106/$DF12]
   432 000000                            DMA_DST_STRIDE_Y_H =        $DF13  [57107/$DF13]
   433 000000;                                                                                       ;DMA_RESERVED_5      = $DF14
   434 000000;                                                                                       ;DMA_RESERVED_6      = $DF15
   435 000000;                                                                                       ;DMA_RESERVED_7      = $DF16
   436 000000;                                                                                       ;DMA_RESERVED_8      = $DF17
   437 000000
   438 000000
   439 000000;                                                                                       ;C256_Jr_SID_def.asm
   440 000000
   441 000000                            SID_L_V1_FREQ_LO =          $D400  [54272/$D400]            ;SID - L - Voice 1 (Write Only) - FREQ LOW
   442 000000                            SID_L_V1_FREQ_HI =          $D401  [54273/$D401]            ;SID - L - Voice 1 (Write Only) - FREQ HI
   443 000000                            SID_L_V1_PW_LO  =           $D402  [54274/$D402]            ;SID - L - Voice 1 (Write Only) - PW LOW
   444 000000                            SID_L_V1_PW_HI  =           $D403  [54275/$D403]            ;SID - L - Voice 1 (Write Only) - PW HI
   445 000000                            SID_L_V1_CTRL   =           $D404  [54276/$D404]            ;SID - L - Voice 1 (Write Only) - CTRL REG
   446 000000                            SID_L_V1_ATCK_DECY =        $D405  [54277/$D405]            ;SID - L - Voice 1 (Write Only) - ATTACK / DECAY
   447 000000                            SID_L_V1_SSTN_RLSE =        $D406  [54278/$D406]            ;SID - L - Voice 1 (Write Only) - SUSTAIN / RELEASE
   448 000000                            SID_L_V2_FREQ_LO =          $D407  [54279/$D407]            ;SID - L - Voice 2 (Write Only) - FREQ LOW
   449 000000                            SID_L_V2_FREQ_HI =          $D408  [54280/$D408]            ;SID - L - Voice 2 (Write Only) - FREQ HI
   450 000000                            SID_L_V2_PW_LO  =           $D409  [54281/$D409]            ;SID - L - Voice 2 (Write Only) - PW LOW
   451 000000                            SID_L_V2_PW_HI  =           $D40A  [54282/$D40A]            ;SID - L - Voice 2 (Write Only) - PW HI
   452 000000                            SID_L_V2_CTRL   =           $D40B  [54283/$D40B]            ;SID - L - Voice 2 (Write Only) - CTRL REG
   453 000000                            SID_L_V2_ATCK_DECY =        $D40C  [54284/$D40C]            ;SID - L - Voice 2 (Write Only) - ATTACK / DECAY
   454 000000                            SID_L_V2_SSTN_RLSE =        $D40D  [54285/$D40D]            ;SID - L - Voice 2 (Write Only) - SUSTAIN / RELEASE
   455 000000                            SID_L_V3_FREQ_LO =          $D40E  [54286/$D40E]            ;SID - L - Voice 3 (Write Only) - FREQ LOW
   456 000000                            SID_L_V3_FREQ_HI =          $D40F  [54287/$D40F]            ;SID - L - Voice 3 (Write Only) - FREQ HI
   457 000000                            SID_L_V3_PW_LO  =           $D410  [54288/$D410]            ;SID - L - Voice 3 (Write Only) - PW LOW
   458 000000                            SID_L_V3_PW_HI  =           $D411  [54289/$D411]            ;SID - L - Voice 3 (Write Only) - PW HI
   459 000000                            SID_L_V3_CTRL   =           $D412  [54290/$D412]            ;SID - L - Voice 3 (Write Only) - CTRL REG
   460 000000                            SID_L_V3_ATCK_DECY =        $D413  [54291/$D413]            ;SID - L - Voice 3 (Write Only) - ATTACK / DECAY
   461 000000                            SID_L_V3_SSTN_RLSE =        $D414  [54292/$D414]            ;SID - L - Voice 3 (Write Only) - SUSTAIN / RELEASE
   462 000000                            SID_L_FC_LO     =           $D415  [54293/$D415]            ;SID - L - Filter (Write Only) - FC LOW
   463 000000                            SID_L_FC_HI     =           $D416  [54294/$D416]            ;SID - L - Filter (Write Only) - FC HI
   464 000000                            SID_L_RES_FILT  =           $D417  [54295/$D417]            ;SID - L - Filter (Write Only) - RES / FILT
   465 000000                            SID_L_MODE_VOL  =           $D418  [54296/$D418]            ;SID - L - Filter (Write Only) - MODE / VOL
   466 000000                            SID_L_POT_X     =           $D419  [54297/$D419]            ;SID - L - Misc (Read Only) - POT X (C256 - NOT USED)
   467 000000                            SID_L_POT_Y     =           $D41A  [54298/$D41A]            ;SID - L - Misc (Read Only) - POT Y (C256 - NOT USED)
   468 000000                            SID_L_OSC3_RND  =           $D41B  [54299/$D41B]            ;SID - L - Misc (Read Only) - OSC3 / RANDOM
   469 000000                            SID_L_ENV3      =           $D41C  [54300/$D41C]            ;SID - L - Misc (Read Only)  - ENV3
   470 000000;                                                                                       ;SID_L_NOT_USED0     = $D41D ;SID - L - NOT USED
   471 000000;                                                                                       ;SID_L_NOT_USED1     = $D41E ;SID - L - NOT USED
   472 000000;                                                                                       ;SID_L_NOT_USED2     = $D41F ;SID - L - NOT USED
   473 000000                            SID_R_V1_FREQ_LO =          $D500  [54528/$D500]            ;SID - R - Voice 1 (Write Only) - FREQ LOW
   474 000000                            SID_R_V1_FREQ_HI =          $D501  [54529/$D501]            ;SID - R - Voice 1 (Write Only) - FREQ HI
   475 000000                            SID_R_V1_PW_LO  =           $D502  [54530/$D502]            ;SID - R - Voice 1 (Write Only) - PW LOW
   476 000000                            SID_R_V1_PW_HI  =           $D503  [54531/$D503]            ;SID - R - Voice 1 (Write Only) - PW HI
   477 000000                            SID_R_V1_CTRL   =           $D504  [54532/$D504]            ;SID - R - Voice 1 (Write Only) - CTRL REG
   478 000000                            SID_R_V1_ATCK_DECY =        $D505  [54533/$D505]            ;SID - R - Voice 1 (Write Only) - ATTACK / DECAY
   479 000000                            SID_R_V1_SSTN_RLSE =        $D506  [54534/$D506]            ;SID - R - Voice 1 (Write Only) - SUSTAIN / RELEASE
   480 000000                            SID_R_V2_FREQ_LO =          $D507  [54535/$D507]            ;SID - R - Voice 2 (Write Only) - FREQ LOW
   481 000000                            SID_R_V2_FREQ_HI =          $D508  [54536/$D508]            ;SID - R - Voice 2 (Write Only) - FREQ HI
   482 000000                            SID_R_V2_PW_LO  =           $D509  [54537/$D509]            ;SID - R - Voice 2 (Write Only) - PW LOW
   483 000000                            SID_R_V2_PW_HI  =           $D50A  [54538/$D50A]            ;SID - R - Voice 2 (Write Only) - PW HI
   484 000000                            SID_R_V2_CTRL   =           $D50B  [54539/$D50B]            ;SID - R - Voice 2 (Write Only) - CTRL REG
   485 000000                            SID_R_V2_ATCK_DECY =        $D50C  [54540/$D50C]            ;SID - R - Voice 2 (Write Only) - ATTACK / DECAY
   486 000000                            SID_R_V2_SSTN_RLSE =        $D50D  [54541/$D50D]            ;SID - R - Voice 2 (Write Only) - SUSTAIN / RELEASE
   487 000000                            SID_R_V3_FREQ_LO =          $D50E  [54542/$D50E]            ;SID - R - Voice 3 (Write Only) - FREQ LOW
   488 000000                            SID_R_V3_FREQ_HI =          $D50F  [54543/$D50F]            ;SID - R - Voice 3 (Write Only) - FREQ HI
   489 000000                            SID_R_V3_PW_LO  =           $D510  [54544/$D510]            ;SID - R - Voice 3 (Write Only) - PW LOW
   490 000000                            SID_R_V3_PW_HI  =           $D511  [54545/$D511]            ;SID - R - Voice 3 (Write Only) - PW HI
   491 000000                            SID_R_V3_CTRL   =           $D512  [54546/$D512]            ;SID - R - Voice 3 (Write Only) - CTRL REG
   492 000000                            SID_R_V3_ATCK_DECY =        $D513  [54547/$D513]            ;SID - R - Voice 3 (Write Only) - ATTACK / DECAY
   493 000000                            SID_R_V3_SSTN_RLSE =        $D514  [54548/$D514]            ;SID - R - Voice 3 (Write Only) - SUSTAIN / RELEASE
   494 000000                            SID_R_FC_LO     =           $D515  [54549/$D515]            ;SID - R - Filter (Write Only) - FC LOW
   495 000000                            SID_R_FC_HI     =           $D516  [54550/$D516]            ;SID - R - Filter (Write Only) - FC HI
   496 000000                            SID_R_RES_FILT  =           $D517  [54551/$D517]            ;SID - R - Filter (Write Only) - RES / FILT
   497 000000                            SID_R_MODE_VOL  =           $D518  [54552/$D518]            ;SID - R - Filter (Write Only) - MODE / VOL
   498 000000                            SID_R_POT_X     =           $D519  [54553/$D519]            ;SID - R - Misc (Read Only) - POT X (C256 - NOT USED)
   499 000000                            SID_R_POT_Y     =           $D51A  [54554/$D51A]            ;SID - R - Misc (Read Only) - POT Y (C256 - NOT USED)
   500 000000                            SID_R_OSC3_RND  =           $D51B  [54555/$D51B]            ;SID - R - Misc (Read Only) - OSC3 / RANDOM
   501 000000                            SID_R_ENV3      =           $D51C  [54556/$D51C]            ;SID - R - Misc (Read Only)  - ENV3
   502 000000;                                                                                       ;SID_R_NOT_USED0     = $D51D ;SID - R - NOT USED
   503 000000;                                                                                       ;SID_R_NOT_USED1     = $D51E ;SID - R - NOT USED
   504 000000;                                                                                       ;SID_R_NOT_USED2     = $D51F ;SID - R - NOT USED
   505 000000
   506 000000                            PSG_INT_L_PORT  =           $D600  [54784/$D600]            ; Control register for the SN76489
   507 000000                            PSG_INT_R_PORT  =           $D610  [54800/$D610]            ; Control register for the SN76489
   508 000000
   509 000000
   510 000000                            VECTORS_BEGIN   =           $FFFA  [65530/$FFFA]            ;0 Byte  Interrupt vectors
   511 000000                            VECTOR_NMI      =           $FFFA  [65530/$FFFA]            ;2 Bytes Emulation mode interrupt handler
   512 000000                            VECTOR_RESET    =           $FFFC  [65532/$FFFC]            ;2 Bytes Emulation mode interrupt handler
   513 000000                            VECTOR_IRQ      =           $FFFE  [65534/$FFFE]            ;2 Bytes Emulation mode interrupt handler
   514 000000;                                                                                       ;ISR_BEGIN       = $FF00 ; Byte  Beginning of CPU vectors in Direct page
   515 000000;                                                                                       ;HRESET          = $FF00 ;16 Bytes Handle RESET asserted. Reboot computer and re-initialize the kernel.
   516 000000;                                                                                       ;HCOP            = $FF10 ;16 Bytes Handle the COP instruction. Program use; not used by OS
   517 000000;                                                                                       ;HBRK            = $FF20 ;16 Bytes Handle the BRK instruction. Returns to BASIC Ready prompt.
   518 000000;                                                                                       ;HABORT          = $FF30 ;16 Bytes Handle ABORT asserted. Return to Ready prompt with an error message.
   519 000000;                                                                                       ;HNMI            = $FF40 ;32 Bytes Handle NMI
   520 000000;                                                                                       ;HIRQ            = $FF60 ;32 Bytes Handle IRQ
   521 000000
   522 000000
   523 000000
   524 000000                            KEYBOARD_SC_TMP =           $20  [32/$20/" "]
   525 000000                            KBD_MSE_CTRL_REG =          $D640  [54848/$D640]
   526 000000                            KBD_Write_Strobe =          $02  [2/$02]
   527 000000                            MS_Write_Strobe =           $08  [8/$08]
   528 000000                            KBD_FIFO_CLEAR  =           $10  [16/$10]                   ; Dump entire FIFO, set to 1 and then back to 0
   529 000000                            MSE_FIFO_CLEAR  =           $20  [32/$20/" "]               ; Dump entire FIFO, set to 1 and then back to 0
   530 000000                            KBD_MS_WR_DATA_REG =        $D641  [54849/$D641]            ; Data to Send to Keyboard or Mouse
   531 000000                            KBD_RD_SCAN_REG =           $D642  [54850/$D642]            ; DATA Out from KBD FIFO
   532 000000                            MS_RD_SCAN_REG  =           $D643  [54851/$D643]            ; DATA Out from MSE FIFO
   533 000000                            KBD_MS_RD_STATUS =          $D644  [54852/$D644]            ; Keyboard RD/WR Status
   534 000000                            KBD_FIFO_Empty  =           $01  [1/$01]                    ; Set when Keyboard FIFO is empty
   535 000000                            MSE_FIFO_Empty  =           $02  [2/$02]                    ; Set when Mouse FIFO is empty
   536 000000                            MS_Stat_Tx_Error_No_Ack =   $10  [16/$10]
   537 000000                            MS_Stat_Tx_Ack  =           $20  [32/$20/" "]               ; When 1, it ack the Tx
   538 000000                            KBD_Stat_Tx_Error_No_Ack =  $40  [64/$40/"@"]
   539 000000                            KBD_Stat_Tx_Ack =           $80  [128/$80/"?"]              ; When 1, it ack the Tx
   540 000000                            KBD_MSE_NOT_USED =          $D645  [54853/$D645]            ;       ; Reads as 0
   541 000000                            KBD_FIFO_BYTE_CNT =         $D646  [54854/$D646]            ; Number of Bytes in the Keyboard FIFO
   542 000000                            MSE_FIFO_BYTE_CNT =         $D647  [54855/$D647]            ; Number of Bytes in the Mouse FIFO
   543 000000
   544 000000
   545 000000
   546 000000                            TEXT_LUT_FG     =           $D800  [55296/$D800]
   547 000000                            TEXT_LUT_BG     =           $D840  [55360/$D840]
   548 000000                            FONT_MEM        =           $C000  [49152/$C000]            ; IO Page 1
   549 000000                            TEXT_MEM        =           $C000  [49152/$C000]            ; IO Page 2
   550 000000                            COLOR_MEM       =           $C000  [49152/$C000]            ; IO Page 3
   551 000000                            DIPSWITCH       =           $D670  [54896/$D670]
   552 000000                            CODEC_LOW       =           $D620  [54816/$D620]
   553 000000                            CODEC_HI        =           $D621  [54817/$D621]
   554 000000                            CODEC_CTRL      =           $D622  [54818/$D622]
   555 000000
   556 000000                            RNG_DAT_LO      =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   557 000000                            RNG_DAT_HI      =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   558 000000                            RNG_SEED_LO     =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   559 000000                            RNG_SEED_HI     =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   560 000000                            RNG_CTRL        =           $D6A6  [54950/$D6A6]
   561 000000                            RNG_SEED_LD     =           $02  [2/$02]
   562 000000                            RNG_ENABLE      =           $01  [1/$01]
   563 000000                            RNG_STAT        =           $D6A6  [54950/$D6A6]
   564 000000                            RNG_LFSR_DONE   =           $80  [128/$80/"?"]              ; ???indicates that Output = SEED Database
   565 000000
   566 000000                            FOENIX_MACHINE_ID =         $D6A7  [54951/$D6A7]
   567 000000
   568 000000
   569 000000
   570 000000;                                                                                       ; tilemap base = $d200
   571 000000                            TVKY_TILEMAP    =           $D200  [53760/$D200]
   572 000000                                            struct      TILEMAP_TYPE(actrl,aaddr,axsize,aysize,axpos,aypos)
   587 000000
   588 000000;                                                                                       ; bitmap base = $d100
   589 000000                            TVKY_BITMAP     =           $D100  [53504/$D100]
   590 000000                                            struct      BITMAP_TYPE(actrl,aaddr)
   597 000000
   598 000000;                                                                                       ; tileset base = $d280
   599 000000                            TVKY_TILESET    =           $D280  [53888/$D280]
   600 000000                                            struct      TILESET_TYPE(aaddr,aconfig)
   607 000000
   608 000000;                                                                                       ; sprite base = $d900
   609 000000                            TVKY_SPRITE     =           $D900  [55552/$D900]
   610 000000                                            struct      SPRITE_TYPE(actrl,aaddr,axpos,aypos)
   621 000000
   622 000000;                                                                                       ; left sid base = $d400
   623 000000                            SID_LEFT        =           $D400  [54272/$D400]
   624 000000;                                                                                       ; right sid base = $d500
   625 000000                            SID_RIGHT       =           $D500  [54528/$D500]
   626 000000
   627 000000                                            include     'f256jrlib.asm'
including source file 'f256jrlib.asm'
   628 000000                                            const       w6522s=0  [0/$00]
   629 000000                                            var         dopush=0  [0/$00]
   630 000000
   631 000000                                            const       FOENIXMODELS = enum( C256FMX, C256U, F256JR, A2560DEV, GENX, C256UP, RES1, RES2, A2560X, A2560U, A2560M, A2560K)  [12/$0C items]
   632 000000                                            const       FNX_SCREEN_WIDTH = 320 , FNX_SCREEN_HEIGHT = 240 , FNX_BORDER_WIDTH = 0 , FNX_BORDER_HEIGHT = 0 , FNX_SCREEN_COLUMNS = (FNX_SCREEN_WIDTH-FNX_BORDER_WIDTH) / 8 , FNX_SCREEN_LINES = (FNX_SCREEN_HEIGHT-FNX_BORDER_HEIGHT) / 8  [320/$0140,240/$F0/"d",0/$00,0/$00,40/$28/"(",30/$1E]
   633 000000
   634 000000                            VKY_SCREEN_MEMORY =         $C000  [49152/$C000]            ; character memory in io page 2, color memory in io page 3
   635 000000                            VKY_FONT_MEMORY =           $C000  [49152/$C000]            ; address of screen font memory in io page 1
   636 000000                            VKY_TEXT_MEMORY =           $C000  [49152/$C000]            ; address of screen text memory in io page 2
   637 000000                            VKY_COLOR_MEMORY =          $C000  [49152/$C000]            ; address of screen color memory in io page 3
   638 000000
   639 000000                                            define      jeq(aaddr) 'beq ~pcnext2 : jmp aaddr'
   640 000000                                            define      jne(aaddr) 'bne ~pcnext2 : jmp aaddr'
   641 000000                                            define      jlt(aaddr) 'blt ~pcnext2 : jmp aaddr'
   642 000000                                            define      jge(aaddr) 'bge ~pcnext2 : jmp aaddr'
   643 000000                                            define      jcc(aaddr) 'bcc ~pcnext2 : jmp aaddr'
   644 000000                                            define      jcs(aaddr) 'bcs ~pcnext2 : jmp aaddr'
   645 000000                                            define      jmi(aaddr) 'bmi ~pcnext2 : jmp aaddr'
   646 000000                                            define      jpl(aaddr) 'bpl ~pcnext2 : jmp aaddr'
   647 000000                                            define      jvc(aaddr) 'bvc ~pcnext2 : jmp aaddr'
   648 000000                                            define      jvs(aaddr) 'bvs ~pcnext2 : jmp aaddr'
   649 000000
   650 000000                                            define      DoC64COLOR(aforeground,abackground) (C64COLOR.aforeground<<4) | C64COLOR.abackground
   651 000000                                            define      PushAXY 'pha : phx : phy'
   652 000000                                            define      PullYXA 'ply : plx : pla'
   653 000000                                            define      SetMMUIO 'stz MMU_IO_CTRL'
   654 000000                                            define      SetMMUGFX 'lda #MMU_IO_PAGE_1 : sta MMU_IO_CTRL'
   655 000000                                            define      SetMMUTEXT 'lda #MMU_IO_TEXT : sta MMU_IO_CTRL'
   656 000000                                            define      SetMMUCOLOR 'lda #MMU_IO_COLOR : sta MMU_IO_CTRL'
   657 000000                                            define      PushMMUIO 'lda MMU_IO_CTRL : pha'
   658 000000                                            define      PullMMUIO 'pla : sta MMU_IO_CTRL'
   659 000000                                            define      UnlockMMU 'lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL'
   660 000000                                            define      LockMMU 'lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL'
   661 000000                                            define      SetMMUBank(abank,aaddr) 'lda #((aaddr)/$2000) : sta MMU_MEM_Bank_0+abank'
   662 000000;                                                                                       ;=====================================================================================
   663 00FFF9                                            section     add('VECTORS',$fff9,$ffff,save=1)
updated section 'VECTORS' $00FFF9-00FFFF [7]
current section: VECTORS, next free address: $00FFF9
   664 00FFF9:40                         F256_DUMMYIRQ   rti
   665 00FFFA:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; nmi
   666 00FFFC:F1 E5                                      word        F256_RESET  [size=2/$02]        ; reset
   667 00FFFE:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; irq
   668 010000                                            endsection    [65535/$FFFF]
   669 010000
   670 000020                                            section     add('ZPAGE',$0020,$00ef,type='bss',save=0)
updated section 'ZPAGE' $000020-0000EF [208]
current section: ZPAGE, next free address: $000020
   671 000020:[=16/$10 bytes]            TempIRQ         resb        16
define data constant size=16, fill value 0/$00
   672 000030:[=4/$04 bytes]             TempSrc         resb        4
define data constant size=4, fill value 0/$00
   673 000034:[=4/$04 bytes]             TempDest        resb        4
define data constant size=4, fill value 0/$00
   674 000038:[=16/$10 bytes]            TempZ           resb        16
define data constant size=16, fill value 0/$00
   675 000048:[=1/$01 bytes]             CursorColor     resb        1
define data constant size=1, fill value 0/$00
   676 000049:[=1/$01 bytes]             CursorColumn    resb        1
define data constant size=1, fill value 0/$00
   677 00004A:[=1/$01 bytes]             CursorLine      resb        1
define data constant size=1, fill value 0/$00
   678 00004B:[=2/$02 bytes]             CursorPointer   resw        1
define data constant size=1, fill value 0/$00
   679 00004D
   680 00004D:[=4/$04 bytes]             SOFCounter      resd        1
define data constant size=1, fill value 0/$00
   681 000051                                            endsection    [239/$EF/""]
   682 000051
   683 000200                                            section     add('DATA',$0200,$1fff,size=-1,save=1,file='wkdata.000200.bin')
updated section 'DATA' $000200-001FFF [-1]
current section: DATA, next free address: $000200
   684 000200                                            endsection    [511/$01FF]
   685 000200
   686 000200;                                                                                       ;section add('TEXT',___MAIN_SECTION_NEXT_FREE___,$fff8,size=-1,save=1)
   687 000200;                                                                                       ;endsection
   688 000200
   689 00E000                                            section     add('F256JRLIB',$e000,$fff8,size=-1,save=1,file='wkf256.00e000.bin')
updated section 'F256JRLIB' $00E000-00FFF8 [-1]
current section: F256JRLIB, next free address: $00E000
   690 00E000;                                                                                       ;=====================================================================================
   691 00E000
   692 00E000                                            macro       ConvertParamToA('aparam')
   706 00E000
   707 00E000                                            macro       ConvertParamToX('aparam')
   724 00E000
   725 00E000                                            macro       AssignWord('aaddr',adest)
   733 00E000
   734 00E000                                            macro       AssignLong('aaddr',adest)
   744 00E000
   745 00E000                                            macro       AssignDWord('aaddr',adest)
   757 00E000
   758 00E000                                            macro       SetMMUBlock(acontrol)
   765 00E000
   766 00E000                                            macro       SetCursorColor(acolor)
   769 00E000
   770 00E000;                                                                                       ; hard coded for 80 columns
   771 00E000                                            macro       SetCursorPointer('acolumn','aline')
   785 00E000
   786 00E000                                            macro       Increase_SOF_Counter
   797 00E000
   798 00E000                                            proc        ChrOut
open scope ChrOut, from scope  <<global symbols>>
   799 00E000:48                                         pha
   800 00E001:5A                                         phy
   801 00E002:A8                                         tay
   802 00E003:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   803 00E005:48                                         pha                                         ;<<<="PushMMUIO"
   804 00E006:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   805 00E008:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   806 00E00A:98                                         tya
   807 00E00B:A4 49                                      ldy         CursorColumn  [73/$49/"I"]
   808 00E00D:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   809 00E00F:E6 01                                      inc         MMU_IO_CTRL  [1/$01]
   810 00E011:A5 48                                      lda         CursorColor  [72/$48/"H"]
   811 00E013:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   812 00E015:C8                                         iny
   813 00E016:C0 28                                      cpy         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   814 00E018:D0 1E                                      bne         +  [57400/$E038]
   815 00E01A:18                                         clc
   816 00E01B:A5 4B                                      lda         CursorPointer  [75/$4B/"K"]
   817 00E01D:69 28                                      adc         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   818 00E01F:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   819 00E021:90 02                                      bcc         ~pcnext2  [57381/$E025]
   820 00E023:E6 4C                                      inc         CursorPointer+1  [76/$4C/"L"]
   821 00E025:A5 4A                                      lda         CursorLine  [74/$4A/"J"]
   822 00E027:1A                                         inc
   823 00E028:C9 1E                                      cmp         #FNX_SCREEN_LINES  [30/$1E]
   824 00E02A:D0 08                                      bne         ++  [57396/$E034]
   825 00E02C:A9 C0                                      lda         #>VKY_TEXT_MEMORY  [192/$C0/"A"]
   826 00E02E:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   827 00E030:A9 00                                      lda         #<VKY_TEXT_MEMORY  [0/$00]      ; always equals 0
   828 00E032:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   829 00E034                            ++
   830 00E034:85 4A                                      sta         CursorLine  [74/$4A/"J"]
   831 00E036:A0 00                                      ldy         #0  [0/$00]
   832 00E038                            +
   833 00E038:84 49                                      sty         CursorColumn  [73/$49/"I"]
   834 00E03A:68                                         pla
   835 00E03B:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   836 00E03D:7A                                         ply
   837 00E03E:68                                         pla
   838 00E03F:60                                         rts
   839 00E040                                            endproc
end scope ChrOut, restore scope  <<global symbols>>
   840 00E040
   841 00E040                                            proc        ClearScreen
open scope ClearScreen, from scope  <<global symbols>>
   842 00E040:48                                         pha
   843 00E041:DA                                         phx
   844 00E042:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   845 00E044:48                                         pha                                         ;<<<="PushMMUIO"
   846 00E045
   847 00E045:9C 73 E0                                   stz         WriteAddress  [57459/$E073]     ;lda #<TEXT_MEM
   848 00E048:64 4B                                      stz         CursorPointer  [75/$4B/"K"]     ;sta CursorPointer
   849 00E04A:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   850 00E04C:8D 74 E0                                   sta         WriteAddress+1  [57460/$E074]
   851 00E04F:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   852 00E051:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   853 00E053:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   854 00E055:A2 20                                      ldx         #' '  [32/$20/" "]
   855 00E057:20 71 E0                                   jsr         WriteLoop  [57457/$E071]
   856 00E05A:9C 73 E0                                   stz         WriteAddress  [57459/$E073]     ;lda #<TEXT_MEM
   857 00E05D:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   858 00E05F:8D 74 E0                                   sta         WriteAddress+1  [57460/$E074]
   859 00E062:A9 03                                      lda         #MMU_IO_COLOR  [3/$03]
   860 00E064:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUCOLOR"
   861 00E066:A6 48                                      ldx         CursorColor  [72/$48/"H"]
   862 00E068:20 71 E0                                   jsr         WriteLoop  [57457/$E071]
   863 00E06B
   864 00E06B:68                                         pla
   865 00E06C:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   866 00E06E:FA                                         plx
   867 00E06F:68                                         pla
   868 00E070:60                                         rts
   869 00E071
   870 00E071                            WriteLoop
   871 00E071:8A                                         txa
   872 00E072                            WriteAddress    =           *+1  [57459/$E073]
   873 00E072:8D 34 12                                   sta         $1234  [4660/$1234]
   874 00E075:EE 73 E0                                   inc         WriteAddress  [57459/$E073]
   875 00E078:D0 03                                      bne         +  [57469/$E07D]
   876 00E07A:EE 74 E0                                   inc         WriteAddress+1  [57460/$E074]
   877 00E07D                            +
   878 00E07D:AD 73 E0                                   lda         WriteAddress  [57459/$E073]
   879 00E080:C9 C0                                      cmp         #<(TEXT_MEM+80*60)  [192/$C0/"A"]
   880 00E082:D0 ED                                      bne         WriteLoop  [57457/$E071]
   881 00E084:AD 74 E0                                   lda         WriteAddress+1  [57460/$E074]
   882 00E087:C9 D2                                      cmp         #>(TEXT_MEM+80*60)  [210/$D2/"O"]
   883 00E089:D0 E6                                      bne         WriteLoop  [57457/$E071]
   884 00E08B:60                                         rts
   885 00E08C                                            endproc
end scope ClearScreen, restore scope  <<global symbols>>
   886 00E08C
   887 00E08C;                                                                                       ; parameters:
   888 00E08C;                                                                                       ;	<TempSrc>	=	word address of string to print
   889 00E08C;                                                                                       ;	<CursorPointer>	=	word address of screen character/color memory
   890 00E08C                                            proc        PrintAnsiString
open scope PrintAnsiString, from scope  <<global symbols>>
   891 00E08C;                                                                                       ;	pha : phx : phy ;<<<=";	PushAXY"
   892 00E08C
   893 00E08C:A0 00                                      ldy         #0  [0/$00]
   894 00E08E:80 0C                                      bra         Print20  [57500/$E09C]
   895 00E090                            Print10
   896 00E090:C9 1B                                      cmp         #27  [27/$1B]
   897 00E092:90 0D                                      blt         CheckControlCodes  [57505/$E0A1]
   898 00E094:20 00 E0                                   jsr         ChrOut  [57344/$E000]
   899 00E097                            NextByte
   900 00E097:C8                                         iny
   901 00E098:D0 02                                      bne         Print20  [57500/$E09C]
   902 00E09A:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   903 00E09C                            Print20
   904 00E09C:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   905 00E09E:D0 F0                                      bne         Print10  [57488/$E090]
   906 00E0A0;                                                                                       ;	ply : plx : pla ;<<<=";	PullYXA"
   907 00E0A0:60                                         rts
   908 00E0A1
   909 00E0A1                            CheckControlCodes
   910 00E0A1:C9 02                                      cmp         #2  [2/$02]                     ; ctrl-b/set cursor background color
   911 00E0A3:D0 0F                                      bne         +  [57524/$E0B4]
   912 00E0A5:A5 48                                      lda         CursorColor  [72/$48/"H"]
   913 00E0A7:29 F0                                      and         #$f0  [240/$F0/"d"]
   914 00E0A9:85 48                                      sta         CursorColor  [72/$48/"H"]
   915 00E0AB:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   916 00E0AE:05 48                                      ora         CursorColor  [72/$48/"H"]
   917 00E0B0:85 48                                      sta         CursorColor  [72/$48/"H"]
   918 00E0B2:80 E3                                      bra         NextByte  [57495/$E097]
   919 00E0B4                            +
   920 00E0B4:C9 03                                      cmp         #3  [3/$03]                     ; ctrl-c/set cursor color
   921 00E0B6:D0 07                                      bne         +  [57535/$E0BF]
   922 00E0B8:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   923 00E0BB:85 48                                      sta         CursorColor  [72/$48/"H"]
   924 00E0BD:80 D8                                      bra         NextByte  [57495/$E097]
   925 00E0BF                            +
   926 00E0BF:C9 06                                      cmp         #6  [6/$06]                     ; ctrl-f/set cursor foreground color
   927 00E0C1:D0 13                                      bne         +  [57558/$E0D6]
   928 00E0C3:A5 48                                      lda         CursorColor  [72/$48/"H"]
   929 00E0C5:29 0F                                      and         #$0f  [15/$0F]
   930 00E0C7:85 48                                      sta         CursorColor  [72/$48/"H"]
   931 00E0C9:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   932 00E0CC:0A                                         asl
   933 00E0CD:0A                                         asl
   934 00E0CE:0A                                         asl
   935 00E0CF:0A                                         asl
   936 00E0D0:05 48                                      ora         CursorColor  [72/$48/"H"]
   937 00E0D2:85 48                                      sta         CursorColor  [72/$48/"H"]
   938 00E0D4:80 C1                                      bra         NextByte  [57495/$E097]
   939 00E0D6                            +
   940 00E0D6:C9 0C                                      cmp         #12  [12/$0C]                   ; ctrl-l/clear screen
   941 00E0D8:D0 05                                      bne         +  [57567/$E0DF]
   942 00E0DA:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
   943 00E0DD:80 B8                                      bra         NextByte  [57495/$E097]
   944 00E0DF                            +
   945 00E0DF:60                                         rts
   946 00E0E0:00                         temp            byte        0  [size=1/$01]
   947 00E0E1                            GetNextByte
   948 00E0E1:C8                                         iny
   949 00E0E2:D0 02                                      bne         +  [57574/$E0E6]
   950 00E0E4:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   951 00E0E6                            +
   952 00E0E6:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   953 00E0E8:60                                         rts
   954 00E0E9                                            endproc
end scope PrintAnsiString, restore scope  <<global symbols>>
   955 00E0E9
   956 00E0E9                                            macro       PrintString('astring','acolumn','aline','acolor')
   981 00E0E9
   982 00E0E9;                                                                                       ; parameters
   983 00E0E9;                                                                                       ;	A	=	byte to print
   984 00E0E9;                                                                                       ; returns
   985 00E0E9;                                                                                       ;	Y	=	upper nibble ascii
   986 00E0E9;                                                                                       ;	A	=	lower nibble ascii
   987 00E0E9 *dead code*                                proc        HexByteToASCII
ignoring unused procedure
*** warning in file wktitle.asm, line #378: phase error $00E0EA<>00E0E9
  1005 00E0E9                                            endproc
  1006 00E0E9
  1007 00E0E9                                            macro       PrintHexByte('avalue','acolumn','aline','acolor')
  1031 00E0E9
  1032 00E0E9                                            macro       PrintHexWord('avalue','acolumn','aline','acolor')
  1063 00E0E9
  1064 00E0E9                                            macro       PrintHexDWord('avalue','acolumn','aline','acolor')
  1107 00E0E9
  1108 00E0E9;                                                                                       ; KeyboardState
  1109 00E0E9;                                                                                       ; shift
  1110 00E0E9;                                                                                       ; ctrl
  1111 00E0E9;                                                                                       ; win
  1112 00E0E9;                                                                                       ; numlk
  1113 00E0E9;                                                                                       ; capslk
  1114 00E0E9;                                                                                       ;   bit
  1115 00E0E9;                                                                                       ;	5  4  3  2  1  0
  1116 00E0E9;                                                                                       ;	|  |  |  |  |  |
  1117 00E0E9;                                                                                       ;	|  |  |  |  |  shift l/r = c0 c1
  1118 00E0E9;                                                                                       ;	|  |  |  |  ----alt l/r  = c2 c3
  1119 00E0E9;                                                                                       ;	|  |  |  ------ctrl l/r  = c4 c5
  1120 00E0E9;                                                                                       ;	|  |  ----------win l/r  = c6 c7
  1121 00E0E9;                                                                                       ;	|  ---------------numlk  = cf
  1122 00E0E9;                                                                                       ;   -----------------capslk  = ce
  1123 00E0E9;                                                                                       ;
  1124 00E0E9                                            const       KEYDOWN=$00, KEYUP=$80  [0/$00,128/$80/"?"]
  1125 00E0E9:00 00                      ScancodeBufferWPos word     0  [size=2/$02]
  1126 00E0EB:00 00                      ScancodeBufferRPos word     0  [size=2/$02]
  1127 00E0ED:00 00                      LastScancode    word        0  [size=2/$02]
  1128 00E0EF:[=128/$80 bytes]           ScancodeBuffer  resb        128,0
define data constant size=128, fill value 0/$00
  1129 00E16F:[=1/$01 bytes]             KeyboardState   resb        1,0
define data constant size=1, fill value 0/$00
  1130 00E170:[=144/$90 bytes]           KeyboardKeyStates resb      $90,KEYUP
define data constant size=144, fill value 128/$80
  1131 00E200                                            const       KEYBOARDSTATES = enum( ALLOFF =%000000, SHIFT =%000001, ALT =%000010, CTRL =%000100, WIN =%001000, NUMLK =%010000, CAPSLK =%100000)  [7/$07 items]
  1132 00E200                                            proc        Init_Keyboard
open scope Init_Keyboard, from scope  <<global symbols>>
  1133 00E200;                                                                                       ; clear keyboard & mouse fifo buffer
  1134 00E200:A9 30                                      lda         #(KBD_FIFO_CLEAR|MSE_FIFO_CLEAR)  [48/$30/"0"]
  1135 00E202:8D 40 D6                                   sta         KBD_MSE_CTRL_REG  [54848/$D640]
  1136 00E205:9C 40 D6                                   stz         KBD_MSE_CTRL_REG  [54848/$D640]
  1137 00E208
  1138 00E208:9C EB E0                                   stz         ScancodeBufferRPos  [57579/$E0EB]
  1139 00E20B:9C E9 E0                                   stz         ScancodeBufferWPos  [57577/$E0E9]
  1140 00E20E:A2 00                                      ldx         #0  [0/$00]
  1141 00E210                            -
  1142 00E210:8D EF E0                                   sta         ScancodeBuffer  [57583/$E0EF]
  1143 00E213:E8                                         inx
  1144 00E214:E0 80                                      cpx         #lobyte(sizeof(ScancodeBuffer))  [128/$80/"?"]
  1145 00E216:D0 F8                                      bne         -  [57872/$E210]
  1146 00E218
  1147 00E218:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; key released
  1148 00E21A:A2 00                                      ldx         #0  [0/$00]
  1149 00E21C                            -
  1150 00E21C:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1151 00E21F:E8                                         inx
  1152 00E220:E0 90                                      cpx         #sizeof(KeyboardKeyStates)  [144/$90/"?"]
  1153 00E222:D0 F8                                      bne         -  [57884/$E21C]
  1154 00E224
  1155 00E224:A9 00                                      lda         #KEYBOARDSTATES.ALLOFF  [0/$00]
  1156 00E226:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1157 00E229
  1158 00E229;                                                                                       ; enable keyboard interrupt
  1159 00E229:AD 6C D6                                   lda         INT_MASK_REG0  [54892/$D66C]
  1160 00E22C:09 FB                                      ora         #~(JR0_INT02_KBD)  [-5/$FFFFFFFB]
  1161 00E22E:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1162 00E231:60                                         rts
  1163 00E232                                            endproc
end scope Init_Keyboard, restore scope  <<global symbols>>
  1164 00E232
  1165 00E232                                            proc        KeyboardIRQ
open scope KeyboardIRQ, from scope  <<global symbols>>
  1166 00E232                            -
  1167 00E232:AD 44 D6                                   lda         KBD_MS_RD_STATUS  [54852/$D644]
  1168 00E235:29 01                                      and         #KBD_FIFO_Empty  [1/$01]
  1169 00E237:D0 40                                      bne         +  [57977/$E279]
  1170 00E239:AD E9 E0                                   lda         ScancodeBufferWPos  [57577/$E0E9]
  1171 00E23C:AA                                         tax
  1172 00E23D:1A                                         inc
  1173 00E23E:29 7F                                      and         #$7f  [127/$7F/""]
  1174 00E240:CD EB E0                                   cmp         ScancodeBufferRPos  [57579/$E0EB]
  1175 00E243:F0 31                                      beq         .BufferFull  [57974/$E276]
  1176 00E245:8D E9 E0                                   sta         ScancodeBufferWPos  [57577/$E0E9]
  1177 00E248:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code
  1178 00E24B:9D EF E0                                   sta         ScancodeBuffer,x  [57583/$E0EF]
  1179 00E24E:80 E2                                      bra         -  [57906/$E232]
  1180 00E250
  1181 00E250                            .BufferFull
  1182 00E250:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code and forget it
  1183 00E253                            +
  1184 00E253:60                                         rts
  1185 00E254                                            endproc
end scope KeyboardIRQ, restore scope  <<global symbols>>
  1186 00E254
  1187 00E254;                                                                                       ; returns:
  1188 00E254;                                                                                       ;	A	=	scan code from buffer
  1189 00E254;                                                                                       ;	<carry>	:	clear=scan code in A, set=buffer empty A equals 0
  1190 00E254                                            proc        GetScancode
open scope GetScancode, from scope  <<global symbols>>
  1191 00E254:AD EB E0                                   lda         ScancodeBufferRPos  [57579/$E0EB]
  1192 00E257:CD E9 E0                                   cmp         ScancodeBufferWPos  [57577/$E0E9]
  1193 00E25A:F0 34                                      beq         BufferEmpty  [58000/$E290]
  1194 00E25C:DA                                         phx
  1195 00E25D:AA                                         tax
  1196 00E25E:1A                                         inc
  1197 00E25F:29 7F                                      and         #$7f  [127/$7F/""]
  1198 00E261:8D EB E0                                   sta         ScancodeBufferRPos  [57579/$E0EB]
  1199 00E264:BD EF E0                                   lda         ScancodeBuffer,x  [57583/$E0EF]
  1200 00E267:FA                                         plx
  1201 00E268:18                                         clc
  1202 00E269:60                                         rts
  1203 00E26A                            BufferEmpty
  1204 00E26A:A9 00                                      lda         #0  [0/$00]
  1205 00E26C:38                                         sec
  1206 00E26D:60                                         rts
  1207 00E26E                                            endproc
end scope GetScancode, restore scope  <<global symbols>>
  1208 00E26E
  1209 00E26E                                            proc        GetChar
open scope GetChar, from scope  <<global symbols>>
  1210 00E26E:20 54 E2                                   jsr         GetScancode  [57940/$E254]
  1211 00E271:90 27                                      bcc         +  [58010/$E29A]
  1212 00E273;                                                                                       ; buffer empty
  1213 00E273:60                                         rts
  1214 00E274                            +
  1215 00E274:C9 90                                      cmp         #$90  [144/$90/"?"]             ; scan code can only be 00-8f
  1216 00E276:90 31                                      blt         +  [58025/$E2A9]
  1217 00E278:8D ED E0                                   sta         LastScancode  [57581/$E0ED]
  1218 00E27B:C9 F0                                      cmp         #$f0  [240/$F0/"d"]             ; is last scan code a break prefix, get next scan code
  1219 00E27D:F0 EF                                      beq         GetChar  [57966/$E26E]
  1220 00E27F:A9 00                                      lda         #0  [0/$00]                     ; return null for invalid scan code range
  1221 00E281:38                                         sec                                         ; set carry for empty buffer
  1222 00E282:60                                         rts
  1223 00E283                            +
  1224 00E283:DA                                         phx
  1225 00E284:AE ED E0                                   ldx         LastScancode  [57581/$E0ED]     ; get last scan code
  1226 00E287:8D ED E0                                   sta         LastScancode  [57581/$E0ED]     ; save new scan code
  1227 00E28A:E0 F0                                      cpx         #$f0  [240/$F0/"d"]
  1228 00E28C:D0 29                                      bne         KeyPressed  [58039/$E2B7]
  1229 00E28E:4C 3F E3                                   jmp         KeyReleased  [58175/$E33F]
  1230 00E291
  1231 00E291                            KeyPressed
  1232 00E291:AA                                         tax
  1233 00E292:A9 00                                      lda         #KEYDOWN  [0/$00]               ; set state as key for DOWN
  1234 00E294:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1235 00E297:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1236 00E29A:89 21                                      bit         #(KEYBOARDSTATES.SHIFT|KEYBOARDSTATES.CAPSLK)  [33/$21/"!"]
  1237 00E29C:F0 2B                                      beq         +  [58057/$E2C9]
  1238 00E29E:BD 31 E4                                   lda         SCSET21,x  [58417/$E431]
  1239 00E2A1:80 29                                      bra         ++  [58060/$E2CC]
  1240 00E2A3                            +
  1241 00E2A3:BD A1 E3                                   lda         SCSET2,x  [58273/$E3A1]
  1242 00E2A6                            ++
  1243 00E2A6:AA                                         tax
  1244 00E2A7:29 C0                                      and         #$c0  [192/$C0/"A"]
  1245 00E2A9:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1246 00E2AB:F0 29                                      beq         .SpecialKeyDown  [58070/$E2D6]
  1247 00E2AD:8A                                         txa
  1248 00E2AE:FA                                         plx
  1249 00E2AF:60                                         rts
  1250 00E2B0
  1251 00E2B0                            .SpecialKeyDown
  1252 00E2B0:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1253 00E2B2:F0 2A                                      beq         .Shift  [58078/$E2DE]
  1254 00E2B4:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1255 00E2B6:D0 30                                      bne         ++  [58088/$E2E8]
  1256 00E2B8                            .Shift
  1257 00E2B8:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1258 00E2BB:09 01                                      ora         #KEYBOARDSTATES.SHIFT  [1/$01]
  1259 00E2BD:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1260 00E2C0:80 78                                      bra         +  [58170/$E33A]
  1261 00E2C2                            ++
  1262 00E2C2:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1263 00E2C4:F0 2A                                      beq         .Alt  [58096/$E2F0]
  1264 00E2C6:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1265 00E2C8:D0 30                                      bne         ++  [58106/$E2FA]
  1266 00E2CA                            .Alt
  1267 00E2CA:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1268 00E2CD:09 02                                      ora         #KEYBOARDSTATES.ALT  [2/$02]
  1269 00E2CF:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1270 00E2D2:80 66                                      bra         +  [58170/$E33A]
  1271 00E2D4                            ++
  1272 00E2D4:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1273 00E2D6:F0 2A                                      beq         .Ctrl  [58114/$E302]
  1274 00E2D8:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1275 00E2DA:D0 30                                      bne         ++  [58124/$E30C]
  1276 00E2DC                            .Ctrl
  1277 00E2DC:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1278 00E2DF:09 04                                      ora         #KEYBOARDSTATES.CTRL  [4/$04]
  1279 00E2E1:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1280 00E2E4:80 54                                      bra         +  [58170/$E33A]
  1281 00E2E6                            ++
  1282 00E2E6:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1283 00E2E8:F0 2A                                      beq         .Win  [58132/$E314]
  1284 00E2EA:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1285 00E2EC:D0 30                                      bne         ++  [58142/$E31E]
  1286 00E2EE                            .Win
  1287 00E2EE:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1288 00E2F1:09 08                                      ora         #KEYBOARDSTATES.WIN  [8/$08]
  1289 00E2F3:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1290 00E2F6:80 42                                      bra         +  [58170/$E33A]
  1291 00E2F8                            ++
  1292 00E2F8:E0 CF                                      cpx         #$cf  [207/$CF/"I"]
  1293 00E2FA:D0 30                                      bne         ++  [58156/$E32C]
  1294 00E2FC                            .NumLk
  1295 00E2FC:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1296 00E2FF:49 10                                      eor         #KEYBOARDSTATES.NUMLK  [16/$10]
  1297 00E301:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1298 00E304:80 34                                      bra         +  [58170/$E33A]
  1299 00E306                            ++
  1300 00E306:E0 CE                                      cpx         #$ce  [206/$CE/"I"]
  1301 00E308:D0 30                                      bne         ++  [58170/$E33A]
  1302 00E30A                            .CapsLk
  1303 00E30A:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1304 00E30D:49 20                                      eor         #KEYBOARDSTATES.CAPSLK  [32/$20/" "]
  1305 00E30F:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1306 00E312:80 26                                      bra         +  [58170/$E33A]
  1307 00E314                            ++
  1308 00E314                            +
  1309 00E314:A9 00                                      lda         #0  [0/$00]
  1310 00E316:38                                         sec
  1311 00E317:FA                                         plx
  1312 00E318:60                                         rts
  1313 00E319
  1314 00E319                            KeyReleased
  1315 00E319:AA                                         tax
  1316 00E31A:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; set state for key as UP
  1317 00E31C:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1318 00E31F:BD A1 E3                                   lda         SCSET2,x  [58273/$E3A1]
  1319 00E322:AA                                         tax
  1320 00E323:29 C0                                      and         #$c0  [192/$C0/"A"]
  1321 00E325:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1322 00E327:F0 2B                                      beq         .SpecialKeyDown  [58196/$E354]
  1323 00E329:A9 00                                      lda         #0  [0/$00]
  1324 00E32B:38                                         sec
  1325 00E32C:FA                                         plx
  1326 00E32D:60                                         rts
  1327 00E32E
  1328 00E32E                            .SpecialKeyDown
  1329 00E32E:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1330 00E330:F0 2A                                      beq         .Shift  [58204/$E35C]
  1331 00E332:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1332 00E334:D0 30                                      bne         ++  [58214/$E366]
  1333 00E336                            .Shift
  1334 00E336:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1335 00E339:29 FE                                      and         #~(KEYBOARDSTATES.SHIFT)  [-2/$FFFFFFFE]
  1336 00E33B:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1337 00E33E:80 5C                                      bra         +  [58268/$E39C]
  1338 00E340                            ++
  1339 00E340:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1340 00E342:F0 2A                                      beq         .Alt  [58222/$E36E]
  1341 00E344:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1342 00E346:D0 30                                      bne         ++  [58232/$E378]
  1343 00E348                            .Alt
  1344 00E348:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1345 00E34B:29 FD                                      and         #~(KEYBOARDSTATES.ALT)  [-3/$FFFFFFFD]
  1346 00E34D:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1347 00E350:80 4A                                      bra         +  [58268/$E39C]
  1348 00E352                            ++
  1349 00E352:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1350 00E354:F0 2A                                      beq         .Ctrl  [58240/$E380]
  1351 00E356:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1352 00E358:D0 30                                      bne         ++  [58250/$E38A]
  1353 00E35A                            .Ctrl
  1354 00E35A:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1355 00E35D:29 FB                                      and         #~(KEYBOARDSTATES.CTRL)  [-5/$FFFFFFFB]
  1356 00E35F:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1357 00E362:80 38                                      bra         +  [58268/$E39C]
  1358 00E364                            ++
  1359 00E364:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1360 00E366:F0 2A                                      beq         .Win  [58258/$E392]
  1361 00E368:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1362 00E36A:D0 30                                      bne         ++  [58268/$E39C]
  1363 00E36C                            .Win
  1364 00E36C:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1365 00E36F:29 F7                                      and         #~(KEYBOARDSTATES.WIN)  [-9/$FFFFFFF7]
  1366 00E371:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1367 00E374:80 26                                      bra         +  [58268/$E39C]
  1368 00E376                            ++
  1369 00E376                            +
  1370 00E376:A9 00                                      lda         #0  [0/$00]
  1371 00E378:38                                         sec
  1372 00E379:FA                                         plx
  1373 00E37A:60                                         rts
  1374 00E37B
  1375 00E37B;                                                                                       ; function keys f1-f24 = ascii $8a-$a1
  1376 00E37B;                                                                                       ;
  1377 00E37B;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1378 00E37B:[=144/$90 bytes]           SCSET2          byte        $00, $92, $00, $8e, $8c, $8a, $8b, $95, $00, $93, $91, $8f, $8d, $09, '`', $00, $00, $c2, $c0, $00, $c4, 'q', '1', $00, $00, $00, 'z', 's', 'a', 'w', '2', $c6, $00, 'c', 'x', 'd', 'e', '4', '3', $c7, $00, $00, 'v', 'f', 't', 'r', '5', $00, $00, 'n', 'b', 'h', 'g', 'y', '6', $00, $00, $00, 'm', 'j', 'u', '7', '8', $00, $00, ',', 'k', 'i', 'o', '0', '9', $00, $00, '.', '/', 'l', ';', 'p', '-', $00, $00, $00, $2c, $00, '[', '=', $00, $00, $ce, $c1, $0d, ']', $00, '\', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $94, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $90, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1379 00E40B
  1380 00E40B;                                                                                       ; shift
  1381 00E40B;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1382 00E40B:[=144/$90 bytes]           SCSET21         byte        $00, $9e, $00, $9a, $98, $96, $97, $a1, $00, $9f, $9d, $9b, $99, $09, '~', $00, $00, $c2, $c0, $00, $c4, 'Q', '!', $00, $00, $00, 'Z', 'S', 'A', 'W', '@', $c6, $00, 'C', 'X', 'D', 'E', '$', '#', $c7, $00, $00, 'V', 'F', 'T', 'R', '%', $00, $00, 'N', 'B', 'H', 'G', 'Y', '^', $00, $00, $00, 'M', 'J', 'U', '&', '*', $00, $00, '<', 'K', 'I', 'O', ')', '(', $00, $00, '.', '?', 'L', ':', 'P', '_', $00, $00, $00, $2c, $00, '{', '+', $00, $00, $ce, $c1, $0d, '}', $00, '|', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $a0, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $9c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1383 00E49B                                            endproc
end scope GetChar, restore scope  <<global symbols>>
  1384 00E49B
  1385 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1386 00E49B *dead code*                                proc        WaitForDMAReset
ignoring unused procedure
  1394 00E49B                                            endproc
  1395 00E49B
  1396 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1397 00E49B                                            macro       DMA1DCopy(asource,adest,asize)
  1409 00E49B
  1410 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1411 00E49B                                            macro       DMA1DFill(adest,asize,afillbyte)
  1422 00E49B
  1423 00E49B;                                                                                       ; 8-bit
  1424 00E49B                                            macro       CopyMemTiny(asource,adest,asize)
  1434 00E49B
  1435 00E49B;                                                                                       ; 16-bit
  1436 00E49B                                            macro       CopyMemSmall(asource,adest,asize)
  1465 00E49B
  1466 00E49B                                            const       C64COLOR = enum( BLACK,WHITE,RED,CYAN, PURPLE,GREEN,BLUE,YELLOW, ORANGE,BROWN,LTRED,DKGREY, MDGREY,LTGREEN,LTBLUE,LTGREY)  [16/$10 items]
  1471 00E49B                                            proc        Init_Graphics
open scope Init_Graphics, from scope  <<global symbols>>
  1472 00E49B;                                                                                       ; clear foreground & background luts with #000000
  1473 00E49B:A2 00                                      ldx         #0  [0/$00]
  1474 00E49D:A9 00                                      lda         #0  [0/$00]
  1475 00E49F                            -
  1476 00E49F:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]
  1477 00E4A2:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]
  1478 00E4A5:E8                                         inx
  1479 00E4A6:E0 40                                      cpx         #16*4  [64/$40/"@"]
  1480 00E4A8:D0 F5                                      bne         -  [58527/$E49F]
  1481 00E4AA
  1482 00E4AA;                                                                                       ; set C64 colodore palette
  1483 00E4AA:A2 00                                      ldx         #0  [0/$00]
  1484 00E4AC                            -
  1485 00E4AC:BD 3D E5                                   lda         COLODORE_PALETTE,x  [58685/$E53D]
  1486 00E4AF:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]    ; set font foreground lut
  1487 00E4B2:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]    ; set font background lut
  1488 00E4B5:E8                                         inx
  1489 00E4B6:E0 40                                      cpx         #sizeof(COLODORE_PALETTE)  [64/$40/"@"]
  1490 00E4B8:D0 F2                                      bne         -  [58540/$E4AC]
  1491 00E4BA
  1492 00E4BA;                                                                                       ; initialize system font
  1533 00E4BA
  1534 00E4BA;                                                                                       ; initialize border
  1535 00E4BA:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; set i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO				; set i/o at $d000, use page 0=i/o registers"
  1536 00E4BC;                                                                                       ;lda #Border_Ctrl_Enable	; enable border
  1537 00E4BC:9C 04 D0                                   stz         BORDER_CTRL_REG  [53252/$D004]  ;sta BORDER_CTRL_REG
  1538 00E4BF:9C 05 D0                                   stz         BORDER_COLOR_B  [53253/$D005]   ;lda #$ff : sta BORDER_COLOR_B		; set border color to blue, #0000ff
  1539 00E4C2:9C 06 D0                                   stz         BORDER_COLOR_G  [53254/$D006]   ;lda #$00 : sta BORDER_COLOR_G
  1540 00E4C5:9C 07 D0                                   stz         BORDER_COLOR_R  [53255/$D007]   ;lda #$00 : sta BORDER_COLOR_R
  1541 00E4C8;                                                                                       ;lda #FNX_BORDER_HEIGHT	; set border to 8 pixels high and 8 pixels wide
  1542 00E4C8:9C 09 D0                                   stz         BORDER_Y_SIZE  [53257/$D009]    ;sta BORDER_Y_SIZE
  1543 00E4CB;                                                                                       ;lda #FNX_BORDER_WIDTH
  1544 00E4CB:9C 08 D0                                   stz         BORDER_X_SIZE  [53256/$D008]    ;sta BORDER_X_SIZE
  1545 00E4CE
  1546 00E4CE;                                                                                       ; initialize backgrounnd
  1547 00E4CE:9C 0D D0                                   stz         BACKGROUND_COLOR_B  [53261/$D00D] ; set background color to black, #000000
  1548 00E4D1:9C 0E D0                                   stz         BACKGROUND_COLOR_G  [53262/$D00E]
  1549 00E4D4:9C 0F D0                                   stz         BACKGROUND_COLOR_R  [53263/$D00F]
  1550 00E4D7
  1551 00E4D7;                                                                                       ; initialize Tiny Vicky registers
  1552 00E4D7:A2 00                                      ldx         #0  [0/$00]
  1553 00E4D9                            -
  1554 00E4D9:9E 00 D1                                   stz         TyVKY_BM0_CTRL_REG,x  [53504/$D100] ; bitmaps
  1555 00E4DC:9E 00 D2                                   stz         TL0_CONTROL_REG,x  [53760/$D200] ; tilemaps/tilesets
  1556 00E4DF:9E 00 D9                                   stz         SP0_Ctrl,x  [55552/$D900]       ; sprites
  1557 00E4E2:9E 00 DA                                   stz         SP0_Ctrl+$0100,x  [55808/$DA00]
  1558 00E4E5:E8                                         inx
  1559 00E4E6:D0 F1                                      bne         -  [58585/$E4D9]
  1560 00E4E8
  1561 00E4E8;                                                                                       ; initialize cursor
  1562 00E4E8:9C 10 D0                                   stz         VKY_TXT_CURSOR_CTRL_REG  [53264/$D010] ; disable cursor
  1563 00E4EB:9C 12 D0                                   stz         VKY_TXT_CURSOR_CHAR_REG  [53266/$D012] ; set cursor character as font tile 0
  1564 00E4EE
  1565 00E4EE:9C 14 D0                                   stz         VKY_TXT_CURSOR_X_REG_L  [53268/$D014] ; set cursor to colum 0
  1566 00E4F1:9C 15 D0                                   stz         VKY_TXT_CURSOR_X_REG_H  [53269/$D015]
  1567 00E4F4:9C 16 D0                                   stz         VKY_TXT_CURSOR_Y_REG_L  [53270/$D016] ; set cursor to row 0
  1568 00E4F7:9C 17 D0                                   stz         VKY_TXT_CURSOR_Y_REG_H  [53271/$D017]
  1569 00E4FA
  1570 00E4FA:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""] ;<<<="lda #DoC64COLOR(LTBLUE,BLACK)"
  1571 00E4FC:85 48                                      sta         CursorColor  [72/$48/"H"]
  1572 00E4FE:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1573 00E501                                            AssignWord  (#VKY_TEXT_MEMORY,CursorPointer)
  1575m00E501:A9 00                                      lda         #<(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [0/$00]
  1576m00E503:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1577m00E505:A9 C0                                      lda         #>(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [192/$C0/"A"]
  1578m00E507:92 4B                                      sta         (CursorPointer)+1  [75/$4B/"K"]
  1586 00E509:60                                         rts
  1587 00E50A                                            option      showallbytes=1
show all listing bytes enabled
  1588 00E50A:00 00 00 00 FF FF FF 00 >> COLODORE_PALETTE hex        00 00 00 00 FF FF FF 00 38 33 81 00 C8 CE 75 00 , 97 3C 8E 00 4D AC 56 00 9B 2C 2E 00 71 F1 ED 00 , 29 50 8E 00 00 38 55 00 71 6C C4 00 4A 4A 4A 00 , 7B 7B 7B 00 9F FF A9 00 EB 6D 70 00 B2 B2 B2 00  [size=64/$40/"@"]
       00E512:38 33 81 00 C8 CE 75 00 >>
       00E51A:97 3C 8E 00 4D AC 56 00 >>
       00E522:9B 2C 2E 00 71 F1 ED 00 >>
       00E52A:29 50 8E 00 00 38 55 00 >>
       00E532:71 6C C4 00 4A 4A 4A 00 >>
       00E53A:7B 7B 7B 00 9F FF A9 00 >>
       00E542:EB 6D 70 00 B2 B2 B2 00   
  1589 00E54A                                            option      showallbytes=0
show all listing bytes disabled
  1590 00E54A                                            endproc
end scope Init_Graphics, restore scope  <<global symbols>>
  1591 00E54A
  1592 00E54A                                            proc        Init_CODEC
open scope Init_CODEC, from scope  <<global symbols>>
  1593 00E54A:A9 00                                      lda         #%0.0.000.0.0.0.0  [0/$00]
  1594 00E54C:A0 1A                                      ldy         #%0001101.0  [26/$1A]
  1595 00E54E:20 AF E5                                   jsr         WriteCodecWait  [58799/$E5AF]
  1596 00E551:A9 03                                      lda         #%0000.0011  [3/$03]
  1597 00E553:A0 2A                                      ldy         #%0010101.0  [42/$2A/"*"]
  1598 00E555:20 AF E5                                   jsr         WriteCodecWait  [58799/$E5AF]
  1599 00E558:A9 01                                      lda         #%0.0.00.0001  [1/$01]
  1600 00E55A:A0 23                                      ldy         #%0010001.1  [35/$23/"#"]
  1601 00E55C:20 AF E5                                   jsr         WriteCodecWait  [58799/$E5AF]
  1602 00E55F:A9 07                                      lda         #%00000.111  [7/$07]
  1603 00E561:A0 2C                                      ldy         #%0010110.0  [44/$2C/","]
  1604 00E563:20 AF E5                                   jsr         WriteCodecWait  [58799/$E5AF]
  1605 00E566:A9 02                                      lda         #%00.00.0.0.10  [2/$02]
  1606 00E568:A0 14                                      ldy         #%0001010.0  [20/$14]
  1607 00E56A:20 AF E5                                   jsr         WriteCodecWait  [58799/$E5AF]
  1608 00E56D:A9 02                                      lda         #%0.0.00.0.0.10  [2/$02]
  1609 00E56F:A0 16                                      ldy         #%0001011.0  [22/$16]
  1610 00E571:20 AF E5                                   jsr         WriteCodecWait  [58799/$E5AF]
  1611 00E574:A9 45                                      lda         #%0.100.0.101  [69/$45/"E"]
  1612 00E576:A0 18                                      ldy         #%0001100.0  [24/$18]
  1613 00E578:20 AF E5                                   jsr         WriteCodecWait  [58799/$E5AF]
  1614 00E57B:60                                         rts
  1615 00E57C
  1616 00E57C                            WriteCodecWait
  1617 00E57C:8D 20 D6                                   sta         CODEC_LOW  [54816/$D620]
  1618 00E57F:8C 21 D6                                   sty         CODEC_HI  [54817/$D621]
  1619 00E582:A9 01                                      lda         #1  [1/$01]
  1620 00E584:8D 22 D6                                   sta         CODEC_CTRL  [54818/$D622]
  1621 00E587                            -
  1622 00E587:2C 22 D6                                   bit         CODEC_CTRL  [54818/$D622]
  1623 00E58A:D0 FB                                      bne         -  [58759/$E587]
  1624 00E58C:60                                         rts
  1625 00E58D                                            endproc
end scope Init_CODEC, restore scope  <<global symbols>>
  1626 00E58D
  1627 00E58D                                            proc        Init_Sound
open scope Init_Sound, from scope  <<global symbols>>
  1628 00E58D:20 4A E5                                   jsr         Init_CODEC  [58698/$E54A]
  1629 00E590
  1630 00E590;                                                                                       ; intialize left and right PSG SN76489
  1631 00E590:A9 9F                                      lda         #%1.00.1.1111  [159/$9F/"Y"]    ;mute channel 0
  1632 00E592:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1633 00E595:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1634 00E598:A9 BF                                      lda         #%1.01.1.1111  [191/$BF/""]    ;mute channel 1
  1635 00E59A:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1636 00E59D:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1637 00E5A0:A9 DF                                      lda         #%1.10.1.1111  [223/$DF/""]    ;mute channel 2
  1638 00E5A2:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1639 00E5A5:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1640 00E5A8:A9 FF                                      lda         #%1.11.1.1111  [255/$FF/""]    ;mute channel 3
  1641 00E5AA:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1642 00E5AD:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1643 00E5B0
  1644 00E5B0;                                                                                       ; initialize left and right SIDs
  1645 00E5B0:A2 00                                      ldx         #0  [0/$00]
  1646 00E5B2                            -
  1647 00E5B2:9E 00 D4                                   stz         SID_L_V1_FREQ_LO,x  [54272/$D400]
  1648 00E5B5:9E 00 D5                                   stz         SID_R_V1_FREQ_LO,x  [54528/$D500]
  1649 00E5B8:E8                                         inx
  1650 00E5B9:E0 20                                      cpx         #$20  [32/$20/" "]
  1651 00E5BB:D0 F5                                      bne         -  [58802/$E5B2]
  1652 00E5BD:60                                         rts
  1653 00E5BE                                            endproc
end scope Init_Sound, restore scope  <<global symbols>>
  1654 00E5BE
  1655 00E5BE                                            proc        F256_RESET
open scope F256_RESET, from scope  <<global symbols>>
  1656 00E5BE:18                                         clc
  1657 00E5BF:78                                         sei                                         ; disable interrupts
  1658 00E5C0:A2 FF                                      ldx         #$ff  [255/$FF/""]
  1659 00E5C2:9A                                         txs                                         ; initialize stack
  1660 00E5C3
  1661 00E5C3;                                                                                       ; initialize mmu
  1662 00E5C3:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1663 00E5C5:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1664 00E5C7:09 80                                      ora         #MMU_EDIT_EN  [128/$80/"?"]
  1665 00E5C9:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; enable mmu edit, edit mmu lut 0, activate mmu lut 0 ;<<<="UnlockMMU	; enable mmu edit, edit mmu lut 0, activate mmu lut 0"
  1666 00E5CB:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; enable i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO	; enable i/o at $d000, use page 0=i/o registers"
  1667 00E5CD:A9 00                                      lda         #0  [0/$00]
  1668 00E5CF:85 08                                      sta         MMU_MEM_BANK_0  [8/$08]         ; map $000000 to bank 0
  1669 00E5D1:1A                                         inc
  1670 00E5D2:85 09                                      sta         MMU_MEM_BANK_1  [9/$09]         ; map $002000 to bank 1
  1671 00E5D4:1A                                         inc
  1672 00E5D5:85 0A                                      sta         MMU_MEM_BANK_2  [10/$0A]        ; map $004000 to bank 2
  1673 00E5D7:1A                                         inc
  1674 00E5D8:85 0B                                      sta         MMU_MEM_BANK_3  [11/$0B]        ; map $006000 to bank 3
  1675 00E5DA:1A                                         inc
  1676 00E5DB:85 0C                                      sta         MMU_MEM_BANK_4  [12/$0C]        ; map $008000 to bank 4
  1677 00E5DD:1A                                         inc
  1678 00E5DE:85 0D                                      sta         MMU_MEM_BANK_5  [13/$0D]        ; map $00a000 to bank 5
  1679 00E5E0:1A                                         inc
  1680 00E5E1:85 0E                                      sta         MMU_MEM_BANK_6  [14/$0E]        ; map $00c000 to bank 6
  1681 00E5E3:1A                                         inc
  1682 00E5E4:85 0F                                      sta         MMU_MEM_BANK_7  [15/$0F]        ; map $00e000 to bank 7
  1683 00E5E6:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1684 00E5E8:29 7F                                      and         #~(MMU_EDIT_EN)  [-129/$FFFFFF7F]
  1685 00E5EA:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; disable mmu edit, use mmu lut 0 ;<<<="LockMMU	; disable mmu edit, use mmu lut 0"
  1686 00E5EC
  1687 00E5EC;                                                                                       ; initialize via registers
  1688 00E5EC;                                                                                       ; reset via registers a/b
  1696 00E5EC:9C 00 DC                                   stz         VIA_ORB_IRB  [56320/$DC00]      ; set via i/o port a to read
  1697 00E5EF:9C 01 DC                                   stz         VIA_ORA_IRA  [56321/$DC01]      ; set via i/o port b to read
  1698 00E5F2
  1699 00E5F2;                                                                                       ; enable random number generator
  1700 00E5F2:A9 01                                      lda         #RNG_ENABLE  [1/$01]
  1701 00E5F4:8D A6 D6                                   sta         RNG_CTRL  [54950/$D6A6]
  1702 00E5F7
  1703 00E5F7;                                                                                       ; initialize interrupts
  1704 00E5F7:A9 FF                                      lda         #$ff  [255/$FF/""]             ; mask off all interrupts
  1705 00E5F9:8D 68 D6                                   sta         INT_EDGE_REG0  [54888/$D668]
  1706 00E5FC:8D 69 D6                                   sta         INT_EDGE_REG1  [54889/$D669]
  1707 00E5FF:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1708 00E602:8D 6D D6                                   sta         INT_MASK_REG1  [54893/$D66D]
  1709 00E605
  1710 00E605:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660] ; clear all existing interrupts
  1711 00E608:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660]
  1712 00E60B:AD 61 D6                                   lda         INT_PENDING_REG1  [54881/$D661]
  1713 00E60E:8D 61 D6                                   sta         INT_PENDING_REG1  [54881/$D661]
  1714 00E611
  1715 00E611:20 8D E5                                   jsr         Init_Sound  [58765/$E58D]
  1716 00E614:20 9B E4                                   jsr         Init_Graphics  [58523/$E49B]
  1717 00E617:20 00 E2                                   jsr         Init_Keyboard  [57856/$E200]
  1718 00E61A:58                                         cli
  1719 00E61B:4C 21 EF                                   jmp         Main  [61217/$EF21]
  1720 00E61E                                            endproc
end scope F256_RESET, restore scope  <<global symbols>>
  1721 00E61E                                            endsection    [58909/$E61D]
  1722 00E61E
  1723 00E61E;                                                                                       ;include 'sid.asm'
  1724 00E61E
  1725 00E61E;                                                                                       ; main game framework stored with libary section
  1726 00E61E                                            section     'F256JRLIB'
current section: F256JRLIB, next free address: $00E61E
  1727 00E61E:[=1/$01 bytes]             SIDSpeed        resb        1
define data constant size=1, fill value 0/$00
  1728 00E61F                                            proc        SOFIRQ                          ;	proc Increase_SOFCounter
open scope SOFIRQ, from scope  <<global symbols>>
  1729 00E61F;                                                                                       ;	Increase_SOF_Counter()
  1730 00E61F;                                                                                       ;	SID_Play_Frame()
  1731 00E61F:A9 06                                      lda         #SIDMODE  [6/$06]
  1732 00E621:C9 06                                      cmp         #6  [6/$06]
  1733 00E623:F0 3C                                      beq         +  [58977/$E661]
  1734 00E625:CE 1E E6                                   dec         SIDSpeed  [58910/$E61E]
  1735 00E628:D0 37                                      bne         +  [58977/$E661]
  1736 00E62A:8D 1E E6                                   sta         SIDSpeed  [58910/$E61E]
  1737 00E62D:60                                         rts
  1738 00E62E                            +
  1739 00E62E:20 03 10                                   jsr         SIDPLAY  [4099/$1003]
  1740 00E631:60                                         rts
  1741 00E632                                            endproc
end scope SOFIRQ, restore scope  <<global symbols>>
  1742 00E632
  1743 00E632                                            proc        IRQ_Handler
open scope IRQ_Handler, from scope  <<global symbols>>
  1744 00E632:08                                         php
  1745 00E633:48                                         pha
  1746 00E634:DA                                         phx
  1747 00E635:5A                                         phy                                         ;<<<="PushAXY"
  1748 00E636:D8                                         cld
  1749 00E637:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1750 00E639:48                                         pha
  1751 00E63A:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1752 00E63C:48                                         pha                                         ;<<<="PushMMUIO"
  1753 00E63D
  1754 00E63D:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; use i/o registers ;<<<="SetMMUIO	; use i/o registers"
  1755 00E63F:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660]
  1756 00E642:85 20                                      sta         TempIRQ  [32/$20/" "]
  1757 00E644:89 01                                      bit         #JR0_INT00_SOF  [1/$01]
  1758 00E646:F0 3B                                      beq         +  [59011/$E683]
  1759 00E648:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1760 00E64B:20 1F E6                                   jsr         SOFIRQ  [58911/$E61F]           ;Increase_SOFCounter
  1761 00E64E:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1762 00E650                            +
  1763 00E650:89 04                                      bit         #JR0_INT02_KBD  [4/$04]
  1764 00E652:F0 3B                                      beq         +  [59023/$E68F]
  1765 00E654:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1766 00E657:20 32 E2                                   jsr         KeyboardIRQ  [57906/$E232]
  1767 00E65A:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1768 00E65C                            +
  1769 00E65C
  1770 00E65C:68                                         pla
  1771 00E65D:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1772 00E65F:68                                         pla
  1773 00E660:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1774 00E662:7A                                         ply
  1775 00E663:FA                                         plx
  1776 00E664:68                                         pla                                         ;<<<="PullYXA"
  1777 00E665:28                                         plp
  1778 00E666:40                                         rti
  1779 00E667                                            endproc
end scope IRQ_Handler, restore scope  <<global symbols>>
  1780 00E667
  1781 00E667                                            proc        Init_IRQHandler
open scope Init_IRQHandler, from scope  <<global symbols>>
  1782 00E667:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1783 00E669:48                                         pha                                         ;<<<="PushMMUIO"
  1784 00E66A:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1785 00E66C
  1786 00E66C:78                                         sei
  1787 00E66D                                            AssignWord  (#IRQ_Handler,VECTOR_IRQ)
  1789m00E66D:A9 32                                      lda         #<(loword(val(copy('#IRQ_Handler',2))))  [50/$32/"2"]
  1790m00E66F:8D FE FF                                   sta         VECTOR_IRQ  [65534/$FFFE]
  1791m00E672:A9 E6                                      lda         #>(loword(val(copy('#IRQ_Handler',2))))  [230/$E6/""]
  1792m00E674:8D FF FF                                   sta         (VECTOR_IRQ)+1  [65535/$FFFF]
  1800 00E677:A9 FA                                      lda         #~(JR0_INT00_SOF|JR0_INT02_KBD)  [-6/$FFFFFFFA]
  1801 00E679:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1802 00E67C
  1803 00E67C                                            AssignDWord (#0,SOFCounter)
  1805m00E67C:A9 00                                      lda         #<(loword(val(copy('#0',2))))  [0/$00]
  1806m00E67E:85 4D                                      sta         SOFCounter  [77/$4D/"M"]
  1807m00E680:A9 00                                      lda         #>(loword(val(copy('#0',2))))  [0/$00]
  1808m00E682:92 4D                                      sta         (SOFCounter)+1  [77/$4D/"M"]
  1809m00E684:A9 00                                      lda         #<(hiword(val(copy('#0',2))))  [0/$00]
  1810m00E686:92 4D                                      sta         (SOFCounter)+2  [77/$4D/"M"]
  1811m00E688:A9 00                                      lda         #>(hiword(val(copy('#0',2))))  [0/$00]
  1812m00E68A:92 4D                                      sta         (SOFCounter)+3  [77/$4D/"M"]
  1824 00E68C:58                                         cli
  1825 00E68D
  1826 00E68D:68                                         pla
  1827 00E68E:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1828 00E690:60                                         rts
  1829 00E691                                            endproc
end scope Init_IRQHandler, restore scope  <<global symbols>>
  1830 00E691
  1831 00E691                                            proc        Init_Audio
open scope Init_Audio, from scope  <<global symbols>>
  1832 00E691:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1833 00E693:48                                         pha                                         ;<<<="PushMMUIO"
  1834 00E694:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1835 00E696
  1836 00E696;                                                                                       ; init left and right sids
  1837 00E696;                                                                                       ;	stz SID_Control
  1838 00E696:A2 00                                      ldx         #0  [0/$00]
  1839 00E698                            -
  1840 00E698:9E 00 D4                                   stz         SID_LEFT,x  [54272/$D400]
  1841 00E69B:9E 00 D5                                   stz         SID_RIGHT,x  [54528/$D500]
  1842 00E69E:E8                                         inx
  1843 00E69F:E0 20                                      cpx         #32  [32/$20/" "]
  1844 00E6A1:D0 F5                                      bne         -  [59032/$E698]
  1845 00E6A3
  1846 00E6A3:68                                         pla
  1847 00E6A4:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1848 00E6A6:60                                         rts
  1849 00E6A7                                            endproc
end scope Init_Audio, restore scope  <<global symbols>>
  1850 00E6A7
  1851 00E6A7                                            proc        Init_GameFont
open scope Init_GameFont, from scope  <<global symbols>>
  1852 00E6A7:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1853 00E6A9:48                                         pha                                         ;<<<="PushMMUIO"
  1854 00E6AA:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1855 00E6AC
  1856 00E6AC:A9 01                                      lda         #MMU_IO_PAGE_1  [1/$01]
  1857 00E6AE:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUGFX"
  1858 00E6B0                                            CopyMemSmall (FONT_FANTASY,FONT_MEM,sizeof(FONT_FANTASY))
  1859m00E6B0
  1860m00E6B0                                            {
  1861m00E6B0;                                                                                       ;		AssignWord(FONT_FANTASY,.asrcaddr)
  1862m00E6B0:A9 21                                      lda         #<(FONT_FANTASY)  [33/$21/"!"]
  1863m00E6B2:8D FA E6                                   sta         .srcaddr  [59130/$E6FA]
  1864m00E6B5:A9 E7                                      lda         #>(FONT_FANTASY)  [231/$E7/""]
  1865m00E6B7:8D FB E6                                   sta         .srcaddr+1  [59131/$E6FB]
  1866m00E6BA;                                                                                       ;		AssignWord(FONT_MEM,.destaddr)
  1867m00E6BA:A9 00                                      lda         #<(FONT_MEM)  [0/$00]
  1868m00E6BC:8D FD E6                                   sta         .destaddr  [59133/$E6FD]
  1869m00E6BF:A9 C0                                      lda         #>(FONT_MEM)  [192/$C0/"A"]
  1870m00E6C1:8D FE E6                                   sta         .destaddr+1  [59134/$E6FE]
  1871m00E6C4:A0 00                                      ldy         #0  [0/$00]
  1872m00E6C6                            -
  1873m00E6C6                            .srcaddr        =           *+1  [59079/$E6C7]
  1874m00E6C6:AD 34 12                                   lda         $1234  [4660/$1234]
  1875m00E6C9                            .destaddr       =           *+1  [59082/$E6CA]
  1876m00E6C9:8D 21 43                                   sta         $4321  [17185/$4321]
  1877m00E6CC:EE C7 E6                                   inc         .srcaddr  [59079/$E6C7]
  1878m00E6CF:D0 36                                      bne         +  [59143/$E707]
  1879m00E6D1:EE C8 E6                                   inc         .srcaddr+1  [59080/$E6C8]
  1880m00E6D4                            +
  1881m00E6D4:EE CA E6                                   inc         .destaddr  [59082/$E6CA]
  1882m00E6D7:D0 36                                      bne         +  [59151/$E70F]
  1883m00E6D9:EE CB E6                                   inc         .destaddr+1  [59083/$E6CB]
  1884m00E6DC                            +
  1885m00E6DC:AD C7 E6                                   lda         .srcaddr  [59079/$E6C7]
  1886m00E6DF:C9 21                                      cmp         #<(FONT_FANTASY+sizeof(FONT_FANTASY))  [33/$21/"!"]
  1887m00E6E1:D0 E3                                      bne         -  [59078/$E6C6]
  1888m00E6E3:AD C8 E6                                   lda         .srcaddr+1  [59080/$E6C8]
  1889m00E6E6:C9 EF                                      cmp         #>(FONT_FANTASY+sizeof(FONT_FANTASY))  [239/$EF/""]
  1890m00E6E8:D0 DC                                      bne         -  [59078/$E6C6]
  1891m00E6EA
  1892m00E6EA                                            }
  1894 00E6EA
  1895 00E6EA:68                                         pla
  1896 00E6EB:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1897 00E6ED:60                                         rts
  1898 00E6EE:[=2048/$0800 bytes]        FONT_FANTASY    incbin      'assets\gamefont2.bin'
including binary file 'assets\gamefont2.bin', 2048 bytes [=$000800]
2048 bytes successfully read
  1899 00EEEE                                            endproc
end scope Init_GameFont, restore scope  <<global symbols>>
  1900 00EEEE
  1901 00EEEE                                            proc        Main
open scope Main, from scope  <<global symbols>>
  1902 00EEEE:A9 80                                      lda         #MMU_EDIT_EN  [128/$80/"?"]
  1903 00EEF0:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1904 00EEF2:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1905 00EEF4:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1906 00EEF6
  1907 00EEF6:A9 3F                                      lda         #(Mstr_Ctrl_Text_Mode_En|Mstr_Ctrl_Text_Overlay|Mstr_Ctrl_Graph_Mode_En|Mstr_Ctrl_Bitmap_En|Mstr_Ctrl_TileMap_En|Mstr_Ctrl_Sprite_En)  [63/$3F/"?"]
  1908 00EEF8:8D 00 D0                                   sta         MASTER_CTRL_REG_L  [53248/$D000]
  1909 00EEFB:A9 06                                      lda         #(Mstr_Ctrl_Text_XDouble|Mstr_Ctrl_Text_YDouble)  [6/$06]
  1910 00EEFD:8D 01 D0                                   sta         MASTER_CTRL_REG_H  [53249/$D001]
  1911 00EF00:20 A7 E6                                   jsr         Init_GameFont  [59047/$E6A7]
  1912 00EF03:20 91 E6                                   jsr         Init_Audio  [59025/$E691]
  1913 00EF06:20 67 E6                                   jsr         Init_IRQHandler  [58983/$E667]
  1914 00EF09
  1915 00EF09                                            SetCursorColor (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK) ;<<<="SetCursorColor(#DoC64COLOR(LTBLUE,BLACK))"
  1916m00EF09                                            ConvertParamToA (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK)
  1928m00EF09:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""]
  1932m00EF0B:85 48                                      sta         CursorColor  [72/$48/"H"]
  1934 00EF0D:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1935 00EF10
  1936 00EF10;                                                                                       ; map in title screen code as $06000
  1937 00EF10;                                                                                       ;	lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL ;<<<=";	UnlockMMU"
  1938 00EF10;                                                                                       ;	lda #(TitleScreenCode/$2000)
  1939 00EF10;                                                                                       ;	sta MMU_MEM_BANK_3
  1940 00EF10;                                                                                       ;	lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL ;<<<=";	LockMMU"
  1941 00EF10;                                                                                       ;	jsr ShowTitle
  1942 00EF10                                            PrintString (TX_GAMETITLE,#0,#0,#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)) ;<<<="PrintString(TX_GAMETITLE,#0,#0,#DoC64COLOR(YELLOW,BLACK)))"
  1949m00EF10                                            SetCursorPointer (#0,#0)
  1950m00EF10                                            ConvertParamToA (#0)
  1962m00EF10:A9 00                                      lda         #0  [0/$00]
  1966m00EF12:85 49                                      sta         CursorColumn  [73/$49/"I"]
  1967m00EF14                                            ConvertParamToA (#0)
  1979m00EF14:A9 00                                      lda         #0  [0/$00]
  1983m00EF16:85 4A                                      sta         CursorLine  [74/$4A/"J"]
  1984m00EF18
  1986m00EF18:A9 00                                      lda         #<(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [0/$00]
  1987m00EF1A:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1988m00EF1C:A9 C0                                      lda         #>(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [192/$C0/"A"]
  1989m00EF1E:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
  1996m00EF20                                            SetCursorColor (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  1997m00EF20                                            ConvertParamToA (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  2009m00EF20:A9 70                                      lda         #(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)  [112/$70/"p"]
  2013m00EF22:85 48                                      sta         CursorColor  [72/$48/"H"]
  2025m00EF24:A9 9B                                      lda         #<TX_GAMETITLE  [155/$9B/">"]
  2026m00EF26:85 30                                      sta         TempSrc  [48/$30/"0"]
  2027m00EF28:A9 EF                                      lda         #>TX_GAMETITLE  [239/$EF/""]
  2028m00EF2A:85 31                                      sta         TempSrc+1  [49/$31/"1"]
  2030m00EF2C:20 8C E0                                   jsr         PrintAnsiString  [57484/$E08C]
  2037 00EF2F;                                                                                       ;	inc SID_Control
  2038 00EF2F;                                                                                       ;	SID_Initialize(0,0)
  2039 00EF2F;                                                                                       ;
  2040 00EF2F;                                                                                       ;// choose setting
  2041 00EF2F;                                                                                       ;poke 54299,2 (overdrive)
  2042 00EF2F;                                                                                       ;poke 54299,3 (filters)
  2043 00EF2F;                                                                                       ;poke 54299,4 (smoothing)
  2044 00EF2F;                                                                                       ;
  2045 00EF2F;                                                                                       ;// choose value
  2046 00EF2F;                                                                                       ;// overdrive: 0 (medium) 1 (high) 2 (low)
  2047 00EF2F;                                                                                       ;// filters:   0 (blend)  1 (8580) 2 (6581)
  2048 00EF2F;                                                                                       ;// smoothing: 0 (neat)   1 (soft) 2 (rough)
  2049 00EF2F;                                                                                       ;poke 54300,0/1/2 (setting)
  2050 00EF2F;                                                                                       ;
  2051 00EF2F;                                                                                       ;// apply setting
  2052 00EF2F;                                                                                       ;poke 54301,181:poke 54302,29
  2053 00EF2F:A9 02                                      lda         #2  [2/$02]
  2054 00EF31:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2055 00EF34:A9 01                                      lda         #1  [1/$01]
  2056 00EF36:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2057 00EF39:A9 B5                                      lda         #181  [181/$B5/""]
  2058 00EF3B:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2059 00EF3E:A9 1D                                      lda         #29  [29/$1D]
  2060 00EF40:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2061 00EF43
  2062 00EF43:A9 03                                      lda         #3  [3/$03]
  2063 00EF45:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2064 00EF48:A9 01                                      lda         #1  [1/$01]
  2065 00EF4A:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2066 00EF4D:A9 B5                                      lda         #181  [181/$B5/""]
  2067 00EF4F:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2068 00EF52:A9 1D                                      lda         #29  [29/$1D]
  2069 00EF54:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2070 00EF57
  2071 00EF57:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2072 00EF59:A9 01                                      lda         #1  [1/$01]
  2073 00EF5B:8D 1E E6                                   sta         SIDSpeed  [58910/$E61E]
  2074 00EF5E:A9 00                                      lda         #0  [0/$00]
  2075 00EF60:20 F6 0F                                   jsr         SIDINIT  [4086/$0FF6]
  2076 00EF63;                                                                                       ;	SID_Initialize(0,0)
  2077 00EF63;                                                                                       ;	SID_SetVolume(-1)
  2078 00EF63;                                                                                       ;	SID_Play()
  2079 00EF63:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2080 00EF65                            -
  2081 00EF65:4C 65 EF                                   jmp         -  [61285/$EF65]
  2082 00EF68
  2083 00EF68:[=14/$0E bytes]            TX_GAMETITLE    bytez       SIDFILE  [size=14/$0E]
  2084 00EF76                                            endproc
end scope Main, restore scope  <<global symbols>>
  2085 00EF76                                            endsection    [61301/$EF75]
  2086 00EF76
  2087 000800                                            section     add('MAIN',$0800,$bfff,size=-1,save=1)
updated section 'MAIN' $000800-00BFFF [-1]
current section: MAIN, next free address: $000800
  2088 000800
  2089 000800:[=1912/$0778 bytes]                        pad         SIDSTART-$7e
define data constant size=1912, fill value 0/$00
  2089 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a000,SIDPLAY=$a003,SIDMODE=5,SIDFILE='toccata_v3.a000'
  2090 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a048,SIDPLAY=$a021,SIDMODE=5,SIDFILE='viola_duet.a000'
  2091 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Super_Mario_Bros_2SID'
  2092 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='mrdo'
  2093 000F78;                                                                                       ;const SIDSTART=$4000,SIDINIT=$4000,SIDPLAY=$4003,SIDMODE=5,SIDFILE='Airwolf_2SID'
  2094 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Space_Oddity_2SID'
  2095 000F78;                                                                                       ;const SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Girl_from_Tomorrow_2SID'
  2096 000F78                                            const       SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Lakeside_2SID'  [4086/$0FF6,4086/$0FF6,4099/$1003,6/$06,"Lakeside_2SID"]
  2097 000F78:[=4139/$102B bytes]                        incbin      'music\'+SIDFILE+'.sid'
including binary file 'music\Lakeside_2SID.sid', 4139 bytes [=$00102B]
4139 bytes successfully read
  2098 001FA3
  2099 001FA3                                            endsection    [8098/$1FA2]
  2100 001FA3
  2101 001FA3;                                                                                       ;savepgz
  2102 001FA3                                            savebin     'wktitle.0800.bin',$0800 to $0ffff
saving binary file 'wktitle.0800.bin', $000800-00FFFF, 63488 bytes [=$00F800]
  2103 001FA3
pass 2 complete - 23:31:29 78 ms
 address range=$000030-00FFFF, checksum=000BB550
 *** phase error=51 byte(s)   last checksum=00035A70 - attempting another pass

pass 3 - 23:31:29 *** phase/checksum error retry #1
allocating primary target cpu memory $100000/1048576 bytes
     1 000000                                            cpu         'f256jr'
current target cpu F256JR (primary), 0 statement(s), 0/0 code/data byte(s)
     2 000000                                            const       usesystemfont=0  [0/$00]
     3 000000
     4 000000                                            include     'includes\f256jr_registers.asm'
including source file 'includes\f256jr_registers.asm'
     5 000000;                                                                                       ;MMU Registers
     6 000000                            MMU_MEM_CTRL    =           $0000  [0/$00]                  ; MMU Memory Control Register
     7 000000                            MMU_EDIT_EN     =           $80  [128/$80/"?"]
     8 000000                            MMU_IO_CTRL     =           $0001  [1/$01]                  ; MMU I/O Control Register
     9 000000                            MMU_IO_PAGE_0   =           $00  [0/$00]
    10 000000                            MMU_IO_PAGE_1   =           $01  [1/$01]
    11 000000                            MMU_IO_TEXT     =           $02  [2/$02]
    12 000000                            MMU_IO_COLOR    =           $03  [3/$03]
    13 000000                            MMU_MEM_BANK_0  =           $0008  [8/$08]                  ; MMU Edit Register for bank 0 ($0000 - $1FFF)
    14 000000                            MMU_MEM_BANK_1  =           $0009  [9/$09]                  ; MMU Edit Register for bank 1 ($2000 - $3FFF)
    15 000000                            MMU_MEM_BANK_2  =           $000A  [10/$0A]                 ; MMU Edit Register for bank 2 ($4000 - $5FFF)
    16 000000                            MMU_MEM_BANK_3  =           $000B  [11/$0B]                 ; MMU Edit Register for bank 3 ($6000 - $7FFF)
    17 000000                            MMU_MEM_BANK_4  =           $000C  [12/$0C]                 ; MMU Edit Register for bank 4 ($8000 - $9FFF)
    18 000000                            MMU_MEM_BANK_5  =           $000D  [13/$0D]                 ; MMU Edit Register for bank 5 ($A000 - $BFFF)
    19 000000                            MMU_MEM_BANK_6  =           $000E  [14/$0E]                 ; MMU Edit Register for bank 6 ($C000 - $DFFF)
    20 000000                            MMU_MEM_BANK_7  =           $000F  [15/$0F]                 ; MMU Edit Register for bank 7 ($E000 - $FFFF)
    21 000000
    22 000000;                                                                                       ;SDCard_Controller_def.asm
    23 000000
    24 000000;                                                                                       ;SDC_VERSION_REG         = $DD00    ; Ought to read 12
    25 000000;                                                                                       ;SDC_CONTROL_REG         = $DD01    ; Bit0 1 = Reset core logic, and registers. Self clearing
    26 000000;                                                                                       ;SDC_TRANS_TYPE_REG      = $DD02  ; Bit[1:0]
    27 000000;                                                                                       ;SDC_TRANS_DIRECT      = $00   ; 00 = Direct Access
    28 000000;                                                                                       ;SDC_TRANS_INIT_SD     = $01   ; 01 = Init SD
    29 000000;                                                                                       ;SDC_TRANS_READ_BLK    = $02   ; 10 = RW_READ_BLOCK (512 Bytes)
    30 000000;                                                                                       ;SDC_TRANS_WRITE_BLK   = $03   ; 11 = RW_WRITE_SD_BLOCK
    31 000000;                                                                                       ;SDC_TRANS_CONTROL_REG   = $DD03
    32 000000;                                                                                       ;SDC_TRANS_START         = $01
    33 000000;                                                                                       ;SDC_TRANS_STATUS_REG    = $DD04
    34 000000;                                                                                       ;SDC_TRANS_BUSY          = $01     ;  1= Transaction Busy
    35 000000;                                                                                       ;SDC_TRANS_ERROR_REG     = $DD05
    36 000000;                                                                                       ;SDC_TRANS_INIT_NO_ERR   = $00   ; Init Error Report [1:0]
    37 000000;                                                                                       ;SDC_TRANS_INIT_CMD0_ERR = $01
    38 000000;                                                                                       ;SDC_TRANS_INIT_CMD1_ERR = $02
    39 000000;                                                                                       ;SDC_TRANS_RD_NO_ERR     = $00   ; Read Error Report [3:2]
    40 000000;                                                                                       ;SDC_TRANS_RD_CMD_ERR    = $04
    41 000000;                                                                                       ;SDC_TRANS_RD_TOKEN_ERR  = $08
    42 000000;                                                                                       ;SDC_TRANS_WR_NO_ERR     = $00   ; Write Report Error  [5:4]
    43 000000;                                                                                       ;SDC_TRANS_WR_CMD_ERR    = $10   ;
    44 000000;                                                                                       ;SDC_TRANS_WR_DATA_ERR   = $20
    45 000000;                                                                                       ;SDC_TRANS_WR_BUSY_ERR   = $30
    46 000000;                                                                                       ;SDC_DIRECT_ACCESS_REG   = $DD06 ; SPI Direct Read and Write - Set DATA before initiating direct Access Transaction
    47 000000;                                                                                       ;SDC_SD_ADDR_7_0_REG     = $DD07 ; Set the ADDR before a block read or block write
    48 000000;                                                                                       ;SDC_SD_ADDR_15_8_REG    = $DD08 ; Addr0 [8:0] Always should be 0, since each block is 512Bytes
    49 000000;                                                                                       ;SDC_SD_ADDR_23_16_REG   = $DD09
    50 000000;                                                                                       ;SDC_SD_ADDR_31_24_REG   = $DD0A
    51 000000;                                                                                       ;SDC_SPI_CLK_DEL_REG     = $DD0B
    52 000000;                                                                                       ;SDC_RX_FIFO_DATA_REG    = $DD10 ; Data from the Block Read
    53 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_HI = $DD12 ; How many Bytes in the FIFO HI
    54 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_LO = $DD13 ; How many Bytes in the FIFO LO
    55 000000;                                                                                       ;SDC_RX_FIFO_CTRL_REG    = $DD14 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    56 000000;                                                                                       ;SDC_TX_FIFO_DATA_REG    = $DD20 ; Write Data Block here
    57 000000;                                                                                       ;SDC_TX_FIFO_CTRL_REG    = $DD24 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    58 000000
    59 000000
    60 000000;                                                                                       ;interrupt_def.asm
    61 000000
    62 000000                            INT_PENDING_REG0 =          $D660  [54880/$D660]            ;
    63 000000                            INT_PENDING_REG1 =          $D661  [54881/$D661]            ;
    64 000000;                                                                                       ;INT_PENDING_REG2 = $D662 ; NOT USED
    65 000000;                                                                                       ;INT_PENDING_REG3 = $D663 ; NOT USED
    66 000000                            INT_POL_REG0    =           $D664  [54884/$D664]            ;
    67 000000                            INT_POL_REG1    =           $D665  [54885/$D665]            ;
    68 000000;                                                                                       ;INT_POL_REG2     = $D666 ;  NOT USED
    69 000000;                                                                                       ;INT_POL_REG3     = $D667 ; NOT USED
    70 000000                            INT_EDGE_REG0   =           $D668  [54888/$D668]            ;
    71 000000                            INT_EDGE_REG1   =           $D669  [54889/$D669]            ;
    72 000000;                                                                                       ;INT_EDGE_REG2    = $D66A ; NOT USED
    73 000000;                                                                                       ;INT_EDGE_REG3    = $D66B ; NOT USED
    74 000000                            INT_MASK_REG0   =           $D66C  [54892/$D66C]            ;
    75 000000                            INT_MASK_REG1   =           $D66D  [54893/$D66D]            ;
    76 000000;                                                                                       ;INT_MASK_REG2    = $D66E ; NOT USED
    77 000000;                                                                                       ;INT_MASK_REG3    = $D66F ; NOT USED
    78 000000                            JR0_INT00_SOF   =           $01  [1/$01]                    ;Start of Frame @ 60FPS
    79 000000                            JR0_INT01_SOL   =           $02  [2/$02]                    ;Start of Line (Programmable)
    80 000000                            JR0_INT02_KBD   =           $04  [4/$04]                    ;
    81 000000                            JR0_INT03_MOUSE =           $08  [8/$08]                    ;
    82 000000                            JR0_INT04_TMR0  =           $10  [16/$10]                   ;
    83 000000                            JR0_INT05_TMR1  =           $20  [32/$20/" "]               ;Real-Time Clock Interrupt
    84 000000                            JR0_INT06_DMA   =           $40  [64/$40/"@"]               ;Floppy Disk Controller
    85 000000                            JR0_INT07_TBD   =           $80  [128/$80/"?"]              ; Mouse Interrupt (INT12 in SuperIO IOspace)
    86 000000                            JR1_INT00_UART  =           $01  [1/$01]                    ;Keyboard Interrupt
    87 000000                            JR1_INT01_COL0  =           $02  [2/$02]                    ;TYVKY Collision TBD
    88 000000                            JR1_INT02_COL1  =           $04  [4/$04]                    ;TYVKY Collision TBD
    89 000000                            JR1_INT03_COL2  =           $08  [8/$08]                    ;TYVKY Collision TBD
    90 000000                            JR1_INT04_RTC   =           $10  [16/$10]                   ;Serial Port 1
    91 000000                            JR1_INT05_VIA   =           $20  [32/$20/" "]               ;Midi Controller Interrupt
    92 000000                            JR1_INT06_IEC   =           $40  [64/$40/"@"]               ;Parallel Port
    93 000000                            JR1_INT07_SDCARD =          $80  [128/$80/"?"]              ;SDCard Insert
    94 000000
    95 000000
    96 000000;                                                                                       ;RTC_def.asm
    97 000000
    98 000000;                                                                                       ;RTC_SEC       = $D690 ;Seconds Register
    99 000000;                                                                                       ;RTC_SEC_ALARM = $D691 ;Seconds Alarm Register
   100 000000;                                                                                       ;RTC_MIN       = $D692 ;Minutes Register
   101 000000;                                                                                       ;RTC_MIN_ALARM = $D693 ;Minutes Alarm Register
   102 000000;                                                                                       ;RTC_HRS       = $D694 ;Hours Register
   103 000000;                                                                                       ;RTC_HRS_ALARM = $D695 ;Hours Alarm Register
   104 000000;                                                                                       ;RTC_DAY       = $D696 ;Day Register
   105 000000;                                                                                       ;RTC_DAY_ALARM = $D697 ;Day Alarm Register
   106 000000;                                                                                       ;RTC_DOW       = $D698 ;Day of Week Register
   107 000000;                                                                                       ;RTC_MONTH     = $D699 ;Month Register
   108 000000;                                                                                       ;RTC_YEAR      = $D69A ;Year Register
   109 000000;                                                                                       ;RTC_RATES     = $D69B ;Rates Register
   110 000000;                                                                                       ;RTC_ENABLE    = $D69C ;Enables Register
   111 000000;                                                                                       ;RTC_FLAGS     = $D69D ;Flags Register
   112 000000;                                                                                       ;RTC_CTRL      = $D69E ;Control Register
   113 000000;                                                                                       ;RTC_CENTURY   = $D69F ;Century Register
   114 000000
   115 000000
   116 000000;                                                                                       ;VIA_def.asm
   117 000000
   118 000000                            VIA_ORB_IRB     =           $DC00  [56320/$DC00]            ;Output/Input Register Port B
   119 000000                            VIA_ORA_IRA     =           $DC01  [56321/$DC01]            ;Output/Input Register Port B
   120 000000                            VIA_DDRB        =           $DC02  [56322/$DC02]            ;Data Direction Port B
   121 000000                            VIA_DDRA        =           $DC03  [56323/$DC03]            ;Data Direction Port A
   122 000000                            VIA_T1CL        =           $DC04  [56324/$DC04]            ;T1C-L
   123 000000                            VIA_T1CH        =           $DC05  [56325/$DC05]            ;T1C-H
   124 000000                            VIA_T1LL        =           $DC06  [56326/$DC06]            ;T1L-L
   125 000000                            VIA_T1LH        =           $DC07  [56327/$DC07]            ;T1L-H
   126 000000                            VIA_T2CL        =           $DC08  [56328/$DC08]            ;T2C-L
   127 000000                            VIA_T2CH        =           $DC09  [56329/$DC09]            ;T2C-H
   128 000000                            VIA_SR          =           $DC0A  [56330/$DC0A]            ;SR
   129 000000                            VIA_ACR         =           $DC0B  [56331/$DC0B]            ;ACR
   130 000000                            VIA_PCR         =           $DC0C  [56332/$DC0C]            ;PCR
   131 000000                            VIA_IFR         =           $DC0D  [56333/$DC0D]            ;IFR
   132 000000                            VIA_IER         =           $DC0E  [56334/$DC0E]            ;IER
   133 000000                            VIA_ORA_IRA_AUX =           $DC0F  [56335/$DC0F]            ;ORA/IRA
   134 000000                            JOY_UP          =           $01  [1/$01]
   135 000000                            JOY_DWN         =           $02  [2/$02]
   136 000000                            JOY_LFT         =           $04  [4/$04]
   137 000000                            JOY_RGT         =           $08  [8/$08]
   138 000000                            JOY_BUT0        =           $10  [16/$10]
   139 000000                            JOY_BUT1        =           $20  [32/$20/" "]
   140 000000                            JOY_BUT2        =           $40  [64/$40/"@"]
   141 000000;                                                                                       ;JOYA_UP         = $01
   142 000000;                                                                                       ;JOYA_DWN        = $02
   143 000000;                                                                                       ;JOYA_LFT        = $04
   144 000000;                                                                                       ;JOYA_RGT        = $08
   145 000000;                                                                                       ;JOYA_BUT0       = $10
   146 000000;                                                                                       ;JOYA_BUT1       = $20
   147 000000;                                                                                       ;JOYA_BUT2       = $40
   148 000000;                                                                                       ;JOYB_UP         = $01
   149 000000;                                                                                       ;JOYB_DWN        = $02
   150 000000;                                                                                       ;JOYB_LFT        = $04
   151 000000;                                                                                       ;JOYB_RGT        = $08
   152 000000;                                                                                       ;JOYB_BUT0       = $10
   153 000000;                                                                                       ;JOYB_BUT1       = $20
   154 000000;                                                                                       ;JOYB_BUT2       = $40
   155 000000
   156 000000
   157 000000;                                                                                       ;Simple_UART_Jr_def.asm
   158 000000
   159 000000;                                                                                       ;UART_TRHB 	= $D630        ; Transmit/Receive Hold Buffer
   160 000000;                                                                                       ;UART_DLL 	= $D630        ; Divisor Latch Low Byte
   161 000000;                                                                                       ;UART_DLH 	= $D631        ; Divisor Latch High Byte
   162 000000;                                                                                       ;UART_IER 	= $D631        ; Interupt Enable Register
   163 000000;                                                                                       ;UART_FCR 	= $D632        ; FIFO Control Register
   164 000000;                                                                                       ;UART_IIR 	= $D632        ; Interupt Indentification Register
   165 000000;                                                                                       ;UART_LCR 	= $D633        ; Line Control Register
   166 000000;                                                                                       ;UART_MCR 	= $D634        ; Modem Control REgister
   167 000000;                                                                                       ;UART_LSR 	= $D635        ; Line Status Register
   168 000000;                                                                                       ;UART_MSR 	= $D636        ; Modem Status Register
   169 000000;                                                                                       ;UART_SR 	= $D637        ; Scratch Register
   170 000000;                                                                                       ;UINT_LOW_POWER = $20        ; Enable Low Power Mode (16750)
   171 000000;                                                                                       ;UINT_SLEEP_MODE = $10       ; Enable Sleep Mode (16750)
   172 000000;                                                                                       ;UINT_MODEM_STATUS = $08     ; Enable Modem Status Interrupt
   173 000000;                                                                                       ;UINT_LINE_STATUS = $04      ; Enable Receiver Line Status Interupt
   174 000000;                                                                                       ;UINT_THR_EMPTY = $02        ; Enable Transmit Holding Register Empty interrupt
   175 000000;                                                                                       ;UINT_DATA_AVAIL = $01       ; Enable Recieve Data Available interupt
   176 000000;                                                                                       ;IIR_FIFO_ENABLED = $80      ; FIFO is enabled
   177 000000;                                                                                       ;IIR_FIFO_NONFUNC = $40      ; FIFO is not functioning
   178 000000;                                                                                       ;IIR_FIFO_64BYTE = $20       ; 64 byte FIFO enabled (16750)
   179 000000;                                                                                       ;IIR_MODEM_STATUS = $00      ; Modem Status Interrupt
   180 000000;                                                                                       ;IIR_THR_EMPTY = $02         ; Transmit Holding Register Empty Interrupt
   181 000000;                                                                                       ;IIR_DATA_AVAIL = $04        ; Data Available Interrupt
   182 000000;                                                                                       ;IIR_LINE_STATUS = $06       ; Line Status Interrupt
   183 000000;                                                                                       ;IIR_TIMEOUT = $0C           ; Time-out Interrupt (16550 and later)
   184 000000;                                                                                       ;IIR_INTERRUPT_PENDING = $01 ; Interrupt Pending Flag
   185 000000;                                                                                       ;LCR_DLB = $80               ; Divisor Latch Access Bit
   186 000000;                                                                                       ;LCR_SBE = $60               ; Set Break Enable
   187 000000;                                                                                       ;LCR_PARITY_NONE = $00       ; Parity: None
   188 000000;                                                                                       ;LCR_PARITY_ODD = $08        ; Parity: Odd
   189 000000;                                                                                       ;LCR_PARITY_EVEN = $18       ; Parity: Even
   190 000000;                                                                                       ;LCR_PARITY_MARK = $28       ; Parity: Mark
   191 000000;                                                                                       ;LCR_PARITY_SPACE = $38      ; Parity: Space
   192 000000;                                                                                       ;LCR_STOPBIT_1 = $00         ; One Stop Bit
   193 000000;                                                                                       ;LCR_STOPBIT_2 = $04         ; 1.5 or 2 Stop Bits
   194 000000;                                                                                       ;LCR_DATABITS_5 = $00        ; Data Bits: 5
   195 000000;                                                                                       ;LCR_DATABITS_6 = $01        ; Data Bits: 6
   196 000000;                                                                                       ;LCR_DATABITS_7 = $02        ; Data Bits: 7
   197 000000;                                                                                       ;LCR_DATABITS_8 = $03        ; Data Bits: 8
   198 000000;                                                                                       ;LSR_ERR_RECIEVE = $80       ; Error in Received FIFO
   199 000000;                                                                                       ;LSR_XMIT_DONE = $40         ; All data has been transmitted
   200 000000;                                                                                       ;LSR_XMIT_EMPTY = $20        ; Empty transmit holding register
   201 000000;                                                                                       ;LSR_BREAK_INT = $10         ; Break interrupt
   202 000000;                                                                                       ;LSR_ERR_FRAME = $08         ; Framing error
   203 000000;                                                                                       ;LSR_ERR_PARITY = $04        ; Parity error
   204 000000;                                                                                       ;LSR_ERR_OVERRUN = $02       ; Overrun error
   205 000000;                                                                                       ;LSR_DATA_AVAIL = $01        ; Data is ready in the receive buffer
   206 000000
   207 000000
   208 000000;                                                                                       ;TinyVicky_Def.asm
   209 000000
   210 000000                            MASTER_CTRL_REG_L =         $D000  [53248/$D000]
   211 000000                            Mstr_Ctrl_Text_Mode_En =    $01  [1/$01]                    ; Enable the Text Mode
   212 000000                            Mstr_Ctrl_Text_Overlay =    $02  [2/$02]                    ; Enable the Overlay of the text mode on top of Graphic Mode (the Background Color is ignored)
   213 000000                            Mstr_Ctrl_Graph_Mode_En =   $04  [4/$04]                    ; Enable the Graphic Mode
   214 000000                            Mstr_Ctrl_Bitmap_En =       $08  [8/$08]                    ; Enable the Bitmap Module In Vicky
   215 000000                            Mstr_Ctrl_TileMap_En =      $10  [16/$10]                   ; Enable the Tile Module in Vicky
   216 000000                            Mstr_Ctrl_Sprite_En =       $20  [32/$20/" "]               ; Enable the Sprite Module in Vicky
   217 000000                            Mstr_Ctrl_GAMMA_En =        $40  [64/$40/"@"]               ; this Enable the GAMMA correction - The Analog and DVI have different color value, the GAMMA is great to correct the difference
   218 000000                            Mstr_Ctrl_Disable_Vid =     $80  [128/$80/"?"]              ; This will disable the Scanning of the Video hence giving 100% bandwith to the CPU
   219 000000                            MASTER_CTRL_REG_H =         $D001  [53249/$D001]
   220 000000                            Mstr_Ctrl_Video_Mode =      $01  [1/$01]                    ; 0 - 640x480@60Hz : 1 - 640x400@70hz (text mode) // 0 - 320x240@60hz : 1 - 320x200@70Hz (Graphic Mode & Text mode when Doubling = 1)
   221 000000                            Mstr_Ctrl_Text_XDouble =    $02  [2/$02]                    ; X Pixel Doubling
   222 000000                            Mstr_Ctrl_Text_YDouble =    $04  [4/$04]                    ; Y Pixel Doubling
   223 000000                            LAYER_CTRL_REG_0 =          $D002  [53250/$D002]
   224 000000                            LAYER_CTRL_REG_1 =          $D003  [53251/$D003]
   225 000000                            BORDER_CTRL_REG =           $D004  [53252/$D004]            ; Bit[0] - Enable (1 by default)  Bit[4..6]: X Scroll Offset ( Will scroll Left) (Acceptable Value: 0..7)
   226 000000                            Border_Ctrl_Enable =        $01  [1/$01]
   227 000000                            BORDER_COLOR_B  =           $D005  [53253/$D005]
   228 000000                            BORDER_COLOR_G  =           $D006  [53254/$D006]
   229 000000                            BORDER_COLOR_R  =           $D007  [53255/$D007]
   230 000000                            BORDER_X_SIZE   =           $D008  [53256/$D008]            ; X-  Values: 0 - 32 (Default: 32)
   231 000000                            BORDER_Y_SIZE   =           $D009  [53257/$D009]            ; Y- Values 0 -32 (Default: 32)
   232 000000;                                                                                       ;VKY_RESERVED_02         = $D00A
   233 000000;                                                                                       ;VKY_RESERVED_03         = $D00B
   234 000000;                                                                                       ;VKY_RESERVED_04         = $D00C
   235 000000                            BACKGROUND_COLOR_B =        $D00D  [53261/$D00D]            ; When in Graphic Mode, if a pixel is "0" then the Background pixel is chosen
   236 000000                            BACKGROUND_COLOR_G =        $D00E  [53262/$D00E]
   237 000000                            BACKGROUND_COLOR_R =        $D00F  [53263/$D00F]            ;
   238 000000                            VKY_TXT_CURSOR_CTRL_REG =   $D010  [53264/$D010]            ;[0]  Enable Text Mode
   239 000000                            Vky_Cursor_Enable =         $01  [1/$01]
   240 000000                            Vky_Cursor_Flash_Rate0 =    $02  [2/$02]
   241 000000                            Vky_Cursor_Flash_Rate1 =    $04  [4/$04]
   242 000000                            VKY_TXT_START_ADD_PTR =     $D011  [53265/$D011]            ; This is an offset to change the Starting address of the Text Mode Buffer (in x)
   243 000000                            VKY_TXT_CURSOR_CHAR_REG =   $D012  [53266/$D012]
   244 000000                            VKY_TXT_CURSOR_COLR_REG =   $D013  [53267/$D013]
   245 000000                            VKY_TXT_CURSOR_X_REG_L =    $D014  [53268/$D014]
   246 000000                            VKY_TXT_CURSOR_X_REG_H =    $D015  [53269/$D015]
   247 000000                            VKY_TXT_CURSOR_Y_REG_L =    $D016  [53270/$D016]
   248 000000                            VKY_TXT_CURSOR_Y_REG_H =    $D017  [53271/$D017]
   249 000000                            VKY_LINE_IRQ_CTRL_REG =     $D018  [53272/$D018]            ;[0] - Enable Line 0 - WRITE ONLY
   250 000000                            VKY_LINE_CMP_VALUE_LO =     $D019  [53273/$D019]            ;Write Only [7:0]
   251 000000                            VKY_LINE_CMP_VALUE_HI =     $D01A  [53274/$D01A]            ;Write Only [3:0]
   252 000000                            VKY_PIXEL_X_POS_LO =        $D018  [53272/$D018]            ; This is Where on the video line is the Pixel
   253 000000                            VKY_PIXEL_X_POS_HI =        $D019  [53273/$D019]            ; Or what pixel is being displayed when the register is read
   254 000000                            VKY_LINE_Y_POS_LO =         $D01A  [53274/$D01A]            ; This is the Line Value of the Raster
   255 000000                            VKY_LINE_Y_POS_HI =         $D01B  [53275/$D01B]            ;
   256 000000                            TyVKY_BM0_CTRL_REG =        $D100  [53504/$D100]
   257 000000                            BM0_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   258 000000                            BM0_LUT0        =           $02  [2/$02]                    ; LUT0
   259 000000                            BM0_LUT1        =           $04  [4/$04]                    ; LUT1
   260 000000                            TyVKY_BM0_START_ADDY_L =    $D101  [53505/$D101]
   261 000000                            TyVKY_BM0_START_ADDY_M =    $D102  [53506/$D102]
   262 000000                            TyVKY_BM0_START_ADDY_H =    $D103  [53507/$D103]
   263 000000                            TyVKY_BM1_CTRL_REG =        $D108  [53512/$D108]
   264 000000                            BM1_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   265 000000                            BM1_LUT0        =           $02  [2/$02]                    ; LUT0
   266 000000                            BM1_LUT1        =           $04  [4/$04]                    ; LUT1
   267 000000                            TyVKY_BM1_START_ADDY_L =    $D109  [53513/$D109]
   268 000000                            TyVKY_BM1_START_ADDY_M =    $D10A  [53514/$D10A]
   269 000000                            TyVKY_BM1_START_ADDY_H =    $D10B  [53515/$D10B]
   270 000000                            TyVKY_BM2_CTRL_REG =        $D110  [53520/$D110]
   271 000000                            BM2_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   272 000000                            BM2_LUT0        =           $02  [2/$02]                    ; LUT0
   273 000000                            BM2_LUT1        =           $04  [4/$04]                    ; LUT1
   274 000000                            BM2_LUT2        =           $08  [8/$08]                    ; LUT2
   275 000000                            TyVKY_BM2_START_ADDY_L =    $D111  [53521/$D111]
   276 000000                            TyVKY_BM2_START_ADDY_M =    $D112  [53522/$D112]
   277 000000                            TyVKY_BM2_START_ADDY_H =    $D113  [53523/$D113]
   278 000000                            TyVKY_TL_CTRL0  =           $D200  [53760/$D200]
   279 000000                            TILE_Enable     =           $01  [1/$01]
   280 000000                            TILE_LUT0       =           $02  [2/$02]
   281 000000                            TILE_LUT1       =           $04  [4/$04]
   282 000000                            TILE_LUT2       =           $08  [8/$08]
   283 000000                            TILE_SIZE       =           $10  [16/$10]                   ; 0 -> 16x16, 0 -> 8x8
   284 000000                            TL0_CONTROL_REG =           $D200  [53760/$D200]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   285 000000                            TL0_START_ADDY_L =          $D201  [53761/$D201]            ; Not USed right now - Starting Address to where is the MAP
   286 000000                            TL0_START_ADDY_M =          $D202  [53762/$D202]
   287 000000                            TL0_START_ADDY_H =          $D203  [53763/$D203]
   288 000000                            TL0_MAP_X_SIZE_L =          $D204  [53764/$D204]            ; The Size X of the Map
   289 000000                            TL0_MAP_X_SIZE_H =          $D205  [53765/$D205]
   290 000000                            TL0_MAP_Y_SIZE_L =          $D206  [53766/$D206]            ; The Size Y of the Map
   291 000000                            TL0_MAP_Y_SIZE_H =          $D207  [53767/$D207]
   292 000000                            TL0_MAP_X_POS_L =           $D208  [53768/$D208]            ; The Position X of the Map
   293 000000                            TL0_MAP_X_POS_H =           $D209  [53769/$D209]
   294 000000                            TL0_MAP_Y_POS_L =           $D20A  [53770/$D20A]            ; The Position Y of the Map
   295 000000                            TL0_MAP_Y_POS_H =           $D20B  [53771/$D20B]
   296 000000                            TL1_CONTROL_REG =           $D20C  [53772/$D20C]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   297 000000                            TL1_START_ADDY_L =          $D20D  [53773/$D20D]            ; Not USed right now - Starting Address to where is the MAP
   298 000000                            TL1_START_ADDY_M =          $D20E  [53774/$D20E]
   299 000000                            TL1_START_ADDY_H =          $D20F  [53775/$D20F]
   300 000000                            TL1_MAP_X_SIZE_L =          $D210  [53776/$D210]            ; The Size X of the Map
   301 000000                            TL1_MAP_X_SIZE_H =          $D211  [53777/$D211]
   302 000000                            TL1_MAP_Y_SIZE_L =          $D212  [53778/$D212]            ; The Size Y of the Map
   303 000000                            TL1_MAP_Y_SIZE_H =          $D213  [53779/$D213]
   304 000000                            TL1_MAP_X_POS_L =           $D214  [53780/$D214]            ; The Position X of the Map
   305 000000                            TL1_MAP_X_POS_H =           $D215  [53781/$D215]
   306 000000                            TL1_MAP_Y_POS_L =           $D216  [53782/$D216]            ; The Position Y of the Map
   307 000000                            TL1_MAP_Y_POS_H =           $D217  [53783/$D217]
   308 000000                            TL2_CONTROL_REG =           $D218  [53784/$D218]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   309 000000                            TL2_START_ADDY_L =          $D219  [53785/$D219]            ; Not USed right now - Starting Address to where is the MAP
   310 000000                            TL2_START_ADDY_M =          $D21A  [53786/$D21A]
   311 000000                            TL2_START_ADDY_H =          $D21B  [53787/$D21B]
   312 000000                            TL2_MAP_X_SIZE_L =          $D21C  [53788/$D21C]            ; The Size X of the Map
   313 000000                            TL2_MAP_X_SIZE_H =          $D21D  [53789/$D21D]
   314 000000                            TL2_MAP_Y_SIZE_L =          $D21E  [53790/$D21E]            ; The Size Y of the Map
   315 000000                            TL2_MAP_Y_SIZE_H =          $D21F  [53791/$D21F]
   316 000000                            TL2_MAP_X_POS_L =           $D220  [53792/$D220]            ; The Position X of the Map
   317 000000                            TL2_MAP_X_POS_H =           $D221  [53793/$D221]
   318 000000                            TL2_MAP_Y_POS_L =           $D222  [53794/$D222]            ; The Position Y of the Map
   319 000000                            TL2_MAP_Y_POS_H =           $D223  [53795/$D223]
   320 000000                            TILE_MAP_ADDY0_L =          $D280  [53888/$D280]
   321 000000                            TILE_MAP_ADDY0_M =          $D281  [53889/$D281]
   322 000000                            TILE_MAP_ADDY0_H =          $D282  [53890/$D282]
   323 000000                            TILE_MAP_ADDY0_CFG =        $D283  [53891/$D283]
   324 000000                            TILE_MAP_ADDY1  =           $D284  [53892/$D284]
   325 000000                            TILE_MAP_ADDY2  =           $D288  [53896/$D288]
   326 000000                            TILE_MAP_ADDY3  =           $D28C  [53900/$D28C]
   327 000000                            TILE_MAP_ADDY4  =           $D290  [53904/$D290]
   328 000000                            TILE_MAP_ADDY5  =           $D294  [53908/$D294]
   329 000000                            TILE_MAP_ADDY6  =           $D298  [53912/$D298]
   330 000000                            TILE_MAP_ADDY7  =           $D29C  [53916/$D29C]
   331 000000                            XYMATH_CTRL_REG =           $D300  [54016/$D300]            ; Reserved
   332 000000                            XYMATH_ADDY_L   =           $D301  [54017/$D301]            ; W
   333 000000                            XYMATH_ADDY_M   =           $D302  [54018/$D302]            ; W
   334 000000                            XYMATH_ADDY_H   =           $D303  [54019/$D303]            ; W
   335 000000                            XYMATH_ADDY_POSX_L =        $D304  [54020/$D304]            ; R/W
   336 000000                            XYMATH_ADDY_POSX_H =        $D305  [54021/$D305]            ; R/W
   337 000000                            XYMATH_ADDY_POSY_L =        $D306  [54022/$D306]            ; R/W
   338 000000                            XYMATH_ADDY_POSY_H =        $D307  [54023/$D307]            ; R/W
   339 000000                            XYMATH_BLOCK_OFF_L =        $D308  [54024/$D308]            ; R Only - Low Block Offset
   340 000000                            XYMATH_BLOCK_OFF_H =        $D309  [54025/$D309]            ; R Only - Hi Block Offset
   341 000000                            XYMATH_MMU_BLOCK =          $D30A  [54026/$D30A]            ; R Only - Which MMU Block
   342 000000                            XYMATH_ABS_ADDY_L =         $D30B  [54027/$D30B]            ; Low Absolute Results
   343 000000                            XYMATH_ABS_ADDY_M =         $D30C  [54028/$D30C]            ; Mid Absolute Results
   344 000000                            XYMATH_ABS_ADDY_H =         $D30D  [54029/$D30D]            ; Hi Absolute Results
   345 000000                            SPRITE_Ctrl_Enable =        $01  [1/$01]
   346 000000                            SPRITE_LUT0     =           $02  [2/$02]
   347 000000                            SPRITE_LUT1     =           $04  [4/$04]
   348 000000                            SPRITE_DEPTH0   =           $08  [8/$08]                    ; 00 = Total Front - 01 = In between L0 and L1, 10 = In between L1 and L2, 11 = Total Back
   349 000000                            SPRITE_DEPTH1   =           $10  [16/$10]
   350 000000                            SPRITE_SIZE0    =           $20  [32/$20/" "]               ; 00 = 32x32 - 01 = 24x24 - 10 = 16x16 - 11 = 8x8
   351 000000                            SPRITE_SIZE1    =           $40  [64/$40/"@"]
   352 000000                            SP0_Ctrl        =           $D900  [55552/$D900]
   353 000000                            SP0_Addy_L      =           $D901  [55553/$D901]
   354 000000                            SP0_Addy_M      =           $D902  [55554/$D902]
   355 000000                            SP0_Addy_H      =           $D903  [55555/$D903]
   356 000000                            SP0_X_L         =           $D904  [55556/$D904]
   357 000000                            SP0_X_H         =           $D905  [55557/$D905]
   358 000000                            SP0_Y_L         =           $D906  [55558/$D906]            ; In the Jr, only the L is used (200 & 240)
   359 000000                            SP0_Y_H         =           $D907  [55559/$D907]            ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   360 000000;                                                                                       ;SP1_Ctrl           = $D908
   361 000000;                                                                                       ;SP1_Addy_L         = $D909
   362 000000;                                                                                       ;SP1_Addy_M         = $D90A
   363 000000;                                                                                       ;SP1_Addy_H         = $D90B
   364 000000;                                                                                       ;SP1_X_L            = $D90C
   365 000000;                                                                                       ;SP1_X_H            = $D90D
   366 000000;                                                                                       ;SP1_Y_L            = $D90E  ; In the Jr, only the L is used (200 & 240)
   367 000000;                                                                                       ;SP1_Y_H            = $D90F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   368 000000;                                                                                       ;SP2_Ctrl           = $D910
   369 000000;                                                                                       ;SP2_Addy_L         = $D911
   370 000000;                                                                                       ;SP2_Addy_M         = $D912
   371 000000;                                                                                       ;SP2_Addy_H         = $D913
   372 000000;                                                                                       ;SP2_X_L            = $D914
   373 000000;                                                                                       ;SP2_X_H            = $D915
   374 000000;                                                                                       ;SP2_Y_L            = $D916  ; In the Jr, only the L is used (200 & 240)
   375 000000;                                                                                       ;SP2_Y_H            = $D917  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   376 000000;                                                                                       ;SP3_Ctrl           = $D918
   377 000000;                                                                                       ;SP3_Addy_L         = $D919
   378 000000;                                                                                       ;SP3_Addy_M         = $D91A
   379 000000;                                                                                       ;SP3_Addy_H         = $D91B
   380 000000;                                                                                       ;SP3_X_L            = $D91C
   381 000000;                                                                                       ;SP3_X_H            = $D91D
   382 000000;                                                                                       ;SP3_Y_L            = $D91E  ; In the Jr, only the L is used (200 & 240)
   383 000000;                                                                                       ;SP3_Y_H            = $D91F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   384 000000;                                                                                       ;SP4_Ctrl           = $D920
   385 000000;                                                                                       ;SP4_Addy_L         = $D921
   386 000000;                                                                                       ;SP4_Addy_M         = $D922
   387 000000;                                                                                       ;SP4_Addy_H         = $D923
   388 000000;                                                                                       ;SP4_X_L            = $D924
   389 000000;                                                                                       ;SP4_X_H            = $D925
   390 000000;                                                                                       ;SP4_Y_L            = $D926  ; In the Jr, only the L is used (200 & 240)
   391 000000;                                                                                       ;SP4_Y_H            = $D927  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   392 000000                            TyVKY_LUT0      =           $D000  [53248/$D000]            ; IO Page 1 -$D000 - $D3FF
   393 000000                            TyVKY_LUT1      =           $D400  [54272/$D400]            ; IO Page 1 -$D400 - $D7FF
   394 000000                            TyVKY_LUT2      =           $D800  [55296/$D800]            ; IO Page 1 -$D800 - $DBFF
   395 000000                            TyVKY_LUT3      =           $DC00  [56320/$DC00]            ; IO Page 1 -$DC00 - $DFFF
   396 000000
   397 000000
   398 000000
   399 000000                            DMA_CTRL_REG    =           $DF00  [57088/$DF00]
   400 000000                            DMA_CTRL_Enable =           $01  [1/$01]
   401 000000                            DMA_CTRL_1D_2D  =           $02  [2/$02]
   402 000000                            DMA_CTRL_Fill   =           $04  [4/$04]
   403 000000                            DMA_CTRL_Int_En =           $08  [8/$08]
   404 000000;                                                                                       ;DMA_CTRL_NotUsed0   = $10
   405 000000;                                                                                       ;DMA_CTRL_NotUsed1   = $20
   406 000000;                                                                                       ;DMA_CTRL_NotUsed2   = $40
   407 000000                            DMA_CTRL_Start_Trf =        $80  [128/$80/"?"]
   408 000000                            DMA_DATA_2_WRITE =          $DF01  [57089/$DF01]            ; Write Only
   409 000000                            DMA_STATUS_REG  =           $DF01  [57089/$DF01]            ; Read Only
   410 000000                            DMA_STATUS_TRF_IP =         $80  [128/$80/"?"]              ; Transfer in Progress
   411 000000;                                                                                       ;DMA_RESERVED_0      = $DF02
   412 000000;                                                                                       ;DMA_RESERVED_1      = $DF03
   413 000000                            DMA_SOURCE_ADDY_L =         $DF04  [57092/$DF04]
   414 000000                            DMA_SOURCE_ADDY_M =         $DF05  [57093/$DF05]
   415 000000                            DMA_SOURCE_ADDY_H =         $DF06  [57094/$DF06]
   416 000000;                                                                                       ;DMA_RESERVED_2      = $DF07
   417 000000                            DMA_DEST_ADDY_L =           $DF08  [57096/$DF08]
   418 000000                            DMA_DEST_ADDY_M =           $DF09  [57097/$DF09]
   419 000000                            DMA_DEST_ADDY_H =           $DF0A  [57098/$DF0A]
   420 000000;                                                                                       ;DMA_RESERVED_3      = $DF0B
   421 000000                            DMA_SIZE_1D_L   =           $DF0C  [57100/$DF0C]
   422 000000                            DMA_SIZE_1D_M   =           $DF0D  [57101/$DF0D]
   423 000000                            DMA_SIZE_1D_H   =           $DF0E  [57102/$DF0E]
   424 000000;                                                                                       ;DMA_RESERVED_4      = $DF0F
   425 000000                            DMA_SIZE_X_L    =           $DF0C  [57100/$DF0C]
   426 000000                            DMA_SIZE_X_H    =           $DF0D  [57101/$DF0D]
   427 000000                            DMA_SIZE_Y_L    =           $DF0E  [57102/$DF0E]
   428 000000                            DMA_SIZE_Y_H    =           $DF0F  [57103/$DF0F]
   429 000000                            DMA_SRC_STRIDE_X_L =        $DF10  [57104/$DF10]
   430 000000                            DMA_SRC_STRIDE_X_H =        $DF11  [57105/$DF11]
   431 000000                            DMA_DST_STRIDE_Y_L =        $DF12  [57106/$DF12]
   432 000000                            DMA_DST_STRIDE_Y_H =        $DF13  [57107/$DF13]
   433 000000;                                                                                       ;DMA_RESERVED_5      = $DF14
   434 000000;                                                                                       ;DMA_RESERVED_6      = $DF15
   435 000000;                                                                                       ;DMA_RESERVED_7      = $DF16
   436 000000;                                                                                       ;DMA_RESERVED_8      = $DF17
   437 000000
   438 000000
   439 000000;                                                                                       ;C256_Jr_SID_def.asm
   440 000000
   441 000000                            SID_L_V1_FREQ_LO =          $D400  [54272/$D400]            ;SID - L - Voice 1 (Write Only) - FREQ LOW
   442 000000                            SID_L_V1_FREQ_HI =          $D401  [54273/$D401]            ;SID - L - Voice 1 (Write Only) - FREQ HI
   443 000000                            SID_L_V1_PW_LO  =           $D402  [54274/$D402]            ;SID - L - Voice 1 (Write Only) - PW LOW
   444 000000                            SID_L_V1_PW_HI  =           $D403  [54275/$D403]            ;SID - L - Voice 1 (Write Only) - PW HI
   445 000000                            SID_L_V1_CTRL   =           $D404  [54276/$D404]            ;SID - L - Voice 1 (Write Only) - CTRL REG
   446 000000                            SID_L_V1_ATCK_DECY =        $D405  [54277/$D405]            ;SID - L - Voice 1 (Write Only) - ATTACK / DECAY
   447 000000                            SID_L_V1_SSTN_RLSE =        $D406  [54278/$D406]            ;SID - L - Voice 1 (Write Only) - SUSTAIN / RELEASE
   448 000000                            SID_L_V2_FREQ_LO =          $D407  [54279/$D407]            ;SID - L - Voice 2 (Write Only) - FREQ LOW
   449 000000                            SID_L_V2_FREQ_HI =          $D408  [54280/$D408]            ;SID - L - Voice 2 (Write Only) - FREQ HI
   450 000000                            SID_L_V2_PW_LO  =           $D409  [54281/$D409]            ;SID - L - Voice 2 (Write Only) - PW LOW
   451 000000                            SID_L_V2_PW_HI  =           $D40A  [54282/$D40A]            ;SID - L - Voice 2 (Write Only) - PW HI
   452 000000                            SID_L_V2_CTRL   =           $D40B  [54283/$D40B]            ;SID - L - Voice 2 (Write Only) - CTRL REG
   453 000000                            SID_L_V2_ATCK_DECY =        $D40C  [54284/$D40C]            ;SID - L - Voice 2 (Write Only) - ATTACK / DECAY
   454 000000                            SID_L_V2_SSTN_RLSE =        $D40D  [54285/$D40D]            ;SID - L - Voice 2 (Write Only) - SUSTAIN / RELEASE
   455 000000                            SID_L_V3_FREQ_LO =          $D40E  [54286/$D40E]            ;SID - L - Voice 3 (Write Only) - FREQ LOW
   456 000000                            SID_L_V3_FREQ_HI =          $D40F  [54287/$D40F]            ;SID - L - Voice 3 (Write Only) - FREQ HI
   457 000000                            SID_L_V3_PW_LO  =           $D410  [54288/$D410]            ;SID - L - Voice 3 (Write Only) - PW LOW
   458 000000                            SID_L_V3_PW_HI  =           $D411  [54289/$D411]            ;SID - L - Voice 3 (Write Only) - PW HI
   459 000000                            SID_L_V3_CTRL   =           $D412  [54290/$D412]            ;SID - L - Voice 3 (Write Only) - CTRL REG
   460 000000                            SID_L_V3_ATCK_DECY =        $D413  [54291/$D413]            ;SID - L - Voice 3 (Write Only) - ATTACK / DECAY
   461 000000                            SID_L_V3_SSTN_RLSE =        $D414  [54292/$D414]            ;SID - L - Voice 3 (Write Only) - SUSTAIN / RELEASE
   462 000000                            SID_L_FC_LO     =           $D415  [54293/$D415]            ;SID - L - Filter (Write Only) - FC LOW
   463 000000                            SID_L_FC_HI     =           $D416  [54294/$D416]            ;SID - L - Filter (Write Only) - FC HI
   464 000000                            SID_L_RES_FILT  =           $D417  [54295/$D417]            ;SID - L - Filter (Write Only) - RES / FILT
   465 000000                            SID_L_MODE_VOL  =           $D418  [54296/$D418]            ;SID - L - Filter (Write Only) - MODE / VOL
   466 000000                            SID_L_POT_X     =           $D419  [54297/$D419]            ;SID - L - Misc (Read Only) - POT X (C256 - NOT USED)
   467 000000                            SID_L_POT_Y     =           $D41A  [54298/$D41A]            ;SID - L - Misc (Read Only) - POT Y (C256 - NOT USED)
   468 000000                            SID_L_OSC3_RND  =           $D41B  [54299/$D41B]            ;SID - L - Misc (Read Only) - OSC3 / RANDOM
   469 000000                            SID_L_ENV3      =           $D41C  [54300/$D41C]            ;SID - L - Misc (Read Only)  - ENV3
   470 000000;                                                                                       ;SID_L_NOT_USED0     = $D41D ;SID - L - NOT USED
   471 000000;                                                                                       ;SID_L_NOT_USED1     = $D41E ;SID - L - NOT USED
   472 000000;                                                                                       ;SID_L_NOT_USED2     = $D41F ;SID - L - NOT USED
   473 000000                            SID_R_V1_FREQ_LO =          $D500  [54528/$D500]            ;SID - R - Voice 1 (Write Only) - FREQ LOW
   474 000000                            SID_R_V1_FREQ_HI =          $D501  [54529/$D501]            ;SID - R - Voice 1 (Write Only) - FREQ HI
   475 000000                            SID_R_V1_PW_LO  =           $D502  [54530/$D502]            ;SID - R - Voice 1 (Write Only) - PW LOW
   476 000000                            SID_R_V1_PW_HI  =           $D503  [54531/$D503]            ;SID - R - Voice 1 (Write Only) - PW HI
   477 000000                            SID_R_V1_CTRL   =           $D504  [54532/$D504]            ;SID - R - Voice 1 (Write Only) - CTRL REG
   478 000000                            SID_R_V1_ATCK_DECY =        $D505  [54533/$D505]            ;SID - R - Voice 1 (Write Only) - ATTACK / DECAY
   479 000000                            SID_R_V1_SSTN_RLSE =        $D506  [54534/$D506]            ;SID - R - Voice 1 (Write Only) - SUSTAIN / RELEASE
   480 000000                            SID_R_V2_FREQ_LO =          $D507  [54535/$D507]            ;SID - R - Voice 2 (Write Only) - FREQ LOW
   481 000000                            SID_R_V2_FREQ_HI =          $D508  [54536/$D508]            ;SID - R - Voice 2 (Write Only) - FREQ HI
   482 000000                            SID_R_V2_PW_LO  =           $D509  [54537/$D509]            ;SID - R - Voice 2 (Write Only) - PW LOW
   483 000000                            SID_R_V2_PW_HI  =           $D50A  [54538/$D50A]            ;SID - R - Voice 2 (Write Only) - PW HI
   484 000000                            SID_R_V2_CTRL   =           $D50B  [54539/$D50B]            ;SID - R - Voice 2 (Write Only) - CTRL REG
   485 000000                            SID_R_V2_ATCK_DECY =        $D50C  [54540/$D50C]            ;SID - R - Voice 2 (Write Only) - ATTACK / DECAY
   486 000000                            SID_R_V2_SSTN_RLSE =        $D50D  [54541/$D50D]            ;SID - R - Voice 2 (Write Only) - SUSTAIN / RELEASE
   487 000000                            SID_R_V3_FREQ_LO =          $D50E  [54542/$D50E]            ;SID - R - Voice 3 (Write Only) - FREQ LOW
   488 000000                            SID_R_V3_FREQ_HI =          $D50F  [54543/$D50F]            ;SID - R - Voice 3 (Write Only) - FREQ HI
   489 000000                            SID_R_V3_PW_LO  =           $D510  [54544/$D510]            ;SID - R - Voice 3 (Write Only) - PW LOW
   490 000000                            SID_R_V3_PW_HI  =           $D511  [54545/$D511]            ;SID - R - Voice 3 (Write Only) - PW HI
   491 000000                            SID_R_V3_CTRL   =           $D512  [54546/$D512]            ;SID - R - Voice 3 (Write Only) - CTRL REG
   492 000000                            SID_R_V3_ATCK_DECY =        $D513  [54547/$D513]            ;SID - R - Voice 3 (Write Only) - ATTACK / DECAY
   493 000000                            SID_R_V3_SSTN_RLSE =        $D514  [54548/$D514]            ;SID - R - Voice 3 (Write Only) - SUSTAIN / RELEASE
   494 000000                            SID_R_FC_LO     =           $D515  [54549/$D515]            ;SID - R - Filter (Write Only) - FC LOW
   495 000000                            SID_R_FC_HI     =           $D516  [54550/$D516]            ;SID - R - Filter (Write Only) - FC HI
   496 000000                            SID_R_RES_FILT  =           $D517  [54551/$D517]            ;SID - R - Filter (Write Only) - RES / FILT
   497 000000                            SID_R_MODE_VOL  =           $D518  [54552/$D518]            ;SID - R - Filter (Write Only) - MODE / VOL
   498 000000                            SID_R_POT_X     =           $D519  [54553/$D519]            ;SID - R - Misc (Read Only) - POT X (C256 - NOT USED)
   499 000000                            SID_R_POT_Y     =           $D51A  [54554/$D51A]            ;SID - R - Misc (Read Only) - POT Y (C256 - NOT USED)
   500 000000                            SID_R_OSC3_RND  =           $D51B  [54555/$D51B]            ;SID - R - Misc (Read Only) - OSC3 / RANDOM
   501 000000                            SID_R_ENV3      =           $D51C  [54556/$D51C]            ;SID - R - Misc (Read Only)  - ENV3
   502 000000;                                                                                       ;SID_R_NOT_USED0     = $D51D ;SID - R - NOT USED
   503 000000;                                                                                       ;SID_R_NOT_USED1     = $D51E ;SID - R - NOT USED
   504 000000;                                                                                       ;SID_R_NOT_USED2     = $D51F ;SID - R - NOT USED
   505 000000
   506 000000                            PSG_INT_L_PORT  =           $D600  [54784/$D600]            ; Control register for the SN76489
   507 000000                            PSG_INT_R_PORT  =           $D610  [54800/$D610]            ; Control register for the SN76489
   508 000000
   509 000000
   510 000000                            VECTORS_BEGIN   =           $FFFA  [65530/$FFFA]            ;0 Byte  Interrupt vectors
   511 000000                            VECTOR_NMI      =           $FFFA  [65530/$FFFA]            ;2 Bytes Emulation mode interrupt handler
   512 000000                            VECTOR_RESET    =           $FFFC  [65532/$FFFC]            ;2 Bytes Emulation mode interrupt handler
   513 000000                            VECTOR_IRQ      =           $FFFE  [65534/$FFFE]            ;2 Bytes Emulation mode interrupt handler
   514 000000;                                                                                       ;ISR_BEGIN       = $FF00 ; Byte  Beginning of CPU vectors in Direct page
   515 000000;                                                                                       ;HRESET          = $FF00 ;16 Bytes Handle RESET asserted. Reboot computer and re-initialize the kernel.
   516 000000;                                                                                       ;HCOP            = $FF10 ;16 Bytes Handle the COP instruction. Program use; not used by OS
   517 000000;                                                                                       ;HBRK            = $FF20 ;16 Bytes Handle the BRK instruction. Returns to BASIC Ready prompt.
   518 000000;                                                                                       ;HABORT          = $FF30 ;16 Bytes Handle ABORT asserted. Return to Ready prompt with an error message.
   519 000000;                                                                                       ;HNMI            = $FF40 ;32 Bytes Handle NMI
   520 000000;                                                                                       ;HIRQ            = $FF60 ;32 Bytes Handle IRQ
   521 000000
   522 000000
   523 000000
   524 000000                            KEYBOARD_SC_TMP =           $20  [32/$20/" "]
   525 000000                            KBD_MSE_CTRL_REG =          $D640  [54848/$D640]
   526 000000                            KBD_Write_Strobe =          $02  [2/$02]
   527 000000                            MS_Write_Strobe =           $08  [8/$08]
   528 000000                            KBD_FIFO_CLEAR  =           $10  [16/$10]                   ; Dump entire FIFO, set to 1 and then back to 0
   529 000000                            MSE_FIFO_CLEAR  =           $20  [32/$20/" "]               ; Dump entire FIFO, set to 1 and then back to 0
   530 000000                            KBD_MS_WR_DATA_REG =        $D641  [54849/$D641]            ; Data to Send to Keyboard or Mouse
   531 000000                            KBD_RD_SCAN_REG =           $D642  [54850/$D642]            ; DATA Out from KBD FIFO
   532 000000                            MS_RD_SCAN_REG  =           $D643  [54851/$D643]            ; DATA Out from MSE FIFO
   533 000000                            KBD_MS_RD_STATUS =          $D644  [54852/$D644]            ; Keyboard RD/WR Status
   534 000000                            KBD_FIFO_Empty  =           $01  [1/$01]                    ; Set when Keyboard FIFO is empty
   535 000000                            MSE_FIFO_Empty  =           $02  [2/$02]                    ; Set when Mouse FIFO is empty
   536 000000                            MS_Stat_Tx_Error_No_Ack =   $10  [16/$10]
   537 000000                            MS_Stat_Tx_Ack  =           $20  [32/$20/" "]               ; When 1, it ack the Tx
   538 000000                            KBD_Stat_Tx_Error_No_Ack =  $40  [64/$40/"@"]
   539 000000                            KBD_Stat_Tx_Ack =           $80  [128/$80/"?"]              ; When 1, it ack the Tx
   540 000000                            KBD_MSE_NOT_USED =          $D645  [54853/$D645]            ;       ; Reads as 0
   541 000000                            KBD_FIFO_BYTE_CNT =         $D646  [54854/$D646]            ; Number of Bytes in the Keyboard FIFO
   542 000000                            MSE_FIFO_BYTE_CNT =         $D647  [54855/$D647]            ; Number of Bytes in the Mouse FIFO
   543 000000
   544 000000
   545 000000
   546 000000                            TEXT_LUT_FG     =           $D800  [55296/$D800]
   547 000000                            TEXT_LUT_BG     =           $D840  [55360/$D840]
   548 000000                            FONT_MEM        =           $C000  [49152/$C000]            ; IO Page 1
   549 000000                            TEXT_MEM        =           $C000  [49152/$C000]            ; IO Page 2
   550 000000                            COLOR_MEM       =           $C000  [49152/$C000]            ; IO Page 3
   551 000000                            DIPSWITCH       =           $D670  [54896/$D670]
   552 000000                            CODEC_LOW       =           $D620  [54816/$D620]
   553 000000                            CODEC_HI        =           $D621  [54817/$D621]
   554 000000                            CODEC_CTRL      =           $D622  [54818/$D622]
   555 000000
   556 000000                            RNG_DAT_LO      =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   557 000000                            RNG_DAT_HI      =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   558 000000                            RNG_SEED_LO     =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   559 000000                            RNG_SEED_HI     =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   560 000000                            RNG_CTRL        =           $D6A6  [54950/$D6A6]
   561 000000                            RNG_SEED_LD     =           $02  [2/$02]
   562 000000                            RNG_ENABLE      =           $01  [1/$01]
   563 000000                            RNG_STAT        =           $D6A6  [54950/$D6A6]
   564 000000                            RNG_LFSR_DONE   =           $80  [128/$80/"?"]              ; ???indicates that Output = SEED Database
   565 000000
   566 000000                            FOENIX_MACHINE_ID =         $D6A7  [54951/$D6A7]
   567 000000
   568 000000
   569 000000
   570 000000;                                                                                       ; tilemap base = $d200
   571 000000                            TVKY_TILEMAP    =           $D200  [53760/$D200]
   572 000000                                            struct      TILEMAP_TYPE(actrl,aaddr,axsize,aysize,axpos,aypos)
   587 000000
   588 000000;                                                                                       ; bitmap base = $d100
   589 000000                            TVKY_BITMAP     =           $D100  [53504/$D100]
   590 000000                                            struct      BITMAP_TYPE(actrl,aaddr)
   597 000000
   598 000000;                                                                                       ; tileset base = $d280
   599 000000                            TVKY_TILESET    =           $D280  [53888/$D280]
   600 000000                                            struct      TILESET_TYPE(aaddr,aconfig)
   607 000000
   608 000000;                                                                                       ; sprite base = $d900
   609 000000                            TVKY_SPRITE     =           $D900  [55552/$D900]
   610 000000                                            struct      SPRITE_TYPE(actrl,aaddr,axpos,aypos)
   621 000000
   622 000000;                                                                                       ; left sid base = $d400
   623 000000                            SID_LEFT        =           $D400  [54272/$D400]
   624 000000;                                                                                       ; right sid base = $d500
   625 000000                            SID_RIGHT       =           $D500  [54528/$D500]
   626 000000
   627 000000                                            include     'f256jrlib.asm'
including source file 'f256jrlib.asm'
   628 000000                                            const       w6522s=0  [0/$00]
   629 000000                                            var         dopush=0  [0/$00]
   630 000000
   631 000000                                            const       FOENIXMODELS = enum( C256FMX, C256U, F256JR, A2560DEV, GENX, C256UP, RES1, RES2, A2560X, A2560U, A2560M, A2560K)  [12/$0C items]
   632 000000                                            const       FNX_SCREEN_WIDTH = 320 , FNX_SCREEN_HEIGHT = 240 , FNX_BORDER_WIDTH = 0 , FNX_BORDER_HEIGHT = 0 , FNX_SCREEN_COLUMNS = (FNX_SCREEN_WIDTH-FNX_BORDER_WIDTH) / 8 , FNX_SCREEN_LINES = (FNX_SCREEN_HEIGHT-FNX_BORDER_HEIGHT) / 8  [320/$0140,240/$F0/"d",0/$00,0/$00,40/$28/"(",30/$1E]
   633 000000
   634 000000                            VKY_SCREEN_MEMORY =         $C000  [49152/$C000]            ; character memory in io page 2, color memory in io page 3
   635 000000                            VKY_FONT_MEMORY =           $C000  [49152/$C000]            ; address of screen font memory in io page 1
   636 000000                            VKY_TEXT_MEMORY =           $C000  [49152/$C000]            ; address of screen text memory in io page 2
   637 000000                            VKY_COLOR_MEMORY =          $C000  [49152/$C000]            ; address of screen color memory in io page 3
   638 000000
   639 000000                                            define      jeq(aaddr) 'beq ~pcnext2 : jmp aaddr'
   640 000000                                            define      jne(aaddr) 'bne ~pcnext2 : jmp aaddr'
   641 000000                                            define      jlt(aaddr) 'blt ~pcnext2 : jmp aaddr'
   642 000000                                            define      jge(aaddr) 'bge ~pcnext2 : jmp aaddr'
   643 000000                                            define      jcc(aaddr) 'bcc ~pcnext2 : jmp aaddr'
   644 000000                                            define      jcs(aaddr) 'bcs ~pcnext2 : jmp aaddr'
   645 000000                                            define      jmi(aaddr) 'bmi ~pcnext2 : jmp aaddr'
   646 000000                                            define      jpl(aaddr) 'bpl ~pcnext2 : jmp aaddr'
   647 000000                                            define      jvc(aaddr) 'bvc ~pcnext2 : jmp aaddr'
   648 000000                                            define      jvs(aaddr) 'bvs ~pcnext2 : jmp aaddr'
   649 000000
   650 000000                                            define      DoC64COLOR(aforeground,abackground) (C64COLOR.aforeground<<4) | C64COLOR.abackground
   651 000000                                            define      PushAXY 'pha : phx : phy'
   652 000000                                            define      PullYXA 'ply : plx : pla'
   653 000000                                            define      SetMMUIO 'stz MMU_IO_CTRL'
   654 000000                                            define      SetMMUGFX 'lda #MMU_IO_PAGE_1 : sta MMU_IO_CTRL'
   655 000000                                            define      SetMMUTEXT 'lda #MMU_IO_TEXT : sta MMU_IO_CTRL'
   656 000000                                            define      SetMMUCOLOR 'lda #MMU_IO_COLOR : sta MMU_IO_CTRL'
   657 000000                                            define      PushMMUIO 'lda MMU_IO_CTRL : pha'
   658 000000                                            define      PullMMUIO 'pla : sta MMU_IO_CTRL'
   659 000000                                            define      UnlockMMU 'lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL'
   660 000000                                            define      LockMMU 'lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL'
   661 000000                                            define      SetMMUBank(abank,aaddr) 'lda #((aaddr)/$2000) : sta MMU_MEM_Bank_0+abank'
   662 000000;                                                                                       ;=====================================================================================
   663 00FFF9                                            section     add('VECTORS',$fff9,$ffff,save=1)
updated section 'VECTORS' $00FFF9-00FFFF [7]
current section: VECTORS, next free address: $00FFF9
   664 00FFF9:40                         F256_DUMMYIRQ   rti
   665 00FFFA:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; nmi
   666 00FFFC:BE E5                                      word        F256_RESET  [size=2/$02]        ; reset
   667 00FFFE:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; irq
   668 010000                                            endsection    [65535/$FFFF]
   669 010000
   670 000020                                            section     add('ZPAGE',$0020,$00ef,type='bss',save=0)
updated section 'ZPAGE' $000020-0000EF [208]
current section: ZPAGE, next free address: $000020
   671 000020:[=16/$10 bytes]            TempIRQ         resb        16
define data constant size=16, fill value 0/$00
   672 000030:[=4/$04 bytes]             TempSrc         resb        4
define data constant size=4, fill value 0/$00
   673 000034:[=4/$04 bytes]             TempDest        resb        4
define data constant size=4, fill value 0/$00
   674 000038:[=16/$10 bytes]            TempZ           resb        16
define data constant size=16, fill value 0/$00
   675 000048:[=1/$01 bytes]             CursorColor     resb        1
define data constant size=1, fill value 0/$00
   676 000049:[=1/$01 bytes]             CursorColumn    resb        1
define data constant size=1, fill value 0/$00
   677 00004A:[=1/$01 bytes]             CursorLine      resb        1
define data constant size=1, fill value 0/$00
   678 00004B:[=2/$02 bytes]             CursorPointer   resw        1
define data constant size=1, fill value 0/$00
   679 00004D
   680 00004D:[=4/$04 bytes]             SOFCounter      resd        1
define data constant size=1, fill value 0/$00
   681 000051                                            endsection    [239/$EF/""]
   682 000051
   683 000200                                            section     add('DATA',$0200,$1fff,size=-1,save=1,file='wkdata.000200.bin')
updated section 'DATA' $000200-001FFF [-1]
current section: DATA, next free address: $000200
   684 000200                                            endsection    [511/$01FF]
   685 000200
   686 000200;                                                                                       ;section add('TEXT',___MAIN_SECTION_NEXT_FREE___,$fff8,size=-1,save=1)
   687 000200;                                                                                       ;endsection
   688 000200
   689 00E000                                            section     add('F256JRLIB',$e000,$fff8,size=-1,save=1,file='wkf256.00e000.bin')
updated section 'F256JRLIB' $00E000-00FFF8 [-1]
current section: F256JRLIB, next free address: $00E000
   690 00E000;                                                                                       ;=====================================================================================
   691 00E000
   692 00E000                                            macro       ConvertParamToA('aparam')
   706 00E000
   707 00E000                                            macro       ConvertParamToX('aparam')
   724 00E000
   725 00E000                                            macro       AssignWord('aaddr',adest)
   733 00E000
   734 00E000                                            macro       AssignLong('aaddr',adest)
   744 00E000
   745 00E000                                            macro       AssignDWord('aaddr',adest)
   757 00E000
   758 00E000                                            macro       SetMMUBlock(acontrol)
   765 00E000
   766 00E000                                            macro       SetCursorColor(acolor)
   769 00E000
   770 00E000;                                                                                       ; hard coded for 80 columns
   771 00E000                                            macro       SetCursorPointer('acolumn','aline')
   785 00E000
   786 00E000                                            macro       Increase_SOF_Counter
   797 00E000
   798 00E000                                            proc        ChrOut
open scope ChrOut, from scope  <<global symbols>>
   799 00E000:48                                         pha
   800 00E001:5A                                         phy
   801 00E002:A8                                         tay
   802 00E003:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   803 00E005:48                                         pha                                         ;<<<="PushMMUIO"
   804 00E006:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   805 00E008:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   806 00E00A:98                                         tya
   807 00E00B:A4 49                                      ldy         CursorColumn  [73/$49/"I"]
   808 00E00D:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   809 00E00F:E6 01                                      inc         MMU_IO_CTRL  [1/$01]
   810 00E011:A5 48                                      lda         CursorColor  [72/$48/"H"]
   811 00E013:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   812 00E015:C8                                         iny
   813 00E016:C0 28                                      cpy         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   814 00E018:D0 1E                                      bne         +  [57400/$E038]
   815 00E01A:18                                         clc
   816 00E01B:A5 4B                                      lda         CursorPointer  [75/$4B/"K"]
   817 00E01D:69 28                                      adc         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   818 00E01F:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   819 00E021:90 02                                      bcc         ~pcnext2  [57381/$E025]
   820 00E023:E6 4C                                      inc         CursorPointer+1  [76/$4C/"L"]
   821 00E025:A5 4A                                      lda         CursorLine  [74/$4A/"J"]
   822 00E027:1A                                         inc
   823 00E028:C9 1E                                      cmp         #FNX_SCREEN_LINES  [30/$1E]
   824 00E02A:D0 08                                      bne         ++  [57396/$E034]
   825 00E02C:A9 C0                                      lda         #>VKY_TEXT_MEMORY  [192/$C0/"A"]
   826 00E02E:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   827 00E030:A9 00                                      lda         #<VKY_TEXT_MEMORY  [0/$00]      ; always equals 0
   828 00E032:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   829 00E034                            ++
   830 00E034:85 4A                                      sta         CursorLine  [74/$4A/"J"]
   831 00E036:A0 00                                      ldy         #0  [0/$00]
   832 00E038                            +
   833 00E038:84 49                                      sty         CursorColumn  [73/$49/"I"]
   834 00E03A:68                                         pla
   835 00E03B:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   836 00E03D:7A                                         ply
   837 00E03E:68                                         pla
   838 00E03F:60                                         rts
   839 00E040                                            endproc
end scope ChrOut, restore scope  <<global symbols>>
   840 00E040
   841 00E040                                            proc        ClearScreen
open scope ClearScreen, from scope  <<global symbols>>
   842 00E040:48                                         pha
   843 00E041:DA                                         phx
   844 00E042:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   845 00E044:48                                         pha                                         ;<<<="PushMMUIO"
   846 00E045
   847 00E045:9C 73 E0                                   stz         WriteAddress  [57459/$E073]     ;lda #<TEXT_MEM
   848 00E048:64 4B                                      stz         CursorPointer  [75/$4B/"K"]     ;sta CursorPointer
   849 00E04A:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   850 00E04C:8D 74 E0                                   sta         WriteAddress+1  [57460/$E074]
   851 00E04F:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   852 00E051:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   853 00E053:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   854 00E055:A2 20                                      ldx         #' '  [32/$20/" "]
   855 00E057:20 71 E0                                   jsr         WriteLoop  [57457/$E071]
   856 00E05A:9C 73 E0                                   stz         WriteAddress  [57459/$E073]     ;lda #<TEXT_MEM
   857 00E05D:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   858 00E05F:8D 74 E0                                   sta         WriteAddress+1  [57460/$E074]
   859 00E062:A9 03                                      lda         #MMU_IO_COLOR  [3/$03]
   860 00E064:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUCOLOR"
   861 00E066:A6 48                                      ldx         CursorColor  [72/$48/"H"]
   862 00E068:20 71 E0                                   jsr         WriteLoop  [57457/$E071]
   863 00E06B
   864 00E06B:68                                         pla
   865 00E06C:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   866 00E06E:FA                                         plx
   867 00E06F:68                                         pla
   868 00E070:60                                         rts
   869 00E071
   870 00E071                            WriteLoop
   871 00E071:8A                                         txa
   872 00E072                            WriteAddress    =           *+1  [57459/$E073]
   873 00E072:8D 34 12                                   sta         $1234  [4660/$1234]
   874 00E075:EE 73 E0                                   inc         WriteAddress  [57459/$E073]
   875 00E078:D0 03                                      bne         +  [57469/$E07D]
   876 00E07A:EE 74 E0                                   inc         WriteAddress+1  [57460/$E074]
   877 00E07D                            +
   878 00E07D:AD 73 E0                                   lda         WriteAddress  [57459/$E073]
   879 00E080:C9 C0                                      cmp         #<(TEXT_MEM+80*60)  [192/$C0/"A"]
   880 00E082:D0 ED                                      bne         WriteLoop  [57457/$E071]
   881 00E084:AD 74 E0                                   lda         WriteAddress+1  [57460/$E074]
   882 00E087:C9 D2                                      cmp         #>(TEXT_MEM+80*60)  [210/$D2/"O"]
   883 00E089:D0 E6                                      bne         WriteLoop  [57457/$E071]
   884 00E08B:60                                         rts
   885 00E08C                                            endproc
end scope ClearScreen, restore scope  <<global symbols>>
   886 00E08C
   887 00E08C;                                                                                       ; parameters:
   888 00E08C;                                                                                       ;	<TempSrc>	=	word address of string to print
   889 00E08C;                                                                                       ;	<CursorPointer>	=	word address of screen character/color memory
   890 00E08C                                            proc        PrintAnsiString
open scope PrintAnsiString, from scope  <<global symbols>>
   891 00E08C;                                                                                       ;	pha : phx : phy ;<<<=";	PushAXY"
   892 00E08C
   893 00E08C:A0 00                                      ldy         #0  [0/$00]
   894 00E08E:80 0C                                      bra         Print20  [57500/$E09C]
   895 00E090                            Print10
   896 00E090:C9 1B                                      cmp         #27  [27/$1B]
   897 00E092:90 0D                                      blt         CheckControlCodes  [57505/$E0A1]
   898 00E094:20 00 E0                                   jsr         ChrOut  [57344/$E000]
   899 00E097                            NextByte
   900 00E097:C8                                         iny
   901 00E098:D0 02                                      bne         Print20  [57500/$E09C]
   902 00E09A:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   903 00E09C                            Print20
   904 00E09C:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   905 00E09E:D0 F0                                      bne         Print10  [57488/$E090]
   906 00E0A0;                                                                                       ;	ply : plx : pla ;<<<=";	PullYXA"
   907 00E0A0:60                                         rts
   908 00E0A1
   909 00E0A1                            CheckControlCodes
   910 00E0A1:C9 02                                      cmp         #2  [2/$02]                     ; ctrl-b/set cursor background color
   911 00E0A3:D0 0F                                      bne         +  [57524/$E0B4]
   912 00E0A5:A5 48                                      lda         CursorColor  [72/$48/"H"]
   913 00E0A7:29 F0                                      and         #$f0  [240/$F0/"d"]
   914 00E0A9:85 48                                      sta         CursorColor  [72/$48/"H"]
   915 00E0AB:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   916 00E0AE:05 48                                      ora         CursorColor  [72/$48/"H"]
   917 00E0B0:85 48                                      sta         CursorColor  [72/$48/"H"]
   918 00E0B2:80 E3                                      bra         NextByte  [57495/$E097]
   919 00E0B4                            +
   920 00E0B4:C9 03                                      cmp         #3  [3/$03]                     ; ctrl-c/set cursor color
   921 00E0B6:D0 07                                      bne         +  [57535/$E0BF]
   922 00E0B8:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   923 00E0BB:85 48                                      sta         CursorColor  [72/$48/"H"]
   924 00E0BD:80 D8                                      bra         NextByte  [57495/$E097]
   925 00E0BF                            +
   926 00E0BF:C9 06                                      cmp         #6  [6/$06]                     ; ctrl-f/set cursor foreground color
   927 00E0C1:D0 13                                      bne         +  [57558/$E0D6]
   928 00E0C3:A5 48                                      lda         CursorColor  [72/$48/"H"]
   929 00E0C5:29 0F                                      and         #$0f  [15/$0F]
   930 00E0C7:85 48                                      sta         CursorColor  [72/$48/"H"]
   931 00E0C9:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   932 00E0CC:0A                                         asl
   933 00E0CD:0A                                         asl
   934 00E0CE:0A                                         asl
   935 00E0CF:0A                                         asl
   936 00E0D0:05 48                                      ora         CursorColor  [72/$48/"H"]
   937 00E0D2:85 48                                      sta         CursorColor  [72/$48/"H"]
   938 00E0D4:80 C1                                      bra         NextByte  [57495/$E097]
   939 00E0D6                            +
   940 00E0D6:C9 0C                                      cmp         #12  [12/$0C]                   ; ctrl-l/clear screen
   941 00E0D8:D0 05                                      bne         +  [57567/$E0DF]
   942 00E0DA:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
   943 00E0DD:80 B8                                      bra         NextByte  [57495/$E097]
   944 00E0DF                            +
   945 00E0DF:60                                         rts
   946 00E0E0:00                         temp            byte        0  [size=1/$01]
   947 00E0E1                            GetNextByte
   948 00E0E1:C8                                         iny
   949 00E0E2:D0 02                                      bne         +  [57574/$E0E6]
   950 00E0E4:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   951 00E0E6                            +
   952 00E0E6:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   953 00E0E8:60                                         rts
   954 00E0E9                                            endproc
end scope PrintAnsiString, restore scope  <<global symbols>>
   955 00E0E9
   956 00E0E9                                            macro       PrintString('astring','acolumn','aline','acolor')
   981 00E0E9
   982 00E0E9;                                                                                       ; parameters
   983 00E0E9;                                                                                       ;	A	=	byte to print
   984 00E0E9;                                                                                       ; returns
   985 00E0E9;                                                                                       ;	Y	=	upper nibble ascii
   986 00E0E9;                                                                                       ;	A	=	lower nibble ascii
   987 00E0E9 *dead code*                                proc        HexByteToASCII
ignoring unused procedure
  1005 00E0E9                                            endproc
  1006 00E0E9
  1007 00E0E9                                            macro       PrintHexByte('avalue','acolumn','aline','acolor')
  1031 00E0E9
  1032 00E0E9                                            macro       PrintHexWord('avalue','acolumn','aline','acolor')
  1063 00E0E9
  1064 00E0E9                                            macro       PrintHexDWord('avalue','acolumn','aline','acolor')
  1107 00E0E9
  1108 00E0E9;                                                                                       ; KeyboardState
  1109 00E0E9;                                                                                       ; shift
  1110 00E0E9;                                                                                       ; ctrl
  1111 00E0E9;                                                                                       ; win
  1112 00E0E9;                                                                                       ; numlk
  1113 00E0E9;                                                                                       ; capslk
  1114 00E0E9;                                                                                       ;   bit
  1115 00E0E9;                                                                                       ;	5  4  3  2  1  0
  1116 00E0E9;                                                                                       ;	|  |  |  |  |  |
  1117 00E0E9;                                                                                       ;	|  |  |  |  |  shift l/r = c0 c1
  1118 00E0E9;                                                                                       ;	|  |  |  |  ----alt l/r  = c2 c3
  1119 00E0E9;                                                                                       ;	|  |  |  ------ctrl l/r  = c4 c5
  1120 00E0E9;                                                                                       ;	|  |  ----------win l/r  = c6 c7
  1121 00E0E9;                                                                                       ;	|  ---------------numlk  = cf
  1122 00E0E9;                                                                                       ;   -----------------capslk  = ce
  1123 00E0E9;                                                                                       ;
  1124 00E0E9                                            const       KEYDOWN=$00, KEYUP=$80  [0/$00,128/$80/"?"]
  1125 00E0E9:00 00                      ScancodeBufferWPos word     0  [size=2/$02]
  1126 00E0EB:00 00                      ScancodeBufferRPos word     0  [size=2/$02]
  1127 00E0ED:00 00                      LastScancode    word        0  [size=2/$02]
  1128 00E0EF:[=128/$80 bytes]           ScancodeBuffer  resb        128,0
define data constant size=128, fill value 0/$00
  1129 00E16F:[=1/$01 bytes]             KeyboardState   resb        1,0
define data constant size=1, fill value 0/$00
  1130 00E170:[=144/$90 bytes]           KeyboardKeyStates resb      $90,KEYUP
define data constant size=144, fill value 128/$80
  1131 00E200                                            const       KEYBOARDSTATES = enum( ALLOFF =%000000, SHIFT =%000001, ALT =%000010, CTRL =%000100, WIN =%001000, NUMLK =%010000, CAPSLK =%100000)  [7/$07 items]
  1132 00E200                                            proc        Init_Keyboard
open scope Init_Keyboard, from scope  <<global symbols>>
  1133 00E200;                                                                                       ; clear keyboard & mouse fifo buffer
  1134 00E200:A9 30                                      lda         #(KBD_FIFO_CLEAR|MSE_FIFO_CLEAR)  [48/$30/"0"]
  1135 00E202:8D 40 D6                                   sta         KBD_MSE_CTRL_REG  [54848/$D640]
  1136 00E205:9C 40 D6                                   stz         KBD_MSE_CTRL_REG  [54848/$D640]
  1137 00E208
  1138 00E208:9C EB E0                                   stz         ScancodeBufferRPos  [57579/$E0EB]
  1139 00E20B:9C E9 E0                                   stz         ScancodeBufferWPos  [57577/$E0E9]
  1140 00E20E:A2 00                                      ldx         #0  [0/$00]
  1141 00E210                            -
  1142 00E210:8D EF E0                                   sta         ScancodeBuffer  [57583/$E0EF]
  1143 00E213:E8                                         inx
  1144 00E214:E0 80                                      cpx         #lobyte(sizeof(ScancodeBuffer))  [128/$80/"?"]
  1145 00E216:D0 F8                                      bne         -  [57872/$E210]
  1146 00E218
  1147 00E218:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; key released
  1148 00E21A:A2 00                                      ldx         #0  [0/$00]
  1149 00E21C                            -
  1150 00E21C:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1151 00E21F:E8                                         inx
  1152 00E220:E0 90                                      cpx         #sizeof(KeyboardKeyStates)  [144/$90/"?"]
  1153 00E222:D0 F8                                      bne         -  [57884/$E21C]
  1154 00E224
  1155 00E224:A9 00                                      lda         #KEYBOARDSTATES.ALLOFF  [0/$00]
  1156 00E226:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1157 00E229
  1158 00E229;                                                                                       ; enable keyboard interrupt
  1159 00E229:AD 6C D6                                   lda         INT_MASK_REG0  [54892/$D66C]
  1160 00E22C:09 FB                                      ora         #~(JR0_INT02_KBD)  [-5/$FFFFFFFB]
  1161 00E22E:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1162 00E231:60                                         rts
  1163 00E232                                            endproc
end scope Init_Keyboard, restore scope  <<global symbols>>
  1164 00E232
  1165 00E232                                            proc        KeyboardIRQ
open scope KeyboardIRQ, from scope  <<global symbols>>
  1166 00E232                            -
  1167 00E232:AD 44 D6                                   lda         KBD_MS_RD_STATUS  [54852/$D644]
  1168 00E235:29 01                                      and         #KBD_FIFO_Empty  [1/$01]
  1169 00E237:D0 1A                                      bne         +  [57939/$E253]
  1170 00E239:AD E9 E0                                   lda         ScancodeBufferWPos  [57577/$E0E9]
  1171 00E23C:AA                                         tax
  1172 00E23D:1A                                         inc
  1173 00E23E:29 7F                                      and         #$7f  [127/$7F/""]
  1174 00E240:CD EB E0                                   cmp         ScancodeBufferRPos  [57579/$E0EB]
  1175 00E243:F0 0B                                      beq         .BufferFull  [57936/$E250]
  1176 00E245:8D E9 E0                                   sta         ScancodeBufferWPos  [57577/$E0E9]
  1177 00E248:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code
  1178 00E24B:9D EF E0                                   sta         ScancodeBuffer,x  [57583/$E0EF]
  1179 00E24E:80 E2                                      bra         -  [57906/$E232]
  1180 00E250
  1181 00E250                            .BufferFull
  1182 00E250:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code and forget it
  1183 00E253                            +
  1184 00E253:60                                         rts
  1185 00E254                                            endproc
end scope KeyboardIRQ, restore scope  <<global symbols>>
  1186 00E254
  1187 00E254;                                                                                       ; returns:
  1188 00E254;                                                                                       ;	A	=	scan code from buffer
  1189 00E254;                                                                                       ;	<carry>	:	clear=scan code in A, set=buffer empty A equals 0
  1190 00E254                                            proc        GetScancode
open scope GetScancode, from scope  <<global symbols>>
  1191 00E254:AD EB E0                                   lda         ScancodeBufferRPos  [57579/$E0EB]
  1192 00E257:CD E9 E0                                   cmp         ScancodeBufferWPos  [57577/$E0E9]
  1193 00E25A:F0 0E                                      beq         BufferEmpty  [57962/$E26A]
  1194 00E25C:DA                                         phx
  1195 00E25D:AA                                         tax
  1196 00E25E:1A                                         inc
  1197 00E25F:29 7F                                      and         #$7f  [127/$7F/""]
  1198 00E261:8D EB E0                                   sta         ScancodeBufferRPos  [57579/$E0EB]
  1199 00E264:BD EF E0                                   lda         ScancodeBuffer,x  [57583/$E0EF]
  1200 00E267:FA                                         plx
  1201 00E268:18                                         clc
  1202 00E269:60                                         rts
  1203 00E26A                            BufferEmpty
  1204 00E26A:A9 00                                      lda         #0  [0/$00]
  1205 00E26C:38                                         sec
  1206 00E26D:60                                         rts
  1207 00E26E                                            endproc
end scope GetScancode, restore scope  <<global symbols>>
  1208 00E26E
  1209 00E26E                                            proc        GetChar
open scope GetChar, from scope  <<global symbols>>
  1210 00E26E:20 54 E2                                   jsr         GetScancode  [57940/$E254]
  1211 00E271:90 01                                      bcc         +  [57972/$E274]
  1212 00E273;                                                                                       ; buffer empty
  1213 00E273:60                                         rts
  1214 00E274                            +
  1215 00E274:C9 90                                      cmp         #$90  [144/$90/"?"]             ; scan code can only be 00-8f
  1216 00E276:90 0B                                      blt         +  [57987/$E283]
  1217 00E278:8D ED E0                                   sta         LastScancode  [57581/$E0ED]
  1218 00E27B:C9 F0                                      cmp         #$f0  [240/$F0/"d"]             ; is last scan code a break prefix, get next scan code
  1219 00E27D:F0 EF                                      beq         GetChar  [57966/$E26E]
  1220 00E27F:A9 00                                      lda         #0  [0/$00]                     ; return null for invalid scan code range
  1221 00E281:38                                         sec                                         ; set carry for empty buffer
  1222 00E282:60                                         rts
  1223 00E283                            +
  1224 00E283:DA                                         phx
  1225 00E284:AE ED E0                                   ldx         LastScancode  [57581/$E0ED]     ; get last scan code
  1226 00E287:8D ED E0                                   sta         LastScancode  [57581/$E0ED]     ; save new scan code
  1227 00E28A:E0 F0                                      cpx         #$f0  [240/$F0/"d"]
  1228 00E28C:D0 03                                      bne         KeyPressed  [58001/$E291]
  1229 00E28E:4C 19 E3                                   jmp         KeyReleased  [58137/$E319]
  1230 00E291
  1231 00E291                            KeyPressed
  1232 00E291:AA                                         tax
  1233 00E292:A9 00                                      lda         #KEYDOWN  [0/$00]               ; set state as key for DOWN
  1234 00E294:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1235 00E297:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1236 00E29A:89 21                                      bit         #(KEYBOARDSTATES.SHIFT|KEYBOARDSTATES.CAPSLK)  [33/$21/"!"]
  1237 00E29C:F0 05                                      beq         +  [58019/$E2A3]
  1238 00E29E:BD 0B E4                                   lda         SCSET21,x  [58379/$E40B]
  1239 00E2A1:80 03                                      bra         ++  [58022/$E2A6]
  1240 00E2A3                            +
  1241 00E2A3:BD 7B E3                                   lda         SCSET2,x  [58235/$E37B]
  1242 00E2A6                            ++
  1243 00E2A6:AA                                         tax
  1244 00E2A7:29 C0                                      and         #$c0  [192/$C0/"A"]
  1245 00E2A9:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1246 00E2AB:F0 03                                      beq         .SpecialKeyDown  [58032/$E2B0]
  1247 00E2AD:8A                                         txa
  1248 00E2AE:FA                                         plx
  1249 00E2AF:60                                         rts
  1250 00E2B0
  1251 00E2B0                            .SpecialKeyDown
  1252 00E2B0:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1253 00E2B2:F0 04                                      beq         .Shift  [58040/$E2B8]
  1254 00E2B4:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1255 00E2B6:D0 0A                                      bne         ++  [58050/$E2C2]
  1256 00E2B8                            .Shift
  1257 00E2B8:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1258 00E2BB:09 01                                      ora         #KEYBOARDSTATES.SHIFT  [1/$01]
  1259 00E2BD:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1260 00E2C0:80 52                                      bra         +  [58132/$E314]
  1261 00E2C2                            ++
  1262 00E2C2:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1263 00E2C4:F0 04                                      beq         .Alt  [58058/$E2CA]
  1264 00E2C6:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1265 00E2C8:D0 0A                                      bne         ++  [58068/$E2D4]
  1266 00E2CA                            .Alt
  1267 00E2CA:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1268 00E2CD:09 02                                      ora         #KEYBOARDSTATES.ALT  [2/$02]
  1269 00E2CF:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1270 00E2D2:80 40                                      bra         +  [58132/$E314]
  1271 00E2D4                            ++
  1272 00E2D4:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1273 00E2D6:F0 04                                      beq         .Ctrl  [58076/$E2DC]
  1274 00E2D8:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1275 00E2DA:D0 0A                                      bne         ++  [58086/$E2E6]
  1276 00E2DC                            .Ctrl
  1277 00E2DC:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1278 00E2DF:09 04                                      ora         #KEYBOARDSTATES.CTRL  [4/$04]
  1279 00E2E1:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1280 00E2E4:80 2E                                      bra         +  [58132/$E314]
  1281 00E2E6                            ++
  1282 00E2E6:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1283 00E2E8:F0 04                                      beq         .Win  [58094/$E2EE]
  1284 00E2EA:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1285 00E2EC:D0 0A                                      bne         ++  [58104/$E2F8]
  1286 00E2EE                            .Win
  1287 00E2EE:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1288 00E2F1:09 08                                      ora         #KEYBOARDSTATES.WIN  [8/$08]
  1289 00E2F3:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1290 00E2F6:80 1C                                      bra         +  [58132/$E314]
  1291 00E2F8                            ++
  1292 00E2F8:E0 CF                                      cpx         #$cf  [207/$CF/"I"]
  1293 00E2FA:D0 0A                                      bne         ++  [58118/$E306]
  1294 00E2FC                            .NumLk
  1295 00E2FC:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1296 00E2FF:49 10                                      eor         #KEYBOARDSTATES.NUMLK  [16/$10]
  1297 00E301:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1298 00E304:80 0E                                      bra         +  [58132/$E314]
  1299 00E306                            ++
  1300 00E306:E0 CE                                      cpx         #$ce  [206/$CE/"I"]
  1301 00E308:D0 0A                                      bne         ++  [58132/$E314]
  1302 00E30A                            .CapsLk
  1303 00E30A:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1304 00E30D:49 20                                      eor         #KEYBOARDSTATES.CAPSLK  [32/$20/" "]
  1305 00E30F:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1306 00E312:80 00                                      bra         +  [58132/$E314]
  1307 00E314                            ++
  1308 00E314                            +
  1309 00E314:A9 00                                      lda         #0  [0/$00]
  1310 00E316:38                                         sec
  1311 00E317:FA                                         plx
  1312 00E318:60                                         rts
  1313 00E319
  1314 00E319                            KeyReleased
  1315 00E319:AA                                         tax
  1316 00E31A:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; set state for key as UP
  1317 00E31C:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1318 00E31F:BD 7B E3                                   lda         SCSET2,x  [58235/$E37B]
  1319 00E322:AA                                         tax
  1320 00E323:29 C0                                      and         #$c0  [192/$C0/"A"]
  1321 00E325:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1322 00E327:F0 05                                      beq         .SpecialKeyDown  [58158/$E32E]
  1323 00E329:A9 00                                      lda         #0  [0/$00]
  1324 00E32B:38                                         sec
  1325 00E32C:FA                                         plx
  1326 00E32D:60                                         rts
  1327 00E32E
  1328 00E32E                            .SpecialKeyDown
  1329 00E32E:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1330 00E330:F0 04                                      beq         .Shift  [58166/$E336]
  1331 00E332:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1332 00E334:D0 0A                                      bne         ++  [58176/$E340]
  1333 00E336                            .Shift
  1334 00E336:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1335 00E339:29 FE                                      and         #~(KEYBOARDSTATES.SHIFT)  [-2/$FFFFFFFE]
  1336 00E33B:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1337 00E33E:80 36                                      bra         +  [58230/$E376]
  1338 00E340                            ++
  1339 00E340:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1340 00E342:F0 04                                      beq         .Alt  [58184/$E348]
  1341 00E344:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1342 00E346:D0 0A                                      bne         ++  [58194/$E352]
  1343 00E348                            .Alt
  1344 00E348:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1345 00E34B:29 FD                                      and         #~(KEYBOARDSTATES.ALT)  [-3/$FFFFFFFD]
  1346 00E34D:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1347 00E350:80 24                                      bra         +  [58230/$E376]
  1348 00E352                            ++
  1349 00E352:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1350 00E354:F0 04                                      beq         .Ctrl  [58202/$E35A]
  1351 00E356:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1352 00E358:D0 0A                                      bne         ++  [58212/$E364]
  1353 00E35A                            .Ctrl
  1354 00E35A:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1355 00E35D:29 FB                                      and         #~(KEYBOARDSTATES.CTRL)  [-5/$FFFFFFFB]
  1356 00E35F:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1357 00E362:80 12                                      bra         +  [58230/$E376]
  1358 00E364                            ++
  1359 00E364:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1360 00E366:F0 04                                      beq         .Win  [58220/$E36C]
  1361 00E368:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1362 00E36A:D0 0A                                      bne         ++  [58230/$E376]
  1363 00E36C                            .Win
  1364 00E36C:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1365 00E36F:29 F7                                      and         #~(KEYBOARDSTATES.WIN)  [-9/$FFFFFFF7]
  1366 00E371:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1367 00E374:80 00                                      bra         +  [58230/$E376]
  1368 00E376                            ++
  1369 00E376                            +
  1370 00E376:A9 00                                      lda         #0  [0/$00]
  1371 00E378:38                                         sec
  1372 00E379:FA                                         plx
  1373 00E37A:60                                         rts
  1374 00E37B
  1375 00E37B;                                                                                       ; function keys f1-f24 = ascii $8a-$a1
  1376 00E37B;                                                                                       ;
  1377 00E37B;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1378 00E37B:[=144/$90 bytes]           SCSET2          byte        $00, $92, $00, $8e, $8c, $8a, $8b, $95, $00, $93, $91, $8f, $8d, $09, '`', $00, $00, $c2, $c0, $00, $c4, 'q', '1', $00, $00, $00, 'z', 's', 'a', 'w', '2', $c6, $00, 'c', 'x', 'd', 'e', '4', '3', $c7, $00, $00, 'v', 'f', 't', 'r', '5', $00, $00, 'n', 'b', 'h', 'g', 'y', '6', $00, $00, $00, 'm', 'j', 'u', '7', '8', $00, $00, ',', 'k', 'i', 'o', '0', '9', $00, $00, '.', '/', 'l', ';', 'p', '-', $00, $00, $00, $2c, $00, '[', '=', $00, $00, $ce, $c1, $0d, ']', $00, '\', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $94, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $90, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1379 00E40B
  1380 00E40B;                                                                                       ; shift
  1381 00E40B;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1382 00E40B:[=144/$90 bytes]           SCSET21         byte        $00, $9e, $00, $9a, $98, $96, $97, $a1, $00, $9f, $9d, $9b, $99, $09, '~', $00, $00, $c2, $c0, $00, $c4, 'Q', '!', $00, $00, $00, 'Z', 'S', 'A', 'W', '@', $c6, $00, 'C', 'X', 'D', 'E', '$', '#', $c7, $00, $00, 'V', 'F', 'T', 'R', '%', $00, $00, 'N', 'B', 'H', 'G', 'Y', '^', $00, $00, $00, 'M', 'J', 'U', '&', '*', $00, $00, '<', 'K', 'I', 'O', ')', '(', $00, $00, '.', '?', 'L', ':', 'P', '_', $00, $00, $00, $2c, $00, '{', '+', $00, $00, $ce, $c1, $0d, '}', $00, '|', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $a0, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $9c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1383 00E49B                                            endproc
end scope GetChar, restore scope  <<global symbols>>
  1384 00E49B
  1385 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1386 00E49B *dead code*                                proc        WaitForDMAReset
ignoring unused procedure
  1394 00E49B                                            endproc
  1395 00E49B
  1396 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1397 00E49B                                            macro       DMA1DCopy(asource,adest,asize)
  1409 00E49B
  1410 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1411 00E49B                                            macro       DMA1DFill(adest,asize,afillbyte)
  1422 00E49B
  1423 00E49B;                                                                                       ; 8-bit
  1424 00E49B                                            macro       CopyMemTiny(asource,adest,asize)
  1434 00E49B
  1435 00E49B;                                                                                       ; 16-bit
  1436 00E49B                                            macro       CopyMemSmall(asource,adest,asize)
  1465 00E49B
  1466 00E49B                                            const       C64COLOR = enum( BLACK,WHITE,RED,CYAN, PURPLE,GREEN,BLUE,YELLOW, ORANGE,BROWN,LTRED,DKGREY, MDGREY,LTGREEN,LTBLUE,LTGREY)  [16/$10 items]
  1471 00E49B                                            proc        Init_Graphics
open scope Init_Graphics, from scope  <<global symbols>>
  1472 00E49B;                                                                                       ; clear foreground & background luts with #000000
  1473 00E49B:A2 00                                      ldx         #0  [0/$00]
  1474 00E49D:A9 00                                      lda         #0  [0/$00]
  1475 00E49F                            -
  1476 00E49F:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]
  1477 00E4A2:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]
  1478 00E4A5:E8                                         inx
  1479 00E4A6:E0 40                                      cpx         #16*4  [64/$40/"@"]
  1480 00E4A8:D0 F5                                      bne         -  [58527/$E49F]
  1481 00E4AA
  1482 00E4AA;                                                                                       ; set C64 colodore palette
  1483 00E4AA:A2 00                                      ldx         #0  [0/$00]
  1484 00E4AC                            -
  1485 00E4AC:BD 0A E5                                   lda         COLODORE_PALETTE,x  [58634/$E50A]
  1486 00E4AF:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]    ; set font foreground lut
  1487 00E4B2:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]    ; set font background lut
  1488 00E4B5:E8                                         inx
  1489 00E4B6:E0 40                                      cpx         #sizeof(COLODORE_PALETTE)  [64/$40/"@"]
  1490 00E4B8:D0 F2                                      bne         -  [58540/$E4AC]
  1491 00E4BA
  1492 00E4BA;                                                                                       ; initialize system font
  1533 00E4BA
  1534 00E4BA;                                                                                       ; initialize border
  1535 00E4BA:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; set i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO				; set i/o at $d000, use page 0=i/o registers"
  1536 00E4BC;                                                                                       ;lda #Border_Ctrl_Enable	; enable border
  1537 00E4BC:9C 04 D0                                   stz         BORDER_CTRL_REG  [53252/$D004]  ;sta BORDER_CTRL_REG
  1538 00E4BF:9C 05 D0                                   stz         BORDER_COLOR_B  [53253/$D005]   ;lda #$ff : sta BORDER_COLOR_B		; set border color to blue, #0000ff
  1539 00E4C2:9C 06 D0                                   stz         BORDER_COLOR_G  [53254/$D006]   ;lda #$00 : sta BORDER_COLOR_G
  1540 00E4C5:9C 07 D0                                   stz         BORDER_COLOR_R  [53255/$D007]   ;lda #$00 : sta BORDER_COLOR_R
  1541 00E4C8;                                                                                       ;lda #FNX_BORDER_HEIGHT	; set border to 8 pixels high and 8 pixels wide
  1542 00E4C8:9C 09 D0                                   stz         BORDER_Y_SIZE  [53257/$D009]    ;sta BORDER_Y_SIZE
  1543 00E4CB;                                                                                       ;lda #FNX_BORDER_WIDTH
  1544 00E4CB:9C 08 D0                                   stz         BORDER_X_SIZE  [53256/$D008]    ;sta BORDER_X_SIZE
  1545 00E4CE
  1546 00E4CE;                                                                                       ; initialize backgrounnd
  1547 00E4CE:9C 0D D0                                   stz         BACKGROUND_COLOR_B  [53261/$D00D] ; set background color to black, #000000
  1548 00E4D1:9C 0E D0                                   stz         BACKGROUND_COLOR_G  [53262/$D00E]
  1549 00E4D4:9C 0F D0                                   stz         BACKGROUND_COLOR_R  [53263/$D00F]
  1550 00E4D7
  1551 00E4D7;                                                                                       ; initialize Tiny Vicky registers
  1552 00E4D7:A2 00                                      ldx         #0  [0/$00]
  1553 00E4D9                            -
  1554 00E4D9:9E 00 D1                                   stz         TyVKY_BM0_CTRL_REG,x  [53504/$D100] ; bitmaps
  1555 00E4DC:9E 00 D2                                   stz         TL0_CONTROL_REG,x  [53760/$D200] ; tilemaps/tilesets
  1556 00E4DF:9E 00 D9                                   stz         SP0_Ctrl,x  [55552/$D900]       ; sprites
  1557 00E4E2:9E 00 DA                                   stz         SP0_Ctrl+$0100,x  [55808/$DA00]
  1558 00E4E5:E8                                         inx
  1559 00E4E6:D0 F1                                      bne         -  [58585/$E4D9]
  1560 00E4E8
  1561 00E4E8;                                                                                       ; initialize cursor
  1562 00E4E8:9C 10 D0                                   stz         VKY_TXT_CURSOR_CTRL_REG  [53264/$D010] ; disable cursor
  1563 00E4EB:9C 12 D0                                   stz         VKY_TXT_CURSOR_CHAR_REG  [53266/$D012] ; set cursor character as font tile 0
  1564 00E4EE
  1565 00E4EE:9C 14 D0                                   stz         VKY_TXT_CURSOR_X_REG_L  [53268/$D014] ; set cursor to colum 0
  1566 00E4F1:9C 15 D0                                   stz         VKY_TXT_CURSOR_X_REG_H  [53269/$D015]
  1567 00E4F4:9C 16 D0                                   stz         VKY_TXT_CURSOR_Y_REG_L  [53270/$D016] ; set cursor to row 0
  1568 00E4F7:9C 17 D0                                   stz         VKY_TXT_CURSOR_Y_REG_H  [53271/$D017]
  1569 00E4FA
  1570 00E4FA:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""] ;<<<="lda #DoC64COLOR(LTBLUE,BLACK)"
  1571 00E4FC:85 48                                      sta         CursorColor  [72/$48/"H"]
  1572 00E4FE:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1573 00E501                                            AssignWord  (#VKY_TEXT_MEMORY,CursorPointer)
  1575m00E501:A9 00                                      lda         #<(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [0/$00]
  1576m00E503:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1577m00E505:A9 C0                                      lda         #>(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [192/$C0/"A"]
  1578m00E507:92 4B                                      sta         (CursorPointer)+1  [75/$4B/"K"]
  1586 00E509:60                                         rts
  1587 00E50A                                            option      showallbytes=1
show all listing bytes enabled
  1588 00E50A:00 00 00 00 FF FF FF 00 >> COLODORE_PALETTE hex        00 00 00 00 FF FF FF 00 38 33 81 00 C8 CE 75 00 , 97 3C 8E 00 4D AC 56 00 9B 2C 2E 00 71 F1 ED 00 , 29 50 8E 00 00 38 55 00 71 6C C4 00 4A 4A 4A 00 , 7B 7B 7B 00 9F FF A9 00 EB 6D 70 00 B2 B2 B2 00  [size=64/$40/"@"]
       00E512:38 33 81 00 C8 CE 75 00 >>
       00E51A:97 3C 8E 00 4D AC 56 00 >>
       00E522:9B 2C 2E 00 71 F1 ED 00 >>
       00E52A:29 50 8E 00 00 38 55 00 >>
       00E532:71 6C C4 00 4A 4A 4A 00 >>
       00E53A:7B 7B 7B 00 9F FF A9 00 >>
       00E542:EB 6D 70 00 B2 B2 B2 00   
  1589 00E54A                                            option      showallbytes=0
show all listing bytes disabled
  1590 00E54A                                            endproc
end scope Init_Graphics, restore scope  <<global symbols>>
  1591 00E54A
  1592 00E54A                                            proc        Init_CODEC
open scope Init_CODEC, from scope  <<global symbols>>
  1593 00E54A:A9 00                                      lda         #%0.0.000.0.0.0.0  [0/$00]
  1594 00E54C:A0 1A                                      ldy         #%0001101.0  [26/$1A]
  1595 00E54E:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1596 00E551:A9 03                                      lda         #%0000.0011  [3/$03]
  1597 00E553:A0 2A                                      ldy         #%0010101.0  [42/$2A/"*"]
  1598 00E555:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1599 00E558:A9 01                                      lda         #%0.0.00.0001  [1/$01]
  1600 00E55A:A0 23                                      ldy         #%0010001.1  [35/$23/"#"]
  1601 00E55C:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1602 00E55F:A9 07                                      lda         #%00000.111  [7/$07]
  1603 00E561:A0 2C                                      ldy         #%0010110.0  [44/$2C/","]
  1604 00E563:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1605 00E566:A9 02                                      lda         #%00.00.0.0.10  [2/$02]
  1606 00E568:A0 14                                      ldy         #%0001010.0  [20/$14]
  1607 00E56A:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1608 00E56D:A9 02                                      lda         #%0.0.00.0.0.10  [2/$02]
  1609 00E56F:A0 16                                      ldy         #%0001011.0  [22/$16]
  1610 00E571:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1611 00E574:A9 45                                      lda         #%0.100.0.101  [69/$45/"E"]
  1612 00E576:A0 18                                      ldy         #%0001100.0  [24/$18]
  1613 00E578:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1614 00E57B:60                                         rts
  1615 00E57C
  1616 00E57C                            WriteCodecWait
  1617 00E57C:8D 20 D6                                   sta         CODEC_LOW  [54816/$D620]
  1618 00E57F:8C 21 D6                                   sty         CODEC_HI  [54817/$D621]
  1619 00E582:A9 01                                      lda         #1  [1/$01]
  1620 00E584:8D 22 D6                                   sta         CODEC_CTRL  [54818/$D622]
  1621 00E587                            -
  1622 00E587:2C 22 D6                                   bit         CODEC_CTRL  [54818/$D622]
  1623 00E58A:D0 FB                                      bne         -  [58759/$E587]
  1624 00E58C:60                                         rts
  1625 00E58D                                            endproc
end scope Init_CODEC, restore scope  <<global symbols>>
  1626 00E58D
  1627 00E58D                                            proc        Init_Sound
open scope Init_Sound, from scope  <<global symbols>>
  1628 00E58D:20 4A E5                                   jsr         Init_CODEC  [58698/$E54A]
  1629 00E590
  1630 00E590;                                                                                       ; intialize left and right PSG SN76489
  1631 00E590:A9 9F                                      lda         #%1.00.1.1111  [159/$9F/"Y"]    ;mute channel 0
  1632 00E592:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1633 00E595:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1634 00E598:A9 BF                                      lda         #%1.01.1.1111  [191/$BF/""]    ;mute channel 1
  1635 00E59A:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1636 00E59D:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1637 00E5A0:A9 DF                                      lda         #%1.10.1.1111  [223/$DF/""]    ;mute channel 2
  1638 00E5A2:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1639 00E5A5:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1640 00E5A8:A9 FF                                      lda         #%1.11.1.1111  [255/$FF/""]    ;mute channel 3
  1641 00E5AA:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1642 00E5AD:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1643 00E5B0
  1644 00E5B0;                                                                                       ; initialize left and right SIDs
  1645 00E5B0:A2 00                                      ldx         #0  [0/$00]
  1646 00E5B2                            -
  1647 00E5B2:9E 00 D4                                   stz         SID_L_V1_FREQ_LO,x  [54272/$D400]
  1648 00E5B5:9E 00 D5                                   stz         SID_R_V1_FREQ_LO,x  [54528/$D500]
  1649 00E5B8:E8                                         inx
  1650 00E5B9:E0 20                                      cpx         #$20  [32/$20/" "]
  1651 00E5BB:D0 F5                                      bne         -  [58802/$E5B2]
  1652 00E5BD:60                                         rts
  1653 00E5BE                                            endproc
end scope Init_Sound, restore scope  <<global symbols>>
  1654 00E5BE
  1655 00E5BE                                            proc        F256_RESET
open scope F256_RESET, from scope  <<global symbols>>
  1656 00E5BE:18                                         clc
  1657 00E5BF:78                                         sei                                         ; disable interrupts
  1658 00E5C0:A2 FF                                      ldx         #$ff  [255/$FF/""]
  1659 00E5C2:9A                                         txs                                         ; initialize stack
  1660 00E5C3
  1661 00E5C3;                                                                                       ; initialize mmu
  1662 00E5C3:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1663 00E5C5:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1664 00E5C7:09 80                                      ora         #MMU_EDIT_EN  [128/$80/"?"]
  1665 00E5C9:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; enable mmu edit, edit mmu lut 0, activate mmu lut 0 ;<<<="UnlockMMU	; enable mmu edit, edit mmu lut 0, activate mmu lut 0"
  1666 00E5CB:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; enable i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO	; enable i/o at $d000, use page 0=i/o registers"
  1667 00E5CD:A9 00                                      lda         #0  [0/$00]
  1668 00E5CF:85 08                                      sta         MMU_MEM_BANK_0  [8/$08]         ; map $000000 to bank 0
  1669 00E5D1:1A                                         inc
  1670 00E5D2:85 09                                      sta         MMU_MEM_BANK_1  [9/$09]         ; map $002000 to bank 1
  1671 00E5D4:1A                                         inc
  1672 00E5D5:85 0A                                      sta         MMU_MEM_BANK_2  [10/$0A]        ; map $004000 to bank 2
  1673 00E5D7:1A                                         inc
  1674 00E5D8:85 0B                                      sta         MMU_MEM_BANK_3  [11/$0B]        ; map $006000 to bank 3
  1675 00E5DA:1A                                         inc
  1676 00E5DB:85 0C                                      sta         MMU_MEM_BANK_4  [12/$0C]        ; map $008000 to bank 4
  1677 00E5DD:1A                                         inc
  1678 00E5DE:85 0D                                      sta         MMU_MEM_BANK_5  [13/$0D]        ; map $00a000 to bank 5
  1679 00E5E0:1A                                         inc
  1680 00E5E1:85 0E                                      sta         MMU_MEM_BANK_6  [14/$0E]        ; map $00c000 to bank 6
  1681 00E5E3:1A                                         inc
  1682 00E5E4:85 0F                                      sta         MMU_MEM_BANK_7  [15/$0F]        ; map $00e000 to bank 7
  1683 00E5E6:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1684 00E5E8:29 7F                                      and         #~(MMU_EDIT_EN)  [-129/$FFFFFF7F]
  1685 00E5EA:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; disable mmu edit, use mmu lut 0 ;<<<="LockMMU	; disable mmu edit, use mmu lut 0"
  1686 00E5EC
  1687 00E5EC;                                                                                       ; initialize via registers
  1688 00E5EC;                                                                                       ; reset via registers a/b
  1696 00E5EC:9C 00 DC                                   stz         VIA_ORB_IRB  [56320/$DC00]      ; set via i/o port a to read
  1697 00E5EF:9C 01 DC                                   stz         VIA_ORA_IRA  [56321/$DC01]      ; set via i/o port b to read
  1698 00E5F2
  1699 00E5F2;                                                                                       ; enable random number generator
  1700 00E5F2:A9 01                                      lda         #RNG_ENABLE  [1/$01]
  1701 00E5F4:8D A6 D6                                   sta         RNG_CTRL  [54950/$D6A6]
  1702 00E5F7
  1703 00E5F7;                                                                                       ; initialize interrupts
  1704 00E5F7:A9 FF                                      lda         #$ff  [255/$FF/""]             ; mask off all interrupts
  1705 00E5F9:8D 68 D6                                   sta         INT_EDGE_REG0  [54888/$D668]
  1706 00E5FC:8D 69 D6                                   sta         INT_EDGE_REG1  [54889/$D669]
  1707 00E5FF:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1708 00E602:8D 6D D6                                   sta         INT_MASK_REG1  [54893/$D66D]
  1709 00E605
  1710 00E605:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660] ; clear all existing interrupts
  1711 00E608:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660]
  1712 00E60B:AD 61 D6                                   lda         INT_PENDING_REG1  [54881/$D661]
  1713 00E60E:8D 61 D6                                   sta         INT_PENDING_REG1  [54881/$D661]
  1714 00E611
  1715 00E611:20 8D E5                                   jsr         Init_Sound  [58765/$E58D]
  1716 00E614:20 9B E4                                   jsr         Init_Graphics  [58523/$E49B]
  1717 00E617:20 00 E2                                   jsr         Init_Keyboard  [57856/$E200]
  1718 00E61A:58                                         cli
  1719 00E61B:4C EE EE                                   jmp         Main  [61166/$EEEE]
  1720 00E61E                                            endproc
end scope F256_RESET, restore scope  <<global symbols>>
  1721 00E61E                                            endsection    [58909/$E61D]
  1722 00E61E
  1723 00E61E;                                                                                       ;include 'sid.asm'
  1724 00E61E
  1725 00E61E;                                                                                       ; main game framework stored with libary section
  1726 00E61E                                            section     'F256JRLIB'
current section: F256JRLIB, next free address: $00E61E
  1727 00E61E:[=1/$01 bytes]             SIDSpeed        resb        1
define data constant size=1, fill value 0/$00
  1728 00E61F                                            proc        SOFIRQ                          ;	proc Increase_SOFCounter
open scope SOFIRQ, from scope  <<global symbols>>
  1729 00E61F;                                                                                       ;	Increase_SOF_Counter()
  1730 00E61F;                                                                                       ;	SID_Play_Frame()
  1731 00E61F:A9 06                                      lda         #SIDMODE  [6/$06]
  1732 00E621:C9 06                                      cmp         #6  [6/$06]
  1733 00E623:F0 09                                      beq         +  [58926/$E62E]
  1734 00E625:CE 1E E6                                   dec         SIDSpeed  [58910/$E61E]
  1735 00E628:D0 04                                      bne         +  [58926/$E62E]
  1736 00E62A:8D 1E E6                                   sta         SIDSpeed  [58910/$E61E]
  1737 00E62D:60                                         rts
  1738 00E62E                            +
  1739 00E62E:20 03 10                                   jsr         SIDPLAY  [4099/$1003]
  1740 00E631:60                                         rts
  1741 00E632                                            endproc
end scope SOFIRQ, restore scope  <<global symbols>>
  1742 00E632
  1743 00E632                                            proc        IRQ_Handler
open scope IRQ_Handler, from scope  <<global symbols>>
  1744 00E632:08                                         php
  1745 00E633:48                                         pha
  1746 00E634:DA                                         phx
  1747 00E635:5A                                         phy                                         ;<<<="PushAXY"
  1748 00E636:D8                                         cld
  1749 00E637:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1750 00E639:48                                         pha
  1751 00E63A:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1752 00E63C:48                                         pha                                         ;<<<="PushMMUIO"
  1753 00E63D
  1754 00E63D:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; use i/o registers ;<<<="SetMMUIO	; use i/o registers"
  1755 00E63F:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660]
  1756 00E642:85 20                                      sta         TempIRQ  [32/$20/" "]
  1757 00E644:89 01                                      bit         #JR0_INT00_SOF  [1/$01]
  1758 00E646:F0 08                                      beq         +  [58960/$E650]
  1759 00E648:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1760 00E64B:20 1F E6                                   jsr         SOFIRQ  [58911/$E61F]           ;Increase_SOFCounter
  1761 00E64E:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1762 00E650                            +
  1763 00E650:89 04                                      bit         #JR0_INT02_KBD  [4/$04]
  1764 00E652:F0 08                                      beq         +  [58972/$E65C]
  1765 00E654:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1766 00E657:20 32 E2                                   jsr         KeyboardIRQ  [57906/$E232]
  1767 00E65A:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1768 00E65C                            +
  1769 00E65C
  1770 00E65C:68                                         pla
  1771 00E65D:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1772 00E65F:68                                         pla
  1773 00E660:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1774 00E662:7A                                         ply
  1775 00E663:FA                                         plx
  1776 00E664:68                                         pla                                         ;<<<="PullYXA"
  1777 00E665:28                                         plp
  1778 00E666:40                                         rti
  1779 00E667                                            endproc
end scope IRQ_Handler, restore scope  <<global symbols>>
  1780 00E667
  1781 00E667                                            proc        Init_IRQHandler
open scope Init_IRQHandler, from scope  <<global symbols>>
  1782 00E667:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1783 00E669:48                                         pha                                         ;<<<="PushMMUIO"
  1784 00E66A:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1785 00E66C
  1786 00E66C:78                                         sei
  1787 00E66D                                            AssignWord  (#IRQ_Handler,VECTOR_IRQ)
  1789m00E66D:A9 32                                      lda         #<(loword(val(copy('#IRQ_Handler',2))))  [50/$32/"2"]
  1790m00E66F:8D FE FF                                   sta         VECTOR_IRQ  [65534/$FFFE]
  1791m00E672:A9 E6                                      lda         #>(loword(val(copy('#IRQ_Handler',2))))  [230/$E6/""]
  1792m00E674:8D FF FF                                   sta         (VECTOR_IRQ)+1  [65535/$FFFF]
  1800 00E677:A9 FA                                      lda         #~(JR0_INT00_SOF|JR0_INT02_KBD)  [-6/$FFFFFFFA]
  1801 00E679:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1802 00E67C
  1803 00E67C                                            AssignDWord (#0,SOFCounter)
  1805m00E67C:A9 00                                      lda         #<(loword(val(copy('#0',2))))  [0/$00]
  1806m00E67E:85 4D                                      sta         SOFCounter  [77/$4D/"M"]
  1807m00E680:A9 00                                      lda         #>(loword(val(copy('#0',2))))  [0/$00]
  1808m00E682:92 4D                                      sta         (SOFCounter)+1  [77/$4D/"M"]
  1809m00E684:A9 00                                      lda         #<(hiword(val(copy('#0',2))))  [0/$00]
  1810m00E686:92 4D                                      sta         (SOFCounter)+2  [77/$4D/"M"]
  1811m00E688:A9 00                                      lda         #>(hiword(val(copy('#0',2))))  [0/$00]
  1812m00E68A:92 4D                                      sta         (SOFCounter)+3  [77/$4D/"M"]
  1824 00E68C:58                                         cli
  1825 00E68D
  1826 00E68D:68                                         pla
  1827 00E68E:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1828 00E690:60                                         rts
  1829 00E691                                            endproc
end scope Init_IRQHandler, restore scope  <<global symbols>>
  1830 00E691
  1831 00E691                                            proc        Init_Audio
open scope Init_Audio, from scope  <<global symbols>>
  1832 00E691:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1833 00E693:48                                         pha                                         ;<<<="PushMMUIO"
  1834 00E694:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1835 00E696
  1836 00E696;                                                                                       ; init left and right sids
  1837 00E696;                                                                                       ;	stz SID_Control
  1838 00E696:A2 00                                      ldx         #0  [0/$00]
  1839 00E698                            -
  1840 00E698:9E 00 D4                                   stz         SID_LEFT,x  [54272/$D400]
  1841 00E69B:9E 00 D5                                   stz         SID_RIGHT,x  [54528/$D500]
  1842 00E69E:E8                                         inx
  1843 00E69F:E0 20                                      cpx         #32  [32/$20/" "]
  1844 00E6A1:D0 F5                                      bne         -  [59032/$E698]
  1845 00E6A3
  1846 00E6A3:68                                         pla
  1847 00E6A4:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1848 00E6A6:60                                         rts
  1849 00E6A7                                            endproc
end scope Init_Audio, restore scope  <<global symbols>>
  1850 00E6A7
  1851 00E6A7                                            proc        Init_GameFont
open scope Init_GameFont, from scope  <<global symbols>>
  1852 00E6A7:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1853 00E6A9:48                                         pha                                         ;<<<="PushMMUIO"
  1854 00E6AA:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1855 00E6AC
  1856 00E6AC:A9 01                                      lda         #MMU_IO_PAGE_1  [1/$01]
  1857 00E6AE:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUGFX"
  1858 00E6B0                                            CopyMemSmall (FONT_FANTASY,FONT_MEM,sizeof(FONT_FANTASY))
  1859m00E6B0
  1860m00E6B0                                            {
  1861m00E6B0;                                                                                       ;		AssignWord(FONT_FANTASY,.asrcaddr)
  1862m00E6B0:A9 EE                                      lda         #<(FONT_FANTASY)  [238/$EE/""]
  1863m00E6B2:8D C7 E6                                   sta         .srcaddr  [59079/$E6C7]
  1864m00E6B5:A9 E6                                      lda         #>(FONT_FANTASY)  [230/$E6/""]
  1865m00E6B7:8D C8 E6                                   sta         .srcaddr+1  [59080/$E6C8]
  1866m00E6BA;                                                                                       ;		AssignWord(FONT_MEM,.destaddr)
  1867m00E6BA:A9 00                                      lda         #<(FONT_MEM)  [0/$00]
  1868m00E6BC:8D CA E6                                   sta         .destaddr  [59082/$E6CA]
  1869m00E6BF:A9 C0                                      lda         #>(FONT_MEM)  [192/$C0/"A"]
  1870m00E6C1:8D CB E6                                   sta         .destaddr+1  [59083/$E6CB]
  1871m00E6C4:A0 00                                      ldy         #0  [0/$00]
  1872m00E6C6                            -
  1873m00E6C6                            .srcaddr        =           *+1  [59079/$E6C7]
  1874m00E6C6:AD 34 12                                   lda         $1234  [4660/$1234]
  1875m00E6C9                            .destaddr       =           *+1  [59082/$E6CA]
  1876m00E6C9:8D 21 43                                   sta         $4321  [17185/$4321]
  1877m00E6CC:EE C7 E6                                   inc         .srcaddr  [59079/$E6C7]
  1878m00E6CF:D0 03                                      bne         +  [59092/$E6D4]
  1879m00E6D1:EE C8 E6                                   inc         .srcaddr+1  [59080/$E6C8]
  1880m00E6D4                            +
  1881m00E6D4:EE CA E6                                   inc         .destaddr  [59082/$E6CA]
  1882m00E6D7:D0 03                                      bne         +  [59100/$E6DC]
  1883m00E6D9:EE CB E6                                   inc         .destaddr+1  [59083/$E6CB]
  1884m00E6DC                            +
  1885m00E6DC:AD C7 E6                                   lda         .srcaddr  [59079/$E6C7]
  1886m00E6DF:C9 EE                                      cmp         #<(FONT_FANTASY+sizeof(FONT_FANTASY))  [238/$EE/""]
  1887m00E6E1:D0 E3                                      bne         -  [59078/$E6C6]
  1888m00E6E3:AD C8 E6                                   lda         .srcaddr+1  [59080/$E6C8]
  1889m00E6E6:C9 EE                                      cmp         #>(FONT_FANTASY+sizeof(FONT_FANTASY))  [238/$EE/""]
  1890m00E6E8:D0 DC                                      bne         -  [59078/$E6C6]
  1891m00E6EA
  1892m00E6EA                                            }
  1894 00E6EA
  1895 00E6EA:68                                         pla
  1896 00E6EB:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1897 00E6ED:60                                         rts
  1898 00E6EE:[=2048/$0800 bytes]        FONT_FANTASY    incbin      'assets\gamefont2.bin'
including binary file 'assets\gamefont2.bin', 2048 bytes [=$000800]
2048 bytes successfully read
  1899 00EEEE                                            endproc
end scope Init_GameFont, restore scope  <<global symbols>>
  1900 00EEEE
  1901 00EEEE                                            proc        Main
open scope Main, from scope  <<global symbols>>
  1902 00EEEE:A9 80                                      lda         #MMU_EDIT_EN  [128/$80/"?"]
  1903 00EEF0:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1904 00EEF2:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1905 00EEF4:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1906 00EEF6
  1907 00EEF6:A9 3F                                      lda         #(Mstr_Ctrl_Text_Mode_En|Mstr_Ctrl_Text_Overlay|Mstr_Ctrl_Graph_Mode_En|Mstr_Ctrl_Bitmap_En|Mstr_Ctrl_TileMap_En|Mstr_Ctrl_Sprite_En)  [63/$3F/"?"]
  1908 00EEF8:8D 00 D0                                   sta         MASTER_CTRL_REG_L  [53248/$D000]
  1909 00EEFB:A9 06                                      lda         #(Mstr_Ctrl_Text_XDouble|Mstr_Ctrl_Text_YDouble)  [6/$06]
  1910 00EEFD:8D 01 D0                                   sta         MASTER_CTRL_REG_H  [53249/$D001]
  1911 00EF00:20 A7 E6                                   jsr         Init_GameFont  [59047/$E6A7]
  1912 00EF03:20 91 E6                                   jsr         Init_Audio  [59025/$E691]
  1913 00EF06:20 67 E6                                   jsr         Init_IRQHandler  [58983/$E667]
  1914 00EF09
  1915 00EF09                                            SetCursorColor (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK) ;<<<="SetCursorColor(#DoC64COLOR(LTBLUE,BLACK))"
  1916m00EF09                                            ConvertParamToA (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK)
  1928m00EF09:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""]
  1932m00EF0B:85 48                                      sta         CursorColor  [72/$48/"H"]
  1934 00EF0D:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1935 00EF10
  1936 00EF10;                                                                                       ; map in title screen code as $06000
  1937 00EF10;                                                                                       ;	lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL ;<<<=";	UnlockMMU"
  1938 00EF10;                                                                                       ;	lda #(TitleScreenCode/$2000)
  1939 00EF10;                                                                                       ;	sta MMU_MEM_BANK_3
  1940 00EF10;                                                                                       ;	lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL ;<<<=";	LockMMU"
  1941 00EF10;                                                                                       ;	jsr ShowTitle
  1942 00EF10                                            PrintString (TX_GAMETITLE,#0,#0,#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)) ;<<<="PrintString(TX_GAMETITLE,#0,#0,#DoC64COLOR(YELLOW,BLACK)))"
  1949m00EF10                                            SetCursorPointer (#0,#0)
  1950m00EF10                                            ConvertParamToA (#0)
  1962m00EF10:A9 00                                      lda         #0  [0/$00]
  1966m00EF12:85 49                                      sta         CursorColumn  [73/$49/"I"]
  1967m00EF14                                            ConvertParamToA (#0)
  1979m00EF14:A9 00                                      lda         #0  [0/$00]
  1983m00EF16:85 4A                                      sta         CursorLine  [74/$4A/"J"]
  1984m00EF18
  1986m00EF18:A9 00                                      lda         #<(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [0/$00]
  1987m00EF1A:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1988m00EF1C:A9 C0                                      lda         #>(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [192/$C0/"A"]
  1989m00EF1E:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
  1996m00EF20                                            SetCursorColor (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  1997m00EF20                                            ConvertParamToA (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  2009m00EF20:A9 70                                      lda         #(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)  [112/$70/"p"]
  2013m00EF22:85 48                                      sta         CursorColor  [72/$48/"H"]
  2025m00EF24:A9 68                                      lda         #<TX_GAMETITLE  [104/$68/"h"]
  2026m00EF26:85 30                                      sta         TempSrc  [48/$30/"0"]
  2027m00EF28:A9 EF                                      lda         #>TX_GAMETITLE  [239/$EF/""]
  2028m00EF2A:85 31                                      sta         TempSrc+1  [49/$31/"1"]
  2030m00EF2C:20 8C E0                                   jsr         PrintAnsiString  [57484/$E08C]
  2037 00EF2F;                                                                                       ;	inc SID_Control
  2038 00EF2F;                                                                                       ;	SID_Initialize(0,0)
  2039 00EF2F;                                                                                       ;
  2040 00EF2F;                                                                                       ;// choose setting
  2041 00EF2F;                                                                                       ;poke 54299,2 (overdrive)
  2042 00EF2F;                                                                                       ;poke 54299,3 (filters)
  2043 00EF2F;                                                                                       ;poke 54299,4 (smoothing)
  2044 00EF2F;                                                                                       ;
  2045 00EF2F;                                                                                       ;// choose value
  2046 00EF2F;                                                                                       ;// overdrive: 0 (medium) 1 (high) 2 (low)
  2047 00EF2F;                                                                                       ;// filters:   0 (blend)  1 (8580) 2 (6581)
  2048 00EF2F;                                                                                       ;// smoothing: 0 (neat)   1 (soft) 2 (rough)
  2049 00EF2F;                                                                                       ;poke 54300,0/1/2 (setting)
  2050 00EF2F;                                                                                       ;
  2051 00EF2F;                                                                                       ;// apply setting
  2052 00EF2F;                                                                                       ;poke 54301,181:poke 54302,29
  2053 00EF2F:A9 02                                      lda         #2  [2/$02]
  2054 00EF31:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2055 00EF34:A9 01                                      lda         #1  [1/$01]
  2056 00EF36:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2057 00EF39:A9 B5                                      lda         #181  [181/$B5/""]
  2058 00EF3B:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2059 00EF3E:A9 1D                                      lda         #29  [29/$1D]
  2060 00EF40:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2061 00EF43
  2062 00EF43:A9 03                                      lda         #3  [3/$03]
  2063 00EF45:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2064 00EF48:A9 01                                      lda         #1  [1/$01]
  2065 00EF4A:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2066 00EF4D:A9 B5                                      lda         #181  [181/$B5/""]
  2067 00EF4F:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2068 00EF52:A9 1D                                      lda         #29  [29/$1D]
  2069 00EF54:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2070 00EF57
  2071 00EF57:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2072 00EF59:A9 01                                      lda         #1  [1/$01]
  2073 00EF5B:8D 1E E6                                   sta         SIDSpeed  [58910/$E61E]
  2074 00EF5E:A9 00                                      lda         #0  [0/$00]
  2075 00EF60:20 F6 0F                                   jsr         SIDINIT  [4086/$0FF6]
  2076 00EF63;                                                                                       ;	SID_Initialize(0,0)
  2077 00EF63;                                                                                       ;	SID_SetVolume(-1)
  2078 00EF63;                                                                                       ;	SID_Play()
  2079 00EF63:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2080 00EF65                            -
  2081 00EF65:4C 65 EF                                   jmp         -  [61285/$EF65]
  2082 00EF68
  2083 00EF68:[=14/$0E bytes]            TX_GAMETITLE    bytez       SIDFILE  [size=14/$0E]
  2084 00EF76                                            endproc
end scope Main, restore scope  <<global symbols>>
  2085 00EF76                                            endsection    [61301/$EF75]
  2086 00EF76
  2087 000800                                            section     add('MAIN',$0800,$bfff,size=-1,save=1)
updated section 'MAIN' $000800-00BFFF [-1]
current section: MAIN, next free address: $000800
  2088 000800
  2089 000800:[=1912/$0778 bytes]                        pad         SIDSTART-$7e
define data constant size=1912, fill value 0/$00
  2089 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a000,SIDPLAY=$a003,SIDMODE=5,SIDFILE='toccata_v3.a000'
  2090 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a048,SIDPLAY=$a021,SIDMODE=5,SIDFILE='viola_duet.a000'
  2091 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Super_Mario_Bros_2SID'
  2092 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='mrdo'
  2093 000F78;                                                                                       ;const SIDSTART=$4000,SIDINIT=$4000,SIDPLAY=$4003,SIDMODE=5,SIDFILE='Airwolf_2SID'
  2094 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Space_Oddity_2SID'
  2095 000F78;                                                                                       ;const SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Girl_from_Tomorrow_2SID'
  2096 000F78                                            const       SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Lakeside_2SID'  [4086/$0FF6,4086/$0FF6,4099/$1003,6/$06,"Lakeside_2SID"]
  2097 000F78:[=4139/$102B bytes]                        incbin      'music\'+SIDFILE+'.sid'
including binary file 'music\Lakeside_2SID.sid', 4139 bytes [=$00102B]
4139 bytes successfully read
  2098 001FA3
  2099 001FA3                                            endsection    [8098/$1FA2]
  2100 001FA3
  2101 001FA3;                                                                                       ;savepgz
  2102 001FA3                                            savebin     'wktitle.0800.bin',$0800 to $0ffff
saving binary file 'wktitle.0800.bin', $000800-00FFFF, 63488 bytes [=$00F800]
  2103 001FA3
pass 3 complete - 23:31:29 94 ms *** phase/checksum error retry #1
 address range=$000030-00FFFF, checksum=000BAD7C
 *** phase error=0 byte(s)   last checksum=000BB550 - attempting another pass

pass 4 - 23:31:29 *** phase/checksum error retry #2
allocating primary target cpu memory $100000/1048576 bytes
     1 000000                                            cpu         'f256jr'
current target cpu F256JR (primary), 0 statement(s), 0/0 code/data byte(s)
     2 000000                                            const       usesystemfont=0  [0/$00]
     3 000000
     4 000000                                            include     'includes\f256jr_registers.asm'
including source file 'includes\f256jr_registers.asm'
     5 000000;                                                                                       ;MMU Registers
     6 000000                            MMU_MEM_CTRL    =           $0000  [0/$00]                  ; MMU Memory Control Register
     7 000000                            MMU_EDIT_EN     =           $80  [128/$80/"?"]
     8 000000                            MMU_IO_CTRL     =           $0001  [1/$01]                  ; MMU I/O Control Register
     9 000000                            MMU_IO_PAGE_0   =           $00  [0/$00]
    10 000000                            MMU_IO_PAGE_1   =           $01  [1/$01]
    11 000000                            MMU_IO_TEXT     =           $02  [2/$02]
    12 000000                            MMU_IO_COLOR    =           $03  [3/$03]
    13 000000                            MMU_MEM_BANK_0  =           $0008  [8/$08]                  ; MMU Edit Register for bank 0 ($0000 - $1FFF)
    14 000000                            MMU_MEM_BANK_1  =           $0009  [9/$09]                  ; MMU Edit Register for bank 1 ($2000 - $3FFF)
    15 000000                            MMU_MEM_BANK_2  =           $000A  [10/$0A]                 ; MMU Edit Register for bank 2 ($4000 - $5FFF)
    16 000000                            MMU_MEM_BANK_3  =           $000B  [11/$0B]                 ; MMU Edit Register for bank 3 ($6000 - $7FFF)
    17 000000                            MMU_MEM_BANK_4  =           $000C  [12/$0C]                 ; MMU Edit Register for bank 4 ($8000 - $9FFF)
    18 000000                            MMU_MEM_BANK_5  =           $000D  [13/$0D]                 ; MMU Edit Register for bank 5 ($A000 - $BFFF)
    19 000000                            MMU_MEM_BANK_6  =           $000E  [14/$0E]                 ; MMU Edit Register for bank 6 ($C000 - $DFFF)
    20 000000                            MMU_MEM_BANK_7  =           $000F  [15/$0F]                 ; MMU Edit Register for bank 7 ($E000 - $FFFF)
    21 000000
    22 000000;                                                                                       ;SDCard_Controller_def.asm
    23 000000
    24 000000;                                                                                       ;SDC_VERSION_REG         = $DD00    ; Ought to read 12
    25 000000;                                                                                       ;SDC_CONTROL_REG         = $DD01    ; Bit0 1 = Reset core logic, and registers. Self clearing
    26 000000;                                                                                       ;SDC_TRANS_TYPE_REG      = $DD02  ; Bit[1:0]
    27 000000;                                                                                       ;SDC_TRANS_DIRECT      = $00   ; 00 = Direct Access
    28 000000;                                                                                       ;SDC_TRANS_INIT_SD     = $01   ; 01 = Init SD
    29 000000;                                                                                       ;SDC_TRANS_READ_BLK    = $02   ; 10 = RW_READ_BLOCK (512 Bytes)
    30 000000;                                                                                       ;SDC_TRANS_WRITE_BLK   = $03   ; 11 = RW_WRITE_SD_BLOCK
    31 000000;                                                                                       ;SDC_TRANS_CONTROL_REG   = $DD03
    32 000000;                                                                                       ;SDC_TRANS_START         = $01
    33 000000;                                                                                       ;SDC_TRANS_STATUS_REG    = $DD04
    34 000000;                                                                                       ;SDC_TRANS_BUSY          = $01     ;  1= Transaction Busy
    35 000000;                                                                                       ;SDC_TRANS_ERROR_REG     = $DD05
    36 000000;                                                                                       ;SDC_TRANS_INIT_NO_ERR   = $00   ; Init Error Report [1:0]
    37 000000;                                                                                       ;SDC_TRANS_INIT_CMD0_ERR = $01
    38 000000;                                                                                       ;SDC_TRANS_INIT_CMD1_ERR = $02
    39 000000;                                                                                       ;SDC_TRANS_RD_NO_ERR     = $00   ; Read Error Report [3:2]
    40 000000;                                                                                       ;SDC_TRANS_RD_CMD_ERR    = $04
    41 000000;                                                                                       ;SDC_TRANS_RD_TOKEN_ERR  = $08
    42 000000;                                                                                       ;SDC_TRANS_WR_NO_ERR     = $00   ; Write Report Error  [5:4]
    43 000000;                                                                                       ;SDC_TRANS_WR_CMD_ERR    = $10   ;
    44 000000;                                                                                       ;SDC_TRANS_WR_DATA_ERR   = $20
    45 000000;                                                                                       ;SDC_TRANS_WR_BUSY_ERR   = $30
    46 000000;                                                                                       ;SDC_DIRECT_ACCESS_REG   = $DD06 ; SPI Direct Read and Write - Set DATA before initiating direct Access Transaction
    47 000000;                                                                                       ;SDC_SD_ADDR_7_0_REG     = $DD07 ; Set the ADDR before a block read or block write
    48 000000;                                                                                       ;SDC_SD_ADDR_15_8_REG    = $DD08 ; Addr0 [8:0] Always should be 0, since each block is 512Bytes
    49 000000;                                                                                       ;SDC_SD_ADDR_23_16_REG   = $DD09
    50 000000;                                                                                       ;SDC_SD_ADDR_31_24_REG   = $DD0A
    51 000000;                                                                                       ;SDC_SPI_CLK_DEL_REG     = $DD0B
    52 000000;                                                                                       ;SDC_RX_FIFO_DATA_REG    = $DD10 ; Data from the Block Read
    53 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_HI = $DD12 ; How many Bytes in the FIFO HI
    54 000000;                                                                                       ;SDC_RX_FIFO_DATA_CNT_LO = $DD13 ; How many Bytes in the FIFO LO
    55 000000;                                                                                       ;SDC_RX_FIFO_CTRL_REG    = $DD14 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    56 000000;                                                                                       ;SDC_TX_FIFO_DATA_REG    = $DD20 ; Write Data Block here
    57 000000;                                                                                       ;SDC_TX_FIFO_CTRL_REG    = $DD24 ; Bit0  Force Empty - Set to 1 to clear FIFO, self clearing (the bit)
    58 000000
    59 000000
    60 000000;                                                                                       ;interrupt_def.asm
    61 000000
    62 000000                            INT_PENDING_REG0 =          $D660  [54880/$D660]            ;
    63 000000                            INT_PENDING_REG1 =          $D661  [54881/$D661]            ;
    64 000000;                                                                                       ;INT_PENDING_REG2 = $D662 ; NOT USED
    65 000000;                                                                                       ;INT_PENDING_REG3 = $D663 ; NOT USED
    66 000000                            INT_POL_REG0    =           $D664  [54884/$D664]            ;
    67 000000                            INT_POL_REG1    =           $D665  [54885/$D665]            ;
    68 000000;                                                                                       ;INT_POL_REG2     = $D666 ;  NOT USED
    69 000000;                                                                                       ;INT_POL_REG3     = $D667 ; NOT USED
    70 000000                            INT_EDGE_REG0   =           $D668  [54888/$D668]            ;
    71 000000                            INT_EDGE_REG1   =           $D669  [54889/$D669]            ;
    72 000000;                                                                                       ;INT_EDGE_REG2    = $D66A ; NOT USED
    73 000000;                                                                                       ;INT_EDGE_REG3    = $D66B ; NOT USED
    74 000000                            INT_MASK_REG0   =           $D66C  [54892/$D66C]            ;
    75 000000                            INT_MASK_REG1   =           $D66D  [54893/$D66D]            ;
    76 000000;                                                                                       ;INT_MASK_REG2    = $D66E ; NOT USED
    77 000000;                                                                                       ;INT_MASK_REG3    = $D66F ; NOT USED
    78 000000                            JR0_INT00_SOF   =           $01  [1/$01]                    ;Start of Frame @ 60FPS
    79 000000                            JR0_INT01_SOL   =           $02  [2/$02]                    ;Start of Line (Programmable)
    80 000000                            JR0_INT02_KBD   =           $04  [4/$04]                    ;
    81 000000                            JR0_INT03_MOUSE =           $08  [8/$08]                    ;
    82 000000                            JR0_INT04_TMR0  =           $10  [16/$10]                   ;
    83 000000                            JR0_INT05_TMR1  =           $20  [32/$20/" "]               ;Real-Time Clock Interrupt
    84 000000                            JR0_INT06_DMA   =           $40  [64/$40/"@"]               ;Floppy Disk Controller
    85 000000                            JR0_INT07_TBD   =           $80  [128/$80/"?"]              ; Mouse Interrupt (INT12 in SuperIO IOspace)
    86 000000                            JR1_INT00_UART  =           $01  [1/$01]                    ;Keyboard Interrupt
    87 000000                            JR1_INT01_COL0  =           $02  [2/$02]                    ;TYVKY Collision TBD
    88 000000                            JR1_INT02_COL1  =           $04  [4/$04]                    ;TYVKY Collision TBD
    89 000000                            JR1_INT03_COL2  =           $08  [8/$08]                    ;TYVKY Collision TBD
    90 000000                            JR1_INT04_RTC   =           $10  [16/$10]                   ;Serial Port 1
    91 000000                            JR1_INT05_VIA   =           $20  [32/$20/" "]               ;Midi Controller Interrupt
    92 000000                            JR1_INT06_IEC   =           $40  [64/$40/"@"]               ;Parallel Port
    93 000000                            JR1_INT07_SDCARD =          $80  [128/$80/"?"]              ;SDCard Insert
    94 000000
    95 000000
    96 000000;                                                                                       ;RTC_def.asm
    97 000000
    98 000000;                                                                                       ;RTC_SEC       = $D690 ;Seconds Register
    99 000000;                                                                                       ;RTC_SEC_ALARM = $D691 ;Seconds Alarm Register
   100 000000;                                                                                       ;RTC_MIN       = $D692 ;Minutes Register
   101 000000;                                                                                       ;RTC_MIN_ALARM = $D693 ;Minutes Alarm Register
   102 000000;                                                                                       ;RTC_HRS       = $D694 ;Hours Register
   103 000000;                                                                                       ;RTC_HRS_ALARM = $D695 ;Hours Alarm Register
   104 000000;                                                                                       ;RTC_DAY       = $D696 ;Day Register
   105 000000;                                                                                       ;RTC_DAY_ALARM = $D697 ;Day Alarm Register
   106 000000;                                                                                       ;RTC_DOW       = $D698 ;Day of Week Register
   107 000000;                                                                                       ;RTC_MONTH     = $D699 ;Month Register
   108 000000;                                                                                       ;RTC_YEAR      = $D69A ;Year Register
   109 000000;                                                                                       ;RTC_RATES     = $D69B ;Rates Register
   110 000000;                                                                                       ;RTC_ENABLE    = $D69C ;Enables Register
   111 000000;                                                                                       ;RTC_FLAGS     = $D69D ;Flags Register
   112 000000;                                                                                       ;RTC_CTRL      = $D69E ;Control Register
   113 000000;                                                                                       ;RTC_CENTURY   = $D69F ;Century Register
   114 000000
   115 000000
   116 000000;                                                                                       ;VIA_def.asm
   117 000000
   118 000000                            VIA_ORB_IRB     =           $DC00  [56320/$DC00]            ;Output/Input Register Port B
   119 000000                            VIA_ORA_IRA     =           $DC01  [56321/$DC01]            ;Output/Input Register Port B
   120 000000                            VIA_DDRB        =           $DC02  [56322/$DC02]            ;Data Direction Port B
   121 000000                            VIA_DDRA        =           $DC03  [56323/$DC03]            ;Data Direction Port A
   122 000000                            VIA_T1CL        =           $DC04  [56324/$DC04]            ;T1C-L
   123 000000                            VIA_T1CH        =           $DC05  [56325/$DC05]            ;T1C-H
   124 000000                            VIA_T1LL        =           $DC06  [56326/$DC06]            ;T1L-L
   125 000000                            VIA_T1LH        =           $DC07  [56327/$DC07]            ;T1L-H
   126 000000                            VIA_T2CL        =           $DC08  [56328/$DC08]            ;T2C-L
   127 000000                            VIA_T2CH        =           $DC09  [56329/$DC09]            ;T2C-H
   128 000000                            VIA_SR          =           $DC0A  [56330/$DC0A]            ;SR
   129 000000                            VIA_ACR         =           $DC0B  [56331/$DC0B]            ;ACR
   130 000000                            VIA_PCR         =           $DC0C  [56332/$DC0C]            ;PCR
   131 000000                            VIA_IFR         =           $DC0D  [56333/$DC0D]            ;IFR
   132 000000                            VIA_IER         =           $DC0E  [56334/$DC0E]            ;IER
   133 000000                            VIA_ORA_IRA_AUX =           $DC0F  [56335/$DC0F]            ;ORA/IRA
   134 000000                            JOY_UP          =           $01  [1/$01]
   135 000000                            JOY_DWN         =           $02  [2/$02]
   136 000000                            JOY_LFT         =           $04  [4/$04]
   137 000000                            JOY_RGT         =           $08  [8/$08]
   138 000000                            JOY_BUT0        =           $10  [16/$10]
   139 000000                            JOY_BUT1        =           $20  [32/$20/" "]
   140 000000                            JOY_BUT2        =           $40  [64/$40/"@"]
   141 000000;                                                                                       ;JOYA_UP         = $01
   142 000000;                                                                                       ;JOYA_DWN        = $02
   143 000000;                                                                                       ;JOYA_LFT        = $04
   144 000000;                                                                                       ;JOYA_RGT        = $08
   145 000000;                                                                                       ;JOYA_BUT0       = $10
   146 000000;                                                                                       ;JOYA_BUT1       = $20
   147 000000;                                                                                       ;JOYA_BUT2       = $40
   148 000000;                                                                                       ;JOYB_UP         = $01
   149 000000;                                                                                       ;JOYB_DWN        = $02
   150 000000;                                                                                       ;JOYB_LFT        = $04
   151 000000;                                                                                       ;JOYB_RGT        = $08
   152 000000;                                                                                       ;JOYB_BUT0       = $10
   153 000000;                                                                                       ;JOYB_BUT1       = $20
   154 000000;                                                                                       ;JOYB_BUT2       = $40
   155 000000
   156 000000
   157 000000;                                                                                       ;Simple_UART_Jr_def.asm
   158 000000
   159 000000;                                                                                       ;UART_TRHB 	= $D630        ; Transmit/Receive Hold Buffer
   160 000000;                                                                                       ;UART_DLL 	= $D630        ; Divisor Latch Low Byte
   161 000000;                                                                                       ;UART_DLH 	= $D631        ; Divisor Latch High Byte
   162 000000;                                                                                       ;UART_IER 	= $D631        ; Interupt Enable Register
   163 000000;                                                                                       ;UART_FCR 	= $D632        ; FIFO Control Register
   164 000000;                                                                                       ;UART_IIR 	= $D632        ; Interupt Indentification Register
   165 000000;                                                                                       ;UART_LCR 	= $D633        ; Line Control Register
   166 000000;                                                                                       ;UART_MCR 	= $D634        ; Modem Control REgister
   167 000000;                                                                                       ;UART_LSR 	= $D635        ; Line Status Register
   168 000000;                                                                                       ;UART_MSR 	= $D636        ; Modem Status Register
   169 000000;                                                                                       ;UART_SR 	= $D637        ; Scratch Register
   170 000000;                                                                                       ;UINT_LOW_POWER = $20        ; Enable Low Power Mode (16750)
   171 000000;                                                                                       ;UINT_SLEEP_MODE = $10       ; Enable Sleep Mode (16750)
   172 000000;                                                                                       ;UINT_MODEM_STATUS = $08     ; Enable Modem Status Interrupt
   173 000000;                                                                                       ;UINT_LINE_STATUS = $04      ; Enable Receiver Line Status Interupt
   174 000000;                                                                                       ;UINT_THR_EMPTY = $02        ; Enable Transmit Holding Register Empty interrupt
   175 000000;                                                                                       ;UINT_DATA_AVAIL = $01       ; Enable Recieve Data Available interupt
   176 000000;                                                                                       ;IIR_FIFO_ENABLED = $80      ; FIFO is enabled
   177 000000;                                                                                       ;IIR_FIFO_NONFUNC = $40      ; FIFO is not functioning
   178 000000;                                                                                       ;IIR_FIFO_64BYTE = $20       ; 64 byte FIFO enabled (16750)
   179 000000;                                                                                       ;IIR_MODEM_STATUS = $00      ; Modem Status Interrupt
   180 000000;                                                                                       ;IIR_THR_EMPTY = $02         ; Transmit Holding Register Empty Interrupt
   181 000000;                                                                                       ;IIR_DATA_AVAIL = $04        ; Data Available Interrupt
   182 000000;                                                                                       ;IIR_LINE_STATUS = $06       ; Line Status Interrupt
   183 000000;                                                                                       ;IIR_TIMEOUT = $0C           ; Time-out Interrupt (16550 and later)
   184 000000;                                                                                       ;IIR_INTERRUPT_PENDING = $01 ; Interrupt Pending Flag
   185 000000;                                                                                       ;LCR_DLB = $80               ; Divisor Latch Access Bit
   186 000000;                                                                                       ;LCR_SBE = $60               ; Set Break Enable
   187 000000;                                                                                       ;LCR_PARITY_NONE = $00       ; Parity: None
   188 000000;                                                                                       ;LCR_PARITY_ODD = $08        ; Parity: Odd
   189 000000;                                                                                       ;LCR_PARITY_EVEN = $18       ; Parity: Even
   190 000000;                                                                                       ;LCR_PARITY_MARK = $28       ; Parity: Mark
   191 000000;                                                                                       ;LCR_PARITY_SPACE = $38      ; Parity: Space
   192 000000;                                                                                       ;LCR_STOPBIT_1 = $00         ; One Stop Bit
   193 000000;                                                                                       ;LCR_STOPBIT_2 = $04         ; 1.5 or 2 Stop Bits
   194 000000;                                                                                       ;LCR_DATABITS_5 = $00        ; Data Bits: 5
   195 000000;                                                                                       ;LCR_DATABITS_6 = $01        ; Data Bits: 6
   196 000000;                                                                                       ;LCR_DATABITS_7 = $02        ; Data Bits: 7
   197 000000;                                                                                       ;LCR_DATABITS_8 = $03        ; Data Bits: 8
   198 000000;                                                                                       ;LSR_ERR_RECIEVE = $80       ; Error in Received FIFO
   199 000000;                                                                                       ;LSR_XMIT_DONE = $40         ; All data has been transmitted
   200 000000;                                                                                       ;LSR_XMIT_EMPTY = $20        ; Empty transmit holding register
   201 000000;                                                                                       ;LSR_BREAK_INT = $10         ; Break interrupt
   202 000000;                                                                                       ;LSR_ERR_FRAME = $08         ; Framing error
   203 000000;                                                                                       ;LSR_ERR_PARITY = $04        ; Parity error
   204 000000;                                                                                       ;LSR_ERR_OVERRUN = $02       ; Overrun error
   205 000000;                                                                                       ;LSR_DATA_AVAIL = $01        ; Data is ready in the receive buffer
   206 000000
   207 000000
   208 000000;                                                                                       ;TinyVicky_Def.asm
   209 000000
   210 000000                            MASTER_CTRL_REG_L =         $D000  [53248/$D000]
   211 000000                            Mstr_Ctrl_Text_Mode_En =    $01  [1/$01]                    ; Enable the Text Mode
   212 000000                            Mstr_Ctrl_Text_Overlay =    $02  [2/$02]                    ; Enable the Overlay of the text mode on top of Graphic Mode (the Background Color is ignored)
   213 000000                            Mstr_Ctrl_Graph_Mode_En =   $04  [4/$04]                    ; Enable the Graphic Mode
   214 000000                            Mstr_Ctrl_Bitmap_En =       $08  [8/$08]                    ; Enable the Bitmap Module In Vicky
   215 000000                            Mstr_Ctrl_TileMap_En =      $10  [16/$10]                   ; Enable the Tile Module in Vicky
   216 000000                            Mstr_Ctrl_Sprite_En =       $20  [32/$20/" "]               ; Enable the Sprite Module in Vicky
   217 000000                            Mstr_Ctrl_GAMMA_En =        $40  [64/$40/"@"]               ; this Enable the GAMMA correction - The Analog and DVI have different color value, the GAMMA is great to correct the difference
   218 000000                            Mstr_Ctrl_Disable_Vid =     $80  [128/$80/"?"]              ; This will disable the Scanning of the Video hence giving 100% bandwith to the CPU
   219 000000                            MASTER_CTRL_REG_H =         $D001  [53249/$D001]
   220 000000                            Mstr_Ctrl_Video_Mode =      $01  [1/$01]                    ; 0 - 640x480@60Hz : 1 - 640x400@70hz (text mode) // 0 - 320x240@60hz : 1 - 320x200@70Hz (Graphic Mode & Text mode when Doubling = 1)
   221 000000                            Mstr_Ctrl_Text_XDouble =    $02  [2/$02]                    ; X Pixel Doubling
   222 000000                            Mstr_Ctrl_Text_YDouble =    $04  [4/$04]                    ; Y Pixel Doubling
   223 000000                            LAYER_CTRL_REG_0 =          $D002  [53250/$D002]
   224 000000                            LAYER_CTRL_REG_1 =          $D003  [53251/$D003]
   225 000000                            BORDER_CTRL_REG =           $D004  [53252/$D004]            ; Bit[0] - Enable (1 by default)  Bit[4..6]: X Scroll Offset ( Will scroll Left) (Acceptable Value: 0..7)
   226 000000                            Border_Ctrl_Enable =        $01  [1/$01]
   227 000000                            BORDER_COLOR_B  =           $D005  [53253/$D005]
   228 000000                            BORDER_COLOR_G  =           $D006  [53254/$D006]
   229 000000                            BORDER_COLOR_R  =           $D007  [53255/$D007]
   230 000000                            BORDER_X_SIZE   =           $D008  [53256/$D008]            ; X-  Values: 0 - 32 (Default: 32)
   231 000000                            BORDER_Y_SIZE   =           $D009  [53257/$D009]            ; Y- Values 0 -32 (Default: 32)
   232 000000;                                                                                       ;VKY_RESERVED_02         = $D00A
   233 000000;                                                                                       ;VKY_RESERVED_03         = $D00B
   234 000000;                                                                                       ;VKY_RESERVED_04         = $D00C
   235 000000                            BACKGROUND_COLOR_B =        $D00D  [53261/$D00D]            ; When in Graphic Mode, if a pixel is "0" then the Background pixel is chosen
   236 000000                            BACKGROUND_COLOR_G =        $D00E  [53262/$D00E]
   237 000000                            BACKGROUND_COLOR_R =        $D00F  [53263/$D00F]            ;
   238 000000                            VKY_TXT_CURSOR_CTRL_REG =   $D010  [53264/$D010]            ;[0]  Enable Text Mode
   239 000000                            Vky_Cursor_Enable =         $01  [1/$01]
   240 000000                            Vky_Cursor_Flash_Rate0 =    $02  [2/$02]
   241 000000                            Vky_Cursor_Flash_Rate1 =    $04  [4/$04]
   242 000000                            VKY_TXT_START_ADD_PTR =     $D011  [53265/$D011]            ; This is an offset to change the Starting address of the Text Mode Buffer (in x)
   243 000000                            VKY_TXT_CURSOR_CHAR_REG =   $D012  [53266/$D012]
   244 000000                            VKY_TXT_CURSOR_COLR_REG =   $D013  [53267/$D013]
   245 000000                            VKY_TXT_CURSOR_X_REG_L =    $D014  [53268/$D014]
   246 000000                            VKY_TXT_CURSOR_X_REG_H =    $D015  [53269/$D015]
   247 000000                            VKY_TXT_CURSOR_Y_REG_L =    $D016  [53270/$D016]
   248 000000                            VKY_TXT_CURSOR_Y_REG_H =    $D017  [53271/$D017]
   249 000000                            VKY_LINE_IRQ_CTRL_REG =     $D018  [53272/$D018]            ;[0] - Enable Line 0 - WRITE ONLY
   250 000000                            VKY_LINE_CMP_VALUE_LO =     $D019  [53273/$D019]            ;Write Only [7:0]
   251 000000                            VKY_LINE_CMP_VALUE_HI =     $D01A  [53274/$D01A]            ;Write Only [3:0]
   252 000000                            VKY_PIXEL_X_POS_LO =        $D018  [53272/$D018]            ; This is Where on the video line is the Pixel
   253 000000                            VKY_PIXEL_X_POS_HI =        $D019  [53273/$D019]            ; Or what pixel is being displayed when the register is read
   254 000000                            VKY_LINE_Y_POS_LO =         $D01A  [53274/$D01A]            ; This is the Line Value of the Raster
   255 000000                            VKY_LINE_Y_POS_HI =         $D01B  [53275/$D01B]            ;
   256 000000                            TyVKY_BM0_CTRL_REG =        $D100  [53504/$D100]
   257 000000                            BM0_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   258 000000                            BM0_LUT0        =           $02  [2/$02]                    ; LUT0
   259 000000                            BM0_LUT1        =           $04  [4/$04]                    ; LUT1
   260 000000                            TyVKY_BM0_START_ADDY_L =    $D101  [53505/$D101]
   261 000000                            TyVKY_BM0_START_ADDY_M =    $D102  [53506/$D102]
   262 000000                            TyVKY_BM0_START_ADDY_H =    $D103  [53507/$D103]
   263 000000                            TyVKY_BM1_CTRL_REG =        $D108  [53512/$D108]
   264 000000                            BM1_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   265 000000                            BM1_LUT0        =           $02  [2/$02]                    ; LUT0
   266 000000                            BM1_LUT1        =           $04  [4/$04]                    ; LUT1
   267 000000                            TyVKY_BM1_START_ADDY_L =    $D109  [53513/$D109]
   268 000000                            TyVKY_BM1_START_ADDY_M =    $D10A  [53514/$D10A]
   269 000000                            TyVKY_BM1_START_ADDY_H =    $D10B  [53515/$D10B]
   270 000000                            TyVKY_BM2_CTRL_REG =        $D110  [53520/$D110]
   271 000000                            BM2_Ctrl        =           $01  [1/$01]                    ; Enable the BM0
   272 000000                            BM2_LUT0        =           $02  [2/$02]                    ; LUT0
   273 000000                            BM2_LUT1        =           $04  [4/$04]                    ; LUT1
   274 000000                            BM2_LUT2        =           $08  [8/$08]                    ; LUT2
   275 000000                            TyVKY_BM2_START_ADDY_L =    $D111  [53521/$D111]
   276 000000                            TyVKY_BM2_START_ADDY_M =    $D112  [53522/$D112]
   277 000000                            TyVKY_BM2_START_ADDY_H =    $D113  [53523/$D113]
   278 000000                            TyVKY_TL_CTRL0  =           $D200  [53760/$D200]
   279 000000                            TILE_Enable     =           $01  [1/$01]
   280 000000                            TILE_LUT0       =           $02  [2/$02]
   281 000000                            TILE_LUT1       =           $04  [4/$04]
   282 000000                            TILE_LUT2       =           $08  [8/$08]
   283 000000                            TILE_SIZE       =           $10  [16/$10]                   ; 0 -> 16x16, 0 -> 8x8
   284 000000                            TL0_CONTROL_REG =           $D200  [53760/$D200]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   285 000000                            TL0_START_ADDY_L =          $D201  [53761/$D201]            ; Not USed right now - Starting Address to where is the MAP
   286 000000                            TL0_START_ADDY_M =          $D202  [53762/$D202]
   287 000000                            TL0_START_ADDY_H =          $D203  [53763/$D203]
   288 000000                            TL0_MAP_X_SIZE_L =          $D204  [53764/$D204]            ; The Size X of the Map
   289 000000                            TL0_MAP_X_SIZE_H =          $D205  [53765/$D205]
   290 000000                            TL0_MAP_Y_SIZE_L =          $D206  [53766/$D206]            ; The Size Y of the Map
   291 000000                            TL0_MAP_Y_SIZE_H =          $D207  [53767/$D207]
   292 000000                            TL0_MAP_X_POS_L =           $D208  [53768/$D208]            ; The Position X of the Map
   293 000000                            TL0_MAP_X_POS_H =           $D209  [53769/$D209]
   294 000000                            TL0_MAP_Y_POS_L =           $D20A  [53770/$D20A]            ; The Position Y of the Map
   295 000000                            TL0_MAP_Y_POS_H =           $D20B  [53771/$D20B]
   296 000000                            TL1_CONTROL_REG =           $D20C  [53772/$D20C]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   297 000000                            TL1_START_ADDY_L =          $D20D  [53773/$D20D]            ; Not USed right now - Starting Address to where is the MAP
   298 000000                            TL1_START_ADDY_M =          $D20E  [53774/$D20E]
   299 000000                            TL1_START_ADDY_H =          $D20F  [53775/$D20F]
   300 000000                            TL1_MAP_X_SIZE_L =          $D210  [53776/$D210]            ; The Size X of the Map
   301 000000                            TL1_MAP_X_SIZE_H =          $D211  [53777/$D211]
   302 000000                            TL1_MAP_Y_SIZE_L =          $D212  [53778/$D212]            ; The Size Y of the Map
   303 000000                            TL1_MAP_Y_SIZE_H =          $D213  [53779/$D213]
   304 000000                            TL1_MAP_X_POS_L =           $D214  [53780/$D214]            ; The Position X of the Map
   305 000000                            TL1_MAP_X_POS_H =           $D215  [53781/$D215]
   306 000000                            TL1_MAP_Y_POS_L =           $D216  [53782/$D216]            ; The Position Y of the Map
   307 000000                            TL1_MAP_Y_POS_H =           $D217  [53783/$D217]
   308 000000                            TL2_CONTROL_REG =           $D218  [53784/$D218]            ; Bit[0] - Enable, Bit[3:1] - LUT Select,
   309 000000                            TL2_START_ADDY_L =          $D219  [53785/$D219]            ; Not USed right now - Starting Address to where is the MAP
   310 000000                            TL2_START_ADDY_M =          $D21A  [53786/$D21A]
   311 000000                            TL2_START_ADDY_H =          $D21B  [53787/$D21B]
   312 000000                            TL2_MAP_X_SIZE_L =          $D21C  [53788/$D21C]            ; The Size X of the Map
   313 000000                            TL2_MAP_X_SIZE_H =          $D21D  [53789/$D21D]
   314 000000                            TL2_MAP_Y_SIZE_L =          $D21E  [53790/$D21E]            ; The Size Y of the Map
   315 000000                            TL2_MAP_Y_SIZE_H =          $D21F  [53791/$D21F]
   316 000000                            TL2_MAP_X_POS_L =           $D220  [53792/$D220]            ; The Position X of the Map
   317 000000                            TL2_MAP_X_POS_H =           $D221  [53793/$D221]
   318 000000                            TL2_MAP_Y_POS_L =           $D222  [53794/$D222]            ; The Position Y of the Map
   319 000000                            TL2_MAP_Y_POS_H =           $D223  [53795/$D223]
   320 000000                            TILE_MAP_ADDY0_L =          $D280  [53888/$D280]
   321 000000                            TILE_MAP_ADDY0_M =          $D281  [53889/$D281]
   322 000000                            TILE_MAP_ADDY0_H =          $D282  [53890/$D282]
   323 000000                            TILE_MAP_ADDY0_CFG =        $D283  [53891/$D283]
   324 000000                            TILE_MAP_ADDY1  =           $D284  [53892/$D284]
   325 000000                            TILE_MAP_ADDY2  =           $D288  [53896/$D288]
   326 000000                            TILE_MAP_ADDY3  =           $D28C  [53900/$D28C]
   327 000000                            TILE_MAP_ADDY4  =           $D290  [53904/$D290]
   328 000000                            TILE_MAP_ADDY5  =           $D294  [53908/$D294]
   329 000000                            TILE_MAP_ADDY6  =           $D298  [53912/$D298]
   330 000000                            TILE_MAP_ADDY7  =           $D29C  [53916/$D29C]
   331 000000                            XYMATH_CTRL_REG =           $D300  [54016/$D300]            ; Reserved
   332 000000                            XYMATH_ADDY_L   =           $D301  [54017/$D301]            ; W
   333 000000                            XYMATH_ADDY_M   =           $D302  [54018/$D302]            ; W
   334 000000                            XYMATH_ADDY_H   =           $D303  [54019/$D303]            ; W
   335 000000                            XYMATH_ADDY_POSX_L =        $D304  [54020/$D304]            ; R/W
   336 000000                            XYMATH_ADDY_POSX_H =        $D305  [54021/$D305]            ; R/W
   337 000000                            XYMATH_ADDY_POSY_L =        $D306  [54022/$D306]            ; R/W
   338 000000                            XYMATH_ADDY_POSY_H =        $D307  [54023/$D307]            ; R/W
   339 000000                            XYMATH_BLOCK_OFF_L =        $D308  [54024/$D308]            ; R Only - Low Block Offset
   340 000000                            XYMATH_BLOCK_OFF_H =        $D309  [54025/$D309]            ; R Only - Hi Block Offset
   341 000000                            XYMATH_MMU_BLOCK =          $D30A  [54026/$D30A]            ; R Only - Which MMU Block
   342 000000                            XYMATH_ABS_ADDY_L =         $D30B  [54027/$D30B]            ; Low Absolute Results
   343 000000                            XYMATH_ABS_ADDY_M =         $D30C  [54028/$D30C]            ; Mid Absolute Results
   344 000000                            XYMATH_ABS_ADDY_H =         $D30D  [54029/$D30D]            ; Hi Absolute Results
   345 000000                            SPRITE_Ctrl_Enable =        $01  [1/$01]
   346 000000                            SPRITE_LUT0     =           $02  [2/$02]
   347 000000                            SPRITE_LUT1     =           $04  [4/$04]
   348 000000                            SPRITE_DEPTH0   =           $08  [8/$08]                    ; 00 = Total Front - 01 = In between L0 and L1, 10 = In between L1 and L2, 11 = Total Back
   349 000000                            SPRITE_DEPTH1   =           $10  [16/$10]
   350 000000                            SPRITE_SIZE0    =           $20  [32/$20/" "]               ; 00 = 32x32 - 01 = 24x24 - 10 = 16x16 - 11 = 8x8
   351 000000                            SPRITE_SIZE1    =           $40  [64/$40/"@"]
   352 000000                            SP0_Ctrl        =           $D900  [55552/$D900]
   353 000000                            SP0_Addy_L      =           $D901  [55553/$D901]
   354 000000                            SP0_Addy_M      =           $D902  [55554/$D902]
   355 000000                            SP0_Addy_H      =           $D903  [55555/$D903]
   356 000000                            SP0_X_L         =           $D904  [55556/$D904]
   357 000000                            SP0_X_H         =           $D905  [55557/$D905]
   358 000000                            SP0_Y_L         =           $D906  [55558/$D906]            ; In the Jr, only the L is used (200 & 240)
   359 000000                            SP0_Y_H         =           $D907  [55559/$D907]            ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   360 000000;                                                                                       ;SP1_Ctrl           = $D908
   361 000000;                                                                                       ;SP1_Addy_L         = $D909
   362 000000;                                                                                       ;SP1_Addy_M         = $D90A
   363 000000;                                                                                       ;SP1_Addy_H         = $D90B
   364 000000;                                                                                       ;SP1_X_L            = $D90C
   365 000000;                                                                                       ;SP1_X_H            = $D90D
   366 000000;                                                                                       ;SP1_Y_L            = $D90E  ; In the Jr, only the L is used (200 & 240)
   367 000000;                                                                                       ;SP1_Y_H            = $D90F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   368 000000;                                                                                       ;SP2_Ctrl           = $D910
   369 000000;                                                                                       ;SP2_Addy_L         = $D911
   370 000000;                                                                                       ;SP2_Addy_M         = $D912
   371 000000;                                                                                       ;SP2_Addy_H         = $D913
   372 000000;                                                                                       ;SP2_X_L            = $D914
   373 000000;                                                                                       ;SP2_X_H            = $D915
   374 000000;                                                                                       ;SP2_Y_L            = $D916  ; In the Jr, only the L is used (200 & 240)
   375 000000;                                                                                       ;SP2_Y_H            = $D917  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   376 000000;                                                                                       ;SP3_Ctrl           = $D918
   377 000000;                                                                                       ;SP3_Addy_L         = $D919
   378 000000;                                                                                       ;SP3_Addy_M         = $D91A
   379 000000;                                                                                       ;SP3_Addy_H         = $D91B
   380 000000;                                                                                       ;SP3_X_L            = $D91C
   381 000000;                                                                                       ;SP3_X_H            = $D91D
   382 000000;                                                                                       ;SP3_Y_L            = $D91E  ; In the Jr, only the L is used (200 & 240)
   383 000000;                                                                                       ;SP3_Y_H            = $D91F  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   384 000000;                                                                                       ;SP4_Ctrl           = $D920
   385 000000;                                                                                       ;SP4_Addy_L         = $D921
   386 000000;                                                                                       ;SP4_Addy_M         = $D922
   387 000000;                                                                                       ;SP4_Addy_H         = $D923
   388 000000;                                                                                       ;SP4_X_L            = $D924
   389 000000;                                                                                       ;SP4_X_H            = $D925
   390 000000;                                                                                       ;SP4_Y_L            = $D926  ; In the Jr, only the L is used (200 & 240)
   391 000000;                                                                                       ;SP4_Y_H            = $D927  ; Always Keep @ Zero '0' because in Vicky the value is still considered a 16bits value
   392 000000                            TyVKY_LUT0      =           $D000  [53248/$D000]            ; IO Page 1 -$D000 - $D3FF
   393 000000                            TyVKY_LUT1      =           $D400  [54272/$D400]            ; IO Page 1 -$D400 - $D7FF
   394 000000                            TyVKY_LUT2      =           $D800  [55296/$D800]            ; IO Page 1 -$D800 - $DBFF
   395 000000                            TyVKY_LUT3      =           $DC00  [56320/$DC00]            ; IO Page 1 -$DC00 - $DFFF
   396 000000
   397 000000
   398 000000
   399 000000                            DMA_CTRL_REG    =           $DF00  [57088/$DF00]
   400 000000                            DMA_CTRL_Enable =           $01  [1/$01]
   401 000000                            DMA_CTRL_1D_2D  =           $02  [2/$02]
   402 000000                            DMA_CTRL_Fill   =           $04  [4/$04]
   403 000000                            DMA_CTRL_Int_En =           $08  [8/$08]
   404 000000;                                                                                       ;DMA_CTRL_NotUsed0   = $10
   405 000000;                                                                                       ;DMA_CTRL_NotUsed1   = $20
   406 000000;                                                                                       ;DMA_CTRL_NotUsed2   = $40
   407 000000                            DMA_CTRL_Start_Trf =        $80  [128/$80/"?"]
   408 000000                            DMA_DATA_2_WRITE =          $DF01  [57089/$DF01]            ; Write Only
   409 000000                            DMA_STATUS_REG  =           $DF01  [57089/$DF01]            ; Read Only
   410 000000                            DMA_STATUS_TRF_IP =         $80  [128/$80/"?"]              ; Transfer in Progress
   411 000000;                                                                                       ;DMA_RESERVED_0      = $DF02
   412 000000;                                                                                       ;DMA_RESERVED_1      = $DF03
   413 000000                            DMA_SOURCE_ADDY_L =         $DF04  [57092/$DF04]
   414 000000                            DMA_SOURCE_ADDY_M =         $DF05  [57093/$DF05]
   415 000000                            DMA_SOURCE_ADDY_H =         $DF06  [57094/$DF06]
   416 000000;                                                                                       ;DMA_RESERVED_2      = $DF07
   417 000000                            DMA_DEST_ADDY_L =           $DF08  [57096/$DF08]
   418 000000                            DMA_DEST_ADDY_M =           $DF09  [57097/$DF09]
   419 000000                            DMA_DEST_ADDY_H =           $DF0A  [57098/$DF0A]
   420 000000;                                                                                       ;DMA_RESERVED_3      = $DF0B
   421 000000                            DMA_SIZE_1D_L   =           $DF0C  [57100/$DF0C]
   422 000000                            DMA_SIZE_1D_M   =           $DF0D  [57101/$DF0D]
   423 000000                            DMA_SIZE_1D_H   =           $DF0E  [57102/$DF0E]
   424 000000;                                                                                       ;DMA_RESERVED_4      = $DF0F
   425 000000                            DMA_SIZE_X_L    =           $DF0C  [57100/$DF0C]
   426 000000                            DMA_SIZE_X_H    =           $DF0D  [57101/$DF0D]
   427 000000                            DMA_SIZE_Y_L    =           $DF0E  [57102/$DF0E]
   428 000000                            DMA_SIZE_Y_H    =           $DF0F  [57103/$DF0F]
   429 000000                            DMA_SRC_STRIDE_X_L =        $DF10  [57104/$DF10]
   430 000000                            DMA_SRC_STRIDE_X_H =        $DF11  [57105/$DF11]
   431 000000                            DMA_DST_STRIDE_Y_L =        $DF12  [57106/$DF12]
   432 000000                            DMA_DST_STRIDE_Y_H =        $DF13  [57107/$DF13]
   433 000000;                                                                                       ;DMA_RESERVED_5      = $DF14
   434 000000;                                                                                       ;DMA_RESERVED_6      = $DF15
   435 000000;                                                                                       ;DMA_RESERVED_7      = $DF16
   436 000000;                                                                                       ;DMA_RESERVED_8      = $DF17
   437 000000
   438 000000
   439 000000;                                                                                       ;C256_Jr_SID_def.asm
   440 000000
   441 000000                            SID_L_V1_FREQ_LO =          $D400  [54272/$D400]            ;SID - L - Voice 1 (Write Only) - FREQ LOW
   442 000000                            SID_L_V1_FREQ_HI =          $D401  [54273/$D401]            ;SID - L - Voice 1 (Write Only) - FREQ HI
   443 000000                            SID_L_V1_PW_LO  =           $D402  [54274/$D402]            ;SID - L - Voice 1 (Write Only) - PW LOW
   444 000000                            SID_L_V1_PW_HI  =           $D403  [54275/$D403]            ;SID - L - Voice 1 (Write Only) - PW HI
   445 000000                            SID_L_V1_CTRL   =           $D404  [54276/$D404]            ;SID - L - Voice 1 (Write Only) - CTRL REG
   446 000000                            SID_L_V1_ATCK_DECY =        $D405  [54277/$D405]            ;SID - L - Voice 1 (Write Only) - ATTACK / DECAY
   447 000000                            SID_L_V1_SSTN_RLSE =        $D406  [54278/$D406]            ;SID - L - Voice 1 (Write Only) - SUSTAIN / RELEASE
   448 000000                            SID_L_V2_FREQ_LO =          $D407  [54279/$D407]            ;SID - L - Voice 2 (Write Only) - FREQ LOW
   449 000000                            SID_L_V2_FREQ_HI =          $D408  [54280/$D408]            ;SID - L - Voice 2 (Write Only) - FREQ HI
   450 000000                            SID_L_V2_PW_LO  =           $D409  [54281/$D409]            ;SID - L - Voice 2 (Write Only) - PW LOW
   451 000000                            SID_L_V2_PW_HI  =           $D40A  [54282/$D40A]            ;SID - L - Voice 2 (Write Only) - PW HI
   452 000000                            SID_L_V2_CTRL   =           $D40B  [54283/$D40B]            ;SID - L - Voice 2 (Write Only) - CTRL REG
   453 000000                            SID_L_V2_ATCK_DECY =        $D40C  [54284/$D40C]            ;SID - L - Voice 2 (Write Only) - ATTACK / DECAY
   454 000000                            SID_L_V2_SSTN_RLSE =        $D40D  [54285/$D40D]            ;SID - L - Voice 2 (Write Only) - SUSTAIN / RELEASE
   455 000000                            SID_L_V3_FREQ_LO =          $D40E  [54286/$D40E]            ;SID - L - Voice 3 (Write Only) - FREQ LOW
   456 000000                            SID_L_V3_FREQ_HI =          $D40F  [54287/$D40F]            ;SID - L - Voice 3 (Write Only) - FREQ HI
   457 000000                            SID_L_V3_PW_LO  =           $D410  [54288/$D410]            ;SID - L - Voice 3 (Write Only) - PW LOW
   458 000000                            SID_L_V3_PW_HI  =           $D411  [54289/$D411]            ;SID - L - Voice 3 (Write Only) - PW HI
   459 000000                            SID_L_V3_CTRL   =           $D412  [54290/$D412]            ;SID - L - Voice 3 (Write Only) - CTRL REG
   460 000000                            SID_L_V3_ATCK_DECY =        $D413  [54291/$D413]            ;SID - L - Voice 3 (Write Only) - ATTACK / DECAY
   461 000000                            SID_L_V3_SSTN_RLSE =        $D414  [54292/$D414]            ;SID - L - Voice 3 (Write Only) - SUSTAIN / RELEASE
   462 000000                            SID_L_FC_LO     =           $D415  [54293/$D415]            ;SID - L - Filter (Write Only) - FC LOW
   463 000000                            SID_L_FC_HI     =           $D416  [54294/$D416]            ;SID - L - Filter (Write Only) - FC HI
   464 000000                            SID_L_RES_FILT  =           $D417  [54295/$D417]            ;SID - L - Filter (Write Only) - RES / FILT
   465 000000                            SID_L_MODE_VOL  =           $D418  [54296/$D418]            ;SID - L - Filter (Write Only) - MODE / VOL
   466 000000                            SID_L_POT_X     =           $D419  [54297/$D419]            ;SID - L - Misc (Read Only) - POT X (C256 - NOT USED)
   467 000000                            SID_L_POT_Y     =           $D41A  [54298/$D41A]            ;SID - L - Misc (Read Only) - POT Y (C256 - NOT USED)
   468 000000                            SID_L_OSC3_RND  =           $D41B  [54299/$D41B]            ;SID - L - Misc (Read Only) - OSC3 / RANDOM
   469 000000                            SID_L_ENV3      =           $D41C  [54300/$D41C]            ;SID - L - Misc (Read Only)  - ENV3
   470 000000;                                                                                       ;SID_L_NOT_USED0     = $D41D ;SID - L - NOT USED
   471 000000;                                                                                       ;SID_L_NOT_USED1     = $D41E ;SID - L - NOT USED
   472 000000;                                                                                       ;SID_L_NOT_USED2     = $D41F ;SID - L - NOT USED
   473 000000                            SID_R_V1_FREQ_LO =          $D500  [54528/$D500]            ;SID - R - Voice 1 (Write Only) - FREQ LOW
   474 000000                            SID_R_V1_FREQ_HI =          $D501  [54529/$D501]            ;SID - R - Voice 1 (Write Only) - FREQ HI
   475 000000                            SID_R_V1_PW_LO  =           $D502  [54530/$D502]            ;SID - R - Voice 1 (Write Only) - PW LOW
   476 000000                            SID_R_V1_PW_HI  =           $D503  [54531/$D503]            ;SID - R - Voice 1 (Write Only) - PW HI
   477 000000                            SID_R_V1_CTRL   =           $D504  [54532/$D504]            ;SID - R - Voice 1 (Write Only) - CTRL REG
   478 000000                            SID_R_V1_ATCK_DECY =        $D505  [54533/$D505]            ;SID - R - Voice 1 (Write Only) - ATTACK / DECAY
   479 000000                            SID_R_V1_SSTN_RLSE =        $D506  [54534/$D506]            ;SID - R - Voice 1 (Write Only) - SUSTAIN / RELEASE
   480 000000                            SID_R_V2_FREQ_LO =          $D507  [54535/$D507]            ;SID - R - Voice 2 (Write Only) - FREQ LOW
   481 000000                            SID_R_V2_FREQ_HI =          $D508  [54536/$D508]            ;SID - R - Voice 2 (Write Only) - FREQ HI
   482 000000                            SID_R_V2_PW_LO  =           $D509  [54537/$D509]            ;SID - R - Voice 2 (Write Only) - PW LOW
   483 000000                            SID_R_V2_PW_HI  =           $D50A  [54538/$D50A]            ;SID - R - Voice 2 (Write Only) - PW HI
   484 000000                            SID_R_V2_CTRL   =           $D50B  [54539/$D50B]            ;SID - R - Voice 2 (Write Only) - CTRL REG
   485 000000                            SID_R_V2_ATCK_DECY =        $D50C  [54540/$D50C]            ;SID - R - Voice 2 (Write Only) - ATTACK / DECAY
   486 000000                            SID_R_V2_SSTN_RLSE =        $D50D  [54541/$D50D]            ;SID - R - Voice 2 (Write Only) - SUSTAIN / RELEASE
   487 000000                            SID_R_V3_FREQ_LO =          $D50E  [54542/$D50E]            ;SID - R - Voice 3 (Write Only) - FREQ LOW
   488 000000                            SID_R_V3_FREQ_HI =          $D50F  [54543/$D50F]            ;SID - R - Voice 3 (Write Only) - FREQ HI
   489 000000                            SID_R_V3_PW_LO  =           $D510  [54544/$D510]            ;SID - R - Voice 3 (Write Only) - PW LOW
   490 000000                            SID_R_V3_PW_HI  =           $D511  [54545/$D511]            ;SID - R - Voice 3 (Write Only) - PW HI
   491 000000                            SID_R_V3_CTRL   =           $D512  [54546/$D512]            ;SID - R - Voice 3 (Write Only) - CTRL REG
   492 000000                            SID_R_V3_ATCK_DECY =        $D513  [54547/$D513]            ;SID - R - Voice 3 (Write Only) - ATTACK / DECAY
   493 000000                            SID_R_V3_SSTN_RLSE =        $D514  [54548/$D514]            ;SID - R - Voice 3 (Write Only) - SUSTAIN / RELEASE
   494 000000                            SID_R_FC_LO     =           $D515  [54549/$D515]            ;SID - R - Filter (Write Only) - FC LOW
   495 000000                            SID_R_FC_HI     =           $D516  [54550/$D516]            ;SID - R - Filter (Write Only) - FC HI
   496 000000                            SID_R_RES_FILT  =           $D517  [54551/$D517]            ;SID - R - Filter (Write Only) - RES / FILT
   497 000000                            SID_R_MODE_VOL  =           $D518  [54552/$D518]            ;SID - R - Filter (Write Only) - MODE / VOL
   498 000000                            SID_R_POT_X     =           $D519  [54553/$D519]            ;SID - R - Misc (Read Only) - POT X (C256 - NOT USED)
   499 000000                            SID_R_POT_Y     =           $D51A  [54554/$D51A]            ;SID - R - Misc (Read Only) - POT Y (C256 - NOT USED)
   500 000000                            SID_R_OSC3_RND  =           $D51B  [54555/$D51B]            ;SID - R - Misc (Read Only) - OSC3 / RANDOM
   501 000000                            SID_R_ENV3      =           $D51C  [54556/$D51C]            ;SID - R - Misc (Read Only)  - ENV3
   502 000000;                                                                                       ;SID_R_NOT_USED0     = $D51D ;SID - R - NOT USED
   503 000000;                                                                                       ;SID_R_NOT_USED1     = $D51E ;SID - R - NOT USED
   504 000000;                                                                                       ;SID_R_NOT_USED2     = $D51F ;SID - R - NOT USED
   505 000000
   506 000000                            PSG_INT_L_PORT  =           $D600  [54784/$D600]            ; Control register for the SN76489
   507 000000                            PSG_INT_R_PORT  =           $D610  [54800/$D610]            ; Control register for the SN76489
   508 000000
   509 000000
   510 000000                            VECTORS_BEGIN   =           $FFFA  [65530/$FFFA]            ;0 Byte  Interrupt vectors
   511 000000                            VECTOR_NMI      =           $FFFA  [65530/$FFFA]            ;2 Bytes Emulation mode interrupt handler
   512 000000                            VECTOR_RESET    =           $FFFC  [65532/$FFFC]            ;2 Bytes Emulation mode interrupt handler
   513 000000                            VECTOR_IRQ      =           $FFFE  [65534/$FFFE]            ;2 Bytes Emulation mode interrupt handler
   514 000000;                                                                                       ;ISR_BEGIN       = $FF00 ; Byte  Beginning of CPU vectors in Direct page
   515 000000;                                                                                       ;HRESET          = $FF00 ;16 Bytes Handle RESET asserted. Reboot computer and re-initialize the kernel.
   516 000000;                                                                                       ;HCOP            = $FF10 ;16 Bytes Handle the COP instruction. Program use; not used by OS
   517 000000;                                                                                       ;HBRK            = $FF20 ;16 Bytes Handle the BRK instruction. Returns to BASIC Ready prompt.
   518 000000;                                                                                       ;HABORT          = $FF30 ;16 Bytes Handle ABORT asserted. Return to Ready prompt with an error message.
   519 000000;                                                                                       ;HNMI            = $FF40 ;32 Bytes Handle NMI
   520 000000;                                                                                       ;HIRQ            = $FF60 ;32 Bytes Handle IRQ
   521 000000
   522 000000
   523 000000
   524 000000                            KEYBOARD_SC_TMP =           $20  [32/$20/" "]
   525 000000                            KBD_MSE_CTRL_REG =          $D640  [54848/$D640]
   526 000000                            KBD_Write_Strobe =          $02  [2/$02]
   527 000000                            MS_Write_Strobe =           $08  [8/$08]
   528 000000                            KBD_FIFO_CLEAR  =           $10  [16/$10]                   ; Dump entire FIFO, set to 1 and then back to 0
   529 000000                            MSE_FIFO_CLEAR  =           $20  [32/$20/" "]               ; Dump entire FIFO, set to 1 and then back to 0
   530 000000                            KBD_MS_WR_DATA_REG =        $D641  [54849/$D641]            ; Data to Send to Keyboard or Mouse
   531 000000                            KBD_RD_SCAN_REG =           $D642  [54850/$D642]            ; DATA Out from KBD FIFO
   532 000000                            MS_RD_SCAN_REG  =           $D643  [54851/$D643]            ; DATA Out from MSE FIFO
   533 000000                            KBD_MS_RD_STATUS =          $D644  [54852/$D644]            ; Keyboard RD/WR Status
   534 000000                            KBD_FIFO_Empty  =           $01  [1/$01]                    ; Set when Keyboard FIFO is empty
   535 000000                            MSE_FIFO_Empty  =           $02  [2/$02]                    ; Set when Mouse FIFO is empty
   536 000000                            MS_Stat_Tx_Error_No_Ack =   $10  [16/$10]
   537 000000                            MS_Stat_Tx_Ack  =           $20  [32/$20/" "]               ; When 1, it ack the Tx
   538 000000                            KBD_Stat_Tx_Error_No_Ack =  $40  [64/$40/"@"]
   539 000000                            KBD_Stat_Tx_Ack =           $80  [128/$80/"?"]              ; When 1, it ack the Tx
   540 000000                            KBD_MSE_NOT_USED =          $D645  [54853/$D645]            ;       ; Reads as 0
   541 000000                            KBD_FIFO_BYTE_CNT =         $D646  [54854/$D646]            ; Number of Bytes in the Keyboard FIFO
   542 000000                            MSE_FIFO_BYTE_CNT =         $D647  [54855/$D647]            ; Number of Bytes in the Mouse FIFO
   543 000000
   544 000000
   545 000000
   546 000000                            TEXT_LUT_FG     =           $D800  [55296/$D800]
   547 000000                            TEXT_LUT_BG     =           $D840  [55360/$D840]
   548 000000                            FONT_MEM        =           $C000  [49152/$C000]            ; IO Page 1
   549 000000                            TEXT_MEM        =           $C000  [49152/$C000]            ; IO Page 2
   550 000000                            COLOR_MEM       =           $C000  [49152/$C000]            ; IO Page 3
   551 000000                            DIPSWITCH       =           $D670  [54896/$D670]
   552 000000                            CODEC_LOW       =           $D620  [54816/$D620]
   553 000000                            CODEC_HI        =           $D621  [54817/$D621]
   554 000000                            CODEC_CTRL      =           $D622  [54818/$D622]
   555 000000
   556 000000                            RNG_DAT_LO      =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   557 000000                            RNG_DAT_HI      =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   558 000000                            RNG_SEED_LO     =           $D6A4  [54948/$D6A4]            ; Low Part of 16Bit RNG Generator
   559 000000                            RNG_SEED_HI     =           $D6A5  [54949/$D6A5]            ; Hi Part of 16Bit RNG Generator
   560 000000                            RNG_CTRL        =           $D6A6  [54950/$D6A6]
   561 000000                            RNG_SEED_LD     =           $02  [2/$02]
   562 000000                            RNG_ENABLE      =           $01  [1/$01]
   563 000000                            RNG_STAT        =           $D6A6  [54950/$D6A6]
   564 000000                            RNG_LFSR_DONE   =           $80  [128/$80/"?"]              ; ???indicates that Output = SEED Database
   565 000000
   566 000000                            FOENIX_MACHINE_ID =         $D6A7  [54951/$D6A7]
   567 000000
   568 000000
   569 000000
   570 000000;                                                                                       ; tilemap base = $d200
   571 000000                            TVKY_TILEMAP    =           $D200  [53760/$D200]
   572 000000                                            struct      TILEMAP_TYPE(actrl,aaddr,axsize,aysize,axpos,aypos)
   587 000000
   588 000000;                                                                                       ; bitmap base = $d100
   589 000000                            TVKY_BITMAP     =           $D100  [53504/$D100]
   590 000000                                            struct      BITMAP_TYPE(actrl,aaddr)
   597 000000
   598 000000;                                                                                       ; tileset base = $d280
   599 000000                            TVKY_TILESET    =           $D280  [53888/$D280]
   600 000000                                            struct      TILESET_TYPE(aaddr,aconfig)
   607 000000
   608 000000;                                                                                       ; sprite base = $d900
   609 000000                            TVKY_SPRITE     =           $D900  [55552/$D900]
   610 000000                                            struct      SPRITE_TYPE(actrl,aaddr,axpos,aypos)
   621 000000
   622 000000;                                                                                       ; left sid base = $d400
   623 000000                            SID_LEFT        =           $D400  [54272/$D400]
   624 000000;                                                                                       ; right sid base = $d500
   625 000000                            SID_RIGHT       =           $D500  [54528/$D500]
   626 000000
   627 000000                                            include     'f256jrlib.asm'
including source file 'f256jrlib.asm'
   628 000000                                            const       w6522s=0  [0/$00]
   629 000000                                            var         dopush=0  [0/$00]
   630 000000
   631 000000                                            const       FOENIXMODELS = enum( C256FMX, C256U, F256JR, A2560DEV, GENX, C256UP, RES1, RES2, A2560X, A2560U, A2560M, A2560K)  [12/$0C items]
   632 000000                                            const       FNX_SCREEN_WIDTH = 320 , FNX_SCREEN_HEIGHT = 240 , FNX_BORDER_WIDTH = 0 , FNX_BORDER_HEIGHT = 0 , FNX_SCREEN_COLUMNS = (FNX_SCREEN_WIDTH-FNX_BORDER_WIDTH) / 8 , FNX_SCREEN_LINES = (FNX_SCREEN_HEIGHT-FNX_BORDER_HEIGHT) / 8  [320/$0140,240/$F0/"d",0/$00,0/$00,40/$28/"(",30/$1E]
   633 000000
   634 000000                            VKY_SCREEN_MEMORY =         $C000  [49152/$C000]            ; character memory in io page 2, color memory in io page 3
   635 000000                            VKY_FONT_MEMORY =           $C000  [49152/$C000]            ; address of screen font memory in io page 1
   636 000000                            VKY_TEXT_MEMORY =           $C000  [49152/$C000]            ; address of screen text memory in io page 2
   637 000000                            VKY_COLOR_MEMORY =          $C000  [49152/$C000]            ; address of screen color memory in io page 3
   638 000000
   639 000000                                            define      jeq(aaddr) 'beq ~pcnext2 : jmp aaddr'
   640 000000                                            define      jne(aaddr) 'bne ~pcnext2 : jmp aaddr'
   641 000000                                            define      jlt(aaddr) 'blt ~pcnext2 : jmp aaddr'
   642 000000                                            define      jge(aaddr) 'bge ~pcnext2 : jmp aaddr'
   643 000000                                            define      jcc(aaddr) 'bcc ~pcnext2 : jmp aaddr'
   644 000000                                            define      jcs(aaddr) 'bcs ~pcnext2 : jmp aaddr'
   645 000000                                            define      jmi(aaddr) 'bmi ~pcnext2 : jmp aaddr'
   646 000000                                            define      jpl(aaddr) 'bpl ~pcnext2 : jmp aaddr'
   647 000000                                            define      jvc(aaddr) 'bvc ~pcnext2 : jmp aaddr'
   648 000000                                            define      jvs(aaddr) 'bvs ~pcnext2 : jmp aaddr'
   649 000000
   650 000000                                            define      DoC64COLOR(aforeground,abackground) (C64COLOR.aforeground<<4) | C64COLOR.abackground
   651 000000                                            define      PushAXY 'pha : phx : phy'
   652 000000                                            define      PullYXA 'ply : plx : pla'
   653 000000                                            define      SetMMUIO 'stz MMU_IO_CTRL'
   654 000000                                            define      SetMMUGFX 'lda #MMU_IO_PAGE_1 : sta MMU_IO_CTRL'
   655 000000                                            define      SetMMUTEXT 'lda #MMU_IO_TEXT : sta MMU_IO_CTRL'
   656 000000                                            define      SetMMUCOLOR 'lda #MMU_IO_COLOR : sta MMU_IO_CTRL'
   657 000000                                            define      PushMMUIO 'lda MMU_IO_CTRL : pha'
   658 000000                                            define      PullMMUIO 'pla : sta MMU_IO_CTRL'
   659 000000                                            define      UnlockMMU 'lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL'
   660 000000                                            define      LockMMU 'lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL'
   661 000000                                            define      SetMMUBank(abank,aaddr) 'lda #((aaddr)/$2000) : sta MMU_MEM_Bank_0+abank'
   662 000000;                                                                                       ;=====================================================================================
   663 00FFF9                                            section     add('VECTORS',$fff9,$ffff,save=1)
updated section 'VECTORS' $00FFF9-00FFFF [7]
current section: VECTORS, next free address: $00FFF9
   664 00FFF9:40                         F256_DUMMYIRQ   rti
   665 00FFFA:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; nmi
   666 00FFFC:BE E5                                      word        F256_RESET  [size=2/$02]        ; reset
   667 00FFFE:F9 FF                                      word        F256_DUMMYIRQ  [size=2/$02]     ; irq
   668 010000                                            endsection    [65535/$FFFF]
   669 010000
   670 000020                                            section     add('ZPAGE',$0020,$00ef,type='bss',save=0)
updated section 'ZPAGE' $000020-0000EF [208]
current section: ZPAGE, next free address: $000020
   671 000020:[=16/$10 bytes]            TempIRQ         resb        16
define data constant size=16, fill value 0/$00
   672 000030:[=4/$04 bytes]             TempSrc         resb        4
define data constant size=4, fill value 0/$00
   673 000034:[=4/$04 bytes]             TempDest        resb        4
define data constant size=4, fill value 0/$00
   674 000038:[=16/$10 bytes]            TempZ           resb        16
define data constant size=16, fill value 0/$00
   675 000048:[=1/$01 bytes]             CursorColor     resb        1
define data constant size=1, fill value 0/$00
   676 000049:[=1/$01 bytes]             CursorColumn    resb        1
define data constant size=1, fill value 0/$00
   677 00004A:[=1/$01 bytes]             CursorLine      resb        1
define data constant size=1, fill value 0/$00
   678 00004B:[=2/$02 bytes]             CursorPointer   resw        1
define data constant size=1, fill value 0/$00
   679 00004D
   680 00004D:[=4/$04 bytes]             SOFCounter      resd        1
define data constant size=1, fill value 0/$00
   681 000051                                            endsection    [239/$EF/""]
   682 000051
   683 000200                                            section     add('DATA',$0200,$1fff,size=-1,save=1,file='wkdata.000200.bin')
updated section 'DATA' $000200-001FFF [-1]
current section: DATA, next free address: $000200
   684 000200                                            endsection    [511/$01FF]
   685 000200
   686 000200;                                                                                       ;section add('TEXT',___MAIN_SECTION_NEXT_FREE___,$fff8,size=-1,save=1)
   687 000200;                                                                                       ;endsection
   688 000200
   689 00E000                                            section     add('F256JRLIB',$e000,$fff8,size=-1,save=1,file='wkf256.00e000.bin')
updated section 'F256JRLIB' $00E000-00FFF8 [-1]
current section: F256JRLIB, next free address: $00E000
   690 00E000;                                                                                       ;=====================================================================================
   691 00E000
   692 00E000                                            macro       ConvertParamToA('aparam')
   706 00E000
   707 00E000                                            macro       ConvertParamToX('aparam')
   724 00E000
   725 00E000                                            macro       AssignWord('aaddr',adest)
   733 00E000
   734 00E000                                            macro       AssignLong('aaddr',adest)
   744 00E000
   745 00E000                                            macro       AssignDWord('aaddr',adest)
   757 00E000
   758 00E000                                            macro       SetMMUBlock(acontrol)
   765 00E000
   766 00E000                                            macro       SetCursorColor(acolor)
   769 00E000
   770 00E000;                                                                                       ; hard coded for 80 columns
   771 00E000                                            macro       SetCursorPointer('acolumn','aline')
   785 00E000
   786 00E000                                            macro       Increase_SOF_Counter
   797 00E000
   798 00E000                                            proc        ChrOut
open scope ChrOut, from scope  <<global symbols>>
   799 00E000:48                                         pha
   800 00E001:5A                                         phy
   801 00E002:A8                                         tay
   802 00E003:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   803 00E005:48                                         pha                                         ;<<<="PushMMUIO"
   804 00E006:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   805 00E008:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   806 00E00A:98                                         tya
   807 00E00B:A4 49                                      ldy         CursorColumn  [73/$49/"I"]
   808 00E00D:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   809 00E00F:E6 01                                      inc         MMU_IO_CTRL  [1/$01]
   810 00E011:A5 48                                      lda         CursorColor  [72/$48/"H"]
   811 00E013:91 4B                                      sta         (CursorPointer),y  [75/$4B/"K"]
   812 00E015:C8                                         iny
   813 00E016:C0 28                                      cpy         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   814 00E018:D0 1E                                      bne         +  [57400/$E038]
   815 00E01A:18                                         clc
   816 00E01B:A5 4B                                      lda         CursorPointer  [75/$4B/"K"]
   817 00E01D:69 28                                      adc         #FNX_SCREEN_COLUMNS  [40/$28/"("]
   818 00E01F:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   819 00E021:90 02                                      bcc         ~pcnext2  [57381/$E025]
   820 00E023:E6 4C                                      inc         CursorPointer+1  [76/$4C/"L"]
   821 00E025:A5 4A                                      lda         CursorLine  [74/$4A/"J"]
   822 00E027:1A                                         inc
   823 00E028:C9 1E                                      cmp         #FNX_SCREEN_LINES  [30/$1E]
   824 00E02A:D0 08                                      bne         ++  [57396/$E034]
   825 00E02C:A9 C0                                      lda         #>VKY_TEXT_MEMORY  [192/$C0/"A"]
   826 00E02E:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   827 00E030:A9 00                                      lda         #<VKY_TEXT_MEMORY  [0/$00]      ; always equals 0
   828 00E032:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
   829 00E034                            ++
   830 00E034:85 4A                                      sta         CursorLine  [74/$4A/"J"]
   831 00E036:A0 00                                      ldy         #0  [0/$00]
   832 00E038                            +
   833 00E038:84 49                                      sty         CursorColumn  [73/$49/"I"]
   834 00E03A:68                                         pla
   835 00E03B:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   836 00E03D:7A                                         ply
   837 00E03E:68                                         pla
   838 00E03F:60                                         rts
   839 00E040                                            endproc
end scope ChrOut, restore scope  <<global symbols>>
   840 00E040
   841 00E040                                            proc        ClearScreen
open scope ClearScreen, from scope  <<global symbols>>
   842 00E040:48                                         pha
   843 00E041:DA                                         phx
   844 00E042:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
   845 00E044:48                                         pha                                         ;<<<="PushMMUIO"
   846 00E045
   847 00E045:9C 73 E0                                   stz         WriteAddress  [57459/$E073]     ;lda #<TEXT_MEM
   848 00E048:64 4B                                      stz         CursorPointer  [75/$4B/"K"]     ;sta CursorPointer
   849 00E04A:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   850 00E04C:8D 74 E0                                   sta         WriteAddress+1  [57460/$E074]
   851 00E04F:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
   852 00E051:A9 02                                      lda         #MMU_IO_TEXT  [2/$02]
   853 00E053:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUTEXT"
   854 00E055:A2 20                                      ldx         #' '  [32/$20/" "]
   855 00E057:20 71 E0                                   jsr         WriteLoop  [57457/$E071]
   856 00E05A:9C 73 E0                                   stz         WriteAddress  [57459/$E073]     ;lda #<TEXT_MEM
   857 00E05D:A9 C0                                      lda         #>TEXT_MEM  [192/$C0/"A"]
   858 00E05F:8D 74 E0                                   sta         WriteAddress+1  [57460/$E074]
   859 00E062:A9 03                                      lda         #MMU_IO_COLOR  [3/$03]
   860 00E064:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUCOLOR"
   861 00E066:A6 48                                      ldx         CursorColor  [72/$48/"H"]
   862 00E068:20 71 E0                                   jsr         WriteLoop  [57457/$E071]
   863 00E06B
   864 00E06B:68                                         pla
   865 00E06C:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
   866 00E06E:FA                                         plx
   867 00E06F:68                                         pla
   868 00E070:60                                         rts
   869 00E071
   870 00E071                            WriteLoop
   871 00E071:8A                                         txa
   872 00E072                            WriteAddress    =           *+1  [57459/$E073]
   873 00E072:8D 34 12                                   sta         $1234  [4660/$1234]
   874 00E075:EE 73 E0                                   inc         WriteAddress  [57459/$E073]
   875 00E078:D0 03                                      bne         +  [57469/$E07D]
   876 00E07A:EE 74 E0                                   inc         WriteAddress+1  [57460/$E074]
   877 00E07D                            +
   878 00E07D:AD 73 E0                                   lda         WriteAddress  [57459/$E073]
   879 00E080:C9 C0                                      cmp         #<(TEXT_MEM+80*60)  [192/$C0/"A"]
   880 00E082:D0 ED                                      bne         WriteLoop  [57457/$E071]
   881 00E084:AD 74 E0                                   lda         WriteAddress+1  [57460/$E074]
   882 00E087:C9 D2                                      cmp         #>(TEXT_MEM+80*60)  [210/$D2/"O"]
   883 00E089:D0 E6                                      bne         WriteLoop  [57457/$E071]
   884 00E08B:60                                         rts
   885 00E08C                                            endproc
end scope ClearScreen, restore scope  <<global symbols>>
   886 00E08C
   887 00E08C;                                                                                       ; parameters:
   888 00E08C;                                                                                       ;	<TempSrc>	=	word address of string to print
   889 00E08C;                                                                                       ;	<CursorPointer>	=	word address of screen character/color memory
   890 00E08C                                            proc        PrintAnsiString
open scope PrintAnsiString, from scope  <<global symbols>>
   891 00E08C;                                                                                       ;	pha : phx : phy ;<<<=";	PushAXY"
   892 00E08C
   893 00E08C:A0 00                                      ldy         #0  [0/$00]
   894 00E08E:80 0C                                      bra         Print20  [57500/$E09C]
   895 00E090                            Print10
   896 00E090:C9 1B                                      cmp         #27  [27/$1B]
   897 00E092:90 0D                                      blt         CheckControlCodes  [57505/$E0A1]
   898 00E094:20 00 E0                                   jsr         ChrOut  [57344/$E000]
   899 00E097                            NextByte
   900 00E097:C8                                         iny
   901 00E098:D0 02                                      bne         Print20  [57500/$E09C]
   902 00E09A:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   903 00E09C                            Print20
   904 00E09C:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   905 00E09E:D0 F0                                      bne         Print10  [57488/$E090]
   906 00E0A0;                                                                                       ;	ply : plx : pla ;<<<=";	PullYXA"
   907 00E0A0:60                                         rts
   908 00E0A1
   909 00E0A1                            CheckControlCodes
   910 00E0A1:C9 02                                      cmp         #2  [2/$02]                     ; ctrl-b/set cursor background color
   911 00E0A3:D0 0F                                      bne         +  [57524/$E0B4]
   912 00E0A5:A5 48                                      lda         CursorColor  [72/$48/"H"]
   913 00E0A7:29 F0                                      and         #$f0  [240/$F0/"d"]
   914 00E0A9:85 48                                      sta         CursorColor  [72/$48/"H"]
   915 00E0AB:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   916 00E0AE:05 48                                      ora         CursorColor  [72/$48/"H"]
   917 00E0B0:85 48                                      sta         CursorColor  [72/$48/"H"]
   918 00E0B2:80 E3                                      bra         NextByte  [57495/$E097]
   919 00E0B4                            +
   920 00E0B4:C9 03                                      cmp         #3  [3/$03]                     ; ctrl-c/set cursor color
   921 00E0B6:D0 07                                      bne         +  [57535/$E0BF]
   922 00E0B8:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   923 00E0BB:85 48                                      sta         CursorColor  [72/$48/"H"]
   924 00E0BD:80 D8                                      bra         NextByte  [57495/$E097]
   925 00E0BF                            +
   926 00E0BF:C9 06                                      cmp         #6  [6/$06]                     ; ctrl-f/set cursor foreground color
   927 00E0C1:D0 13                                      bne         +  [57558/$E0D6]
   928 00E0C3:A5 48                                      lda         CursorColor  [72/$48/"H"]
   929 00E0C5:29 0F                                      and         #$0f  [15/$0F]
   930 00E0C7:85 48                                      sta         CursorColor  [72/$48/"H"]
   931 00E0C9:20 E1 E0                                   jsr         GetNextByte  [57569/$E0E1]
   932 00E0CC:0A                                         asl
   933 00E0CD:0A                                         asl
   934 00E0CE:0A                                         asl
   935 00E0CF:0A                                         asl
   936 00E0D0:05 48                                      ora         CursorColor  [72/$48/"H"]
   937 00E0D2:85 48                                      sta         CursorColor  [72/$48/"H"]
   938 00E0D4:80 C1                                      bra         NextByte  [57495/$E097]
   939 00E0D6                            +
   940 00E0D6:C9 0C                                      cmp         #12  [12/$0C]                   ; ctrl-l/clear screen
   941 00E0D8:D0 05                                      bne         +  [57567/$E0DF]
   942 00E0DA:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
   943 00E0DD:80 B8                                      bra         NextByte  [57495/$E097]
   944 00E0DF                            +
   945 00E0DF:60                                         rts
   946 00E0E0:00                         temp            byte        0  [size=1/$01]
   947 00E0E1                            GetNextByte
   948 00E0E1:C8                                         iny
   949 00E0E2:D0 02                                      bne         +  [57574/$E0E6]
   950 00E0E4:E6 31                                      inc         TempSrc+1  [49/$31/"1"]
   951 00E0E6                            +
   952 00E0E6:B1 30                                      lda         (TempSrc),y  [48/$30/"0"]
   953 00E0E8:60                                         rts
   954 00E0E9                                            endproc
end scope PrintAnsiString, restore scope  <<global symbols>>
   955 00E0E9
   956 00E0E9                                            macro       PrintString('astring','acolumn','aline','acolor')
   981 00E0E9
   982 00E0E9;                                                                                       ; parameters
   983 00E0E9;                                                                                       ;	A	=	byte to print
   984 00E0E9;                                                                                       ; returns
   985 00E0E9;                                                                                       ;	Y	=	upper nibble ascii
   986 00E0E9;                                                                                       ;	A	=	lower nibble ascii
   987 00E0E9 *dead code*                                proc        HexByteToASCII
ignoring unused procedure
  1005 00E0E9                                            endproc
  1006 00E0E9
  1007 00E0E9                                            macro       PrintHexByte('avalue','acolumn','aline','acolor')
  1031 00E0E9
  1032 00E0E9                                            macro       PrintHexWord('avalue','acolumn','aline','acolor')
  1063 00E0E9
  1064 00E0E9                                            macro       PrintHexDWord('avalue','acolumn','aline','acolor')
  1107 00E0E9
  1108 00E0E9;                                                                                       ; KeyboardState
  1109 00E0E9;                                                                                       ; shift
  1110 00E0E9;                                                                                       ; ctrl
  1111 00E0E9;                                                                                       ; win
  1112 00E0E9;                                                                                       ; numlk
  1113 00E0E9;                                                                                       ; capslk
  1114 00E0E9;                                                                                       ;   bit
  1115 00E0E9;                                                                                       ;	5  4  3  2  1  0
  1116 00E0E9;                                                                                       ;	|  |  |  |  |  |
  1117 00E0E9;                                                                                       ;	|  |  |  |  |  shift l/r = c0 c1
  1118 00E0E9;                                                                                       ;	|  |  |  |  ----alt l/r  = c2 c3
  1119 00E0E9;                                                                                       ;	|  |  |  ------ctrl l/r  = c4 c5
  1120 00E0E9;                                                                                       ;	|  |  ----------win l/r  = c6 c7
  1121 00E0E9;                                                                                       ;	|  ---------------numlk  = cf
  1122 00E0E9;                                                                                       ;   -----------------capslk  = ce
  1123 00E0E9;                                                                                       ;
  1124 00E0E9                                            const       KEYDOWN=$00, KEYUP=$80  [0/$00,128/$80/"?"]
  1125 00E0E9:00 00                      ScancodeBufferWPos word     0  [size=2/$02]
  1126 00E0EB:00 00                      ScancodeBufferRPos word     0  [size=2/$02]
  1127 00E0ED:00 00                      LastScancode    word        0  [size=2/$02]
  1128 00E0EF:[=128/$80 bytes]           ScancodeBuffer  resb        128,0
define data constant size=128, fill value 0/$00
  1129 00E16F:[=1/$01 bytes]             KeyboardState   resb        1,0
define data constant size=1, fill value 0/$00
  1130 00E170:[=144/$90 bytes]           KeyboardKeyStates resb      $90,KEYUP
define data constant size=144, fill value 128/$80
  1131 00E200                                            const       KEYBOARDSTATES = enum( ALLOFF =%000000, SHIFT =%000001, ALT =%000010, CTRL =%000100, WIN =%001000, NUMLK =%010000, CAPSLK =%100000)  [7/$07 items]
  1132 00E200                                            proc        Init_Keyboard
open scope Init_Keyboard, from scope  <<global symbols>>
  1133 00E200;                                                                                       ; clear keyboard & mouse fifo buffer
  1134 00E200:A9 30                                      lda         #(KBD_FIFO_CLEAR|MSE_FIFO_CLEAR)  [48/$30/"0"]
  1135 00E202:8D 40 D6                                   sta         KBD_MSE_CTRL_REG  [54848/$D640]
  1136 00E205:9C 40 D6                                   stz         KBD_MSE_CTRL_REG  [54848/$D640]
  1137 00E208
  1138 00E208:9C EB E0                                   stz         ScancodeBufferRPos  [57579/$E0EB]
  1139 00E20B:9C E9 E0                                   stz         ScancodeBufferWPos  [57577/$E0E9]
  1140 00E20E:A2 00                                      ldx         #0  [0/$00]
  1141 00E210                            -
  1142 00E210:8D EF E0                                   sta         ScancodeBuffer  [57583/$E0EF]
  1143 00E213:E8                                         inx
  1144 00E214:E0 80                                      cpx         #lobyte(sizeof(ScancodeBuffer))  [128/$80/"?"]
  1145 00E216:D0 F8                                      bne         -  [57872/$E210]
  1146 00E218
  1147 00E218:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; key released
  1148 00E21A:A2 00                                      ldx         #0  [0/$00]
  1149 00E21C                            -
  1150 00E21C:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1151 00E21F:E8                                         inx
  1152 00E220:E0 90                                      cpx         #sizeof(KeyboardKeyStates)  [144/$90/"?"]
  1153 00E222:D0 F8                                      bne         -  [57884/$E21C]
  1154 00E224
  1155 00E224:A9 00                                      lda         #KEYBOARDSTATES.ALLOFF  [0/$00]
  1156 00E226:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1157 00E229
  1158 00E229;                                                                                       ; enable keyboard interrupt
  1159 00E229:AD 6C D6                                   lda         INT_MASK_REG0  [54892/$D66C]
  1160 00E22C:09 FB                                      ora         #~(JR0_INT02_KBD)  [-5/$FFFFFFFB]
  1161 00E22E:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1162 00E231:60                                         rts
  1163 00E232                                            endproc
end scope Init_Keyboard, restore scope  <<global symbols>>
  1164 00E232
  1165 00E232                                            proc        KeyboardIRQ
open scope KeyboardIRQ, from scope  <<global symbols>>
  1166 00E232                            -
  1167 00E232:AD 44 D6                                   lda         KBD_MS_RD_STATUS  [54852/$D644]
  1168 00E235:29 01                                      and         #KBD_FIFO_Empty  [1/$01]
  1169 00E237:D0 1A                                      bne         +  [57939/$E253]
  1170 00E239:AD E9 E0                                   lda         ScancodeBufferWPos  [57577/$E0E9]
  1171 00E23C:AA                                         tax
  1172 00E23D:1A                                         inc
  1173 00E23E:29 7F                                      and         #$7f  [127/$7F/""]
  1174 00E240:CD EB E0                                   cmp         ScancodeBufferRPos  [57579/$E0EB]
  1175 00E243:F0 0B                                      beq         .BufferFull  [57936/$E250]
  1176 00E245:8D E9 E0                                   sta         ScancodeBufferWPos  [57577/$E0E9]
  1177 00E248:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code
  1178 00E24B:9D EF E0                                   sta         ScancodeBuffer,x  [57583/$E0EF]
  1179 00E24E:80 E2                                      bra         -  [57906/$E232]
  1180 00E250
  1181 00E250                            .BufferFull
  1182 00E250:AD 42 D6                                   lda         KBD_RD_SCAN_REG  [54850/$D642]  ; get keyboard scan code and forget it
  1183 00E253                            +
  1184 00E253:60                                         rts
  1185 00E254                                            endproc
end scope KeyboardIRQ, restore scope  <<global symbols>>
  1186 00E254
  1187 00E254;                                                                                       ; returns:
  1188 00E254;                                                                                       ;	A	=	scan code from buffer
  1189 00E254;                                                                                       ;	<carry>	:	clear=scan code in A, set=buffer empty A equals 0
  1190 00E254                                            proc        GetScancode
open scope GetScancode, from scope  <<global symbols>>
  1191 00E254:AD EB E0                                   lda         ScancodeBufferRPos  [57579/$E0EB]
  1192 00E257:CD E9 E0                                   cmp         ScancodeBufferWPos  [57577/$E0E9]
  1193 00E25A:F0 0E                                      beq         BufferEmpty  [57962/$E26A]
  1194 00E25C:DA                                         phx
  1195 00E25D:AA                                         tax
  1196 00E25E:1A                                         inc
  1197 00E25F:29 7F                                      and         #$7f  [127/$7F/""]
  1198 00E261:8D EB E0                                   sta         ScancodeBufferRPos  [57579/$E0EB]
  1199 00E264:BD EF E0                                   lda         ScancodeBuffer,x  [57583/$E0EF]
  1200 00E267:FA                                         plx
  1201 00E268:18                                         clc
  1202 00E269:60                                         rts
  1203 00E26A                            BufferEmpty
  1204 00E26A:A9 00                                      lda         #0  [0/$00]
  1205 00E26C:38                                         sec
  1206 00E26D:60                                         rts
  1207 00E26E                                            endproc
end scope GetScancode, restore scope  <<global symbols>>
  1208 00E26E
  1209 00E26E                                            proc        GetChar
open scope GetChar, from scope  <<global symbols>>
  1210 00E26E:20 54 E2                                   jsr         GetScancode  [57940/$E254]
  1211 00E271:90 01                                      bcc         +  [57972/$E274]
  1212 00E273;                                                                                       ; buffer empty
  1213 00E273:60                                         rts
  1214 00E274                            +
  1215 00E274:C9 90                                      cmp         #$90  [144/$90/"?"]             ; scan code can only be 00-8f
  1216 00E276:90 0B                                      blt         +  [57987/$E283]
  1217 00E278:8D ED E0                                   sta         LastScancode  [57581/$E0ED]
  1218 00E27B:C9 F0                                      cmp         #$f0  [240/$F0/"d"]             ; is last scan code a break prefix, get next scan code
  1219 00E27D:F0 EF                                      beq         GetChar  [57966/$E26E]
  1220 00E27F:A9 00                                      lda         #0  [0/$00]                     ; return null for invalid scan code range
  1221 00E281:38                                         sec                                         ; set carry for empty buffer
  1222 00E282:60                                         rts
  1223 00E283                            +
  1224 00E283:DA                                         phx
  1225 00E284:AE ED E0                                   ldx         LastScancode  [57581/$E0ED]     ; get last scan code
  1226 00E287:8D ED E0                                   sta         LastScancode  [57581/$E0ED]     ; save new scan code
  1227 00E28A:E0 F0                                      cpx         #$f0  [240/$F0/"d"]
  1228 00E28C:D0 03                                      bne         KeyPressed  [58001/$E291]
  1229 00E28E:4C 19 E3                                   jmp         KeyReleased  [58137/$E319]
  1230 00E291
  1231 00E291                            KeyPressed
  1232 00E291:AA                                         tax
  1233 00E292:A9 00                                      lda         #KEYDOWN  [0/$00]               ; set state as key for DOWN
  1234 00E294:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1235 00E297:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1236 00E29A:89 21                                      bit         #(KEYBOARDSTATES.SHIFT|KEYBOARDSTATES.CAPSLK)  [33/$21/"!"]
  1237 00E29C:F0 05                                      beq         +  [58019/$E2A3]
  1238 00E29E:BD 0B E4                                   lda         SCSET21,x  [58379/$E40B]
  1239 00E2A1:80 03                                      bra         ++  [58022/$E2A6]
  1240 00E2A3                            +
  1241 00E2A3:BD 7B E3                                   lda         SCSET2,x  [58235/$E37B]
  1242 00E2A6                            ++
  1243 00E2A6:AA                                         tax
  1244 00E2A7:29 C0                                      and         #$c0  [192/$C0/"A"]
  1245 00E2A9:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1246 00E2AB:F0 03                                      beq         .SpecialKeyDown  [58032/$E2B0]
  1247 00E2AD:8A                                         txa
  1248 00E2AE:FA                                         plx
  1249 00E2AF:60                                         rts
  1250 00E2B0
  1251 00E2B0                            .SpecialKeyDown
  1252 00E2B0:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1253 00E2B2:F0 04                                      beq         .Shift  [58040/$E2B8]
  1254 00E2B4:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1255 00E2B6:D0 0A                                      bne         ++  [58050/$E2C2]
  1256 00E2B8                            .Shift
  1257 00E2B8:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1258 00E2BB:09 01                                      ora         #KEYBOARDSTATES.SHIFT  [1/$01]
  1259 00E2BD:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1260 00E2C0:80 52                                      bra         +  [58132/$E314]
  1261 00E2C2                            ++
  1262 00E2C2:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1263 00E2C4:F0 04                                      beq         .Alt  [58058/$E2CA]
  1264 00E2C6:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1265 00E2C8:D0 0A                                      bne         ++  [58068/$E2D4]
  1266 00E2CA                            .Alt
  1267 00E2CA:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1268 00E2CD:09 02                                      ora         #KEYBOARDSTATES.ALT  [2/$02]
  1269 00E2CF:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1270 00E2D2:80 40                                      bra         +  [58132/$E314]
  1271 00E2D4                            ++
  1272 00E2D4:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1273 00E2D6:F0 04                                      beq         .Ctrl  [58076/$E2DC]
  1274 00E2D8:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1275 00E2DA:D0 0A                                      bne         ++  [58086/$E2E6]
  1276 00E2DC                            .Ctrl
  1277 00E2DC:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1278 00E2DF:09 04                                      ora         #KEYBOARDSTATES.CTRL  [4/$04]
  1279 00E2E1:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1280 00E2E4:80 2E                                      bra         +  [58132/$E314]
  1281 00E2E6                            ++
  1282 00E2E6:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1283 00E2E8:F0 04                                      beq         .Win  [58094/$E2EE]
  1284 00E2EA:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1285 00E2EC:D0 0A                                      bne         ++  [58104/$E2F8]
  1286 00E2EE                            .Win
  1287 00E2EE:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1288 00E2F1:09 08                                      ora         #KEYBOARDSTATES.WIN  [8/$08]
  1289 00E2F3:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1290 00E2F6:80 1C                                      bra         +  [58132/$E314]
  1291 00E2F8                            ++
  1292 00E2F8:E0 CF                                      cpx         #$cf  [207/$CF/"I"]
  1293 00E2FA:D0 0A                                      bne         ++  [58118/$E306]
  1294 00E2FC                            .NumLk
  1295 00E2FC:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1296 00E2FF:49 10                                      eor         #KEYBOARDSTATES.NUMLK  [16/$10]
  1297 00E301:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1298 00E304:80 0E                                      bra         +  [58132/$E314]
  1299 00E306                            ++
  1300 00E306:E0 CE                                      cpx         #$ce  [206/$CE/"I"]
  1301 00E308:D0 0A                                      bne         ++  [58132/$E314]
  1302 00E30A                            .CapsLk
  1303 00E30A:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1304 00E30D:49 20                                      eor         #KEYBOARDSTATES.CAPSLK  [32/$20/" "]
  1305 00E30F:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1306 00E312:80 00                                      bra         +  [58132/$E314]
  1307 00E314                            ++
  1308 00E314                            +
  1309 00E314:A9 00                                      lda         #0  [0/$00]
  1310 00E316:38                                         sec
  1311 00E317:FA                                         plx
  1312 00E318:60                                         rts
  1313 00E319
  1314 00E319                            KeyReleased
  1315 00E319:AA                                         tax
  1316 00E31A:A9 80                                      lda         #KEYUP  [128/$80/"?"]           ; set state for key as UP
  1317 00E31C:9D 70 E1                                   sta         KeyboardKeyStates,x  [57712/$E170]
  1318 00E31F:BD 7B E3                                   lda         SCSET2,x  [58235/$E37B]
  1319 00E322:AA                                         tax
  1320 00E323:29 C0                                      and         #$c0  [192/$C0/"A"]
  1321 00E325:C9 C0                                      cmp         #$c0  [192/$C0/"A"]
  1322 00E327:F0 05                                      beq         .SpecialKeyDown  [58158/$E32E]
  1323 00E329:A9 00                                      lda         #0  [0/$00]
  1324 00E32B:38                                         sec
  1325 00E32C:FA                                         plx
  1326 00E32D:60                                         rts
  1327 00E32E
  1328 00E32E                            .SpecialKeyDown
  1329 00E32E:E0 C0                                      cpx         #$c0  [192/$C0/"A"]
  1330 00E330:F0 04                                      beq         .Shift  [58166/$E336]
  1331 00E332:E0 C1                                      cpx         #$c1  [193/$C1/"A"]
  1332 00E334:D0 0A                                      bne         ++  [58176/$E340]
  1333 00E336                            .Shift
  1334 00E336:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1335 00E339:29 FE                                      and         #~(KEYBOARDSTATES.SHIFT)  [-2/$FFFFFFFE]
  1336 00E33B:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1337 00E33E:80 36                                      bra         +  [58230/$E376]
  1338 00E340                            ++
  1339 00E340:E0 C2                                      cpx         #$c2  [194/$C2/"A"]
  1340 00E342:F0 04                                      beq         .Alt  [58184/$E348]
  1341 00E344:E0 C3                                      cpx         #$c3  [195/$C3/"A"]
  1342 00E346:D0 0A                                      bne         ++  [58194/$E352]
  1343 00E348                            .Alt
  1344 00E348:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1345 00E34B:29 FD                                      and         #~(KEYBOARDSTATES.ALT)  [-3/$FFFFFFFD]
  1346 00E34D:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1347 00E350:80 24                                      bra         +  [58230/$E376]
  1348 00E352                            ++
  1349 00E352:E0 C4                                      cpx         #$c4  [196/$C4/""]
  1350 00E354:F0 04                                      beq         .Ctrl  [58202/$E35A]
  1351 00E356:E0 C5                                      cpx         #$c5  [197/$C5/""]
  1352 00E358:D0 0A                                      bne         ++  [58212/$E364]
  1353 00E35A                            .Ctrl
  1354 00E35A:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1355 00E35D:29 FB                                      and         #~(KEYBOARDSTATES.CTRL)  [-5/$FFFFFFFB]
  1356 00E35F:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1357 00E362:80 12                                      bra         +  [58230/$E376]
  1358 00E364                            ++
  1359 00E364:E0 C6                                      cpx         #$c6  [198/$C6/""]
  1360 00E366:F0 04                                      beq         .Win  [58220/$E36C]
  1361 00E368:E0 C7                                      cpx         #$c7  [199/$C7/""]
  1362 00E36A:D0 0A                                      bne         ++  [58230/$E376]
  1363 00E36C                            .Win
  1364 00E36C:AD 6F E1                                   lda         KeyboardState  [57711/$E16F]
  1365 00E36F:29 F7                                      and         #~(KEYBOARDSTATES.WIN)  [-9/$FFFFFFF7]
  1366 00E371:8D 6F E1                                   sta         KeyboardState  [57711/$E16F]
  1367 00E374:80 00                                      bra         +  [58230/$E376]
  1368 00E376                            ++
  1369 00E376                            +
  1370 00E376:A9 00                                      lda         #0  [0/$00]
  1371 00E378:38                                         sec
  1372 00E379:FA                                         plx
  1373 00E37A:60                                         rts
  1374 00E37B
  1375 00E37B;                                                                                       ; function keys f1-f24 = ascii $8a-$a1
  1376 00E37B;                                                                                       ;
  1377 00E37B;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1378 00E37B:[=144/$90 bytes]           SCSET2          byte        $00, $92, $00, $8e, $8c, $8a, $8b, $95, $00, $93, $91, $8f, $8d, $09, '`', $00, $00, $c2, $c0, $00, $c4, 'q', '1', $00, $00, $00, 'z', 's', 'a', 'w', '2', $c6, $00, 'c', 'x', 'd', 'e', '4', '3', $c7, $00, $00, 'v', 'f', 't', 'r', '5', $00, $00, 'n', 'b', 'h', 'g', 'y', '6', $00, $00, $00, 'm', 'j', 'u', '7', '8', $00, $00, ',', 'k', 'i', 'o', '0', '9', $00, $00, '.', '/', 'l', ';', 'p', '-', $00, $00, $00, $2c, $00, '[', '=', $00, $00, $ce, $c1, $0d, ']', $00, '\', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $94, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $90, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1379 00E40B
  1380 00E40B;                                                                                       ; shift
  1381 00E40B;                                                                                       ;				 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  1382 00E40B:[=144/$90 bytes]           SCSET21         byte        $00, $9e, $00, $9a, $98, $96, $97, $a1, $00, $9f, $9d, $9b, $99, $09, '~', $00, $00, $c2, $c0, $00, $c4, 'Q', '!', $00, $00, $00, 'Z', 'S', 'A', 'W', '@', $c6, $00, 'C', 'X', 'D', 'E', '$', '#', $c7, $00, $00, 'V', 'F', 'T', 'R', '%', $00, $00, 'N', 'B', 'H', 'G', 'Y', '^', $00, $00, $00, 'M', 'J', 'U', '&', '*', $00, $00, '<', 'K', 'I', 'O', ')', '(', $00, $00, '.', '?', 'L', ':', 'P', '_', $00, $00, $00, $2c, $00, '{', '+', $00, $00, $ce, $c1, $0d, '}', $00, '|', $00, $00, $00, $00, $00, $00, $00, $00, $08, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $1b, $cf, $a0, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $9c, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  [size=144/$90/"?"]
  1383 00E49B                                            endproc
end scope GetChar, restore scope  <<global symbols>>
  1384 00E49B
  1385 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1386 00E49B *dead code*                                proc        WaitForDMAReset
ignoring unused procedure
  1394 00E49B                                            endproc
  1395 00E49B
  1396 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1397 00E49B                                            macro       DMA1DCopy(asource,adest,asize)
  1409 00E49B
  1410 00E49B;                                                                                       ; assume stz MMU_IO_CTRL ;<<<="; assume SetMMUIO"
  1411 00E49B                                            macro       DMA1DFill(adest,asize,afillbyte)
  1422 00E49B
  1423 00E49B;                                                                                       ; 8-bit
  1424 00E49B                                            macro       CopyMemTiny(asource,adest,asize)
  1434 00E49B
  1435 00E49B;                                                                                       ; 16-bit
  1436 00E49B                                            macro       CopyMemSmall(asource,adest,asize)
  1465 00E49B
  1466 00E49B                                            const       C64COLOR = enum( BLACK,WHITE,RED,CYAN, PURPLE,GREEN,BLUE,YELLOW, ORANGE,BROWN,LTRED,DKGREY, MDGREY,LTGREEN,LTBLUE,LTGREY)  [16/$10 items]
  1471 00E49B                                            proc        Init_Graphics
open scope Init_Graphics, from scope  <<global symbols>>
  1472 00E49B;                                                                                       ; clear foreground & background luts with #000000
  1473 00E49B:A2 00                                      ldx         #0  [0/$00]
  1474 00E49D:A9 00                                      lda         #0  [0/$00]
  1475 00E49F                            -
  1476 00E49F:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]
  1477 00E4A2:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]
  1478 00E4A5:E8                                         inx
  1479 00E4A6:E0 40                                      cpx         #16*4  [64/$40/"@"]
  1480 00E4A8:D0 F5                                      bne         -  [58527/$E49F]
  1481 00E4AA
  1482 00E4AA;                                                                                       ; set C64 colodore palette
  1483 00E4AA:A2 00                                      ldx         #0  [0/$00]
  1484 00E4AC                            -
  1485 00E4AC:BD 0A E5                                   lda         COLODORE_PALETTE,x  [58634/$E50A]
  1486 00E4AF:9D 00 D8                                   sta         TEXT_LUT_FG,x  [55296/$D800]    ; set font foreground lut
  1487 00E4B2:9D 40 D8                                   sta         TEXT_LUT_BG,x  [55360/$D840]    ; set font background lut
  1488 00E4B5:E8                                         inx
  1489 00E4B6:E0 40                                      cpx         #sizeof(COLODORE_PALETTE)  [64/$40/"@"]
  1490 00E4B8:D0 F2                                      bne         -  [58540/$E4AC]
  1491 00E4BA
  1492 00E4BA;                                                                                       ; initialize system font
  1533 00E4BA
  1534 00E4BA;                                                                                       ; initialize border
  1535 00E4BA:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; set i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO				; set i/o at $d000, use page 0=i/o registers"
  1536 00E4BC;                                                                                       ;lda #Border_Ctrl_Enable	; enable border
  1537 00E4BC:9C 04 D0                                   stz         BORDER_CTRL_REG  [53252/$D004]  ;sta BORDER_CTRL_REG
  1538 00E4BF:9C 05 D0                                   stz         BORDER_COLOR_B  [53253/$D005]   ;lda #$ff : sta BORDER_COLOR_B		; set border color to blue, #0000ff
  1539 00E4C2:9C 06 D0                                   stz         BORDER_COLOR_G  [53254/$D006]   ;lda #$00 : sta BORDER_COLOR_G
  1540 00E4C5:9C 07 D0                                   stz         BORDER_COLOR_R  [53255/$D007]   ;lda #$00 : sta BORDER_COLOR_R
  1541 00E4C8;                                                                                       ;lda #FNX_BORDER_HEIGHT	; set border to 8 pixels high and 8 pixels wide
  1542 00E4C8:9C 09 D0                                   stz         BORDER_Y_SIZE  [53257/$D009]    ;sta BORDER_Y_SIZE
  1543 00E4CB;                                                                                       ;lda #FNX_BORDER_WIDTH
  1544 00E4CB:9C 08 D0                                   stz         BORDER_X_SIZE  [53256/$D008]    ;sta BORDER_X_SIZE
  1545 00E4CE
  1546 00E4CE;                                                                                       ; initialize backgrounnd
  1547 00E4CE:9C 0D D0                                   stz         BACKGROUND_COLOR_B  [53261/$D00D] ; set background color to black, #000000
  1548 00E4D1:9C 0E D0                                   stz         BACKGROUND_COLOR_G  [53262/$D00E]
  1549 00E4D4:9C 0F D0                                   stz         BACKGROUND_COLOR_R  [53263/$D00F]
  1550 00E4D7
  1551 00E4D7;                                                                                       ; initialize Tiny Vicky registers
  1552 00E4D7:A2 00                                      ldx         #0  [0/$00]
  1553 00E4D9                            -
  1554 00E4D9:9E 00 D1                                   stz         TyVKY_BM0_CTRL_REG,x  [53504/$D100] ; bitmaps
  1555 00E4DC:9E 00 D2                                   stz         TL0_CONTROL_REG,x  [53760/$D200] ; tilemaps/tilesets
  1556 00E4DF:9E 00 D9                                   stz         SP0_Ctrl,x  [55552/$D900]       ; sprites
  1557 00E4E2:9E 00 DA                                   stz         SP0_Ctrl+$0100,x  [55808/$DA00]
  1558 00E4E5:E8                                         inx
  1559 00E4E6:D0 F1                                      bne         -  [58585/$E4D9]
  1560 00E4E8
  1561 00E4E8;                                                                                       ; initialize cursor
  1562 00E4E8:9C 10 D0                                   stz         VKY_TXT_CURSOR_CTRL_REG  [53264/$D010] ; disable cursor
  1563 00E4EB:9C 12 D0                                   stz         VKY_TXT_CURSOR_CHAR_REG  [53266/$D012] ; set cursor character as font tile 0
  1564 00E4EE
  1565 00E4EE:9C 14 D0                                   stz         VKY_TXT_CURSOR_X_REG_L  [53268/$D014] ; set cursor to colum 0
  1566 00E4F1:9C 15 D0                                   stz         VKY_TXT_CURSOR_X_REG_H  [53269/$D015]
  1567 00E4F4:9C 16 D0                                   stz         VKY_TXT_CURSOR_Y_REG_L  [53270/$D016] ; set cursor to row 0
  1568 00E4F7:9C 17 D0                                   stz         VKY_TXT_CURSOR_Y_REG_H  [53271/$D017]
  1569 00E4FA
  1570 00E4FA:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""] ;<<<="lda #DoC64COLOR(LTBLUE,BLACK)"
  1571 00E4FC:85 48                                      sta         CursorColor  [72/$48/"H"]
  1572 00E4FE:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1573 00E501                                            AssignWord  (#VKY_TEXT_MEMORY,CursorPointer)
  1575m00E501:A9 00                                      lda         #<(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [0/$00]
  1576m00E503:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1577m00E505:A9 C0                                      lda         #>(loword(val(copy('#VKY_TEXT_MEMORY',2))))  [192/$C0/"A"]
  1578m00E507:92 4B                                      sta         (CursorPointer)+1  [75/$4B/"K"]
  1586 00E509:60                                         rts
  1587 00E50A                                            option      showallbytes=1
show all listing bytes enabled
  1588 00E50A:00 00 00 00 FF FF FF 00 >> COLODORE_PALETTE hex        00 00 00 00 FF FF FF 00 38 33 81 00 C8 CE 75 00 , 97 3C 8E 00 4D AC 56 00 9B 2C 2E 00 71 F1 ED 00 , 29 50 8E 00 00 38 55 00 71 6C C4 00 4A 4A 4A 00 , 7B 7B 7B 00 9F FF A9 00 EB 6D 70 00 B2 B2 B2 00  [size=64/$40/"@"]
       00E512:38 33 81 00 C8 CE 75 00 >>
       00E51A:97 3C 8E 00 4D AC 56 00 >>
       00E522:9B 2C 2E 00 71 F1 ED 00 >>
       00E52A:29 50 8E 00 00 38 55 00 >>
       00E532:71 6C C4 00 4A 4A 4A 00 >>
       00E53A:7B 7B 7B 00 9F FF A9 00 >>
       00E542:EB 6D 70 00 B2 B2 B2 00   
  1589 00E54A                                            option      showallbytes=0
show all listing bytes disabled
  1590 00E54A                                            endproc
end scope Init_Graphics, restore scope  <<global symbols>>
  1591 00E54A
  1592 00E54A                                            proc        Init_CODEC
open scope Init_CODEC, from scope  <<global symbols>>
  1593 00E54A:A9 00                                      lda         #%0.0.000.0.0.0.0  [0/$00]
  1594 00E54C:A0 1A                                      ldy         #%0001101.0  [26/$1A]
  1595 00E54E:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1596 00E551:A9 03                                      lda         #%0000.0011  [3/$03]
  1597 00E553:A0 2A                                      ldy         #%0010101.0  [42/$2A/"*"]
  1598 00E555:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1599 00E558:A9 01                                      lda         #%0.0.00.0001  [1/$01]
  1600 00E55A:A0 23                                      ldy         #%0010001.1  [35/$23/"#"]
  1601 00E55C:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1602 00E55F:A9 07                                      lda         #%00000.111  [7/$07]
  1603 00E561:A0 2C                                      ldy         #%0010110.0  [44/$2C/","]
  1604 00E563:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1605 00E566:A9 02                                      lda         #%00.00.0.0.10  [2/$02]
  1606 00E568:A0 14                                      ldy         #%0001010.0  [20/$14]
  1607 00E56A:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1608 00E56D:A9 02                                      lda         #%0.0.00.0.0.10  [2/$02]
  1609 00E56F:A0 16                                      ldy         #%0001011.0  [22/$16]
  1610 00E571:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1611 00E574:A9 45                                      lda         #%0.100.0.101  [69/$45/"E"]
  1612 00E576:A0 18                                      ldy         #%0001100.0  [24/$18]
  1613 00E578:20 7C E5                                   jsr         WriteCodecWait  [58748/$E57C]
  1614 00E57B:60                                         rts
  1615 00E57C
  1616 00E57C                            WriteCodecWait
  1617 00E57C:8D 20 D6                                   sta         CODEC_LOW  [54816/$D620]
  1618 00E57F:8C 21 D6                                   sty         CODEC_HI  [54817/$D621]
  1619 00E582:A9 01                                      lda         #1  [1/$01]
  1620 00E584:8D 22 D6                                   sta         CODEC_CTRL  [54818/$D622]
  1621 00E587                            -
  1622 00E587:2C 22 D6                                   bit         CODEC_CTRL  [54818/$D622]
  1623 00E58A:D0 FB                                      bne         -  [58759/$E587]
  1624 00E58C:60                                         rts
  1625 00E58D                                            endproc
end scope Init_CODEC, restore scope  <<global symbols>>
  1626 00E58D
  1627 00E58D                                            proc        Init_Sound
open scope Init_Sound, from scope  <<global symbols>>
  1628 00E58D:20 4A E5                                   jsr         Init_CODEC  [58698/$E54A]
  1629 00E590
  1630 00E590;                                                                                       ; intialize left and right PSG SN76489
  1631 00E590:A9 9F                                      lda         #%1.00.1.1111  [159/$9F/"Y"]    ;mute channel 0
  1632 00E592:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1633 00E595:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1634 00E598:A9 BF                                      lda         #%1.01.1.1111  [191/$BF/""]    ;mute channel 1
  1635 00E59A:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1636 00E59D:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1637 00E5A0:A9 DF                                      lda         #%1.10.1.1111  [223/$DF/""]    ;mute channel 2
  1638 00E5A2:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1639 00E5A5:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1640 00E5A8:A9 FF                                      lda         #%1.11.1.1111  [255/$FF/""]    ;mute channel 3
  1641 00E5AA:8D 00 D6                                   sta         PSG_INT_L_PORT  [54784/$D600]
  1642 00E5AD:8D 10 D6                                   sta         PSG_INT_R_PORT  [54800/$D610]
  1643 00E5B0
  1644 00E5B0;                                                                                       ; initialize left and right SIDs
  1645 00E5B0:A2 00                                      ldx         #0  [0/$00]
  1646 00E5B2                            -
  1647 00E5B2:9E 00 D4                                   stz         SID_L_V1_FREQ_LO,x  [54272/$D400]
  1648 00E5B5:9E 00 D5                                   stz         SID_R_V1_FREQ_LO,x  [54528/$D500]
  1649 00E5B8:E8                                         inx
  1650 00E5B9:E0 20                                      cpx         #$20  [32/$20/" "]
  1651 00E5BB:D0 F5                                      bne         -  [58802/$E5B2]
  1652 00E5BD:60                                         rts
  1653 00E5BE                                            endproc
end scope Init_Sound, restore scope  <<global symbols>>
  1654 00E5BE
  1655 00E5BE                                            proc        F256_RESET
open scope F256_RESET, from scope  <<global symbols>>
  1656 00E5BE:18                                         clc
  1657 00E5BF:78                                         sei                                         ; disable interrupts
  1658 00E5C0:A2 FF                                      ldx         #$ff  [255/$FF/""]
  1659 00E5C2:9A                                         txs                                         ; initialize stack
  1660 00E5C3
  1661 00E5C3;                                                                                       ; initialize mmu
  1662 00E5C3:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1663 00E5C5:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1664 00E5C7:09 80                                      ora         #MMU_EDIT_EN  [128/$80/"?"]
  1665 00E5C9:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; enable mmu edit, edit mmu lut 0, activate mmu lut 0 ;<<<="UnlockMMU	; enable mmu edit, edit mmu lut 0, activate mmu lut 0"
  1666 00E5CB:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; enable i/o at $d000, use page 0=i/o registers ;<<<="SetMMUIO	; enable i/o at $d000, use page 0=i/o registers"
  1667 00E5CD:A9 00                                      lda         #0  [0/$00]
  1668 00E5CF:85 08                                      sta         MMU_MEM_BANK_0  [8/$08]         ; map $000000 to bank 0
  1669 00E5D1:1A                                         inc
  1670 00E5D2:85 09                                      sta         MMU_MEM_BANK_1  [9/$09]         ; map $002000 to bank 1
  1671 00E5D4:1A                                         inc
  1672 00E5D5:85 0A                                      sta         MMU_MEM_BANK_2  [10/$0A]        ; map $004000 to bank 2
  1673 00E5D7:1A                                         inc
  1674 00E5D8:85 0B                                      sta         MMU_MEM_BANK_3  [11/$0B]        ; map $006000 to bank 3
  1675 00E5DA:1A                                         inc
  1676 00E5DB:85 0C                                      sta         MMU_MEM_BANK_4  [12/$0C]        ; map $008000 to bank 4
  1677 00E5DD:1A                                         inc
  1678 00E5DE:85 0D                                      sta         MMU_MEM_BANK_5  [13/$0D]        ; map $00a000 to bank 5
  1679 00E5E0:1A                                         inc
  1680 00E5E1:85 0E                                      sta         MMU_MEM_BANK_6  [14/$0E]        ; map $00c000 to bank 6
  1681 00E5E3:1A                                         inc
  1682 00E5E4:85 0F                                      sta         MMU_MEM_BANK_7  [15/$0F]        ; map $00e000 to bank 7
  1683 00E5E6:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1684 00E5E8:29 7F                                      and         #~(MMU_EDIT_EN)  [-129/$FFFFFF7F]
  1685 00E5EA:85 00                                      sta         MMU_MEM_CTRL  [0/$00]           ; disable mmu edit, use mmu lut 0 ;<<<="LockMMU	; disable mmu edit, use mmu lut 0"
  1686 00E5EC
  1687 00E5EC;                                                                                       ; initialize via registers
  1688 00E5EC;                                                                                       ; reset via registers a/b
  1696 00E5EC:9C 00 DC                                   stz         VIA_ORB_IRB  [56320/$DC00]      ; set via i/o port a to read
  1697 00E5EF:9C 01 DC                                   stz         VIA_ORA_IRA  [56321/$DC01]      ; set via i/o port b to read
  1698 00E5F2
  1699 00E5F2;                                                                                       ; enable random number generator
  1700 00E5F2:A9 01                                      lda         #RNG_ENABLE  [1/$01]
  1701 00E5F4:8D A6 D6                                   sta         RNG_CTRL  [54950/$D6A6]
  1702 00E5F7
  1703 00E5F7;                                                                                       ; initialize interrupts
  1704 00E5F7:A9 FF                                      lda         #$ff  [255/$FF/""]             ; mask off all interrupts
  1705 00E5F9:8D 68 D6                                   sta         INT_EDGE_REG0  [54888/$D668]
  1706 00E5FC:8D 69 D6                                   sta         INT_EDGE_REG1  [54889/$D669]
  1707 00E5FF:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1708 00E602:8D 6D D6                                   sta         INT_MASK_REG1  [54893/$D66D]
  1709 00E605
  1710 00E605:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660] ; clear all existing interrupts
  1711 00E608:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660]
  1712 00E60B:AD 61 D6                                   lda         INT_PENDING_REG1  [54881/$D661]
  1713 00E60E:8D 61 D6                                   sta         INT_PENDING_REG1  [54881/$D661]
  1714 00E611
  1715 00E611:20 8D E5                                   jsr         Init_Sound  [58765/$E58D]
  1716 00E614:20 9B E4                                   jsr         Init_Graphics  [58523/$E49B]
  1717 00E617:20 00 E2                                   jsr         Init_Keyboard  [57856/$E200]
  1718 00E61A:58                                         cli
  1719 00E61B:4C EE EE                                   jmp         Main  [61166/$EEEE]
  1720 00E61E                                            endproc
end scope F256_RESET, restore scope  <<global symbols>>
  1721 00E61E                                            endsection    [58909/$E61D]
  1722 00E61E
  1723 00E61E;                                                                                       ;include 'sid.asm'
  1724 00E61E
  1725 00E61E;                                                                                       ; main game framework stored with libary section
  1726 00E61E                                            section     'F256JRLIB'
current section: F256JRLIB, next free address: $00E61E
  1727 00E61E:[=1/$01 bytes]             SIDSpeed        resb        1
define data constant size=1, fill value 0/$00
  1728 00E61F                                            proc        SOFIRQ                          ;	proc Increase_SOFCounter
open scope SOFIRQ, from scope  <<global symbols>>
  1729 00E61F;                                                                                       ;	Increase_SOF_Counter()
  1730 00E61F;                                                                                       ;	SID_Play_Frame()
  1731 00E61F:A9 06                                      lda         #SIDMODE  [6/$06]
  1732 00E621:C9 06                                      cmp         #6  [6/$06]
  1733 00E623:F0 09                                      beq         +  [58926/$E62E]
  1734 00E625:CE 1E E6                                   dec         SIDSpeed  [58910/$E61E]
  1735 00E628:D0 04                                      bne         +  [58926/$E62E]
  1736 00E62A:8D 1E E6                                   sta         SIDSpeed  [58910/$E61E]
  1737 00E62D:60                                         rts
  1738 00E62E                            +
  1739 00E62E:20 03 10                                   jsr         SIDPLAY  [4099/$1003]
  1740 00E631:60                                         rts
  1741 00E632                                            endproc
end scope SOFIRQ, restore scope  <<global symbols>>
  1742 00E632
  1743 00E632                                            proc        IRQ_Handler
open scope IRQ_Handler, from scope  <<global symbols>>
  1744 00E632:08                                         php
  1745 00E633:48                                         pha
  1746 00E634:DA                                         phx
  1747 00E635:5A                                         phy                                         ;<<<="PushAXY"
  1748 00E636:D8                                         cld
  1749 00E637:A5 00                                      lda         MMU_MEM_CTRL  [0/$00]
  1750 00E639:48                                         pha
  1751 00E63A:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1752 00E63C:48                                         pha                                         ;<<<="PushMMUIO"
  1753 00E63D
  1754 00E63D:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ; use i/o registers ;<<<="SetMMUIO	; use i/o registers"
  1755 00E63F:AD 60 D6                                   lda         INT_PENDING_REG0  [54880/$D660]
  1756 00E642:85 20                                      sta         TempIRQ  [32/$20/" "]
  1757 00E644:89 01                                      bit         #JR0_INT00_SOF  [1/$01]
  1758 00E646:F0 08                                      beq         +  [58960/$E650]
  1759 00E648:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1760 00E64B:20 1F E6                                   jsr         SOFIRQ  [58911/$E61F]           ;Increase_SOFCounter
  1761 00E64E:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1762 00E650                            +
  1763 00E650:89 04                                      bit         #JR0_INT02_KBD  [4/$04]
  1764 00E652:F0 08                                      beq         +  [58972/$E65C]
  1765 00E654:8D 60 D6                                   sta         INT_PENDING_REG0  [54880/$D660] ; clear irq
  1766 00E657:20 32 E2                                   jsr         KeyboardIRQ  [57906/$E232]
  1767 00E65A:A5 20                                      lda         TempIRQ  [32/$20/" "]
  1768 00E65C                            +
  1769 00E65C
  1770 00E65C:68                                         pla
  1771 00E65D:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1772 00E65F:68                                         pla
  1773 00E660:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1774 00E662:7A                                         ply
  1775 00E663:FA                                         plx
  1776 00E664:68                                         pla                                         ;<<<="PullYXA"
  1777 00E665:28                                         plp
  1778 00E666:40                                         rti
  1779 00E667                                            endproc
end scope IRQ_Handler, restore scope  <<global symbols>>
  1780 00E667
  1781 00E667                                            proc        Init_IRQHandler
open scope Init_IRQHandler, from scope  <<global symbols>>
  1782 00E667:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1783 00E669:48                                         pha                                         ;<<<="PushMMUIO"
  1784 00E66A:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1785 00E66C
  1786 00E66C:78                                         sei
  1787 00E66D                                            AssignWord  (#IRQ_Handler,VECTOR_IRQ)
  1789m00E66D:A9 32                                      lda         #<(loword(val(copy('#IRQ_Handler',2))))  [50/$32/"2"]
  1790m00E66F:8D FE FF                                   sta         VECTOR_IRQ  [65534/$FFFE]
  1791m00E672:A9 E6                                      lda         #>(loword(val(copy('#IRQ_Handler',2))))  [230/$E6/""]
  1792m00E674:8D FF FF                                   sta         (VECTOR_IRQ)+1  [65535/$FFFF]
  1800 00E677:A9 FA                                      lda         #~(JR0_INT00_SOF|JR0_INT02_KBD)  [-6/$FFFFFFFA]
  1801 00E679:8D 6C D6                                   sta         INT_MASK_REG0  [54892/$D66C]
  1802 00E67C
  1803 00E67C                                            AssignDWord (#0,SOFCounter)
  1805m00E67C:A9 00                                      lda         #<(loword(val(copy('#0',2))))  [0/$00]
  1806m00E67E:85 4D                                      sta         SOFCounter  [77/$4D/"M"]
  1807m00E680:A9 00                                      lda         #>(loword(val(copy('#0',2))))  [0/$00]
  1808m00E682:92 4D                                      sta         (SOFCounter)+1  [77/$4D/"M"]
  1809m00E684:A9 00                                      lda         #<(hiword(val(copy('#0',2))))  [0/$00]
  1810m00E686:92 4D                                      sta         (SOFCounter)+2  [77/$4D/"M"]
  1811m00E688:A9 00                                      lda         #>(hiword(val(copy('#0',2))))  [0/$00]
  1812m00E68A:92 4D                                      sta         (SOFCounter)+3  [77/$4D/"M"]
  1824 00E68C:58                                         cli
  1825 00E68D
  1826 00E68D:68                                         pla
  1827 00E68E:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1828 00E690:60                                         rts
  1829 00E691                                            endproc
end scope Init_IRQHandler, restore scope  <<global symbols>>
  1830 00E691
  1831 00E691                                            proc        Init_Audio
open scope Init_Audio, from scope  <<global symbols>>
  1832 00E691:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1833 00E693:48                                         pha                                         ;<<<="PushMMUIO"
  1834 00E694:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1835 00E696
  1836 00E696;                                                                                       ; init left and right sids
  1837 00E696;                                                                                       ;	stz SID_Control
  1838 00E696:A2 00                                      ldx         #0  [0/$00]
  1839 00E698                            -
  1840 00E698:9E 00 D4                                   stz         SID_LEFT,x  [54272/$D400]
  1841 00E69B:9E 00 D5                                   stz         SID_RIGHT,x  [54528/$D500]
  1842 00E69E:E8                                         inx
  1843 00E69F:E0 20                                      cpx         #32  [32/$20/" "]
  1844 00E6A1:D0 F5                                      bne         -  [59032/$E698]
  1845 00E6A3
  1846 00E6A3:68                                         pla
  1847 00E6A4:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1848 00E6A6:60                                         rts
  1849 00E6A7                                            endproc
end scope Init_Audio, restore scope  <<global symbols>>
  1850 00E6A7
  1851 00E6A7                                            proc        Init_GameFont
open scope Init_GameFont, from scope  <<global symbols>>
  1852 00E6A7:A5 01                                      lda         MMU_IO_CTRL  [1/$01]
  1853 00E6A9:48                                         pha                                         ;<<<="PushMMUIO"
  1854 00E6AA:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1855 00E6AC
  1856 00E6AC:A9 01                                      lda         #MMU_IO_PAGE_1  [1/$01]
  1857 00E6AE:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUGFX"
  1858 00E6B0                                            CopyMemSmall (FONT_FANTASY,FONT_MEM,sizeof(FONT_FANTASY))
  1859m00E6B0
  1860m00E6B0                                            {
  1861m00E6B0;                                                                                       ;		AssignWord(FONT_FANTASY,.asrcaddr)
  1862m00E6B0:A9 EE                                      lda         #<(FONT_FANTASY)  [238/$EE/""]
  1863m00E6B2:8D C7 E6                                   sta         .srcaddr  [59079/$E6C7]
  1864m00E6B5:A9 E6                                      lda         #>(FONT_FANTASY)  [230/$E6/""]
  1865m00E6B7:8D C8 E6                                   sta         .srcaddr+1  [59080/$E6C8]
  1866m00E6BA;                                                                                       ;		AssignWord(FONT_MEM,.destaddr)
  1867m00E6BA:A9 00                                      lda         #<(FONT_MEM)  [0/$00]
  1868m00E6BC:8D CA E6                                   sta         .destaddr  [59082/$E6CA]
  1869m00E6BF:A9 C0                                      lda         #>(FONT_MEM)  [192/$C0/"A"]
  1870m00E6C1:8D CB E6                                   sta         .destaddr+1  [59083/$E6CB]
  1871m00E6C4:A0 00                                      ldy         #0  [0/$00]
  1872m00E6C6                            -
  1873m00E6C6                            .srcaddr        =           *+1  [59079/$E6C7]
  1874m00E6C6:AD 34 12                                   lda         $1234  [4660/$1234]
  1875m00E6C9                            .destaddr       =           *+1  [59082/$E6CA]
  1876m00E6C9:8D 21 43                                   sta         $4321  [17185/$4321]
  1877m00E6CC:EE C7 E6                                   inc         .srcaddr  [59079/$E6C7]
  1878m00E6CF:D0 03                                      bne         +  [59092/$E6D4]
  1879m00E6D1:EE C8 E6                                   inc         .srcaddr+1  [59080/$E6C8]
  1880m00E6D4                            +
  1881m00E6D4:EE CA E6                                   inc         .destaddr  [59082/$E6CA]
  1882m00E6D7:D0 03                                      bne         +  [59100/$E6DC]
  1883m00E6D9:EE CB E6                                   inc         .destaddr+1  [59083/$E6CB]
  1884m00E6DC                            +
  1885m00E6DC:AD C7 E6                                   lda         .srcaddr  [59079/$E6C7]
  1886m00E6DF:C9 EE                                      cmp         #<(FONT_FANTASY+sizeof(FONT_FANTASY))  [238/$EE/""]
  1887m00E6E1:D0 E3                                      bne         -  [59078/$E6C6]
  1888m00E6E3:AD C8 E6                                   lda         .srcaddr+1  [59080/$E6C8]
  1889m00E6E6:C9 EE                                      cmp         #>(FONT_FANTASY+sizeof(FONT_FANTASY))  [238/$EE/""]
  1890m00E6E8:D0 DC                                      bne         -  [59078/$E6C6]
  1891m00E6EA
  1892m00E6EA                                            }
  1894 00E6EA
  1895 00E6EA:68                                         pla
  1896 00E6EB:85 01                                      sta         MMU_IO_CTRL  [1/$01]            ;<<<="PullMMUIO"
  1897 00E6ED:60                                         rts
  1898 00E6EE:[=2048/$0800 bytes]        FONT_FANTASY    incbin      'assets\gamefont2.bin'
including binary file 'assets\gamefont2.bin', 2048 bytes [=$000800]
2048 bytes successfully read
  1899 00EEEE                                            endproc
end scope Init_GameFont, restore scope  <<global symbols>>
  1900 00EEEE
  1901 00EEEE                                            proc        Main
open scope Main, from scope  <<global symbols>>
  1902 00EEEE:A9 80                                      lda         #MMU_EDIT_EN  [128/$80/"?"]
  1903 00EEF0:85 00                                      sta         MMU_MEM_CTRL  [0/$00]
  1904 00EEF2:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  1905 00EEF4:64 00                                      stz         MMU_MEM_CTRL  [0/$00]
  1906 00EEF6
  1907 00EEF6:A9 3F                                      lda         #(Mstr_Ctrl_Text_Mode_En|Mstr_Ctrl_Text_Overlay|Mstr_Ctrl_Graph_Mode_En|Mstr_Ctrl_Bitmap_En|Mstr_Ctrl_TileMap_En|Mstr_Ctrl_Sprite_En)  [63/$3F/"?"]
  1908 00EEF8:8D 00 D0                                   sta         MASTER_CTRL_REG_L  [53248/$D000]
  1909 00EEFB:A9 06                                      lda         #(Mstr_Ctrl_Text_XDouble|Mstr_Ctrl_Text_YDouble)  [6/$06]
  1910 00EEFD:8D 01 D0                                   sta         MASTER_CTRL_REG_H  [53249/$D001]
  1911 00EF00:20 A7 E6                                   jsr         Init_GameFont  [59047/$E6A7]
  1912 00EF03:20 91 E6                                   jsr         Init_Audio  [59025/$E691]
  1913 00EF06:20 67 E6                                   jsr         Init_IRQHandler  [58983/$E667]
  1914 00EF09
  1915 00EF09                                            SetCursorColor (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK) ;<<<="SetCursorColor(#DoC64COLOR(LTBLUE,BLACK))"
  1916m00EF09                                            ConvertParamToA (#(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK)
  1928m00EF09:A9 E0                                      lda         #(C64COLOR.LTBLUE<<4) | C64COLOR.BLACK  [224/$E0/""]
  1932m00EF0B:85 48                                      sta         CursorColor  [72/$48/"H"]
  1934 00EF0D:20 40 E0                                   jsr         ClearScreen  [57408/$E040]
  1935 00EF10
  1936 00EF10;                                                                                       ; map in title screen code as $06000
  1937 00EF10;                                                                                       ;	lda MMU_MEM_CTRL : ora #MMU_EDIT_EN : sta MMU_MEM_CTRL ;<<<=";	UnlockMMU"
  1938 00EF10;                                                                                       ;	lda #(TitleScreenCode/$2000)
  1939 00EF10;                                                                                       ;	sta MMU_MEM_BANK_3
  1940 00EF10;                                                                                       ;	lda MMU_MEM_CTRL : and #~(MMU_EDIT_EN) : sta MMU_MEM_CTRL ;<<<=";	LockMMU"
  1941 00EF10;                                                                                       ;	jsr ShowTitle
  1942 00EF10                                            PrintString (TX_GAMETITLE,#0,#0,#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)) ;<<<="PrintString(TX_GAMETITLE,#0,#0,#DoC64COLOR(YELLOW,BLACK)))"
  1949m00EF10                                            SetCursorPointer (#0,#0)
  1950m00EF10                                            ConvertParamToA (#0)
  1962m00EF10:A9 00                                      lda         #0  [0/$00]
  1966m00EF12:85 49                                      sta         CursorColumn  [73/$49/"I"]
  1967m00EF14                                            ConvertParamToA (#0)
  1979m00EF14:A9 00                                      lda         #0  [0/$00]
  1983m00EF16:85 4A                                      sta         CursorLine  [74/$4A/"J"]
  1984m00EF18
  1986m00EF18:A9 00                                      lda         #<(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [0/$00]
  1987m00EF1A:85 4B                                      sta         CursorPointer  [75/$4B/"K"]
  1988m00EF1C:A9 C0                                      lda         #>(VKY_TEXT_MEMORY+val(copy('#0',2))*40)  [192/$C0/"A"]
  1989m00EF1E:85 4C                                      sta         CursorPointer+1  [76/$4C/"L"]
  1996m00EF20                                            SetCursorColor (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  1997m00EF20                                            ConvertParamToA (#(C64COLOR.YELLOW<<4) | C64COLOR.BLACK))
  2009m00EF20:A9 70                                      lda         #(C64COLOR.YELLOW<<4) | C64COLOR.BLACK)  [112/$70/"p"]
  2013m00EF22:85 48                                      sta         CursorColor  [72/$48/"H"]
  2025m00EF24:A9 68                                      lda         #<TX_GAMETITLE  [104/$68/"h"]
  2026m00EF26:85 30                                      sta         TempSrc  [48/$30/"0"]
  2027m00EF28:A9 EF                                      lda         #>TX_GAMETITLE  [239/$EF/""]
  2028m00EF2A:85 31                                      sta         TempSrc+1  [49/$31/"1"]
  2030m00EF2C:20 8C E0                                   jsr         PrintAnsiString  [57484/$E08C]
  2037 00EF2F;                                                                                       ;	inc SID_Control
  2038 00EF2F;                                                                                       ;	SID_Initialize(0,0)
  2039 00EF2F;                                                                                       ;
  2040 00EF2F;                                                                                       ;// choose setting
  2041 00EF2F;                                                                                       ;poke 54299,2 (overdrive)
  2042 00EF2F;                                                                                       ;poke 54299,3 (filters)
  2043 00EF2F;                                                                                       ;poke 54299,4 (smoothing)
  2044 00EF2F;                                                                                       ;
  2045 00EF2F;                                                                                       ;// choose value
  2046 00EF2F;                                                                                       ;// overdrive: 0 (medium) 1 (high) 2 (low)
  2047 00EF2F;                                                                                       ;// filters:   0 (blend)  1 (8580) 2 (6581)
  2048 00EF2F;                                                                                       ;// smoothing: 0 (neat)   1 (soft) 2 (rough)
  2049 00EF2F;                                                                                       ;poke 54300,0/1/2 (setting)
  2050 00EF2F;                                                                                       ;
  2051 00EF2F;                                                                                       ;// apply setting
  2052 00EF2F;                                                                                       ;poke 54301,181:poke 54302,29
  2053 00EF2F:A9 02                                      lda         #2  [2/$02]
  2054 00EF31:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2055 00EF34:A9 01                                      lda         #1  [1/$01]
  2056 00EF36:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2057 00EF39:A9 B5                                      lda         #181  [181/$B5/""]
  2058 00EF3B:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2059 00EF3E:A9 1D                                      lda         #29  [29/$1D]
  2060 00EF40:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2061 00EF43
  2062 00EF43:A9 03                                      lda         #3  [3/$03]
  2063 00EF45:8D 1B D4                                   sta         54299  [54299/$D41B]            ; $d41b
  2064 00EF48:A9 01                                      lda         #1  [1/$01]
  2065 00EF4A:8D 1C D4                                   sta         54300  [54300/$D41C]            ; $d41c
  2066 00EF4D:A9 B5                                      lda         #181  [181/$B5/""]
  2067 00EF4F:8D 1D D4                                   sta         54301  [54301/$D41D]            ; $d41d
  2068 00EF52:A9 1D                                      lda         #29  [29/$1D]
  2069 00EF54:8D 1E D4                                   sta         54302  [54302/$D41E]            ; $d41e
  2070 00EF57
  2071 00EF57:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2072 00EF59:A9 01                                      lda         #1  [1/$01]
  2073 00EF5B:8D 1E E6                                   sta         SIDSpeed  [58910/$E61E]
  2074 00EF5E:A9 00                                      lda         #0  [0/$00]
  2075 00EF60:20 F6 0F                                   jsr         SIDINIT  [4086/$0FF6]
  2076 00EF63;                                                                                       ;	SID_Initialize(0,0)
  2077 00EF63;                                                                                       ;	SID_SetVolume(-1)
  2078 00EF63;                                                                                       ;	SID_Play()
  2079 00EF63:64 01                                      stz         MMU_IO_CTRL  [1/$01]            ;<<<="SetMMUIO"
  2080 00EF65                            -
  2081 00EF65:4C 65 EF                                   jmp         -  [61285/$EF65]
  2082 00EF68
  2083 00EF68:[=14/$0E bytes]            TX_GAMETITLE    bytez       SIDFILE  [size=14/$0E]
  2084 00EF76                                            endproc
end scope Main, restore scope  <<global symbols>>
  2085 00EF76                                            endsection    [61301/$EF75]
  2086 00EF76
  2087 000800                                            section     add('MAIN',$0800,$bfff,size=-1,save=1)
updated section 'MAIN' $000800-00BFFF [-1]
current section: MAIN, next free address: $000800
  2088 000800
  2089 000800:[=1912/$0778 bytes]                        pad         SIDSTART-$7e
define data constant size=1912, fill value 0/$00
  2089 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a000,SIDPLAY=$a003,SIDMODE=5,SIDFILE='toccata_v3.a000'
  2090 000F78;                                                                                       ;const SIDSTART=$a000,SIDINIT=$a048,SIDPLAY=$a021,SIDMODE=5,SIDFILE='viola_duet.a000'
  2091 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Super_Mario_Bros_2SID'
  2092 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='mrdo'
  2093 000F78;                                                                                       ;const SIDSTART=$4000,SIDINIT=$4000,SIDPLAY=$4003,SIDMODE=5,SIDFILE='Airwolf_2SID'
  2094 000F78;                                                                                       ;const SIDSTART=$1000,SIDINIT=$1000,SIDPLAY=$1003,SIDMODE=5,SIDFILE='Space_Oddity_2SID'
  2095 000F78;                                                                                       ;const SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Girl_from_Tomorrow_2SID'
  2096 000F78                                            const       SIDSTART=$0FF6,SIDINIT=$0FF6,SIDPLAY=$1003,SIDMODE=6,SIDFILE='Lakeside_2SID'  [4086/$0FF6,4086/$0FF6,4099/$1003,6/$06,"Lakeside_2SID"]
  2097 000F78:[=4139/$102B bytes]                        incbin      'music\'+SIDFILE+'.sid'
including binary file 'music\Lakeside_2SID.sid', 4139 bytes [=$00102B]
4139 bytes successfully read
  2098 001FA3
  2099 001FA3                                            endsection    [8098/$1FA2]
  2100 001FA3
  2101 001FA3;                                                                                       ;savepgz
  2102 001FA3                                            savebin     'wktitle.0800.bin',$0800 to $0ffff
saving binary file 'wktitle.0800.bin', $000800-00FFFF, 63488 bytes [=$00F800]
  2103 001FA3
pass 4 complete - 23:31:29 93 ms *** phase/checksum error retry #2 *** resolved ***
 address range=$000030-00FFFF, checksum=000BAD7C


HALT_NoError

!!! THE END !!!
--- TIMER #1 - START TO END: 875ms
